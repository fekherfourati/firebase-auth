!function(){function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){return r(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,i,o=[],a=!0,u=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(s){u=!0,i=s}finally{try{a||null==n.return||n.return()}finally{if(u)throw i}}return o}(e,t)||c(e,t)||n()}function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e){if(Array.isArray(e))return e}function i(){return(i="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=o(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}}).apply(this,arguments)}function o(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}function a(e){return function(e){if(Array.isArray(e))return l(e)}(e)||u(e)||c(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=c(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function c(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function v(e){var t=_();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return m(e)}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){var t="function"==typeof Map?new Map:void 0;return(y=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return k(e,arguments,b(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),w(r,e)})(e)}function k(e,t,n){return(k=_()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&w(i,n.prototype),i}).apply(null,arguments)}function _(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(self.webpackChunkfirebase_auth=self.webpackChunkfirebase_auth||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},7716:function(e,n,r){"use strict";r.d(n,{deG:function(){return kn},tb:function(){return al},AFp:function(){return tl},ip1:function(){return Xc},CZH:function(){return el},hGG:function(){return $l},z2F:function(){return Bl},sBO:function(){return ec},Sil:function(){return ml},_Vd:function(){return Is},EJc:function(){return cl},SBq:function(){return Ss},qLn:function(){return Vr},vpe:function(){return Pc},gxx:function(){return Vo},tBr:function(){return Zn},XFs:function(){return z},OlP:function(){return yn},zs3:function(){return ea},ZZ4:function(){return Ws},aQg:function(){return Ys},soG:function(){return sl},YKP:function(){return cc},v3s:function(){return Zl},h0i:function(){return sc},PXZ:function(){return Fl},R0b:function(){return _l},FiY:function(){return Hn},Lbi:function(){return ol},g9A:function(){return il},Qsj:function(){return Ns},FYo:function(){return As},JOm:function(){return Hr},Tiy:function(){return Ps},q3G:function(){return Or},tp0:function(){return Gn},EAV:function(){return Wl},Rgc:function(){return oc},dDg:function(){return El},DyG:function(){return _n},q4F:function(){return Ls},GfV:function(){return Ds},s_b:function(){return hc},ifc:function(){return K},eFA:function(){return Ul},G48:function(){return Ll},Gpc:function(){return T},X6Q:function(){return Dl},_c5:function(){return Ql},VLi:function(){return Rl},c2e:function(){return ul},zSh:function(){return qo},wAp:function(){return mu},vHH:function(){return S},EiD:function(){return Ar},mCW:function(){return dr},qzn:function(){return tr},JVY:function(){return rr},pB0:function(){return ur},eBb:function(){return or},L6k:function(){return ir},LAX:function(){return ar},cg1:function(){return pu},Tjo:function(){return Yl},kL8:function(){return vu},yhl:function(){return nr},dqk:function(){return $},sIi:function(){return la},CqO:function(){return Aa},QGY:function(){return Sa},F4k:function(){return Ra},RDi:function(){return Fe},AaK:function(){return w},z3N:function(){return er},qOj:function(){return na},TTD:function(){return Re},_Bn:function(){return ws},xp6:function(){return ji},uIk:function(){return va},Tol:function(){return Ka},DjV:function(){return cu},ekj:function(){return Wa},Suo:function(){return Wc},Xpm:function(){return ce},lG2:function(){return ge},Yz7:function(){return P},cJS:function(){return D},oAB:function(){return de},Yjl:function(){return me},Y36:function(){return ka},_UZ:function(){return Ia},BQk:function(){return Ca},ynx:function(){return Ta},qZA:function(){return xa},TgZ:function(){return ba},EpF:function(){return Ea},n5z:function(){return dn},Ikx:function(){return lu},SDv:function(){return hs},QtT:function(){return ds},pQV:function(){return fs},LFG:function(){return Un},$8M:function(){return vn},NdJ:function(){return Na},CRH:function(){return Kc},O4$:function(){return Nt},oxw:function(){return Da},ALo:function(){return Ac},lcZ:function(){return Nc},Hsn:function(){return Fa},F$t:function(){return Ma},Q6J:function(){return _a},s9C:function(){return Ua},MGl:function(){return Va},VKq:function(){return Tc},WLB:function(){return Cc},kEZ:function(){return Ec},iGM:function(){return Hc},MAs:function(){return ya},CHM:function(){return nt},LSH:function(){return Pr},kYT:function(){return pe},Udp:function(){return Ga},YNc:function(){return ma},W1O:function(){return $c},_uU:function(){return au},Oqu:function(){return uu},hij:function(){return su},Gf:function(){return Gc}});var o=r(9765),u=r(5319),c=r(7574),l=r(6682),h=r(8819);function g(e){for(var t in e)if(e[t]===g)return t;throw Error("Could not find renamed property on target object.")}function _(e,t){for(var n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function w(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(w).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return"".concat(e.overriddenName);if(e.name)return"".concat(e.name);var t=e.toString();if(null==t)return""+t;var n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function x(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}var I=g({__forward_ref__:g});function T(e){return e.__forward_ref__=T,e.toString=function(){return w(this())},e}function C(e){return E(e)?e():e}function E(e){return"function"==typeof e&&e.hasOwnProperty(I)&&e.__forward_ref__===T}var S=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,function(e,t){return"".concat(e?"NG0".concat(e,": "):"").concat(t)}(e,r))).code=e,i}return n}(y(Error));function R(e){return"string"==typeof e?e:null==e?"":String(e)}function A(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():R(e)}function N(e,t){var n=t?" in ".concat(t):"";throw new S("201","No provider for ".concat(A(e)," found").concat(n))}function O(e,t,n,r){throw new Error("ASSERTION ERROR: ".concat(e)+(null==r?"":" [Expected=> ".concat(n," ").concat(r," ").concat(t," <=Actual]")))}function P(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function D(e){return{providers:e.providers||[],imports:e.imports||[]}}function L(e){return M(e,V)||M(e,q)}function M(e,t){return e.hasOwnProperty(t)?e[t]:null}function F(e){return e&&(e.hasOwnProperty(j)||e.hasOwnProperty(B))?e[j]:null}var U,V=g({"\u0275prov":g}),j=g({"\u0275inj":g}),q=g({ngInjectableDef:g}),B=g({ngInjectorDef:g}),z=((z=z||{})[z.Default=0]="Default",z[z.Host=1]="Host",z[z.Self=2]="Self",z[z.SkipSelf=4]="SkipSelf",z[z.Optional=8]="Optional",z);function Z(e){var t=U;return U=e,t}function H(e,t,n){var r=L(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&z.Optional?null:void 0!==t?t:void N(w(e),"Injector")}function G(e){return{toString:e}.toString()}var W=((W=W||{})[W.OnPush=0]="OnPush",W[W.Default=1]="Default",W),K=((K=K||{})[K.Emulated=0]="Emulated",K[K.None=2]="None",K[K.ShadowDom=3]="ShadowDom",K),Y="undefined"!=typeof globalThis&&globalThis,Q="undefined"!=typeof window&&window,J="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,$=Y||"undefined"!=typeof global&&global||Q||J,X={},ee=[],te=g({"\u0275cmp":g}),ne=g({"\u0275dir":g}),re=g({"\u0275pipe":g}),ie=g({"\u0275mod":g}),oe=g({"\u0275loc":g}),ae=g({"\u0275fac":g}),ue=g({__NG_ELEMENT_ID__:g}),se=0;function ce(e){return G(function(){var t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===W.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||ee,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||K.Emulated,id:"c",styles:e.styles||ee,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,o=e.pipes;return n.id+=se++,n.inputs=ve(e.inputs,t),n.outputs=ve(e.outputs),i&&i.forEach(function(e){return e(n)}),n.directiveDefs=r?function(){return("function"==typeof r?r():r).map(le)}:null,n.pipeDefs=o?function(){return("function"==typeof o?o():o).map(he)}:null,n})}function le(e){return ye(e)||function(e){return e[ne]||null}(e)}function he(e){return function(e){return e[re]||null}(e)}var fe={};function de(e){return G(function(){var t={type:e.type,bootstrap:e.bootstrap||ee,declarations:e.declarations||ee,imports:e.imports||ee,exports:e.exports||ee,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(fe[e.id]=e.type),t})}function pe(e,t){return G(function(){var n=ke(e,!0);n.declarations=t.declarations||ee,n.imports=t.imports||ee,n.exports=t.exports||ee})}function ve(e,t){if(null==e)return X;var n={};for(var r in e)if(e.hasOwnProperty(r)){var i=e[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,t&&(t[i]=o)}return n}var ge=ce;function me(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function ye(e){return e[te]||null}function ke(e,t){var n=e[ie]||null;if(!n&&!0===t)throw new Error("Type ".concat(w(e)," does not have '\u0275mod' property."));return n}function _e(e){return Array.isArray(e)&&"object"==typeof e[1]}function we(e){return Array.isArray(e)&&!0===e[1]}function be(e){return 0!=(8&e.flags)}function xe(e){return 2==(2&e.flags)}function Ie(e){return 1==(1&e.flags)}function Te(e){return null!==e.template}function Ce(e){return 0!=(512&e[2])}function Ee(e,t){return e.hasOwnProperty(ae)?e[ae]:null}var Se=function(){function e(t,n,r){d(this,e),this.previousValue=t,this.currentValue=n,this.firstChange=r}return f(e,[{key:"isFirstChange",value:function(){return this.firstChange}}]),e}();function Re(){return Ae}function Ae(e){return e.type.prototype.ngOnChanges&&(e.setInput=Oe),Ne}function Ne(){var e=De(this),t=null==e?void 0:e.current;if(t){var n=e.previous;if(n===X)e.previous=t;else for(var r in t)n[r]=t[r];e.current=null,this.ngOnChanges(t)}}function Oe(e,t,n,r){var i=De(e)||function(e,t){return e[Pe]=t}(e,{previous:X,current:null}),o=i.current||(i.current={}),a=i.previous,u=this.declaredInputs[n],s=a[u];o[u]=new Se(s&&s.currentValue,t,a===X),e[r]=t}Re.ngInherit=!0;var Pe="__ngSimpleChanges__";function De(e){return e[Pe]||null}var Le,Me="http://www.w3.org/2000/svg";function Fe(e){Le=e}function Ue(){return void 0!==Le?Le:"undefined"!=typeof document?document:void 0}function Ve(e){return!!e.listen}var je={createRenderer:function(e,t){return Ue()}};function qe(e){for(;Array.isArray(e);)e=e[0];return e}function Be(e,t){return qe(t[e])}function ze(e,t){return qe(t[e.index])}function Ze(e,t){return e.data[t]}function He(e,t){return e[t]}function Ge(e,t){var n=t[e];return _e(n)?n:n[0]}function We(e){return 4==(4&e[2])}function Ke(e){return 128==(128&e[2])}function Ye(e,t){return null==t?null:e[t]}function Qe(e){e[18]=0}function Je(e,t){e[5]+=t;for(var n=e,r=e[3];null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}var $e={lFrame:It(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Xe(){return $e.bindingsEnabled}function et(){return $e.lFrame.lView}function tt(){return $e.lFrame.tView}function nt(e){return $e.lFrame.contextLView=e,e[8]}function rt(){for(var e=it();null!==e&&64===e.type;)e=e.parent;return e}function it(){return $e.lFrame.currentTNode}function ot(){var e=$e.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function at(e,t){var n=$e.lFrame;n.currentTNode=e,n.isParent=t}function ut(){return $e.lFrame.isParent}function st(){$e.lFrame.isParent=!1}function ct(){return $e.isInCheckNoChangesMode}function lt(e){$e.isInCheckNoChangesMode=e}function ht(){var e=$e.lFrame,t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function ft(){return $e.lFrame.bindingIndex}function dt(){return $e.lFrame.bindingIndex++}function pt(e){var t=$e.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function vt(e){$e.lFrame.inI18n=e}function gt(e,t){var n=$e.lFrame;n.bindingIndex=n.bindingRootIndex=e,mt(t)}function mt(e){$e.lFrame.currentDirectiveIndex=e}function yt(){return $e.lFrame.currentQueryIndex}function kt(e){$e.lFrame.currentQueryIndex=e}function _t(e){var t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function wt(e,t,n){if(n&z.SkipSelf){for(var r=t,i=e;!(null!==(r=r.parent)||n&z.Host||(r=_t(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}var o=$e.lFrame=xt();return o.currentTNode=t,o.lView=e,!0}function bt(e){var t=xt(),n=e[1];$e.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function xt(){var e=$e.lFrame,t=null===e?null:e.child;return null===t?It(e):t}function It(e){var t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function Tt(){var e=$e.lFrame;return $e.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}var Ct=Tt;function Et(){var e=Tt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function St(){return $e.lFrame.selectedIndex}function Rt(e){$e.lFrame.selectedIndex=e}function At(){var e=$e.lFrame;return Ze(e.tView,e.selectedIndex)}function Nt(){$e.lFrame.currentNamespace=Me}function Ot(e,t){for(var n=t.directiveStart,r=t.directiveEnd;n<r;n++){var i=e.data[n].type.prototype,o=i.ngAfterContentInit,a=i.ngAfterContentChecked,u=i.ngAfterViewInit,s=i.ngAfterViewChecked,c=i.ngOnDestroy;o&&(e.contentHooks||(e.contentHooks=[])).push(-n,o),a&&((e.contentHooks||(e.contentHooks=[])).push(n,a),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,a)),u&&(e.viewHooks||(e.viewHooks=[])).push(-n,u),s&&((e.viewHooks||(e.viewHooks=[])).push(n,s),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,s)),null!=c&&(e.destroyHooks||(e.destroyHooks=[])).push(n,c)}}function Pt(e,t,n){Mt(e,t,3,n)}function Dt(e,t,n,r){(3&e[2])===n&&Mt(e,t,n,r)}function Lt(e,t){var n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Mt(e,t,n,r){for(var i=null!=r?r:-1,o=t.length-1,a=0,u=void 0!==r?65535&e[18]:0;u<o;u++)if("number"==typeof t[u+1]){if(a=t[u],null!=r&&a>=r)break}else t[u]<0&&(e[18]+=65536),(a<i||-1==i)&&(Ft(e,n,t,u),e[18]=(4294901760&e[18])+u+2),u++}function Ft(e,t,n,r){var i=n[r]<0,o=n[r+1],a=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{o.call(a)}finally{}}}else try{o.call(a)}finally{}}var Ut=function e(t,n,r){d(this,e),this.factory=t,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r};function Vt(e,t,n){for(var r=Ve(e),i=0;i<n.length;){var o=n[i];if("number"==typeof o){if(0!==o)break;i++;var a=n[i++],u=n[i++],s=n[i++];r?e.setAttribute(t,u,s,a):t.setAttributeNS(a,u,s)}else{var c=o,l=n[++i];qt(c)?r&&e.setProperty(t,c,l):r?e.setAttribute(t,c,l):t.setAttribute(c,l),i++}}return i}function jt(e){return 3===e||4===e||6===e}function qt(e){return 64===e.charCodeAt(0)}function Bt(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else for(var n=-1,r=0;r<t.length;r++){var i=t[r];"number"==typeof i?n=i:0===n||zt(e,n,i,null,-1===n||2===n?t[++r]:null)}return e}function zt(e,t,n,r,i){var o=0,a=e.length;if(-1===t)a=-1;else for(;o<e.length;){var u=e[o++];if("number"==typeof u){if(u===t){a=-1;break}if(u>t){a=o-1;break}}}for(;o<e.length;){var s=e[o];if("number"==typeof s)break;if(s===n){if(null===r)return void(null!==i&&(e[o+1]=i));if(r===e[o+1])return void(e[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==a&&(e.splice(a,0,t),o=a+1),e.splice(o++,0,n),null!==r&&e.splice(o++,0,r),null!==i&&e.splice(o++,0,i)}function Zt(e){return-1!==e}function Ht(e){return 32767&e}function Gt(e,t){for(var n=function(e){return e>>16}(e),r=t;n>0;)r=r[15],n--;return r}var Wt=!0;function Kt(e){var t=Wt;return Wt=e,t}var Yt=0;function Qt(e,t){var n=$t(e,t);if(-1!==n)return n;var r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Jt(r.data,e),Jt(t,null),Jt(r.blueprint,null));var i=Xt(e,t),o=e.injectorIndex;if(Zt(i))for(var a=Ht(i),u=Gt(i,t),s=u[1].data,c=0;c<8;c++)t[o+c]=u[a+c]|s[a+c];return t[o+8]=i,o}function Jt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function $t(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Xt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;for(var n=0,r=null,i=t;null!==i;){var o=i[1],a=o.type;if(null===(r=2===a?o.declTNode:1===a?i[6]:null))return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function en(e,t,n){!function(e,t,n){var r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(ue)&&(r=n[ue]),null==r&&(r=n[ue]=Yt++);var i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function tn(e,t,n){if(n&z.Optional)return e;N(t,"NodeInjector")}function nn(e,t,n,r){if(n&z.Optional&&void 0===r&&(r=null),0==(n&(z.Self|z.Host))){var i=e[9],o=Z(void 0);try{return i?i.get(t,r,n&z.Optional):H(t,r,n&z.Optional)}finally{Z(o)}}return tn(r,t,n)}function rn(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z.Default,i=arguments.length>4?arguments[4]:void 0;if(null!==e){var o=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;var t=e.hasOwnProperty(ue)?e[ue]:void 0;return"number"==typeof t?t>=0?255&t:an:t}(n);if("function"==typeof o){if(!wt(t,e,r))return r&z.Host?tn(i,n,r):nn(t,n,r,i);try{var a=o(r);if(null!=a||r&z.Optional)return a;N(n)}finally{Ct()}}else if("number"==typeof o){var u=null,s=$t(e,t),c=-1,l=r&z.Host?t[16][6]:null;for((-1===s||r&z.SkipSelf)&&(-1!==(c=-1===s?Xt(e,t):t[s+8])&&hn(r,!1)?(u=t[1],s=Ht(c),t=Gt(c,t)):s=-1);-1!==s;){var h=t[1];if(ln(o,s,h.data)){var f=un(s,t,n,u,r,l);if(f!==on)return f}-1!==(c=t[s+8])&&hn(r,t[1].data[s+8]===l)&&ln(o,s,t)?(u=h,s=Ht(c),t=Gt(c,t)):s=-1}}}return nn(t,n,r,i)}var on={};function an(){return new fn(rt(),et())}function un(e,t,n,r,i,o){var a=t[1],u=a.data[e+8],s=sn(u,a,n,null==r?xe(u)&&Wt:r!=a&&0!=(3&u.type),i&z.Host&&o===u);return null!==s?cn(t,a,s,u):on}function sn(e,t,n,r,i){for(var o=e.providerIndexes,a=t.data,u=1048575&o,s=e.directiveStart,c=o>>20,l=i?u+c:e.directiveEnd,h=r?u:u+c;h<l;h++){var f=a[h];if(h<s&&n===f||h>=s&&f.type===n)return h}if(i){var d=a[s];if(d&&Te(d)&&d.type===n)return s}return null}function cn(e,t,n,r){var i=e[n],o=t.data;if(function(e){return e instanceof Ut}(i)){var a=i;a.resolving&&function(e,t){throw new S("200","Circular dependency in DI detected for ".concat(e))}(A(o[n]));var u=Kt(a.canSeeViewProviders);a.resolving=!0;var s=a.injectImpl?Z(a.injectImpl):null;wt(e,r,z.Default);try{i=e[n]=a.factory(void 0,o,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){var r=t.type.prototype,i=r.ngOnChanges,o=r.ngOnInit,a=r.ngDoCheck;if(i){var u=Ae(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,u),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,u)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,o),a&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,a),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,a))}(n,o[n],t)}finally{null!==s&&Z(s),Kt(u),a.resolving=!1,Ct()}}return i}function ln(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function hn(e,t){return!(e&z.Self||e&z.Host&&t)}var fn=function(){function e(t,n){d(this,e),this._tNode=t,this._lView=n}return f(e,[{key:"get",value:function(e,t,n){return rn(this._tNode,this._lView,e,n,t)}}]),e}();function dn(e){return G(function(){for(var t=e.prototype.constructor,n=t[ae]||pn(t),r=Object.prototype,i=Object.getPrototypeOf(e.prototype).constructor;i&&i!==r;){var o=i[ae]||pn(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return function(e){return new e}})}function pn(e){return E(e)?function(){var t=pn(C(e));return t&&t()}:Ee(e)}function vn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;var n=e.attrs;if(n)for(var r=n.length,i=0;i<r;){var o=n[i];if(jt(o))break;if(0===o)i+=2;else if("number"==typeof o)for(i++;i<r&&"string"==typeof n[i];)i++;else{if(o===t)return n[i+1];i+=2}}return null}(rt(),e)}var gn="__parameters__";function mn(e,t,n){return G(function(){var r=function(e){return function(){if(e){var t=e.apply(void 0,arguments);for(var n in t)this[n]=t[n]}}}(t);function i(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(this instanceof i)return r.apply(this,t),this;var o=k(i,t);return a.annotation=o,a;function a(e,t,n){for(var r=e.hasOwnProperty(gn)?e[gn]:Object.defineProperty(e,gn,{value:[]})[gn];r.length<=n;)r.push(null);return(r[n]=r[n]||[]).push(o),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}var yn=function(){function e(t,n){d(this,e),this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=P({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}return f(e,[{key:"toString",value:function(){return"InjectionToken ".concat(this._desc)}}]),e}(),kn=new yn("AnalyzeForEntryComponents"),_n=Function;function wn(e,t){void 0===t&&(t=e);for(var n=0;n<e.length;n++){var r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),wn(r,t)):t!==e&&t.push(r)}return t}function bn(e,t){e.forEach(function(e){return Array.isArray(e)?bn(e,t):t(e)})}function xn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function In(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function Tn(e,t){for(var n=[],r=0;r<e;r++)n.push(t);return n}function Cn(e,t,n){var r=Sn(e,t);return r>=0?e[1|r]=n:function(e,t,n,r){var i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r=~r,t,n),r}function En(e,t){var n=Sn(e,t);if(n>=0)return e[1|n]}function Sn(e,t){return function(e,t,n){for(var r=0,i=e.length>>1;i!==r;){var o=r+(i-r>>1),a=e[o<<1];if(t===a)return o<<1;a>t?i=o:r=o+1}return~(i<<1)}(e,t)}var Rn,An={},Nn="__NG_DI_FLAG__",On="ngTempTokenPath",Pn=/\n/gm,Dn="__source",Ln=g({provide:String,useValue:g});function Mn(e){var t=Rn;return Rn=e,t}function Fn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default;if(void 0===Rn)throw new Error("inject() must be called from an injection context");return null===Rn?H(e,void 0,t):Rn.get(e,t&z.Optional?null:void 0,t)}function Un(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default;return(U||Fn)(C(e),t)}function Vn(e){for(var t=[],n=0;n<e.length;n++){var r=C(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");for(var i=void 0,o=z.Default,a=0;a<r.length;a++){var u=r[a],s=qn(u);"number"==typeof s?-1===s?i=u.token:o|=s:i=u}t.push(Un(i,o))}else t.push(Un(r))}return t}function jn(e,t){return e[Nn]=t,e.prototype[Nn]=t,e}function qn(e){return e[Nn]}function Bn(e,t,n,r){var i=e[On];throw t[Dn]&&i.unshift(t[Dn]),e.message=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;var i=w(t);if(Array.isArray(t))i=t.map(w).join(" -> ");else if("object"==typeof t){var o=[];for(var a in t)if(t.hasOwnProperty(a)){var u=t[a];o.push(a+":"+("string"==typeof u?JSON.stringify(u):w(u)))}i="{".concat(o.join(", "),"}")}return"".concat(n).concat(r?"("+r+")":"","[").concat(i,"]: ").concat(e.replace(Pn,"\n  "))}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[On]=null,e}var zn,Zn=jn(mn("Inject",function(e){return{token:e}}),-1),Hn=jn(mn("Optional"),8),Gn=jn(mn("SkipSelf"),4);function Wn(e){var t;return(null===(t=function(){if(void 0===zn&&(zn=null,$.trustedTypes))try{zn=$.trustedTypes.createPolicy("angular",{createHTML:function(e){return e},createScript:function(e){return e},createScriptURL:function(e){return e}})}catch(e){}return zn}())||void 0===t?void 0:t.createHTML(e))||e}var Kn=function(){function e(t){d(this,e),this.changingThisBreaksApplicationSecurity=t}return f(e,[{key:"toString",value:function(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity," (see https://g.co/ng/security#xss)")}}]),e}(),Yn=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"getTypeName",value:function(){return"HTML"}}]),n}(Kn),Qn=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"getTypeName",value:function(){return"Style"}}]),n}(Kn),Jn=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"getTypeName",value:function(){return"Script"}}]),n}(Kn),$n=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"getTypeName",value:function(){return"URL"}}]),n}(Kn),Xn=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"getTypeName",value:function(){return"ResourceURL"}}]),n}(Kn);function er(e){return e instanceof Kn?e.changingThisBreaksApplicationSecurity:e}function tr(e,t){var n=nr(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error("Required a safe ".concat(t,", got a ").concat(n," (see https://g.co/ng/security#xss)"))}return n===t}function nr(e){return e instanceof Kn&&e.getTypeName()||null}function rr(e){return new Yn(e)}function ir(e){return new Qn(e)}function or(e){return new Jn(e)}function ar(e){return new $n(e)}function ur(e){return new Xn(e)}function sr(e){var t=new lr(e);return function(){try{return!!(new window.DOMParser).parseFromString(Wn(""),"text/html")}catch(e){return!1}}()?new cr(t):t}var cr=function(){function e(t){d(this,e),this.inertDocumentHelper=t}return f(e,[{key:"getInertBodyElement",value:function(e){e="<body><remove></remove>"+e;try{var t=(new window.DOMParser).parseFromString(Wn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}]),e}(),lr=function(){function e(t){if(d(this,e),this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){var n=this.inertDocument.createElement("html");this.inertDocument.appendChild(n);var r=this.inertDocument.createElement("body");n.appendChild(r)}}return f(e,[{key:"getInertBodyElement",value:function(e){var t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Wn(e),t;var n=this.inertDocument.createElement("body");return n.innerHTML=Wn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}},{key:"stripCustomNsAttrs",value:function(e){for(var t=e.attributes,n=t.length-1;0<n;n--){var r=t.item(n).name;("xmlns:ns1"===r||0===r.indexOf("ns1:"))&&e.removeAttribute(r)}for(var i=e.firstChild;i;)i.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(i),i=i.nextSibling}}]),e}(),hr=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,fr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function dr(e){return(e=String(e)).match(hr)||e.match(fr)?e:"unsafe:"+e}function pr(e){return(e=String(e)).split(",").map(function(e){return dr(e.trim())}).join(", ")}function vr(e){var t,n={},r=s(e.split(","));try{for(r.s();!(t=r.n()).done;){n[t.value]=!0}}catch(i){r.e(i)}finally{r.f()}return n}function gr(){for(var e={},t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];for(var u in a)a.hasOwnProperty(u)&&(e[u]=!0)}return e}var mr,yr=vr("area,br,col,hr,img,wbr"),kr=vr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),_r=vr("rp,rt"),wr=gr(yr,gr(kr,vr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),gr(_r,vr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),gr(_r,kr)),br=vr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),xr=vr("srcset"),Ir=gr(br,xr,vr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),vr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Tr=vr("script,style,template"),Cr=function(){function e(){d(this,e),this.sanitizedSomething=!1,this.buf=[]}return f(e,[{key:"sanitizeChildren",value:function(e){for(var t=e.firstChild,n=!0;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);var r=this.checkClobberedElement(t,t.nextSibling);if(r){t=r;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}},{key:"startElement",value:function(e){var t=e.nodeName.toLowerCase();if(!wr.hasOwnProperty(t))return this.sanitizedSomething=!0,!Tr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);for(var n=e.attributes,r=0;r<n.length;r++){var i=n.item(r),o=i.name,a=o.toLowerCase();if(Ir.hasOwnProperty(a)){var u=i.value;br[a]&&(u=dr(u)),xr[a]&&(u=pr(u)),this.buf.push(" ",o,'="',Rr(u),'"')}else this.sanitizedSomething=!0}return this.buf.push(">"),!0}},{key:"endElement",value:function(e){var t=e.nodeName.toLowerCase();wr.hasOwnProperty(t)&&!yr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}},{key:"chars",value:function(e){this.buf.push(Rr(e))}},{key:"checkClobberedElement",value:function(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error("Failed to sanitize html because the element is clobbered: ".concat(e.outerHTML));return t}}]),e}(),Er=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Sr=/([^\#-~ |!])/g;function Rr(e){return e.replace(/&/g,"&amp;").replace(Er,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(Sr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Ar(e,t){var n=null;try{mr=mr||sr(e);var r=t?String(t):"";n=mr.getInertBodyElement(r);var i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=mr.getInertBodyElement(r)}while(r!==o);return Wn((new Cr).sanitizeChildren(Nr(n)||n))}finally{if(n)for(var a=Nr(n)||n;a.firstChild;)a.removeChild(a.firstChild)}}function Nr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var Or=((Or=Or||{})[Or.NONE=0]="NONE",Or[Or.HTML=1]="HTML",Or[Or.STYLE=2]="STYLE",Or[Or.SCRIPT=3]="SCRIPT",Or[Or.URL=4]="URL",Or[Or.RESOURCE_URL=5]="RESOURCE_URL",Or);function Pr(e){var t=function(){var e=et();return e&&e[12]}();return t?t.sanitize(Or.URL,e)||"":tr(e,"URL")?er(e):dr(R(e))}var Dr="__ngContext__";function Lr(e,t){e[Dr]=t}function Mr(e){var t=function(e){return e[Dr]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Fr(e){return e.ngOriginalError}function Ur(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e.error.apply(e,n)}var Vr=function(){function e(){d(this,e),this._console=console}return f(e,[{key:"handleError",value:function(e){var t,n=this._findOriginalError(e),r=this._findContext(e),i=(t=e)&&t.ngErrorLogger||Ur;i(this._console,"ERROR",e),n&&i(this._console,"ORIGINAL ERROR",n),r&&i(this._console,"ERROR CONTEXT",r)}},{key:"_findContext",value:function(e){return e?e.ngDebugContext||this._findContext(Fr(e)):null}},{key:"_findOriginalError",value:function(e){for(var t=e&&Fr(e);t&&Fr(t);)t=Fr(t);return t||null}}]),e}(),jr=/^>|^->|<!--|-->|--!>|<!-$/g,qr=/(<|>)/,Br=("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind($);function zr(e){return e instanceof Function?e():e}var Zr,Hr=((Hr=Hr||{})[Hr.Important=1]="Important",Hr[Hr.DashCase=2]="DashCase",Hr);function Gr(e,t){return Zr(e,t)}function Wr(e){var t=e[3];return we(t)?t[3]:t}function Kr(e){return Qr(e[13])}function Yr(e){return Qr(e[4])}function Qr(e){for(;null!==e&&!we(e);)e=e[4];return e}function Jr(e,t,n,r,i){if(null!=r){var o,a=!1;we(r)?o=r:_e(r)&&(a=!0,r=r[0]);var u=qe(r);0===e&&null!==n?null==i?ci(t,n,u):si(t,n,u,i||null,!0):1===e&&null!==n?si(t,n,u,i||null,!0):2===e?wi(t,u,a):3===e&&t.destroyNode(u),null!=o&&function(e,t,n,r,i){var o=n[7];o!==qe(n)&&Jr(t,e,r,o,i);for(var a=10;a<n.length;a++){var u=n[a];xi(u[1],u,e,t,r,o)}}(t,e,o,n,i)}}function $r(e,t){return Ve(e)?e.createText(t):e.createTextNode(t)}function Xr(e,t,n){Ve(e)?e.setValue(t,n):t.textContent=n}function ei(e,t){return e.createComment(function(e){return e.replace(jr,function(e){return e.replace(qr,"\u200b$1\u200b")})}(t))}function ti(e,t,n){return Ve(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function ni(e,t){var n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Je(i,-1)),n.splice(r,1)}function ri(e,t){if(!(e.length<=10)){var n=10+t,r=e[n];if(r){var i=r[17];null!==i&&i!==e&&ni(i,r),t>0&&(e[n-1][4]=r[4]);var o=In(e,10+t);!function(e,t){xi(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);var a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}}function ii(e,t){if(!(256&t[2])){var n=t[11];Ve(n)&&n.destroyNode&&xi(e,t,n,3,null,null),function(e){var t=e[13];if(!t)return oi(e[1],e);for(;t;){var n=null;if(_e(t))n=t[13];else{var r=t[10];r&&(n=r)}if(!n){for(;t&&!t[4]&&t!==e;)_e(t)&&oi(t[1],t),t=t[3];null===t&&(t=e),_e(t)&&oi(t[1],t),n=t&&t[4]}t=n}}(t)}}function oi(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){var n;if(null!=e&&null!=(n=e.destroyHooks))for(var r=0;r<n.length;r+=2){var i=t[n[r]];if(!(i instanceof Ut)){var o=n[r+1];if(Array.isArray(o))for(var a=0;a<o.length;a+=2){var u=i[o[a]],s=o[a+1];try{s.call(u)}finally{}}else try{o.call(i)}finally{}}}}(e,t),function(e,t){var n=e.cleanup,r=t[7],i=-1;if(null!==n)for(var o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){var a=n[o+1],u="function"==typeof a?a(t):qe(t[a]),s=r[i=n[o+2]],c=n[o+3];"boolean"==typeof c?u.removeEventListener(n[o],s,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),o+=2}else{var l=r[i=n[o+1]];n[o].call(l)}if(null!==r){for(var h=i+1;h<r.length;h++)r[h]();t[7]=null}}(e,t),1===t[1].type&&Ve(t[11])&&t[11].destroy();var n=t[17];if(null!==n&&we(t[3])){n!==t[3]&&ni(n,t);var r=t[19];null!==r&&r.detachView(e)}}}function ai(e,t,n){return ui(e,t.parent,n)}function ui(e,t,n){for(var r=t;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){var i=e.data[r.directiveStart].encapsulation;if(i===K.None||i===K.Emulated)return null}return ze(r,n)}function si(e,t,n,r,i){Ve(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function ci(e,t,n){Ve(e)?e.appendChild(t,n):t.appendChild(n)}function li(e,t,n,r,i){null!==r?si(e,t,n,r,i):ci(e,t,n)}function hi(e,t){return Ve(e)?e.parentNode(t):t.parentNode}function fi(e,t,n){return vi(e,t,n)}function di(e,t,n){return 40&e.type?ze(e,n):null}var pi,vi=di;function gi(e,t){vi=e,pi=t}function mi(e,t,n,r){var i=ai(e,r,t),o=t[11],a=fi(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(var u=0;u<n.length;u++)li(o,i,n[u],a,!1);else li(o,i,n,a,!1);void 0!==pi&&pi(o,r,t,n,i)}function yi(e,t){if(null!==t){var n=t.type;if(3&n)return ze(t,e);if(4&n)return _i(-1,e[t.index]);if(8&n){var r=t.child;if(null!==r)return yi(e,r);var i=e[t.index];return we(i)?_i(-1,i):qe(i)}if(32&n)return Gr(t,e)()||qe(e[t.index]);var o=ki(e,t);return null!==o?Array.isArray(o)?o[0]:yi(Wr(e[16]),o):yi(e,t.next)}return null}function ki(e,t){return null!==t?e[16][6].projection[t.projection]:null}function _i(e,t){var n=10+e+1;if(n<t.length){var r=t[n],i=r[1].firstChild;if(null!==i)return yi(r,i)}return t[7]}function wi(e,t,n){var r=hi(e,t);r&&function(e,t,n,r){Ve(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function bi(e,t,n,r,i,o,a){for(;null!=n;){var u=r[n.index],s=n.type;if(a&&0===t&&(u&&Lr(qe(u),r),n.flags|=4),64!=(64&n.flags))if(8&s)bi(e,t,n.child,r,i,o,!1),Jr(t,e,i,u,o);else if(32&s){for(var c=Gr(n,r),l=void 0;l=c();)Jr(t,e,i,l,o);Jr(t,e,i,u,o)}else 16&s?Ii(e,t,r,n,i,o):Jr(t,e,i,u,o);n=a?n.projectionNext:n.next}}function xi(e,t,n,r,i,o){bi(n,r,e.firstChild,t,i,o,!1)}function Ii(e,t,n,r,i,o){var a=n[16],u=a[6].projection[r.projection];if(Array.isArray(u))for(var s=0;s<u.length;s++)Jr(t,e,i,u[s],o);else bi(e,t,u,a[3],i,o,!0)}function Ti(e,t,n){Ve(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function Ci(e,t,n){Ve(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function Ei(e,t,n){for(var r=e.length;;){var i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){var o=t.length;if(i+o===r||e.charCodeAt(i+o)<=32)return i}n=i+1}}var Si="ng-template";function Ri(e,t,n){for(var r=0;r<e.length;){var i=e[r++];if(n&&"class"===i){if(-1!==Ei((i=e[r]).toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function Ai(e){return 4===e.type&&e.value!==Si}function Ni(e,t,n){return t===(4!==e.type||n?e.value:Si)}function Oi(e,t,n){for(var r=4,i=e.attrs||[],o=function(e){for(var t=0;t<e.length;t++)if(jt(e[t]))return t;return e.length}(i),a=!1,u=0;u<t.length;u++){var s=t[u];if("number"!=typeof s){if(!a)if(4&r){if(r=2|1&r,""!==s&&!Ni(e,s,n)||""===s&&1===t.length){if(Pi(r))return!1;a=!0}}else{var c=8&r?s:t[++u];if(8&r&&null!==e.attrs){if(!Ri(e.attrs,c,n)){if(Pi(r))return!1;a=!0}continue}var l=Di(8&r?"class":s,i,Ai(e),n);if(-1===l){if(Pi(r))return!1;a=!0;continue}if(""!==c){var h;h=l>o?"":i[l+1].toLowerCase();var f=8&r?h:null;if(f&&-1!==Ei(f,c,0)||2&r&&c!==h){if(Pi(r))return!1;a=!0}}}}else{if(!a&&!Pi(r)&&!Pi(s))return!1;if(a&&Pi(s))continue;a=!1,r=s|1&r}}return Pi(r)||a}function Pi(e){return 0==(1&e)}function Di(e,t,n,r){if(null===t)return-1;var i=0;if(r||!n){for(var o=!1;i<t.length;){var a=t[i];if(a===e)return i;if(3===a||6===a)o=!0;else{if(1===a||2===a){for(var u=t[++i];"string"==typeof u;)u=t[++i];continue}if(4===a)break;if(0===a){i+=4;continue}}i+=o?1:2}return-1}return function(e,t){var n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){var r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Li(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=0;r<t.length;r++)if(Oi(e,t[r],n))return!0;return!1}function Mi(e,t){e:for(var n=0;n<t.length;n++){var r=t[n];if(e.length===r.length){for(var i=0;i<e.length;i++)if(e[i]!==r[i])continue e;return!0}}return!1}function Fi(e,t){return e?":not("+t.trim()+")":t}function Ui(e){for(var t=e[0],n=1,r=2,i="",o=!1;n<e.length;){var a=e[n];if("string"==typeof a)if(2&r){var u=e[++n];i+="["+a+(u.length>0?'="'+u+'"':"")+"]"}else 8&r?i+="."+a:4&r&&(i+=" "+a);else""!==i&&!Pi(a)&&(t+=Fi(o,i),i=""),r=a,o=o||!Pi(r);n++}return""!==i&&(t+=Fi(o,i)),t}var Vi={};function ji(e){qi(tt(),et(),St()+e,ct())}function qi(e,t,n,r){if(!r)if(3==(3&t[2])){var i=e.preOrderCheckHooks;null!==i&&Pt(t,i,n)}else{var o=e.preOrderHooks;null!==o&&Dt(t,o,0,n)}Rt(n)}function Bi(e,t){return e<<17|t<<2}function zi(e){return e>>17&32767}function Zi(e){return 2|e}function Hi(e){return(131068&e)>>2}function Gi(e,t){return-131069&e|t<<2}function Wi(e){return 1|e}function Ki(e,t){var n=e.contentQueries;if(null!==n)for(var r=0;r<n.length;r+=2){var i=n[r],o=n[r+1];if(-1!==o){var a=e.data[o];kt(i),a.contentQueries(2,t[o],o)}}}function Yi(e,t,n,r,i,o,a,u,s,c){var l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Qe(l),l[3]=l[15]=e,l[8]=n,l[10]=a||e&&e[10],l[11]=u||e&&e[11],l[12]=s||e&&e[12]||null,l[9]=c||e&&e[9]||null,l[6]=o,l[16]=2==t.type?e[16]:l,l}function Qi(e,t,n,r,i){var o=e.data[t];if(null===o)o=Ji(e,t,n,r,i),$e.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;var a=ot();o.injectorIndex=null===a?-1:a.injectorIndex}return at(o,!0),o}function Ji(e,t,n,r,i){var o=it(),a=ut(),u=e.data[t]=function(e,t,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,a?o:o&&o.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=u),null!==o&&(a?null==o.child&&null!==u.parent&&(o.child=u):null===o.next&&(o.next=u)),u}function $i(e,t,n,r){if(0===n)return-1;for(var i=t.length,o=0;o<n;o++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Xi(e,t,n){bt(t);try{var r=e.viewQuery;null!==r&&No(1,r,n);var i=e.template;null!==i&&no(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ki(e,t),e.staticViewQueries&&No(2,e.viewQuery,n);var o=e.components;null!==o&&function(e,t){for(var n=0;n<t.length;n++)Co(e,t[n])}(t,o)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,Et()}}function eo(e,t,n,r){var i=t[2];if(256!=(256&i)){bt(t);var o=ct();try{Qe(t),function(e){$e.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&no(e,t,n,2,r);var a=3==(3&i);if(!o)if(a){var u=e.preOrderCheckHooks;null!==u&&Pt(t,u,null)}else{var s=e.preOrderHooks;null!==s&&Dt(t,s,0,null),Lt(t,0)}if(function(e){for(var t=Kr(e);null!==t;t=Yr(t))if(t[2])for(var n=t[9],r=0;r<n.length;r++){var i=n[r],o=i[3];0==(1024&i[2])&&Je(o,1),i[2]|=1024}}(t),function(e){for(var t=Kr(e);null!==t;t=Yr(t))for(var n=10;n<t.length;n++){var r=t[n],i=r[1];Ke(r)&&eo(i,r,i.template,r[8])}}(t),null!==e.contentQueries&&Ki(e,t),!o)if(a){var c=e.contentCheckHooks;null!==c&&Pt(t,c)}else{var l=e.contentHooks;null!==l&&Dt(t,l,1),Lt(t,1)}!function(e,t){var n=e.hostBindingOpCodes;if(null!==n)try{for(var r=0;r<n.length;r++){var i=n[r];if(i<0)Rt(~i);else{var o=i,a=n[++r],u=n[++r];gt(a,o),u(2,t[o])}}}finally{Rt(-1)}}(e,t);var h=e.components;null!==h&&function(e,t){for(var n=0;n<t.length;n++)Io(e,t[n])}(t,h);var f=e.viewQuery;if(null!==f&&No(2,f,r),!o)if(a){var d=e.viewCheckHooks;null!==d&&Pt(t,d)}else{var p=e.viewHooks;null!==p&&Dt(t,p,2),Lt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),o||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Je(t[3],-1))}finally{Et()}}}function to(e,t,n,r){var i=t[10],o=!ct(),a=We(t);try{o&&!a&&i.begin&&i.begin(),a&&Xi(e,t,r),eo(e,t,n,r)}finally{o&&!a&&i.end&&i.end()}}function no(e,t,n,r,i){var o=St(),a=2&r;try{Rt(-1),a&&t.length>20&&qi(e,t,20,ct()),n(r,i)}finally{Rt(o)}}function ro(e,t,n){if(be(t))for(var r=t.directiveEnd,i=t.directiveStart;i<r;i++){var o=e.data[i];o.contentQueries&&o.contentQueries(1,n[i],i)}}function io(e,t,n){!Xe()||(function(e,t,n,r){var i=n.directiveStart,o=n.directiveEnd;e.firstCreatePass||Qt(n,t),Lr(r,t);for(var a=n.initialInputs,u=i;u<o;u++){var s=e.data[u],c=Te(s);c&&ko(t,n,s);var l=cn(t,e,u,n);Lr(l,t),null!==a&&wo(0,u-i,l,s,0,a),c&&(Ge(n.index,t)[8]=l)}}(e,t,n,ze(n,t)),128==(128&n.flags)&&function(e,t,n){var r=n.directiveStart,i=n.directiveEnd,o=n.index,a=$e.lFrame.currentDirectiveIndex;try{Rt(o);for(var u=r;u<i;u++){var s=e.data[u],c=t[u];mt(u),(null!==s.hostBindings||0!==s.hostVars||null!==s.hostAttrs)&&po(s,c)}}finally{Rt(-1),mt(a)}}(e,t,n))}function oo(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ze,r=t.localNames;if(null!==r)for(var i=t.index+1,o=0;o<r.length;o+=2){var a=r[o+1],u=-1===a?n(t,e):e[a];e[i++]=u}}function ao(e){var t=e.tView;return null===t||t.incompleteFirstPass?e.tView=uo(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function uo(e,t,n,r,i,o,a,u,s,c){var l=20+r,h=l+i,f=function(e,t){for(var n=[],r=0;r<t;r++)n.push(r<e?null:Vi);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:e,blueprint:f,template:n,queries:null,viewQuery:u,declTNode:t,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof a?a():a,firstChild:null,schemas:s,consts:d,incompleteFirstPass:!1}}function so(e,t,n,r){var i=Po(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&Do(e).push(r,i.length-1))}function co(e,t,n){for(var r in e)if(e.hasOwnProperty(r)){var i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function lo(e,t,n,r,i,o,a,u){var s,c=ze(t,n),l=t.inputs;!u&&null!=l&&(s=l[r])?(Mo(e,n,s,r,i),xe(t)&&function(e,t){var n=Ge(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=a?a(i,t.value||"",r):i,Ve(o)?o.setProperty(c,r,i):qt(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function ho(e,t,n,r){var i=!1;if(Xe()){var o=function(e,t,n){var r=e.directiveRegistry,i=null;if(r)for(var o=0;o<r.length;o++){var a=r[o];Li(n,a.selectors,!1)&&(i||(i=[]),en(Qt(n,t),e,a.type),Te(a)?(vo(e,n),i.unshift(a)):i.push(a))}return i}(e,t,n),a=null===r?null:{"":-1};if(null!==o){i=!0,mo(n,e.data.length,o.length);for(var u=0;u<o.length;u++){var s=o[u];s.providersResolver&&s.providersResolver(s)}for(var c=!1,l=!1,h=$i(e,t,o.length,null),f=0;f<o.length;f++){var d=o[f];n.mergedAttrs=Bt(n.mergedAttrs,d.hostAttrs),yo(e,n,t,h,d),go(h,d,a),null!==d.contentQueries&&(n.flags|=8),(null!==d.hostBindings||null!==d.hostAttrs||0!==d.hostVars)&&(n.flags|=128);var p=d.type.prototype;!c&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),c=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),l=!0),h++}!function(e,t){for(var n=t.directiveEnd,r=e.data,i=t.attrs,o=[],a=null,u=null,s=t.directiveStart;s<n;s++){var c=r[s],l=c.inputs,h=null===i||Ai(t)?null:bo(l,i);o.push(h),a=co(l,s,a),u=co(c.outputs,s,u)}null!==a&&(a.hasOwnProperty("class")&&(t.flags|=16),a.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=o,t.inputs=a,t.outputs=u}(e,n)}a&&function(e,t,n){if(t)for(var r=e.localNames=[],i=0;i<t.length;i+=2){var o=n[t[i+1]];if(null==o)throw new S("301","Export of name '".concat(t[i+1],"' not found!"));r.push(t[i],o)}}(n,r,a)}return n.mergedAttrs=Bt(n.mergedAttrs,n.attrs),i}function fo(e,t,n,r,i,o){var a=o.hostBindings;if(a){var u=e.hostBindingOpCodes;null===u&&(u=e.hostBindingOpCodes=[]);var s=~t.index;(function(e){for(var t=e.length;t>0;){var n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(u)!=s&&u.push(s),u.push(r,i,a)}}function po(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function vo(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function go(e,t,n){if(n){if(t.exportAs)for(var r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;Te(t)&&(n[""]=e)}}function mo(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function yo(e,t,n,r,i){e.data[r]=i;var o=i.factory||(i.factory=Ee(i.type)),a=new Ut(o,Te(i),null);e.blueprint[r]=a,n[r]=a,fo(e,t,0,r,$i(e,n,i.hostVars,Vi),i)}function ko(e,t,n){var r=ze(t,e),i=ao(n),o=e[10],a=Eo(e,Yi(e,i,null,n.onPush?64:16,r,t,o,o.createRenderer(r,n),null,null));e[t.index]=a}function _o(e,t,n,r,i,o,a){if(null==o)Ve(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{var u=null==a?R(o):a(o,r||"",i);Ve(e)?e.setAttribute(t,i,u,n):n?t.setAttributeNS(n,i,u):t.setAttribute(i,u)}}function wo(e,t,n,r,i,o){var a=o[t];if(null!==a)for(var u=r.setInput,s=0;s<a.length;){var c=a[s++],l=a[s++],h=a[s++];null!==u?r.setInput(n,h,c,l):n[l]=h}}function bo(e,t){for(var n=null,r=0;r<t.length;){var i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function xo(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Io(e,t){var n=Ge(t,e);if(Ke(n)){var r=n[1];80&n[2]?eo(r,n,r.template,n[8]):n[5]>0&&To(n)}}function To(e){for(var t=Kr(e);null!==t;t=Yr(t))for(var n=10;n<t.length;n++){var r=t[n];if(1024&r[2]){var i=r[1];eo(i,r,i.template,r[8])}else r[5]>0&&To(r)}var o=e[1].components;if(null!==o)for(var a=0;a<o.length;a++){var u=Ge(o[a],e);Ke(u)&&u[5]>0&&To(u)}}function Co(e,t){var n=Ge(t,e),r=n[1];(function(e,t){for(var n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),Xi(r,n,n[8])}function Eo(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function So(e){for(;e;){e[2]|=64;var t=Wr(e);if(Ce(e)&&!t)return e;e=t}return null}function Ro(e,t,n){var r=t[10];r.begin&&r.begin();try{eo(e,t,e.template,n)}catch(i){throw Lo(t,i),i}finally{r.end&&r.end()}}function Ao(e){!function(e){for(var t=0;t<e.components.length;t++){var n=e.components[t],r=Mr(n),i=r[1];to(i,r,i.template,n)}}(e[8])}function No(e,t,n){kt(0),t(e,n)}var Oo=Promise.resolve(null);function Po(e){return e[7]||(e[7]=[])}function Do(e){return e.cleanup||(e.cleanup=[])}function Lo(e,t){var n=e[9],r=n?n.get(Vr,null):null;r&&r.handleError(t)}function Mo(e,t,n,r,i){for(var o=0;o<n.length;){var a=n[o++],u=n[o++],s=t[a],c=e.data[a];null!==c.setInput?c.setInput(s,i,r,u):s[u]=i}}function Fo(e,t,n){var r=n?e.styles:null,i=n?e.classes:null,o=0;if(null!==t)for(var a=0;a<t.length;a++){var u=t[a];"number"==typeof u?o=u:1==o?i=x(i,u):2==o&&(r=x(r,u+": "+t[++a]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}var Uo,Vo=new yn("INJECTOR",-1),jo=function(){function e(){d(this,e)}return f(e,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:An;if(t===An){var n=new Error("NullInjectorError: No provider for ".concat(w(e),"!"));throw n.name="NullInjectorError",n}return t}}]),e}(),qo=new yn("Set Injector scope."),Bo={},zo={};function Zo(){return void 0===Uo&&(Uo=new jo),Uo}function Ho(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return new Go(e,n,t||Zo(),r)}var Go=function(){function e(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;var a=[];n&&bn(n,function(e){return i.processProvider(e,t,n)}),bn([t],function(e){return i.processInjectorType(e,[],a)}),this.records.set(Vo,Yo(void 0,this));var u=this.records.get(qo);this.scope=null!=u?u.value:null,this.source=o||("object"==typeof t?null:w(t))}return f(e,[{key:"destroyed",get:function(){return this._destroyed}},{key:"destroy",value:function(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(function(e){return e.ngOnDestroy()})}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:An,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.Default;this.assertNotDestroyed();var r,i=Mn(this),o=Z(void 0);try{if(!(n&z.SkipSelf)){var a=this.records.get(e);if(void 0===a){var u=("function"==typeof(r=e)||"object"==typeof r&&r instanceof yn)&&L(e);a=u&&this.injectableDefInScope(u)?Yo(Wo(e),Bo):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(n&z.Self?Zo():this.parent).get(e,t=n&z.Optional&&t===An?null:t)}catch(s){if("NullInjectorError"===s.name){if((s[On]=s[On]||[]).unshift(w(e)),i)throw s;return Bn(s,e,"R3InjectorError",this.source)}throw s}finally{Z(o),Mn(i)}}},{key:"_resolveInjectorDefTypes",value:function(){var e=this;this.injectorDefTypes.forEach(function(t){return e.get(t)})}},{key:"toString",value:function(){var e=[];return this.records.forEach(function(t,n){return e.push(w(n))}),"R3Injector[".concat(e.join(", "),"]")}},{key:"assertNotDestroyed",value:function(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}},{key:"processInjectorType",value:function(e,t,n){var r=this;if(!(e=C(e)))return!1;var i=F(e),o=null==i&&e.ngModule||void 0,a=void 0===o?e:o,u=-1!==n.indexOf(a);if(void 0!==o&&(i=F(o)),null==i)return!1;if(null!=i.imports&&!u){var s;n.push(a);try{bn(i.imports,function(e){r.processInjectorType(e,t,n)&&(void 0===s&&(s=[]),s.push(e))})}finally{}if(void 0!==s)for(var c=function(e){var t=s[e],n=t.ngModule,i=t.providers;bn(i,function(e){return r.processProvider(e,n,i||ee)})},l=0;l<s.length;l++)c(l)}this.injectorDefTypes.add(a);var h=Ee(a)||function(){return new a};this.records.set(a,Yo(h,Bo));var f=i.providers;if(null!=f&&!u){var d=e;bn(f,function(e){return r.processProvider(e,d,f)})}return void 0!==o&&void 0!==e.providers}},{key:"processProvider",value:function(e,t,n){var r,i=Jo(e=C(e))?e:C(e&&e.provide),o=Qo(r=e)?Yo(void 0,r.useValue):Yo(Ko(r),Bo);if(Jo(e)||!0!==e.multi)this.records.get(i);else{var a=this.records.get(i);a||((a=Yo(void 0,Bo,!0)).factory=function(){return Vn(a.multi)},this.records.set(i,a)),i=e,a.multi.push(e)}this.records.set(i,o)}},{key:"hydrate",value:function(e,t){return t.value===Bo&&(t.value=zo,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}},{key:"injectableDefInScope",value:function(e){if(!e.providedIn)return!1;var t=C(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}]),e}();function Wo(e){var t=L(e),n=null!==t?t.factory:Ee(e);if(null!==n)return n;if(e instanceof yn)throw new Error("Token ".concat(w(e)," is missing a \u0275prov definition."));if(e instanceof Function)return function(e){var t=e.length;if(t>0){var n=Tn(t,"?");throw new Error("Can't resolve all parameters for ".concat(w(e),": (").concat(n.join(", "),")."))}var r=function(e){var t=e&&(e[V]||e[q]);if(t){var n=function(e){if(e.hasOwnProperty("name"))return e.name;var t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn('DEPRECATED: DI is instantiating a token "'.concat(n,'" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "').concat(n,'" class.')),t}return null}(e);return null!==r?function(){return r.factory(e)}:function(){return new e}}(e);throw new Error("unreachable")}function Ko(e,t,n){var r;if(Jo(e)){var i=C(e);return Ee(i)||Wo(i)}if(Qo(e))r=function(){return C(e.useValue)};else if(function(e){return!(!e||!e.useFactory)}(e))r=function(){return e.useFactory.apply(e,a(Vn(e.deps||[])))};else if(function(e){return!(!e||!e.useExisting)}(e))r=function(){return Un(C(e.useExisting))};else{var o=C(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return Ee(o)||Wo(o);r=function(){return k(o,a(Vn(e.deps)))}}return r}function Yo(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return{factory:e,value:t,multi:n?[]:void 0}}function Qo(e){return null!==e&&"object"==typeof e&&Ln in e}function Jo(e){return"function"==typeof e}var $o,Xo=function(e,t,n){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0,i=Ho(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)},ea=(($o=function(){function e(){d(this,e)}return f(e,null,[{key:"create",value:function(e,t){return Array.isArray(e)?Xo(e,t,""):Xo(e.providers,e.parent,e.name||"")}}]),e}()).THROW_IF_NOT_FOUND=An,$o.NULL=new jo,$o.\u0275prov=P({token:$o,providedIn:"any",factory:function(){return Un(Vo)}}),$o.__NG_ELEMENT_ID__=-1,$o);function ta(e,t){Ot(Mr(e)[1],rt())}function na(e){for(var t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0,r=[e];t;){var i=void 0;if(Te(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);var o=e;o.inputs=ra(e.inputs),o.declaredInputs=ra(e.declaredInputs),o.outputs=ra(e.outputs);var a=i.hostBindings;a&&aa(e,a);var u=i.viewQuery,s=i.contentQueries;if(u&&ia(e,u),s&&oa(e,s),_(e.inputs,i.inputs),_(e.declaredInputs,i.declaredInputs),_(e.outputs,i.outputs),Te(i)&&i.data.animation){var c=e.data;c.animation=(c.animation||[]).concat(i.data.animation)}}var l=i.features;if(l)for(var h=0;h<l.length;h++){var f=l[h];f&&f.ngInherit&&f(e),f===na&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){for(var t=0,n=null,r=e.length-1;r>=0;r--){var i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Bt(i.hostAttrs,n=Bt(n,i.hostAttrs))}}(r)}function ra(e){return e===X?{}:e===ee?[]:e}function ia(e,t){var n=e.viewQuery;e.viewQuery=n?function(e,r){t(e,r),n(e,r)}:t}function oa(e,t){var n=e.contentQueries;e.contentQueries=n?function(e,r,i){t(e,r,i),n(e,r,i)}:t}function aa(e,t){var n=e.hostBindings;e.hostBindings=n?function(e,r){t(e,r),n(e,r)}:t}var ua=null;function sa(){if(!ua){var e=$.Symbol;if(e&&e.iterator)ua=e.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),n=0;n<t.length;++n){var r=t[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(ua=r)}}return ua}var ca=function(){function e(t){d(this,e),this.wrapped=t}return f(e,null,[{key:"wrap",value:function(t){return new e(t)}},{key:"unwrap",value:function(t){return e.isWrapped(t)?t.wrapped:t}},{key:"isWrapped",value:function(t){return t instanceof e}}]),e}();function la(e){return!!ha(e)&&(Array.isArray(e)||!(e instanceof Map)&&sa()in e)}function ha(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function fa(e,t,n){return e[t]=n}function da(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function pa(e,t,n,r){var i=da(e,t,n);return da(e,t+1,r)||i}function va(e,t,n,r){var i=et();return da(i,dt(),t)&&(tt(),function(e,t,n,r,i,o){var a=ze(e,t);_o(t[11],a,o,e.value,n,r,i)}(At(),i,e,t,n,r)),va}function ga(e,t,n,r){return da(e,dt(),n)?t+R(n)+r:Vi}function ma(e,t,n,r,i,o,a,u){var s=et(),c=tt(),l=e+20,h=c.firstCreatePass?function(e,t,n,r,i,o,a,u,s){var c=t.consts,l=Qi(t,e,4,a||null,Ye(c,u));ho(t,n,l,Ye(c,s)),Ot(t,l);var h=l.tViews=uo(2,l,r,i,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,c);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,c,s,t,n,r,i,o,a):c.data[l];at(h,!1);var f=s[11].createComment("");mi(c,s,f,h),Lr(f,s),Eo(s,s[l]=xo(f,s,f,h)),Ie(h)&&io(c,s,h),null!=a&&oo(s,h,u)}function ya(e){return He($e.lFrame.contextLView,20+e)}function ka(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:z.Default,n=et();return null===n?Un(e,t):rn(rt(),n,C(e),t)}function _a(e,t,n){var r=et();return da(r,dt(),t)&&lo(tt(),At(),r,e,t,r[11],n,!1),_a}function wa(e,t,n,r,i){var o=i?"class":"style";Mo(e,n,t.inputs[o],o,r)}function ba(e,t,n,r){var i=et(),o=tt(),a=20+e,u=i[11],s=i[a]=ti(u,t,$e.lFrame.currentNamespace),c=o.firstCreatePass?function(e,t,n,r,i,o,a){var u=t.consts,s=Qi(t,e,2,i,Ye(u,o));return ho(t,n,s,Ye(u,a)),null!==s.attrs&&Fo(s,s.attrs,!1),null!==s.mergedAttrs&&Fo(s,s.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,s),s}(a,o,i,0,t,n,r):o.data[a];at(c,!0);var l=c.mergedAttrs;null!==l&&Vt(u,s,l);var h=c.classes;null!==h&&Ci(u,s,h);var f=c.styles;null!==f&&Ti(u,s,f),64!=(64&c.flags)&&mi(o,i,s,c),0===$e.lFrame.elementDepthCount&&Lr(s,i),$e.lFrame.elementDepthCount++,Ie(c)&&(io(o,i,c),ro(o,c,i)),null!==r&&oo(i,c)}function xa(){var e=rt();ut()?st():at(e=e.parent,!1);var t=e;$e.lFrame.elementDepthCount--;var n=tt();n.firstCreatePass&&(Ot(n,e),be(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&wa(n,t,et(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&wa(n,t,et(),t.stylesWithoutHost,!1)}function Ia(e,t,n,r){ba(e,t,n,r),xa()}function Ta(e,t,n){var r=et(),i=tt(),o=e+20,a=i.firstCreatePass?function(e,t,n,r,i){var o=t.consts,a=Ye(o,r),u=Qi(t,e,8,"ng-container",a);return null!==a&&Fo(u,a,!0),ho(t,n,u,Ye(o,i)),null!==t.queries&&t.queries.elementStart(t,u),u}(o,i,r,t,n):i.data[o];at(a,!0);var u=r[o]=r[11].createComment("");mi(i,r,u,a),Lr(u,r),Ie(a)&&(io(i,r,a),ro(i,a,r)),null!=n&&oo(r,a)}function Ca(){var e=rt(),t=tt();ut()?st():at(e=e.parent,!1),t.firstCreatePass&&(Ot(t,e),be(e)&&t.queries.elementEnd(e))}function Ea(){return et()}function Sa(e){return!!e&&"function"==typeof e.then}function Ra(e){return!!e&&"function"==typeof e.subscribe}var Aa=Ra;function Na(e,t,n,r){var i=et(),o=tt(),a=rt();return function(e,t,n,r,i,o,a,u){var s=Ie(r),c=e.firstCreatePass&&Do(e),l=t[8],h=Po(t),f=!0;if(3&r.type||u){var d=ze(r,t),p=u?u(d):d,v=h.length,g=u?function(e){return u(qe(e[r.index]))}:r.index;if(Ve(n)){var m=null;if(!u&&s&&(m=function(e,t,n,r){var i=e.cleanup;if(null!=i)for(var o=0;o<i.length-1;o+=2){var a=i[o];if(a===n&&i[o+1]===r){var u=t[7],s=i[o+2];return u.length>s?u[s]:null}"string"==typeof a&&(o+=2)}return null}(e,t,i,r.index)),null!==m)(m.__ngLastListenerFn__||m).__ngNextListenerFn__=o,m.__ngLastListenerFn__=o,f=!1;else{o=Pa(r,t,l,o,!1);var y=n.listen(p,i,o);h.push(o,y),c&&c.push(i,g,v,v+1)}}else o=Pa(r,t,l,o,!0),p.addEventListener(i,o,a),h.push(o),c&&c.push(i,g,v,a)}else o=Pa(r,t,l,o,!1);var k,_=r.outputs;if(f&&null!==_&&(k=_[i])){var w=k.length;if(w)for(var b=0;b<w;b+=2){var x=t[k[b]][k[b+1]].subscribe(o),I=h.length;h.push(o,x),c&&c.push(i,r.index,I,-(I+1))}}}(o,i,i[11],a,e,t,!!n,r),Na}function Oa(e,t,n,r){try{return!1!==n(r)}catch(i){return Lo(e,i),!1}}function Pa(e,t,n,r,i){return function n(o){if(o===Function)return r;var a=2&e.flags?Ge(e.index,t):t;0==(32&t[2])&&So(a);for(var u=Oa(t,0,r,o),s=n.__ngNextListenerFn__;s;)u=Oa(t,0,s,o)&&u,s=s.__ngNextListenerFn__;return i&&!1===u&&(o.preventDefault(),o.returnValue=!1),u}}function Da(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return function(e){return($e.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,$e.lFrame.contextLView))[8]}(e)}function La(e,t){for(var n=null,r=function(e){var t=e.attrs;if(null!=t){var n=t.indexOf(5);if(0==(1&n))return t[n+1]}return null}(e),i=0;i<t.length;i++){var o=t[i];if("*"!==o){if(null===r?Li(e,o,!0):Mi(r,o))return i}else n=i}return n}function Ma(e){var t=et()[16][6];if(!t.projection)for(var n=t.projection=Tn(e?e.length:1,null),r=n.slice(),i=t.child;null!==i;){var o=e?La(i,e):0;null!==o&&(r[o]?r[o].projectionNext=i:n[o]=i,r[o]=i),i=i.next}}function Fa(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,r=et(),i=tt(),o=Qi(i,20+e,16,null,n||null);null===o.projection&&(o.projection=t),st(),64!=(64&o.flags)&&function(e,t,n){Ii(t[11],0,t,n,ai(e,n,t),fi(n.parent||t[6],n,t))}(i,r,o)}function Ua(e,t,n){return Va(e,"",t,"",n),Ua}function Va(e,t,n,r,i){var o=et(),a=ga(o,t,n,r);return a!==Vi&&lo(tt(),At(),o,e,a,o[11],i,!1),Va}function ja(e,t,n,r,i){for(var o=e[n+1],a=null===t,u=r?zi(o):Hi(o),s=!1;0!==u&&(!1===s||a);){var c=e[u+1];qa(e[u],t)&&(s=!0,e[u+1]=r?Wi(c):Zi(c)),u=r?zi(c):Hi(c)}s&&(e[n+1]=r?Zi(o):Wi(o))}function qa(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&Sn(e,t)>=0}var Ba={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function za(e){return e.substring(Ba.key,Ba.keyEnd)}function Za(e,t){var n=Ba.textEnd;return n===t?-1:(t=Ba.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Ba.key=t,n),Ha(e,t,n))}function Ha(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Ga(e,t,n){return Qa(e,t,n,!1),Ga}function Wa(e,t){return Qa(e,t,null,!0),Wa}function Ka(e){Ja(Cn,Ya,e,!0)}function Ya(e,t){for(var n=function(e){return function(e){Ba.key=0,Ba.keyEnd=0,Ba.value=0,Ba.valueEnd=0,Ba.textEnd=e.length}(e),Za(e,Ha(e,0,Ba.textEnd))}(t);n>=0;n=Za(t,n))Cn(e,za(t),!0)}function Qa(e,t,n,r){var i=et(),o=tt(),a=pt(2);o.firstUpdatePass&&Xa(o,e,a,r),t!==Vi&&da(i,a,t)&&nu(o,o.data[St()],i,i[11],e,i[a+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=w(er(e)))),e}(t,n),r,a)}function Ja(e,t,n,r){var i=tt(),o=pt(2);i.firstUpdatePass&&Xa(i,null,o,r);var a=et();if(n!==Vi&&da(a,o,n)){var u=i.data[St()];if(ou(u,r)&&!$a(i,o)){var s=r?u.classesWithoutHost:u.stylesWithoutHost;null!==s&&(n=x(s,n||"")),wa(i,u,a,n,r)}else!function(e,t,n,r,i,o,a,u){i===Vi&&(i=ee);for(var s=0,c=0,l=0<i.length?i[0]:null,h=0<o.length?o[0]:null;null!==l||null!==h;){var f=s<i.length?i[s+1]:void 0,d=c<o.length?o[c+1]:void 0,p=void 0,v=null;l===h?(s+=2,c+=2,f!==d&&(v=h,p=d)):null===h||null!==l&&l<h?(s+=2,v=l):(c+=2,v=h,p=d),null!==v&&nu(e,t,n,r,v,p,a,u),l=s<i.length?i[s]:null,h=c<o.length?o[c]:null}}(i,u,a,a[11],a[o+1],a[o+1]=function(e,t,n){if(null==n||""===n)return ee;var r=[],i=er(n);if(Array.isArray(i))for(var o=0;o<i.length;o++)e(r,i[o],!0);else if("object"==typeof i)for(var a in i)i.hasOwnProperty(a)&&e(r,a,i[a]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,o)}}function $a(e,t){return t>=e.expandoStartIndex}function Xa(e,t,n,r){var i=e.data;if(null===i[n+1]){var o=i[St()],a=$a(e,n);ou(o,r)&&null===t&&!a&&(t=!1),t=function(e,t,n,r){var i=function(e){var t=$e.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e),o=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=tu(n=eu(null,e,t,n,r),t.attrs,r),o=null);else{var a=t.directiveStylingLast;if(-1===a||e[a]!==i)if(n=eu(i,e,t,n,r),null===o){var u=function(e,t,n){var r=n?t.classBindings:t.styleBindings;if(0!==Hi(r))return e[zi(r)]}(e,t,r);void 0!==u&&Array.isArray(u)&&function(e,t,n,r){e[zi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,u=tu(u=eu(null,e,t,u[1],r),t.attrs,r))}else o=function(e,t,n){for(var r,i=t.directiveEnd,o=1+t.directiveStylingLast;o<i;o++)r=tu(r,e[o].hostAttrs,n);return tu(r,t.attrs,n)}(e,t,r)}return void 0!==o&&(r?t.residualClasses=o:t.residualStyles=o),n}(i,o,t,r),function(e,t,n,r,i,o){var a=o?t.classBindings:t.styleBindings,u=zi(a),s=Hi(a);e[r]=n;var c,l=!1;if(Array.isArray(n)){var h=n;(null===(c=h[1])||Sn(h,c)>0)&&(l=!0)}else c=n;if(i)if(0!==s){var f=zi(e[u+1]);e[r+1]=Bi(f,u),0!==f&&(e[f+1]=Gi(e[f+1],r)),e[u+1]=function(e,t){return 131071&e|t<<17}(e[u+1],r)}else e[r+1]=Bi(u,0),0!==u&&(e[u+1]=Gi(e[u+1],r)),u=r;else e[r+1]=Bi(s,0),0===u?u=r:e[s+1]=Gi(e[s+1],r),s=r;l&&(e[r+1]=Zi(e[r+1])),ja(e,c,r,!0),ja(e,c,r,!1),function(e,t,n,r,i){var o=i?e.residualClasses:e.residualStyles;null!=o&&"string"==typeof t&&Sn(o,t)>=0&&(n[r+1]=Wi(n[r+1]))}(t,c,e,r,o),a=Bi(u,s),o?t.classBindings=a:t.styleBindings=a}(i,o,t,n,a,r)}}function eu(e,t,n,r,i){var o=null,a=n.directiveEnd,u=n.directiveStylingLast;for(-1===u?u=n.directiveStart:u++;u<a&&(r=tu(r,(o=t[u]).hostAttrs,i),o!==e);)u++;return null!==e&&(n.directiveStylingLast=u),r}function tu(e,t,n){var r=n?1:2,i=-1;if(null!==t)for(var o=0;o<t.length;o++){var a=t[o];"number"==typeof a?i=a:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),Cn(e,a,!!n||t[++o]))}return void 0===e?null:e}function nu(e,t,n,r,i,o,a,u){if(3&t.type){var s=e.data,c=s[u+1];iu(function(e){return 1==(1&e)}(c)?ru(s,t,n,i,Hi(c),a):void 0)||(iu(o)||function(e){return 2==(2&e)}(c)&&(o=ru(s,null,n,i,u,a)),function(e,t,n,r,i){var o=Ve(e);if(t)i?o?e.addClass(n,r):n.classList.add(r):o?e.removeClass(n,r):n.classList.remove(r);else{var a=-1===r.indexOf("-")?void 0:Hr.DashCase;if(null==i)o?e.removeStyle(n,r,a):n.style.removeProperty(r);else{var u="string"==typeof i&&i.endsWith("!important");u&&(i=i.slice(0,-10),a|=Hr.Important),o?e.setStyle(n,r,i,a):n.style.setProperty(r,i,u?"important":"")}}}(r,a,Be(St(),n),i,o))}}function ru(e,t,n,r,i,o){for(var a,u=null===t;i>0;){var s=e[i],c=Array.isArray(s),l=c?s[1]:s,h=null===l,f=n[i+1];f===Vi&&(f=h?ee:void 0);var d=h?En(f,r):l===r?f:void 0;if(c&&!iu(d)&&(d=En(s,r)),iu(d)&&(a=d,u))return a;var p=e[i+1];i=u?zi(p):Hi(p)}if(null!==t){var v=o?t.residualClasses:t.residualStyles;null!=v&&(a=En(v,r))}return a}function iu(e){return void 0!==e}function ou(e,t){return 0!=(e.flags&(t?16:32))}function au(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=et(),r=tt(),i=e+20,o=r.firstCreatePass?Qi(r,i,1,t,null):r.data[i],a=n[i]=$r(n[11],t);mi(r,n,a,o),at(o,!1)}function uu(e){return su("",e,""),uu}function su(e,t,n){var r=et(),i=ga(r,e,t,n);return i!==Vi&&function(e,t,n){var r=Be(t,e);Xr(e[11],r,n)}(r,St(),i),su}function cu(e,t,n,r,i,o,a,u,s){Ja(Cn,Ya,function(e,t,n,r,i,o,a,u,s,c){var l=function(e,t,n,r,i,o){var a=pa(e,t,n,r);return pa(e,t+2,i,o)||a}(e,ft(),n,i,a,s);return pt(4),l?t+R(n)+r+R(i)+o+R(a)+u+R(s)+c:Vi}(et(),e,t,n,r,i,o,a,u,s),!0)}function lu(e,t,n){var r=et();return da(r,dt(),t)&&lo(tt(),At(),r,e,t,r[11],n,!0),lu}var hu=void 0,fu=["en",[["a","p"],["AM","PM"],hu],[["AM","PM"],hu,hu],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],hu,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],hu,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",hu,"{1} 'at' {0}",hu],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){var t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}],du={};function pu(e){var t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e),n=gu(t);if(n)return n;var r=t.split("-")[0];if(n=gu(r))return n;if("en"===r)return fu;throw new Error('Missing locale data for the locale "'.concat(e,'".'))}function vu(e){return pu(e)[mu.PluralCase]}function gu(e){return e in du||(du[e]=$.ng&&$.ng.common&&$.ng.common.locales&&$.ng.common.locales[e]),du[e]}var mu=((mu=mu||{})[mu.LocaleId=0]="LocaleId",mu[mu.DayPeriodsFormat=1]="DayPeriodsFormat",mu[mu.DayPeriodsStandalone=2]="DayPeriodsStandalone",mu[mu.DaysFormat=3]="DaysFormat",mu[mu.DaysStandalone=4]="DaysStandalone",mu[mu.MonthsFormat=5]="MonthsFormat",mu[mu.MonthsStandalone=6]="MonthsStandalone",mu[mu.Eras=7]="Eras",mu[mu.FirstDayOfWeek=8]="FirstDayOfWeek",mu[mu.WeekendRange=9]="WeekendRange",mu[mu.DateFormat=10]="DateFormat",mu[mu.TimeFormat=11]="TimeFormat",mu[mu.DateTimeFormat=12]="DateTimeFormat",mu[mu.NumberSymbols=13]="NumberSymbols",mu[mu.NumberFormats=14]="NumberFormats",mu[mu.CurrencyCode=15]="CurrencyCode",mu[mu.CurrencySymbol=16]="CurrencySymbol",mu[mu.CurrencyName=17]="CurrencyName",mu[mu.Currencies=18]="Currencies",mu[mu.Directionality=19]="Directionality",mu[mu.PluralCase=20]="PluralCase",mu[mu.ExtraData=21]="ExtraData",mu),yu=["zero","one","two","few","many"],ku="en-US",_u={marker:"element"},wu={marker:"ICU"},bu=((bu=bu||{})[bu.SHIFT=2]="SHIFT",bu[bu.APPEND_EAGERLY=1]="APPEND_EAGERLY",bu[bu.COMMENT=2]="COMMENT",bu),xu=ku;function Iu(e){(function(e,t){null==e&&O("Expected localeId to be defined",e,null,"!=")})(e),"string"==typeof e&&(xu=e.toLowerCase().replace(/_/g,"-"))}function Tu(e,t,n){var r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?di(e,0,n):qe(n[i])}function Cu(e,t,n,r,i){var o=t.insertBeforeIndex;if(Array.isArray(o)){var a=r,u=null;if(3&t.type||(u=a,a=i),null!==a&&0==(2&t.flags))for(var s=1;s<o.length;s++)si(e,a,n[o[s]],u,!1)}}function Eu(e,t){if(e.push(t),e.length>1)for(var n=e.length-2;n>=0;n--){var r=e[n];Su(r)||Ru(r,t)&&null===Au(r)&&Nu(r,t.index)}}function Su(e){return!(64&e.type)}function Ru(e,t){return Su(t)||e.index>t.index}function Au(e){var t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function Nu(e,t){var n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(gi(Tu,Cu),e.insertBeforeIndex=t)}function Ou(e,t){var n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function Pu(e,t,n){var r=Ji(e,n,64,null,null);return Eu(t,r),r}function Du(e,t){var n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function Lu(e){return e>>>17}function Mu(e){return(131070&e)>>>1}var Fu=0,Uu=0;function Vu(e,t,n,r){for(var i,o=n[11],a=null,u=0;u<t.length;u++){var s=t[u];if("string"==typeof s){var c=t[++u];null===n[c]&&(n[c]=$r(o,s))}else if("number"==typeof s)switch(1&s){case 0:var l=Lu(s),h=void 0,f=void 0;if(null===a&&(a=l,i=hi(o,r)),l===a?(h=r,f=i):(h=null,f=qe(n[l])),null!==f){var d=Mu(s);si(o,f,n[d],h,!1);var p=Ou(e,d);if(null!==p&&"object"==typeof p){var v=Du(p,n);null!==v&&Vu(e,p.create[v],n,n[p.anchorIdx])}}break;case 1:var g=t[++u],m=t[++u];_o(o,Be(s>>>1,n),null,null,g,m,null);break;default:throw new Error('Unable to determine the type of mutate operation for "'.concat(s,'"'))}else switch(s){case wu:var y=t[++u],k=t[++u];null===n[k]&&Lr(n[k]=ei(o,y),n);break;case _u:var _=t[++u],w=t[++u];null===n[w]&&Lr(n[w]=ti(o,_,null),n)}}}function ju(e,t,n,r,i){for(var o=0;o<n.length;o++){var a=n[o],u=n[++o];if(a&i)for(var s="",c=o+1;c<=o+u;c++){var l=n[c];if("string"==typeof l)s+=l;else if("number"==typeof l)if(l<0)s+=R(t[r-l]);else{var h=l>>>2;switch(3&l){case 1:var f=n[++c],d=n[++c],p=e.data[h];"string"==typeof p?_o(t[11],t[h],null,p,f,s,d):lo(e,p,t,f,s,t[11],d,!1);break;case 0:var v=t[h];null!==v&&Xr(t[11],v,s);break;case 2:Bu(e,Ou(e,h),t,s);break;case 3:qu(e,Ou(e,h),r,t)}}}else{var g=n[o+1];if(g>0&&3==(3&g)){var m=Ou(e,g>>>2);t[m.currentCaseLViewIndex]<0&&qu(e,m,r,t)}}o+=u}}function qu(e,t,n,r){var i=r[t.currentCaseLViewIndex];if(null!==i){var o=Fu;i<0&&(i=r[t.currentCaseLViewIndex]=~i,o=-1),ju(e,r,t.update[i],n,o)}}function Bu(e,t,n,r){var i=function(e,t){var n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:var r=function(e,t){var n=vu(t)(parseInt(e,10)),r=yu[n];return void 0!==r?r:"other"}(t,xu);-1===(n=e.cases.indexOf(r))&&"other"!==r&&(n=e.cases.indexOf("other"));break;case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Du(t,n)!==i&&(zu(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){var o=n[t.anchorIdx];o&&Vu(e,t.create[i],n,o)}}function zu(e,t,n){var r=Du(t,n);if(null!==r)for(var i=t.remove[r],o=0;o<i.length;o++){var a=i[o];if(a>0){var u=Be(a,n);null!==u&&wi(n[11],u)}else zu(e,Ou(e,~a),n)}}function Zu(){var e,t,n=[],r=-1;function i(e,n){r=0;var i=Du(e,n);t=null!==i?e.remove[i]:ee}function o(){if(r<t.length){var a=t[r++];return a>0?e[a]:(n.push(r,t),i(e[1].data[~a],e),o())}return 0===n.length?null:(t=n.pop(),r=n.pop(),o())}return function(t,r){for(e=r;n.length;)n.pop();return i(t.value,r),o}}var Hu=/\ufffd(\d+):?\d*\ufffd/gi,Gu=/\ufffd(\d+)\ufffd/,Wu=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ku=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Yu=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Qu=/\uE500/g;function Ju(e,t,n,r,i,o,a){var u=$i(e,r,1,null),s=u<<bu.SHIFT,c=ot();t===c&&(c=null),null===c&&(s|=bu.APPEND_EAGERLY),a&&(s|=bu.COMMENT,function(e){void 0===Zr&&(Zr=e())}(Zu)),i.push(s,null===o?"":o);var l=Ji(e,u,a?32:1,null===o?"":o,null);Eu(n,l);var h=l.index;return at(l,!1),null!==c&&t!==c&&function(e,t){var n=e.insertBeforeIndex;null===n?(gi(Tu,Cu),n=e.insertBeforeIndex=[null,t]):(function(e,t,n){true!=e&&O("Expecting array here",e,true,"==")}(Array.isArray(n)),n.push(t))}(c,h),l}function $u(e,t,n,r,i,o,a){var u=a.match(Hu),s=Ju(e,t,n,o,r,u?null:a,!1);u&&Xu(i,a,s.index,null,0,null)}function Xu(e,t,n,r,i,o){var a=e.length,u=a+1;e.push(null,null);for(var s=a+2,c=t.split(Hu),l=0,h=0;h<c.length;h++){var f=c[h];if(1&h){var d=i+parseInt(f,10);e.push(-1-d),l|=es(d)}else""!==f&&e.push(f)}return e.push(n<<2|(r?1:0)),r&&e.push(r,o),e[a]=l,e[u]=e.length-s,l}function es(e){return 1<<Math.min(e,31)}function ts(e){for(var t,n,r="",i=0,o=!1;null!==(t=Ku.exec(e));)o?t[0]==="\ufffd/*".concat(n,"\ufffd")&&(i=t.index,o=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],o=!0);return r+=e.substr(i)}function ns(e,t,n,r,i,o){var a=0,u={type:i.type,currentCaseLViewIndex:$i(e,t,1,null),anchorIdx:o,cases:[],create:[],remove:[],update:[]};(function(e,t,n){e.push(es(t.mainBinding),2,-1-t.mainBinding,n<<2|2)})(n,i,o),function(e,t,n){var r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,o,u);for(var s=i.values,c=0;c<s.length;c++){for(var l=s[c],h=[],f=0;f<l.length;f++){var d=l[f];if("string"!=typeof d){var p=h.push(d)-1;l[f]="\x3c!--\ufffd".concat(p,"\ufffd--\x3e")}}a=os(e,u,t,n,r,i.cases[c],l.join(""),h)|a}a&&function(e,t,n){e.push(t,1,n<<2|3)}(n,a,o)}function rs(e){for(var t=[],n=[],r=1,i=0,o=is(e=e.replace(Wu,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""})),a=0;a<o.length;){var u=o[a++].trim();1===r&&(u=u.replace(/\s*(?:=)?(\w+)\s*/,"$1")),u.length&&t.push(u);var s=is(o[a++]);t.length>n.length&&n.push(s)}return{type:r,mainBinding:i,cases:t,values:n}}function is(e){if(!e)return[];var t,n=0,r=[],i=[],o=/[{}]/g;for(o.lastIndex=0;t=o.exec(e);){var a=t.index;if("}"==t[0]){if(r.pop(),0==r.length){var u=e.substring(n,a);Wu.test(u)?i.push(rs(u)):i.push(u),n=a+1}}else{if(0==r.length){var s=e.substring(n,a);i.push(s),n=a+1}r.push("{")}}var c=e.substring(n);return i.push(c),i}function os(e,t,n,r,i,o,a,u){var s=[],c=[],l=[];t.cases.push(o),t.create.push(s),t.remove.push(c),t.update.push(l);var h=sr(Ue()).getInertBodyElement(a),f=Nr(h)||h;return f?as(e,t,n,r,s,c,l,f,i,u,0):0}function as(e,t,n,r,i,o,a,u,s,c,l){for(var h=0,f=u.firstChild;f;){var d=$i(e,n,1,null);switch(f.nodeType){case Node.ELEMENT_NODE:var p=f,v=p.tagName.toLowerCase();if(wr.hasOwnProperty(v)){cs(i,_u,v,s,d),e.data[d]=v;for(var g=p.attributes,m=0;m<g.length;m++){var y=g.item(m),k=y.name.toLowerCase();y.value.match(Hu)?Ir.hasOwnProperty(k)&&Xu(a,y.value,d,y.name,0,br[k]?dr:xr[k]?pr:null):ls(i,d,y)}h=as(e,t,n,r,i,o,a,f,d,c,l+1)|h,us(o,d,l)}break;case Node.TEXT_NODE:var _=f.textContent||"",w=_.match(Hu);cs(i,null,w?"":_,s,d),us(o,d,l),w&&(h=Xu(a,_,d,null,0,null)|h);break;case Node.COMMENT_NODE:var b=Gu.exec(f.textContent||"");if(b){var x=c[parseInt(b[1],10)];cs(i,wu,"",s,d),ns(e,n,r,s,x,d),ss(o,d,l)}}f=f.nextSibling}return h}function us(e,t,n){0===n&&e.push(t)}function ss(e,t,n){0===n&&(e.push(~t),e.push(t))}function cs(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,function(e,t,n){return 0|t<<17|n<<1}(0,r,i))}function ls(e,t,n){e.push(t<<1|1,n.name,n.value)}function hs(e,t,n){(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,r=tt(),i=et(),o=20+e,a=Ye(r.consts,t),u=ot();r.firstCreatePass&&function(e,t,n,r,i,o){for(var a=ot(),u=[],s=[],c=[[]],l=function(e){return e.replace(Qu," ")}(i=function(e,t){if(function(e){return-1===e}(t))return ts(e);var n=e.indexOf(":".concat(t,"\ufffd"))+2+t.toString().length,r=e.search(new RegExp("\ufffd\\/\\*\\d+:".concat(t,"\ufffd")));return ts(e.substring(n,r))}(i,o)).split(Yu),h=0;h<l.length;h++){var f=l[h];if(0==(1&h))for(var d=is(f),p=0;p<d.length;p++){var v=d[p];if(0==(1&p)){var g=v;""!==g&&$u(e,a,c[0],u,s,n,g)}else{var m=v;if("object"!=typeof m)throw new Error('Unable to parse ICU expression in "'.concat(i,'" message.'));ns(e,n,s,t,m,Ju(e,a,c[0],n,u,"",!0).index)}}else{var y=47===f.charCodeAt(0),k=(f.charCodeAt(y?1:0),20+Number.parseInt(f.substring(y?2:1)));if(y)c.shift(),at(ot(),!1);else{var _=Pu(e,c[0],k);c.unshift([]),at(_,!0)}}}e.data[r]={create:u,update:s}}(r,null===u?0:u.index,i,o,a,n);var s=r.data[o],c=ui(r,u===i[6]?null:u,i);(function(e,t,n,r){for(var i=e[11],o=0;o<t.length;o++){var a=t[o++],u=t[o],s=(a&bu.COMMENT)===bu.COMMENT,c=(a&bu.APPEND_EAGERLY)===bu.APPEND_EAGERLY,l=a>>>bu.SHIFT,h=e[l];null===h&&(h=e[l]=s?i.createComment(u):$r(i,u)),c&&null!==n&&si(i,n,h,r,!1)}})(i,s.create,c,u&&8&u.type?i[u.index]:null),vt(!0)})(e,t,n),vt(!1)}function fs(e){return function(e){e&&(Fu|=1<<Math.min(Uu,31)),Uu++}(da(et(),dt(),e)),fs}function ds(e){!function(e,t,n){if(Uu>0){var r=e.data[n];ju(e,t,Array.isArray(r)?r:r.update,ft()-Uu-1,Fu)}Fu=0,Uu=0}(tt(),et(),e+20)}function ps(e,t,n,r,i){if(e=C(e),Array.isArray(e))for(var o=0;o<e.length;o++)ps(e[o],t,n,r,i);else{var a=tt(),u=et(),s=Jo(e)?e:C(e.provide),c=Ko(e),l=rt(),h=1048575&l.providerIndexes,f=l.directiveStart,d=l.providerIndexes>>20;if(Jo(e)||!e.multi){var p=new Ut(c,i,ka),v=ms(s,t,i?h:h+d,f);-1===v?(en(Qt(l,u),a,s),vs(a,e,t.length),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(p),u.push(p)):(n[v]=p,u[v]=p)}else{var g=ms(s,t,h+d,f),m=ms(s,t,h,h+d),y=g>=0&&n[g],k=m>=0&&n[m];if(i&&!k||!i&&!y){en(Qt(l,u),a,s);var _=function(e,t,n,r,i){var o=new Ut(e,n,ka);return o.multi=[],o.index=t,o.componentProviders=0,gs(o,i,r&&!n),o}(i?ks:ys,n.length,i,r,c);!i&&k&&(n[m].providerFactory=_),vs(a,e,t.length,0),t.push(s),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(_),u.push(_)}else vs(a,e,g>-1?g:m,gs(n[i?m:g],c,!i&&r));!i&&r&&k&&n[m].componentProviders++}}}function vs(e,t,n,r){var i=Jo(t);if(i||function(e){return!!e.useClass}(t)){var o=(t.useClass||t).prototype.ngOnDestroy;if(o){var a=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){var u=a.indexOf(n);-1===u?a.push(n,[r,o]):a[u+1].push(r,o)}else a.push(n,o)}}}function gs(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function ms(e,t,n,r){for(var i=n;i<r;i++)if(t[i]===e)return i;return-1}function ys(e,t,n,r){return _s(this.multi,[])}function ks(e,t,n,r){var i,o=this.multi;if(this.providerFactory){var a=this.providerFactory.componentProviders,u=cn(n,n[1],this.providerFactory.index,r);_s(o,i=u.slice(0,a));for(var s=a;s<u.length;s++)i.push(u[s])}else _s(o,i=[]);return i}function _s(e,t){for(var n=0;n<e.length;n++)t.push((0,e[n])());return t}function ws(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){n.providersResolver=function(n,r){return function(e,t,n){var r=tt();if(r.firstCreatePass){var i=Te(e);ps(n,r.data,r.blueprint,i,!0),ps(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}}var bs=function e(){d(this,e)},xs=function(){function e(){d(this,e)}return f(e,[{key:"resolveComponentFactory",value:function(e){throw function(e){var t=Error("No component factory found for ".concat(w(e),". Did you add it to @NgModule.entryComponents?"));return t.ngComponent=e,t}(e)}}]),e}(),Is=function(){var e=function e(){d(this,e)};return e.NULL=new xs,e}();function Ts(){}function Cs(e,t){return new Ss(ze(e,t))}var Es=function(){return Cs(rt(),et())},Ss=function(){var e=function e(t){d(this,e),this.nativeElement=t};return e.__NG_ELEMENT_ID__=Es,e}();function Rs(e){return e instanceof Ss?e.nativeElement:e}var As=function e(){d(this,e)},Ns=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=function(){return Os()},e}(),Os=function(){var e=et(),t=Ge(rt().index,e);return function(e){return e[11]}(_e(t)?t:e)},Ps=function(){var e=function e(){d(this,e)};return e.\u0275prov=P({token:e,providedIn:"root",factory:function(){return null}}),e}(),Ds=function e(t){d(this,e),this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")},Ls=new Ds("12.2.14"),Ms=function(){function e(){d(this,e)}return f(e,[{key:"supports",value:function(e){return la(e)}},{key:"create",value:function(e){return new Us(e)}}]),e}(),Fs=function(e,t){return t},Us=function(){function e(t){d(this,e),this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Fs}return f(e,[{key:"forEachItem",value:function(e){var t;for(t=this._itHead;null!==t;t=t._next)e(t)}},{key:"forEachOperation",value:function(e){for(var t=this._itHead,n=this._removalsHead,r=0,i=null;t||n;){var o=!n||t&&t.currentIndex<Bs(n,r,i)?t:n,a=Bs(o,r,i),u=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);var s=a-r,c=u-r;if(s!=c){for(var l=0;l<s;l++){var h=l<i.length?i[l]:i[l]=0,f=h+l;c<=f&&f<s&&(i[l]=h+1)}i[o.previousIndex]=c-s}}a!==u&&e(o,a,u)}}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachMovedItem",value:function(e){var t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"forEachIdentityChange",value:function(e){var t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}},{key:"diff",value:function(e){if(null==e&&(e=[]),!la(e))throw new Error("Error trying to diff '".concat(w(e),"'. Only arrays and iterables are allowed"));return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n,r,i,o=this._itHead,a=!1;if(Array.isArray(e)){this.length=e.length;for(var u=0;u<this.length;u++)r=e[u],i=this._trackByFn(u,r),null!==o&&Object.is(o.trackById,i)?(a&&(o=this._verifyReinsertion(o,r,i,u)),Object.is(o.item,r)||this._addIdentityChange(o,r)):(o=this._mismatch(o,r,i,u),a=!0),o=o._next}else n=0,function(e,t){if(Array.isArray(e))for(var n=0;n<e.length;n++)t(e[n]);else for(var r,i=e[sa()]();!(r=i.next()).done;)t(r.value)}(e,function(e){i=t._trackByFn(n,e),null!==o&&Object.is(o.trackById,i)?(a&&(o=t._verifyReinsertion(o,e,i,n)),Object.is(o.item,e)||t._addIdentityChange(o,e)):(o=t._mismatch(o,e,i,n),a=!0),o=o._next,n++}),this.length=n;return this._truncate(o),this.collection=e,this.isDirty}},{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}},{key:"_reset",value:function(){if(this.isDirty){var e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}},{key:"_mismatch",value:function(e,t,n,r){var i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new Vs(t,n),i,r),e}},{key:"_verifyReinsertion",value:function(e,t,n,r){var i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}},{key:"_truncate",value:function(e){for(;null!==e;){var t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}},{key:"_reinsertAfter",value:function(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);var r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_moveAfter",value:function(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}},{key:"_addAfter",value:function(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}},{key:"_insertAfter",value:function(e,t,n){var r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new qs),this._linkedRecords.put(e),e.currentIndex=n,e}},{key:"_remove",value:function(e){return this._addToRemovals(this._unlink(e))}},{key:"_unlink",value:function(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);var t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}},{key:"_addToMoves",value:function(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}},{key:"_addToRemovals",value:function(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new qs),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}},{key:"_addIdentityChange",value:function(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}]),e}(),Vs=function e(t,n){d(this,e),this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null},js=function(){function e(){d(this,e),this._head=null,this._tail=null}return f(e,[{key:"add",value:function(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}},{key:"get",value:function(e,t){var n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}},{key:"remove",value:function(e){var t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}]),e}(),qs=function(){function e(){d(this,e),this.map=new Map}return f(e,[{key:"put",value:function(e){var t=e.trackById,n=this.map.get(t);n||(n=new js,this.map.set(t,n)),n.add(e)}},{key:"get",value:function(e,t){var n=this.map.get(e);return n?n.get(e,t):null}},{key:"remove",value:function(e){var t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}},{key:"isEmpty",get:function(){return 0===this.map.size}},{key:"clear",value:function(){this.map.clear()}}]),e}();function Bs(e,t,n){var r=e.previousIndex;if(null===r)return r;var i=0;return n&&r<n.length&&(i=n[r]),r+t+i}var zs=function(){function e(){d(this,e)}return f(e,[{key:"supports",value:function(e){return e instanceof Map||ha(e)}},{key:"create",value:function(){return new Zs}}]),e}(),Zs=function(){function e(){d(this,e),this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}return f(e,[{key:"isDirty",get:function(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}},{key:"forEachItem",value:function(e){var t;for(t=this._mapHead;null!==t;t=t._next)e(t)}},{key:"forEachPreviousItem",value:function(e){var t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}},{key:"forEachChangedItem",value:function(e){var t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}},{key:"forEachAddedItem",value:function(e){var t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}},{key:"forEachRemovedItem",value:function(e){var t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}},{key:"diff",value:function(e){if(e){if(!(e instanceof Map||ha(e)))throw new Error("Error trying to diff '".concat(w(e),"'. Only maps and objects are allowed"))}else e=new Map;return this.check(e)?this:null}},{key:"onDestroy",value:function(){}},{key:"check",value:function(e){var t=this;this._reset();var n=this._mapHead;if(this._appendAfter=null,this._forEach(e,function(e,r){if(n&&n.key===r)t._maybeAddToChanges(n,e),t._appendAfter=n,n=n._next;else{var i=t._getOrCreateRecordForKey(r,e);n=t._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(var r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}},{key:"_insertBeforeOrAppend",value:function(e,t){if(e){var n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}},{key:"_getOrCreateRecordForKey",value:function(e,t){if(this._records.has(e)){var n=this._records.get(e);this._maybeAddToChanges(n,t);var r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}var o=new Hs(e);return this._records.set(e,o),o.currentValue=t,this._addToAdditions(o),o}},{key:"_reset",value:function(){if(this.isDirty){var e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}},{key:"_maybeAddToChanges",value:function(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}},{key:"_addToAdditions",value:function(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}},{key:"_addToChanges",value:function(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}},{key:"_forEach",value:function(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(function(n){return t(e[n],n)})}}]),e}(),Hs=function e(t){d(this,e),this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null};function Gs(){return new Ws([new Ms])}var Ws=function(){var e=function(){function e(t){d(this,e),this.factories=t}return f(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(null!=t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"' of type '").concat(function(e){return e.name||typeof e}(e),"'"))}}],[{key:"create",value:function(t,n){if(null!=n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Gs())},deps:[[e,new Gn,new Hn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:Gs}),e}();function Ks(){return new Ys([new zs])}var Ys=function(){var e=function(){function e(t){d(this,e),this.factories=t}return f(e,[{key:"find",value:function(e){var t=this.factories.find(function(t){return t.supports(e)});if(t)return t;throw new Error("Cannot find a differ supporting object '".concat(e,"'"))}}],[{key:"create",value:function(t,n){if(n){var r=n.factories.slice();t=t.concat(r)}return new e(t)}},{key:"extend",value:function(t){return{provide:e,useFactory:function(n){return e.create(t,n||Ks())},deps:[[e,new Gn,new Hn]]}}}]),e}();return e.\u0275prov=P({token:e,providedIn:"root",factory:Ks}),e}();function Qs(e,t,n,r){for(var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];null!==n;){var o=t[n.index];if(null!==o&&r.push(qe(o)),we(o))for(var u=10;u<o.length;u++){var s=o[u],c=s[1].firstChild;null!==c&&Qs(s[1],s,c,r)}var l=n.type;if(8&l)Qs(e,t,n.child,r);else if(32&l)for(var h=Gr(n,t),f=void 0;f=h();)r.push(f);else if(16&l){var d=ki(t,n);if(Array.isArray(d))r.push.apply(r,a(d));else{var p=Wr(t[16]);Qs(p[1],p,d,r,!0)}}n=i?n.projectionNext:n.next}return r}var Js=function(){function e(t,n){d(this,e),this._lView=t,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}return f(e,[{key:"rootNodes",get:function(){var e=this._lView,t=e[1];return Qs(t,e,t.firstChild,[])}},{key:"context",get:function(){return this._lView[8]},set:function(e){this._lView[8]=e}},{key:"destroyed",get:function(){return 256==(256&this._lView[2])}},{key:"destroy",value:function(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){var e=this._lView[3];if(we(e)){var t=e[8],n=t?t.indexOf(this):-1;n>-1&&(ri(e,n),In(t,n))}this._attachedToViewContainer=!1}ii(this._lView[1],this._lView)}},{key:"onDestroy",value:function(e){so(this._lView[1],this._lView,null,e)}},{key:"markForCheck",value:function(){So(this._cdRefInjectingView||this._lView)}},{key:"detach",value:function(){this._lView[2]&=-129}},{key:"reattach",value:function(){this._lView[2]|=128}},{key:"detectChanges",value:function(){Ro(this._lView[1],this._lView,this.context)}},{key:"checkNoChanges",value:function(){!function(e,t,n){lt(!0);try{Ro(e,t,n)}finally{lt(!1)}}(this._lView[1],this._lView,this.context)}},{key:"attachToViewContainerRef",value:function(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}},{key:"detachFromAppRef",value:function(){var e;this._appRef=null,xi(this._lView[1],e=this._lView,e[11],2,null,null)}},{key:"attachToAppRef",value:function(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}]),e}(),$s=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e))._view=e,r}return f(n,[{key:"detectChanges",value:function(){Ao(this._view)}},{key:"checkNoChanges",value:function(){!function(e){lt(!0);try{Ao(e)}finally{lt(!1)}}(this._view)}},{key:"context",get:function(){return null}}]),n}(Js),Xs=function(e){return function(e,t,n){if(xe(e)&&!n){var r=Ge(e.index,t);return new Js(r,r)}return 47&e.type?new Js(t[16],t):null}(rt(),et(),16==(16&e))},ec=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=Xs,e}(),tc=[new zs],nc=new Ws([new Ms]),rc=new Ys(tc),ic=function(){return uc(rt(),et())},oc=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=ic,e}(),ac=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this))._declarationLView=e,o._declarationTContainer=r,o.elementRef=i,o}return f(n,[{key:"createEmbeddedView",value:function(e){var t=this._declarationTContainer.tViews,n=Yi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];var r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Xi(t,n,e),new Js(n)}}]),n}(oc);function uc(e,t){return 4&e.type?new ac(t,e,Cs(e,t)):null}var sc=function e(){d(this,e)},cc=function e(){d(this,e)},lc=function(){return vc(rt(),et())},hc=function(){var e=function e(){d(this,e)};return e.__NG_ELEMENT_ID__=lc,e}(),fc=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this))._lContainer=e,o._hostTNode=r,o._hostLView=i,o}return f(n,[{key:"element",get:function(){return Cs(this._hostTNode,this._hostLView)}},{key:"injector",get:function(){return new fn(this._hostTNode,this._hostLView)}},{key:"parentInjector",get:function(){var e=Xt(this._hostTNode,this._hostLView);if(Zt(e)){var t=Gt(e,this._hostLView),n=Ht(e);return new fn(t[1].data[n+8],t)}return new fn(null,this._hostLView)}},{key:"clear",value:function(){for(;this.length>0;)this.remove(this.length-1)}},{key:"get",value:function(e){var t=dc(this._lContainer);return null!==t&&t[e]||null}},{key:"length",get:function(){return this._lContainer.length-10}},{key:"createEmbeddedView",value:function(e,t,n){var r=e.createEmbeddedView(t||{});return this.insert(r,n),r}},{key:"createComponent",value:function(e,t,n,r,i){var o=n||this.parentInjector;if(!i&&null==e.ngModule&&o){var a=o.get(sc,null);a&&(i=a)}var u=e.create(o,r,void 0,i);return this.insert(u.hostView,t),u}},{key:"insert",value:function(e,t){var r=e._lView,i=r[1];if(we(r[3])){var o=this.indexOf(e);if(-1!==o)this.detach(o);else{var a=r[3],u=new n(a,a[6],a[3]);u.detach(u.indexOf(e))}}var s=this._adjustIndex(t),c=this._lContainer;!function(e,t,n,r){var i=10+r,o=n.length;r>0&&(n[i-1][4]=t),r<o-10?(t[4]=n[i],xn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;var a=t[17];null!==a&&n!==a&&function(e,t){var n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(a,t);var u=t[19];null!==u&&u.insertView(e),t[2]|=128}(i,r,c,s);var l=_i(s,c),h=r[11],f=hi(h,c[7]);return null!==f&&function(e,t,n,r,i,o){r[0]=i,r[6]=t,xi(e,r,n,1,i,o)}(i,c[6],h,r,f,l),e.attachToViewContainerRef(),xn(pc(c),s,e),e}},{key:"move",value:function(e,t){return this.insert(e,t)}},{key:"indexOf",value:function(e){var t=dc(this._lContainer);return null!==t?t.indexOf(e):-1}},{key:"remove",value:function(e){var t=this._adjustIndex(e,-1),n=ri(this._lContainer,t);n&&(In(pc(this._lContainer),t),ii(n[1],n))}},{key:"detach",value:function(e){var t=this._adjustIndex(e,-1),n=ri(this._lContainer,t);return n&&null!=In(pc(this._lContainer),t)?new Js(n):null}},{key:"_adjustIndex",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return null==e?this.length+t:e}}]),n}(hc);function dc(e){return e[8]}function pc(e){return e[8]||(e[8]=[])}function vc(e,t){var n,r=t[e.index];if(we(r))n=r;else{var i;if(8&e.type)i=qe(r);else{var o=t[11];i=o.createComment("");var a=ze(e,t);si(o,hi(o,a),i,function(e,t){return Ve(e)?e.nextSibling(t):t.nextSibling}(o,a),!1)}t[e.index]=n=xo(r,t,i,e),Eo(t,n)}return new fc(n,e,t)}var gc={},mc=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).ngModule=e,r}return f(n,[{key:"resolveComponentFactory",value:function(e){var t=ye(e);return new _c(t,this.ngModule)}}]),n}(Is);function yc(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}var kc=new yn("SCHEDULER_TOKEN",{providedIn:"root",factory:function(){return Br}}),_c=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).componentDef=e,i.ngModule=r,i.componentType=e.type,i.selector=e.selectors.map(Ui).join(","),i.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],i.isBoundToModule=!!r,i}return f(n,[{key:"inputs",get:function(){return yc(this.componentDef.inputs)}},{key:"outputs",get:function(){return yc(this.componentDef.outputs)}},{key:"create",value:function(e,t,n,r){var i,o,a=(r=r||this.ngModule)?function(e,t){return{get:function(n,r,i){var o=e.get(n,gc,i);return o!==gc||r===gc?o:t.get(n,r,i)}}}(e,r.injector):e,u=a.get(As,je),s=a.get(Ps,null),c=u.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=n?function(e,t,n){if(Ve(e))return e.selectRootElement(t,n===K.ShadowDom);var r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(c,n,this.componentDef.encapsulation):ti(u.createRenderer(null,this.componentDef),l,function(e){var t=e.toLowerCase();return"svg"===t?Me:"math"===t?"http://www.w3.org/1998/MathML/":null}(l)),f=this.componentDef.onPush?576:528,d={components:[],scheduler:Br,clean:Oo,playerHandler:null,flags:0},p=uo(0,null,null,1,0,null,null,null,null,null),v=Yi(null,p,d,f,null,null,u,c,s,a);bt(v);try{var g=function(e,t,n,r,i,o){var a=n[1];n[20]=e;var u=Qi(a,20,2,"#host",null),s=u.mergedAttrs=t.hostAttrs;null!==s&&(Fo(u,s,!0),null!==e&&(Vt(i,e,s),null!==u.classes&&Ci(i,e,u.classes),null!==u.styles&&Ti(i,e,u.styles)));var c=r.createRenderer(e,t),l=Yi(n,ao(t),null,t.onPush?64:16,n[20],u,r,c,null,null);return a.firstCreatePass&&(en(Qt(u,n),a,t.type),vo(a,u),mo(u,n.length,1)),Eo(n,l),n[20]=l}(h,this.componentDef,v,u,c);if(h)if(n)Vt(c,h,["ng-version",Ls.full]);else{var m=function(e){for(var t=[],n=[],r=1,i=2;r<e.length;){var o=e[r];if("string"==typeof o)2===i?""!==o&&t.push(o,e[++r]):8===i&&n.push(o);else{if(!Pi(i))break;i=o}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]),y=m.attrs,k=m.classes;y&&Vt(c,h,y),k&&k.length>0&&Ci(c,h,k.join(" "))}if(o=Ze(p,20),void 0!==t)for(var _=o.projection=[],w=0;w<this.ngContentSelectors.length;w++){var b=t[w];_.push(null!=b?Array.from(b):null)}i=function(e,t,n,r,i){var o=n[1],a=function(e,t,n){var r=rt();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),yo(e,r,t,$i(e,t,1,null),n));var i=cn(t,e,r.directiveStart,r);Lr(i,t);var o=ze(r,t);return o&&Lr(o,t),i}(o,n,t);if(r.components.push(a),e[8]=a,i&&i.forEach(function(e){return e(a,t)}),t.contentQueries){var u=rt();t.contentQueries(1,a,u.directiveStart)}var s=rt();return!o.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(Rt(s.index),fo(n[1],s,0,s.directiveStart,s.directiveEnd,t),po(t,a)),a}(g,this.componentDef,v,d,[ta]),Xi(p,v,null)}finally{Et()}return new wc(this.componentType,i,Cs(o,v),v,o)}}]),n}(bs),wc=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a){var u;return d(this,n),(u=t.call(this)).location=i,u._rootLView=o,u._tNode=a,u.instance=r,u.hostView=u.changeDetectorRef=new $s(o),u.componentType=e,u}return f(n,[{key:"injector",get:function(){return new fn(this._tNode,this._rootLView)}},{key:"destroy",value:function(){this.hostView.destroy()}},{key:"onDestroy",value:function(e){this.hostView.onDestroy(e)}}]),n}(function(){return function e(){d(this,e)}}()),bc=new Map,xc=function(e){p(n,e);var t=v(n);function n(e,r){var i;d(this,n),(i=t.call(this))._parent=r,i._bootstrapComponents=[],i.injector=m(i),i.destroyCbs=[],i.componentFactoryResolver=new mc(m(i));var o=ke(e),a=e[oe]||null;return a&&Iu(a),i._bootstrapComponents=zr(o.bootstrap),i._r3Injector=Ho(e,r,[{provide:sc,useValue:m(i)},{provide:Is,useValue:i.componentFactoryResolver}],w(e)),i._r3Injector._resolveInjectorDefTypes(),i.instance=i.get(e),i}return f(n,[{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ea.THROW_IF_NOT_FOUND,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:z.Default;return e===ea||e===sc||e===Vo?this:this._r3Injector.get(e,t,n)}},{key:"destroy",value:function(){var e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(function(e){return e()}),this.destroyCbs=null}},{key:"onDestroy",value:function(e){this.destroyCbs.push(e)}}]),n}(sc),Ic=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).moduleType=e,null!==ke(e)&&function(e){var t=new Set;!function e(n){var r=ke(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error("Duplicate module registered for ".concat(e," - ").concat(w(t)," vs ").concat(w(t.name)))}(i,bc.get(i),n),bc.set(i,n));var o,a=s(zr(r.imports));try{for(a.s();!(o=a.n()).done;){var u=o.value;t.has(u)||(t.add(u),e(u))}}catch(c){a.e(c)}finally{a.f()}}(e)}(e),r}return f(n,[{key:"create",value:function(e){return new xc(this.moduleType,e)}}]),n}(cc);function Tc(e,t,n,r){return Rc(et(),ht(),e,t,n,r)}function Cc(e,t,n,r,i){return function(e,t,n,r,i,o,a){var u=t+n;return pa(e,u,i,o)?fa(e,u+2,a?r.call(a,i,o):r(i,o)):Sc(e,u+2)}(et(),ht(),e,t,n,r,i)}function Ec(e,t,n,r,i,o){return function(e,t,n,r,i,o,a,u){var s=t+n;return function(e,t,n,r,i){var o=pa(e,t,n,r);return da(e,t+2,i)||o}(e,s,i,o,a)?fa(e,s+3,u?r.call(u,i,o,a):r(i,o,a)):Sc(e,s+3)}(et(),ht(),e,t,n,r,i,o)}function Sc(e,t){var n=e[t];return n===Vi?void 0:n}function Rc(e,t,n,r,i,o){var a=t+n;return da(e,a,i)?fa(e,a+1,o?r.call(o,i):r(i)):Sc(e,a+1)}function Ac(e,t){var n,r=tt(),i=e+20;r.firstCreatePass?(n=function(e,t){if(t)for(var n=t.length-1;n>=0;n--){var r=t[n];if(e===r.name)return r}throw new S("302","The pipe '".concat(e,"' could not be found!"))}(t,r.pipeRegistry),r.data[i]=n,n.onDestroy&&(r.destroyHooks||(r.destroyHooks=[])).push(i,n.onDestroy)):n=r.data[i];var o=n.factory||(n.factory=Ee(n.type)),a=Z(ka);try{var u=Kt(!1),s=o();return Kt(u),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(r,et(),i,s),s}finally{Z(a)}}function Nc(e,t,n){var r=e+20,i=et(),o=He(i,r);return function(e,t){return ca.isWrapped(t)&&(t=ca.unwrap(t),e[ft()]=Vi),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?Rc(i,ht(),t,o.transform,n,o):o.transform(n))}function Oc(e){return function(t){setTimeout(e,void 0,t)}}var Pc=function(e){p(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return d(this,n),(e=t.call(this)).__isAsync=r,e}return f(n,[{key:"emit",value:function(e){i(b(n.prototype),"next",this).call(this,e)}},{key:"subscribe",value:function(e,t,r){var o,a,s,c=e,l=t||function(){return null},h=r;if(e&&"object"==typeof e){var f=e;c=null===(o=f.next)||void 0===o?void 0:o.bind(f),l=null===(a=f.error)||void 0===a?void 0:a.bind(f),h=null===(s=f.complete)||void 0===s?void 0:s.bind(f)}this.__isAsync&&(l=Oc(l),c&&(c=Oc(c)),h&&(h=Oc(h)));var d=i(b(n.prototype),"subscribe",this).call(this,{next:c,error:l,complete:h});return e instanceof u.w&&e.add(d),d}}]),n}(o.xQ);function Dc(){return this._results[sa()]()}var Lc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];d(this,e),this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;var n=sa(),r=e.prototype;r[n]||(r[n]=Dc)}return f(e,[{key:"changes",get:function(){return this._changes||(this._changes=new Pc)}},{key:"get",value:function(e){return this._results[e]}},{key:"map",value:function(e){return this._results.map(e)}},{key:"filter",value:function(e){return this._results.filter(e)}},{key:"find",value:function(e){return this._results.find(e)}},{key:"reduce",value:function(e,t){return this._results.reduce(e,t)}},{key:"forEach",value:function(e){this._results.forEach(e)}},{key:"some",value:function(e){return this._results.some(e)}},{key:"toArray",value:function(){return this._results.slice()}},{key:"toString",value:function(){return this._results.toString()}},{key:"reset",value:function(e,t){var n=this;n.dirty=!1;var r=wn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var i=e[r],o=t[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}},{key:"notifyOnChanges",value:function(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}},{key:"setDirty",value:function(){this.dirty=!0}},{key:"destroy",value:function(){this.changes.complete(),this.changes.unsubscribe()}}]),e}();Symbol;var Mc=function(){function e(t){d(this,e),this.queryList=t,this.matches=null}return f(e,[{key:"clone",value:function(){return new e(this.queryList)}},{key:"setDirty",value:function(){this.queryList.setDirty()}}]),e}(),Fc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.queries=t}return f(e,[{key:"createEmbeddedView",value:function(t){var n=t.queries;if(null!==n){for(var r=null!==t.contentQueries?t.contentQueries[0]:n.length,i=[],o=0;o<r;o++){var a=n.getByIndex(o);i.push(this.queries[a.indexInDeclarationView].clone())}return new e(i)}return null}},{key:"insertView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"detachView",value:function(e){this.dirtyQueriesWithMatches(e)}},{key:"dirtyQueriesWithMatches",value:function(e){for(var t=0;t<this.queries.length;t++)null!==Jc(e,t).matches&&this.queries[t].setDirty()}}]),e}(),Uc=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.predicate=t,this.flags=n,this.read=r},Vc=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];d(this,e),this.queries=t}return f(e,[{key:"elementStart",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}},{key:"elementEnd",value:function(e){for(var t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}},{key:"embeddedTView",value:function(t){for(var n=null,r=0;r<this.length;r++){var i=null!==n?n.length:0,o=this.getByIndex(r).embeddedTView(t,i);o&&(o.indexInDeclarationView=r,null!==n?n.push(o):n=[o])}return null!==n?new e(n):null}},{key:"template",value:function(e,t){for(var n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}},{key:"getByIndex",value:function(e){return this.queries[e]}},{key:"length",get:function(){return this.queries.length}},{key:"track",value:function(e){this.queries.push(e)}}]),e}(),jc=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;d(this,e),this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}return f(e,[{key:"elementStart",value:function(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}},{key:"elementEnd",value:function(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}},{key:"template",value:function(e,t){this.elementStart(e,t)}},{key:"embeddedTView",value:function(t,n){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,n),new e(this.metadata)):null}},{key:"isApplyingToNode",value:function(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){for(var t=this._declarationNodeIndex,n=e.parent;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}},{key:"matchTNode",value:function(e,t){var n=this.metadata.predicate;if(Array.isArray(n))for(var r=0;r<n.length;r++){var i=n[r];this.matchTNodeWithReadOption(e,t,qc(t,i)),this.matchTNodeWithReadOption(e,t,sn(t,e,i,!1,!1))}else n===oc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,sn(t,e,n,!1,!1))}},{key:"matchTNodeWithReadOption",value:function(e,t,n){if(null!==n){var r=this.metadata.read;if(null!==r)if(r===Ss||r===hc||r===oc&&4&t.type)this.addMatch(t.index,-2);else{var i=sn(t,e,r,!1,!1);null!==i&&this.addMatch(t.index,i)}else this.addMatch(t.index,n)}}},{key:"addMatch",value:function(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}]),e}();function qc(e,t){var n=e.localNames;if(null!==n)for(var r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Bc(e,t,n,r){return-1===n?function(e,t){return 11&e.type?Cs(e,t):4&e.type?uc(e,t):null}(t,e):-2===n?function(e,t,n){return n===Ss?Cs(t,e):n===oc?uc(t,e):n===hc?vc(t,e):void 0}(e,t,r):cn(e,e[1],n,t)}function zc(e,t,n,r){var i=t[19].queries[r];if(null===i.matches){for(var o=e.data,a=n.matches,u=[],s=0;s<a.length;s+=2){var c=a[s];u.push(c<0?null:Bc(t,o[c],a[s+1],n.metadata.read))}i.matches=u}return i.matches}function Zc(e,t,n,r){var i=e.queries.getByIndex(n),o=i.matches;if(null!==o)for(var a=zc(e,t,i,n),u=0;u<o.length;u+=2){var s=o[u];if(s>0)r.push(a[u/2]);else{for(var c=o[u+1],l=t[-s],h=10;h<l.length;h++){var f=l[h];f[17]===f[3]&&Zc(f[1],f,c,r)}if(null!==l[9])for(var d=l[9],p=0;p<d.length;p++){var v=d[p];Zc(v[1],v,c,r)}}}return r}function Hc(e){var t=et(),n=tt(),r=yt();kt(r+1);var i=Jc(n,r);if(e.dirty&&We(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{var o=i.crossesNgTemplate?Zc(n,t,r,[]):zc(n,t,i,r);e.reset(o,Rs),e.notifyOnChanges()}return!0}return!1}function Gc(e,t,n){var r=tt();r.firstCreatePass&&(Qc(r,new Uc(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Yc(r,et(),t)}function Wc(e,t,n,r){var i=tt();if(i.firstCreatePass){var o=rt();Qc(i,new Uc(t,n,r),o.index),function(e,t){var n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Yc(i,et(),n)}function Kc(){return e=et(),t=yt(),e[19].queries[t].queryList;var e,t}function Yc(e,t,n){var r=new Lc(4==(4&n));so(e,t,r,r.destroy),null===t[19]&&(t[19]=new Fc),t[19].queries.push(new Mc(r))}function Qc(e,t,n){null===e.queries&&(e.queries=new Vc),e.queries.track(new jc(t,n))}function Jc(e,t){return e.queries.getByIndex(t)}function $c(e,t){return uc(e,t)}var Xc=new yn("Application Initializer"),el=function(){var e=function(){function e(t){var n=this;d(this,e),this.appInits=t,this.resolve=Ts,this.reject=Ts,this.initialized=!1,this.done=!1,this.donePromise=new Promise(function(e,t){n.resolve=e,n.reject=t})}return f(e,[{key:"runInitializers",value:function(){var e=this;if(!this.initialized){var t=[],n=function(){e.done=!0,e.resolve()};if(this.appInits)for(var r=function(n){var r=e.appInits[n]();if(Sa(r))t.push(r);else if(Aa(r)){var i=new Promise(function(e,t){r.subscribe({complete:e,error:t})});t.push(i)}},i=0;i<this.appInits.length;i++)r(i);Promise.all(t).then(function(){n()}).catch(function(t){e.reject(t)}),0===t.length&&n(),this.initialized=!0}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Un(Xc,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),tl=new yn("AppId"),nl={provide:tl,useFactory:function(){return"".concat(rl()).concat(rl()).concat(rl())},deps:[]};function rl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}var il=new yn("Platform Initializer"),ol=new yn("Platform ID"),al=new yn("appBootstrapListener"),ul=function(){var e=function(){function e(){d(this,e)}return f(e,[{key:"log",value:function(e){console.log(e)}},{key:"warn",value:function(e){console.warn(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),sl=new yn("LocaleId"),cl=new yn("DefaultCurrencyCode"),ll=function e(t,n){d(this,e),this.ngModuleFactory=t,this.componentFactories=n},hl=function(e){return new Ic(e)},fl=hl,dl=function(e){return Promise.resolve(hl(e))},pl=function(e){var t=hl(e),n=zr(ke(e).declarations).reduce(function(e,t){var n=ye(t);return n&&e.push(new _c(n)),e},[]);return new ll(t,n)},vl=pl,gl=function(e){return Promise.resolve(pl(e))},ml=function(){var e=function(){function e(){d(this,e),this.compileModuleSync=fl,this.compileModuleAsync=dl,this.compileModuleAndAllComponentsSync=vl,this.compileModuleAndAllComponentsAsync=gl}return f(e,[{key:"clearCache",value:function(){}},{key:"clearCacheFor",value:function(e){}},{key:"getModuleId",value:function(e){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),yl=Promise.resolve(0);function kl(e){"undefined"==typeof Zone?yl.then(function(){e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}var _l=function(){function e(t){var n=t.enableLongStackTrace,r=void 0!==n&&n,i=t.shouldCoalesceEventChangeDetection,o=void 0!==i&&i,a=t.shouldCoalesceRunChangeDetection,u=void 0!==a&&a;if(d(this,e),this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Pc(!1),this.onMicrotaskEmpty=new Pc(!1),this.onStable=new Pc(!1),this.onError=new Pc(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();var s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!u&&o,s.shouldCoalesceRunChangeDetection=u,s.lastRequestAnimationFrameId=-1,s.nativeRequestAnimationFrame=function(){var e=$.requestAnimationFrame,t=$.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){var n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);var r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){var t=function(){!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call($,function(){e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",function(){e.lastRequestAnimationFrameId=-1,xl(e),e.isCheckStableRunning=!0,bl(e),e.isCheckStableRunning=!1},void 0,function(){},function(){})),e.fakeTopEventTask.invoke()}),xl(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:function(n,r,i,o,a,u){try{return Il(e),n.invokeTask(i,o,a,u)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||e.shouldCoalesceRunChangeDetection)&&t(),Tl(e)}},onInvoke:function(n,r,i,o,a,u,s){try{return Il(e),n.invoke(i,o,a,u,s)}finally{e.shouldCoalesceRunChangeDetection&&t(),Tl(e)}},onHasTask:function(t,n,r,i){t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,xl(e),bl(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:function(t,n,r,i){return t.handleError(r,i),e.runOutsideAngular(function(){return e.onError.emit(i)}),!1}})}(s)}return f(e,[{key:"run",value:function(e,t,n){return this._inner.run(e,t,n)}},{key:"runTask",value:function(e,t,n,r){var i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,wl,Ts,Ts);try{return i.runTask(o,t,n)}finally{i.cancelTask(o)}}},{key:"runGuarded",value:function(e,t,n){return this._inner.runGuarded(e,t,n)}},{key:"runOutsideAngular",value:function(e){return this._outer.run(e)}}],[{key:"isInAngularZone",value:function(){return!0===Zone.current.get("isAngularZone")}},{key:"assertInAngularZone",value:function(){if(!e.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}},{key:"assertNotInAngularZone",value:function(){if(e.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}}]),e}(),wl={};function bl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(function(){return e.onStable.emit(null)})}finally{e.isStable=!0}}}function xl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function Il(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function Tl(e){e._nesting--,bl(e)}var Cl=function(){function e(){d(this,e),this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Pc,this.onMicrotaskEmpty=new Pc,this.onStable=new Pc,this.onError=new Pc}return f(e,[{key:"run",value:function(e,t,n){return e.apply(t,n)}},{key:"runGuarded",value:function(e,t,n){return e.apply(t,n)}},{key:"runOutsideAngular",value:function(e){return e()}},{key:"runTask",value:function(e,t,n,r){return e.apply(t,n)}}]),e}(),El=function(){var e=function(){function e(t){var n=this;d(this,e),this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(function(){n.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}return f(e,[{key:"_watchAngularEvents",value:function(){var e=this;this._ngZone.onUnstable.subscribe({next:function(){e._didWork=!0,e._isZoneStable=!1}}),this._ngZone.runOutsideAngular(function(){e._ngZone.onStable.subscribe({next:function(){_l.assertNotInAngularZone(),kl(function(){e._isZoneStable=!0,e._runCallbacksIfReady()})}})})}},{key:"increasePendingRequestCount",value:function(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}},{key:"decreasePendingRequestCount",value:function(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}},{key:"isStable",value:function(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}},{key:"_runCallbacksIfReady",value:function(){var e=this;if(this.isStable())kl(function(){for(;0!==e._callbacks.length;){var t=e._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(e._didWork)}e._didWork=!1});else{var t=this.getPendingTasks();this._callbacks=this._callbacks.filter(function(e){return!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)}),this._didWork=!0}}},{key:"getPendingTasks",value:function(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(function(e){return{source:e.source,creationLocation:e.creationLocation,data:e.data}}):[]}},{key:"addCallback",value:function(e,t,n){var r=this,i=-1;t&&t>0&&(i=setTimeout(function(){r._callbacks=r._callbacks.filter(function(e){return e.timeoutId!==i}),e(r._didWork,r.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:i,updateCb:n})}},{key:"whenStable",value:function(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}},{key:"getPendingRequestCount",value:function(){return this._pendingCount}},{key:"findProviders",value:function(e,t,n){return[]}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Un(_l))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}(),Sl=function(){var e=function(){function e(){d(this,e),this._applications=new Map,Nl.addToWindow(this)}return f(e,[{key:"registerApplication",value:function(e,t){this._applications.set(e,t)}},{key:"unregisterApplication",value:function(e){this._applications.delete(e)}},{key:"unregisterAllApplications",value:function(){this._applications.clear()}},{key:"getTestability",value:function(e){return this._applications.get(e)||null}},{key:"getAllTestabilities",value:function(){return Array.from(this._applications.values())}},{key:"getAllRootElements",value:function(){return Array.from(this._applications.keys())}},{key:"findTestabilityInTree",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Nl.findTestabilityInTree(this,e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Rl(e){Nl=e}var Al,Nl=new(function(){function e(){d(this,e)}return f(e,[{key:"addToWindow",value:function(e){}},{key:"findTestabilityInTree",value:function(e,t,n){return null}}]),e}()),Ol=!0,Pl=!1;function Dl(){return Pl=!0,Ol}function Ll(){if(Pl)throw new Error("Cannot enable prod mode after platform setup.");Ol=!1}var Ml=new yn("AllowMultipleToken"),Fl=function e(t,n){d(this,e),this.name=t,this.token=n};function Ul(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r="Platform: ".concat(t),i=new yn(r);return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],o=Vl();if(!o||o.injector.get(Ml,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{var a=n.concat(t).concat({provide:i,useValue:!0},{provide:qo,useValue:"platform"});!function(e){if(Al&&!Al.destroyed&&!Al.injector.get(Ml,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Al=e.get(jl);var t=e.get(il,null);t&&t.forEach(function(e){return e()})}(ea.create({providers:a,name:r}))}return function(e){var t=Vl();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Vl(){return Al&&!Al.destroyed?Al:null}var jl=function(){var e=function(){function e(t){d(this,e),this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}return f(e,[{key:"bootstrapModuleFactory",value:function(e,t){var n=this,r=function(e,t){return"noop"===e?new Cl:("zone.js"===e?void 0:e)||new _l({enableLongStackTrace:Dl(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)})}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),i=[{provide:_l,useValue:r}];return r.run(function(){var o=ea.create({providers:i,parent:n.injector,name:e.moduleType.name}),a=e.create(o),u=a.injector.get(Vr,null);if(!u)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return r.runOutsideAngular(function(){var e=r.onError.subscribe({next:function(e){u.handleError(e)}});a.onDestroy(function(){zl(n._modules,a),e.unsubscribe()})}),function(e,r,i){try{var o=((u=a.injector.get(el)).runInitializers(),u.donePromise.then(function(){return Iu(a.injector.get(sl,ku)||ku),n._moduleDoBootstrap(a),a}));return Sa(o)?o.catch(function(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}):o}catch(t){throw r.runOutsideAngular(function(){return e.handleError(t)}),t}var u}(u,r)})}},{key:"bootstrapModule",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=ql({},n);return function(e,t,n){var r=new Ic(n);return Promise.resolve(r)}(0,0,e).then(function(e){return t.bootstrapModuleFactory(e,r)})}},{key:"_moduleDoBootstrap",value:function(e){var t=e.injector.get(Bl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(function(e){return t.bootstrap(e)});else{if(!e.instance.ngDoBootstrap)throw new Error("The module ".concat(w(e.instance.constructor),' was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.'));e.instance.ngDoBootstrap(t)}this._modules.push(e)}},{key:"onDestroy",value:function(e){this._destroyListeners.push(e)}},{key:"injector",get:function(){return this._injector}},{key:"destroy",value:function(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(function(e){return e.destroy()}),this._destroyListeners.forEach(function(e){return e()}),this._destroyed=!0}},{key:"destroyed",get:function(){return this._destroyed}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Un(ea))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function ql(e,t){return Array.isArray(t)?t.reduce(ql,e):Object.assign(Object.assign({},e),t)}var Bl=function(){var e=function(){function e(t,n,r,i,o){var a=this;d(this,e),this._zone=t,this._injector=n,this._exceptionHandler=r,this._componentFactoryResolver=i,this._initStatus=o,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:function(){a._zone.run(function(){a.tick()})}});var u=new c.y(function(e){a._stable=a._zone.isStable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks,a._zone.runOutsideAngular(function(){e.next(a._stable),e.complete()})}),s=new c.y(function(e){var t;a._zone.runOutsideAngular(function(){t=a._zone.onStable.subscribe(function(){_l.assertNotInAngularZone(),kl(function(){!a._stable&&!a._zone.hasPendingMacrotasks&&!a._zone.hasPendingMicrotasks&&(a._stable=!0,e.next(!0))})})});var n=a._zone.onUnstable.subscribe(function(){_l.assertInAngularZone(),a._stable&&(a._stable=!1,a._zone.runOutsideAngular(function(){e.next(!1)}))});return function(){t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,l.T)(u,s.pipe((0,h.B)()))}return f(e,[{key:"bootstrap",value:function(e,t){var n,r=this;if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");n=e instanceof bs?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);var i=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(sc),o=n.create(ea.NULL,[],t||n.selector,i),a=o.location.nativeElement,u=o.injector.get(El,null),s=u&&o.injector.get(Sl);return u&&s&&s.registerApplication(a,u),o.onDestroy(function(){r.detachView(o.hostView),zl(r.components,o),s&&s.unregisterApplication(a)}),this._loadComponent(o),o}},{key:"tick",value:function(){var e=this;if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;var t,n=s(this._views);try{for(n.s();!(t=n.n()).done;){var r;t.value.detectChanges()}}catch(i){n.e(i)}finally{n.f()}}catch(r){this._zone.runOutsideAngular(function(){return e._exceptionHandler.handleError(r)})}finally{this._runningTick=!1}}},{key:"attachView",value:function(e){var t=e;this._views.push(t),t.attachToAppRef(this)}},{key:"detachView",value:function(e){var t=e;zl(this._views,t),t.detachFromAppRef()}},{key:"_loadComponent",value:function(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(al,[]).concat(this._bootstrapListeners).forEach(function(t){return t(e)})}},{key:"ngOnDestroy",value:function(){this._views.slice().forEach(function(e){return e.destroy()}),this._onMicrotaskEmptySubscription.unsubscribe()}},{key:"viewCount",get:function(){return this._views.length}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Un(_l),Un(ea),Un(Vr),Un(Is),Un(el))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function zl(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Zl=function e(){d(this,e)},Hl=function e(){d(this,e)},Gl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"},Wl=function(){var e=function(){function e(t,n){d(this,e),this._compiler=t,this._config=n||Gl}return f(e,[{key:"load",value:function(e){return this.loadAndCompile(e)}},{key:"loadAndCompile",value:function(e){var n=this,i=t(e.split("#"),2),o=i[0],a=i[1];return void 0===a&&(a="default"),r(8255)(o).then(function(e){return e[a]}).then(function(e){return Kl(e,o,a)}).then(function(e){return n._compiler.compileModuleAsync(e)})}},{key:"loadFactory",value:function(e){var n=t(e.split("#"),2),i=n[0],o=n[1],a="NgFactory";return void 0===o&&(o="default",a=""),r(8255)(this._config.factoryPathPrefix+i+this._config.factoryPathSuffix).then(function(e){return e[o+a]}).then(function(e){return Kl(e,i,o)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(Un(ml),Un(Hl,8))},e.\u0275prov=P({token:e,factory:e.\u0275fac}),e}();function Kl(e,t,n){if(!e)throw new Error("Cannot find '".concat(n,"' in '").concat(t,"'"));return e}var Yl=function(e){return null},Ql=Ul(null,"core",[{provide:ol,useValue:"unknown"},{provide:jl,deps:[ea]},{provide:Sl,deps:[]},{provide:ul,deps:[]}]),Jl=[{provide:Bl,useClass:Bl,deps:[_l,ea,Vr,Is,el]},{provide:kc,deps:[_l],useFactory:function(e){var t=[];return e.onStable.subscribe(function(){for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:el,useClass:el,deps:[[new Hn,Xc]]},{provide:ml,useClass:ml,deps:[]},nl,{provide:Ws,useFactory:function(){return nc},deps:[]},{provide:Ys,useFactory:function(){return rc},deps:[]},{provide:sl,useFactory:function(e){return Iu(e=e||"undefined"!=typeof $localize&&$localize.locale||ku),e},deps:[[new Zn(sl),new Hn,new Gn]]},{provide:cl,useValue:"USD"}],$l=function(){var e=function e(t){d(this,e)};return e.\u0275fac=function(t){return new(t||e)(Un(Bl))},e.\u0275mod=de({type:e}),e.\u0275inj=D({providers:Jl}),e}()},8939:function(e,n,r){"use strict";r.d(n,{hO:function(){return _},xv:function(){return v},Dh:function(){return p},GT:function(){return l},cc:function(){return w},on:function(){return g},pX:function(){return c}});var i=r(7716),o=r(7841),u=r(7667);e=r.hmd(e);var s=["ngOnDestroy"],c=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Proxy(e,{get:function(i,o){return n.runOutsideAngular(function(){var i;if(e[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,e[o]),e[o];if(s.indexOf(o)>-1)return function(){};var u=t.toPromise().then(function(e){var t=e&&e[o];return"function"==typeof t?t.bind(e):t&&t.then?t.then(function(e){return n.run(function(){return e})}):n.run(function(){return t})});return new Proxy(function(){},{get:function(e,t){return u[t]},apply:function(e,t,n){return u.then(function(e){var t,i=e&&e.apply(void 0,a(n));return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(o,n,i),i})}})})}})},l=function(e,t){t.forEach(function(t){Object.getOwnPropertyNames(t.prototype||t).forEach(function(n){Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})},h=function e(t){return d(this,e),t},p=new i.OlP("angularfire2.app.options"),v=new i.OlP("angularfire2.app.name");function g(t,n,r){var i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";var a=o.Z.apps.filter(function(e){return e&&e.name===i.name})[0]||n.runOutsideAngular(function(){return o.Z.initializeApp(t,i)});try{JSON.stringify(t)!==JSON.stringify(a.options)&&y("error","".concat(a.name," Firebase App already initialized with different options").concat(e.hot?", you may need to reload as Firebase is not HMR aware.":"."))}catch(u){}return new h(a)}var m,y=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)},k={provide:h,useFactory:g,deps:[p,i.R0b,[new i.FiY,v]]},_=((m=function(){function e(t){d(this,e),o.Z.registerVersion("angularfire",u.q4.full,"core"),o.Z.registerVersion("angularfire",u.q4.full,"app-compat"),o.Z.registerVersion("angular",i.q4F.full,t.toString())}return f(e,null,[{key:"initializeApp",value:function(t,n){return{ngModule:e,providers:[{provide:p,useValue:t},{provide:v,useValue:n}]}}}]),e}()).\u0275fac=function(e){return new(e||m)(i.LFG(i.Lbi))},m.\u0275mod=i.oAB({type:m}),m.\u0275inj=i.cJS({providers:[k]}),m);function w(e,n,r,i,o){var a=t(globalThis.\u0275AngularfireInstanceCache.find(function(t){return t[0]===e})||[],3),u=a[1],s=a[2];if(u)return function(e,t){try{return e.toString()===t.toString()}catch(r){return e===t}}(o,s)||(x("error","".concat(n," was already initialized on the ").concat(r," Firebase App with different settings.").concat(b?" You may need to reload as Firebase is not HMR aware.":"")),x("warn",{is:o,was:s})),u;var c=i();return globalThis.\u0275AngularfireInstanceCache.push([e,c,o]),c}var b=!!e.hot,x=function(e){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];(0,i.X6Q)()&&"undefined"!=typeof console&&(t=console)[e].apply(t,r)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7667:function(e,t,n){"use strict";n.d(t,{q4:function(){return g},iC:function(){return F},HU:function(){return P},vb:function(){return S},JM:function(){return E},nk:function(){return C},n1:function(){return I},_J:function(){return T},u3:function(){return V}});var r=n(7716),i=n(2329),o=n(4347),a=n(6241),u=n(3935),s=n(7771),c=n(3637),l=n(7574),h=n(8307),p=n(2639),v=n(9746),g=new r.GfV("7.2.0"),m="__angularfire_symbol__analyticsIsSupportedValue",y="__angularfire_symbol__analyticsIsSupported",k="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",w="__angularfire_symbol__messagingIsSupportedValue",b="__angularfire_symbol__messagingIsSupported";globalThis[y]||(globalThis[y]=(0,u.Gb)().then(function(e){return globalThis[m]=e})),globalThis[b]||(globalThis[b]=(0,a.Gb)().then(function(e){return globalThis[w]=e})),globalThis[_]||(globalThis[_]=(0,o.Gb)().then(function(e){return globalThis[k]=e}));var x=function(e){return'The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting '.concat(e," in the constructor, first ensure that ").concat(e," is supported by calling\n`await isSupported()`, then retrieve the instance from the injector manually `injector.get(").concat(e,")`.")},I={async:function(){return globalThis[b]},sync:function(){var e=globalThis[w];if(void 0===e)throw new Error(x("Messaging"));return e}},T={async:function(){return globalThis[_]},sync:function(){var e=globalThis[k];if(void 0===e)throw new Error(x("RemoteConfig"));return e}},C={async:function(){return globalThis[y]},sync:function(){var e=globalThis[m];if(void 0===e)throw new Error(x("Analytics"));return e}};function E(e,t,n){if(t){if(1===t.length)return t[0];var r=t.filter(function(e){return e.app===n});if(1===r.length)return r[0]}return n.container.getProvider(e).getImmediate({optional:!0})}var S=function(e,t){var n=t?[t]:(0,i.C6)(),r=[];return n.forEach(function(t){t.container.getProvider(e).instances.forEach(function(e){r.includes(e)||r.push(e)})}),r};function R(){}var A,N=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.N;d(this,e),this.zone=t,this.delegate=n}return f(e,[{key:"now",value:function(){return this.delegate.now()}},{key:"schedule",value:function(e,t,n){var r=this.zone;return this.delegate.schedule(function(t){var n=this;r.runGuarded(function(){e.apply(n,[t])})},t,n)}}]),e}(),O=function(){function e(t){d(this,e),this.zone=t,this.task=null}return f(e,[{key:"call",value:function(e,t){var n=this.unscheduleTask.bind(this);return this.task=this.zone.run(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",R,{},R,R)}),t.pipe((0,h.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}},{key:"unscheduleTask",value:function(){var e=this;setTimeout(function(){null!=e.task&&"scheduled"===e.task.state&&(e.task.invoke(),e.task=null)},10)}}]),e}(),P=((A=function e(t){d(this,e),this.ngZone=t,this.outsideAngular=t.runOutsideAngular(function(){return new N(Zone.current)}),this.insideAngular=t.run(function(){return new N(Zone.current,c.z)}),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}).\u0275fac=function(e){return new(e||A)(r.LFG(r.R0b))},A.\u0275prov=r.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A);function D(){var e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function L(e){return D().ngZone.runOutsideAngular(function(){return e()})}function M(e){return D().ngZone.run(function(){return e()})}function F(e){return D(),function(e){return function(t){return(t=t.lift(new O(e.ngZone))).pipe((0,p.R)(e.outsideAngular),(0,v.QV)(e.insideAngular))}}(D())(e)}var U=function(e,t){return function(){var n=arguments;return t&&setTimeout(function(){"scheduled"===t.state&&t.invoke()},10),M(function(){return e.apply(void 0,n)})}},V=function(e,t){return function(){for(var n,r=arguments,i=this,o=0;o<arguments.length;o++)"function"==typeof arguments[o]&&(t&&(n||(n=M(function(){return Zone.current.scheduleMacroTask("firebaseZoneBlock",R,{},R,R)}))),arguments[o]=U(arguments[o],n));var a=L(function(){return e.apply(i,r)});if(!t){if(a instanceof l.y){var u=D();return a.pipe((0,p.R)(u.outsideAngular),(0,v.QV)(u.insideAngular))}return M(function(){return a})}return a instanceof l.y?a.pipe(F):a instanceof Promise?M(function(){return new Promise(function(e,t){return a.then(function(t){return M(function(){return e(t)})},function(e){return M(function(){return t(e)})})})}):"function"==typeof a&&n?function(){return setTimeout(function(){n&&"scheduled"===n.state&&n.invoke()},10),a.apply(this,arguments)}:M(function(){return a})}}},9353:function(n,r,o){"use strict";o.d(r,{$:function(){return hn},A:function(){return _},E:function(){return qe},G:function(){return Ze},I:function(){return dt},K:function(){return xe},L:function(){return bt},M:function(){return Ct},N:function(){return Et},P:function(){return $r},Q:function(){return St},R:function(){return jr},T:function(){return Tt},U:function(){return At},V:function(){return Nt},W:function(){return Mt},X:function(){return Jt},Y:function(){return Xt},Z:function(){return tn},_:function(){return an},a:function(){return cr},a0:function(){return dn},a1:function(){return vn},a2:function(){return mn},a3:function(){return kn},a4:function(){return wn},a5:function(){return xn},a6:function(){return In},a7:function(){return Cn},a8:function(){return En},a9:function(){return Nn},aA:function(){return Ai},aB:function(){return ki},aC:function(){return Ve},aG:function(){return hr},aJ:function(){return Rt},aa:function(){return Pn},ab:function(){return Ln},ae:function(){return Vn},af:function(){return qn},ag:function(){return Bn},aj:function(){return qt},ak:function(){return Jn},am:function(){return tr},an:function(){return or},ao:function(){return Le},ap:function(){return P},aq:function(){return De},ar:function(){return Ne},as:function(){return C},at:function(){return eo},au:function(){return Fi},av:function(){return E},aw:function(){return N},ax:function(){return L},ay:function(){return Ie},az:function(){return Di},b:function(){return sr},c:function(){return ui},d:function(){return hi},e:function(){return ci},f:function(){return bi},g:function(){return Ci},h:function(){return Ii},i:function(){return Cr},j:function(){return Si},k:function(){return ro},l:function(){return Zr},m:function(){return oo},n:function(){return so},o:function(){return k},r:function(){return Gr},s:function(){return Br},t:function(){return $n},u:function(){return Qr},z:function(){return w}});var u=o(8239),c=o(3854),l=o(8026),h=o(4762),g=o(5422),y=o(3910),k={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},_={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},w=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},x=new c.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),I=new g.Yd("@firebase/auth");function T(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];I.logLevel<=g.in.ERROR&&I.error.apply(I,["Auth (".concat(l.SDK_VERSION,"): ").concat(e)].concat(n))}function C(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw A.apply(void 0,[e].concat(n))}function E(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return A.apply(void 0,[e].concat(n))}function S(t,n,r){var i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),e({},n,r));return new c.LL("auth","Firebase",i).create(n,{appName:t.name})}function R(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&C(e,"argument-error"),S(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.Did you pass a reference from a different Auth SDK?"))}function A(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!=typeof e){var i,o=n[0],u=a(n.slice(1));return u[0]&&(u[0].appName=e.name),(i=e._errorFactory).create.apply(i,[o].concat(a(u)))}return x.create.apply(x,[e].concat(n))}function N(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(!e)throw A.apply(void 0,[t].concat(r))}function O(e){var t="INTERNAL ASSERTION FAILED: "+e;throw T(t),new Error(t)}function P(e,t){e||O(t)}var D=new Map;function L(e){P(e instanceof Function,"Expected a class definition");var t=D.get(e);return t?(P(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,D.set(e,t),t)}function M(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function F(){return"http:"===U()||"https:"===U()}function U(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var V=function(){function e(t,n){d(this,e),this.shortDelay=t,this.longDelay=n,P(n>t,"Short delay should be less than long delay!"),this.isMobile=(0,c.uI)()||(0,c.b$)()}return f(e,[{key:"get",value:function(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(F()||(0,c.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function j(e,t){P(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var q=function(){function e(){d(this,e)}return f(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void O("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void O("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void O("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),B={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},z=new V(3e4,6e4);function Z(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function H(e,t,n,r){return G.apply(this,arguments)}function G(){return(G=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=a.length>4&&void 0!==a[4]?a[4]:{},e.abrupt("return",W(t,o,(0,u.Z)(regeneratorRuntime.mark(function e(){var o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={},a={},i&&("GET"===n?a=i:o={body:JSON.stringify(i)}),u=(0,c.xO)(Object.assign({key:t.config.apiKey},a)).slice(1),e.next=5,t._getAdditionalHeaders();case 5:return s=e.sent,e.abrupt("return",(s["Content-Type"]="application/json",t.languageCode&&(s["X-Firebase-Locale"]=t.languageCode),q.fetch()(J(t,t.config.apiHost,r,u),Object.assign({method:n,headers:s,referrerPolicy:"no-referrer"},o))));case 7:case"end":return e.stop()}},e)}))));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e,t,n){return K.apply(this,arguments)}function K(){return(K=(0,u.Z)(regeneratorRuntime.mark(function e(n,r,i){var o,a,u,s,l,h,f,d,p,v;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n._canInitEmulator=!1,o=Object.assign(Object.assign({},B),r),e.prev=2,a=new $(n),e.next=6,Promise.race([i(),a.promise]);case 6:return u=e.sent,a.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw X(n,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=15;break}return e.abrupt("return",s);case 15:if(l=u.ok?s.errorMessage:s.error.message,h=l.split(" : "),f=t(h,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=18;break}throw X(n,"credential-already-in-use",s);case 18:if("EMAIL_EXISTS"!==d){e.next=20;break}throw X(n,"email-already-in-use",s);case 20:if(v=o[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=23;break}throw S(n,v,p);case 23:C(n,v),e.next=31;break;case 26:if(e.prev=26,e.t0=e.catch(2),!(e.t0 instanceof c.ZR)){e.next=30;break}throw e.t0;case 30:C(n,"network-request-failed");case 31:case"end":return e.stop()}},e,null,[[2,26]])}))).apply(this,arguments)}function Y(e,t,n,r){return Q.apply(this,arguments)}function Q(){return(Q=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=u.length>4&&void 0!==u[4]?u[4]:{},e.next=3,H(t,n,r,i,o);case 3:return a=e.sent,e.abrupt("return",("mfaPendingCredential"in a&&C(t,"multi-factor-auth-required",{_serverResponse:a}),a));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function J(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?j(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var $=function(){function e(t){var n=this;d(this,e),this.auth=t,this.timer=null,this.promise=new Promise(function(e,t){n.timer=setTimeout(function(){return t(E(n.auth,"timeout"))},z.get())})}return f(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function X(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=E(e,t,r);return i.customData._tokenResponse=n,i}function ee(){return(ee=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function ae(){return(ae=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,u,s=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]&&s[1],r=(0,c.m9)(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,N((o=se(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),a="object"==typeof o.firebase?o.firebase:void 0,u=null==a?void 0:a.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:oe(ue(o.auth_time)),issuedAtTime:oe(ue(o.iat)),expirationTime:oe(ue(o.exp)),signInProvider:u||null,signInSecondFactor:(null==a?void 0:a.sign_in_second_factor)||null});case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ue(e){return 1e3*Number(e)}function se(e){var n=t(e.split("."),3),r=n[0],i=n[1],o=n[2];if(void 0===r||void 0===i||void 0===o)return T("JWT malformed, contained fewer than 3 sections"),null;try{var a=(0,c.tV)(i);return a?JSON.parse(a):(T("Failed to decode base64 JWT payload"),null)}catch(a){return T("Caught error parsing JWT payload as JSON",a),null}}function ce(e,t){return le.apply(this,arguments)}function le(){return(le=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),e.t1=e.t0 instanceof c.ZR&&he(e.t0)&&t.auth.currentUser===t,!e.t1){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function he(e){var t=e.code;return"auth/user-disabled"===t||"auth/user-token-expired"===t}var fe=function(){function e(t){d(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return f(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this;if(this.isRunning){var n=this.getInterval(e);this.timerId=setTimeout((0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.iteration();case 2:case"end":return e.stop()}},e)})),n)}}},{key:"iteration",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.user.getIdToken(!0);case 3:t.next=8;break;case 5:return t.prev=5,t.t0=t.catch(0),t.abrupt("return",void("auth/network-request-failed"===t.t0.code&&e.schedule(!0)));case 8:e.schedule();case 9:case"end":return t.stop()}},t,null,[[0,5]])}))()}}]),e}(),de=function(){function e(t,n){d(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return f(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=oe(this.lastLoginAt),this.creationTime=oe(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function pe(e){return ve.apply(this,arguments)}function ve(){return(ve=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,ce(t,re(r,{idToken:i}));case 6:N(null==(o=e.sent)?void 0:o.users.length,r,"internal-error"),a=o.users[0],t._notifyReloadListener(a),u=(null===(n=a.providerUserInfo)||void 0===n?void 0:n.length)?ye(a.providerUserInfo):[],s=me(t.providerData,u),c=!!t.isAnonymous&&!(t.email&&a.passwordHash||(null==s?void 0:s.length)),l={uid:a.localId,displayName:a.displayName||null,photoURL:a.photoUrl||null,email:a.email||null,emailVerified:a.emailVerified||!1,phoneNumber:a.phoneNumber||null,tenantId:a.tenantId||null,providerData:s,metadata:new de(a.createdAt,a.lastLoginAt),isAnonymous:c},Object.assign(t,l);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ge(){return(ge=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,c.m9)(t),e.next=3,pe(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(e,t){return[].concat(a(e.filter(function(e){return!t.some(function(t){return t.providerId===e.providerId})})),a(t))}function ye(e){return e.map(function(e){var t=e.providerId,n=(0,h._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ke(){return(ke=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,{},(0,u.Z)(regeneratorRuntime.mark(function e(){var r,i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.xO)({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,a=i.apiKey,u=J(t,o,"/v1/token","key=".concat(a)),e.next=7,t._getAdditionalHeaders();case 7:return s=e.sent,e.abrupt("return",(s["Content-Type"]="application/x-www-form-urlencoded",q.fetch()(u,{method:"POST",headers:s,body:r})));case 9:case"end":return e.stop()}},e)})));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _e=function(){function e(){d(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return f(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){N(e.idToken,"internal-error"),N(void 0!==e.idToken,"internal-error"),N(void 0!==e.refreshToken,"internal-error");var t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){var t=se(e);return N(t,"internal-error"),N(void 0!==t.exp,"internal-error"),N(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(N(!n.accessToken||n.refreshToken,e,"user-token-expired"),!t&&n.accessToken&&!n.isExpired){r.next=12;break}if(!n.refreshToken){r.next=8;break}return r.next=5,n.refresh(e,n.refreshToken);case 5:r.t1=n.accessToken,r.next=9;break;case 8:r.t1=null;case 9:r.t0=r.t1,r.next=13;break;case 12:r.t0=n.accessToken;case 13:return r.abrupt("return",r.t0);case 14:case"end":return r.stop()}},r)}))()}},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i,o,a,u;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,function(e,t){return ke.apply(this,arguments)}(e,t);case 2:i=r.sent,o=i.accessToken,a=i.refreshToken,u=i.expiresIn,n.updateTokensAndExpiration(o,a,Number(u));case 7:case"end":return r.stop()}},r)}))()}},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return O("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,o=n.expirationTime,a=new e;return r&&(N("string"==typeof r,"internal-error",{appName:t}),a.refreshToken=r),i&&(N("string"==typeof i,"internal-error",{appName:t}),a.accessToken=i),o&&(N("number"==typeof o,"internal-error",{appName:t}),a.expirationTime=o),a}}]),e}();function we(e,t){N("string"==typeof e||void 0===e,"internal-error",{appName:t})}var be=function(){function e(t){d(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,o=(0,h._T)(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new fe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.metadata=new de(o.createdAt||void 0,o.lastLoginAt||void 0)}return f(e,[{key:"getIdToken",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ce(t,t.stsTokenManager.getToken(t.auth,e));case 2:if(N(r=n.sent,t.auth,"internal-error"),n.t0=t.accessToken!==r,!n.t0){n.next=10;break}return t.accessToken=r,n.next=9,t.auth._persistUserIfCurrent(t);case 9:t.auth._notifyListenersIfCurrent(t);case 10:return n.abrupt("return",r);case 11:case"end":return n.stop()}},n)}))()}},{key:"getIdTokenResult",value:function(e){return function(e){return ae.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return ge.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(N(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(function(e){return Object.assign({},e)}),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){return new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}))}},{key:"_onReload",value:function(e){N(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(i=!1,e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),i=!0),r.t0=t,!r.t0){r.next=6;break}return r.next=6,pe(n);case 6:return r.next=8,n.auth._persistUserIfCurrent(n);case 8:i&&n.auth._notifyListenersIfCurrent(n);case 9:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getIdToken();case 2:return n=t.sent,t.next=5,ce(e,function(e,t){return ee.apply(this,arguments)}(e.auth,{idToken:n}));case 5:return e.stsTokenManager.clearRefreshToken(),t.abrupt("return",e.auth.signOut());case 7:case"end":return t.stop()}},t)}))()}},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(function(e){return Object.assign({},e)}),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,o,a,u,s,c,l,h=null!==(r=n.displayName)&&void 0!==r?r:void 0,f=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(o=n.phoneNumber)&&void 0!==o?o:void 0,p=null!==(a=n.photoURL)&&void 0!==a?a:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,g=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,y=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,_=n.emailVerified,w=n.isAnonymous,b=n.providerData,x=n.stsTokenManager;N(k&&x,t,"internal-error");var I=_e.fromJSON(this.name,x);N("string"==typeof k,t,"internal-error"),we(h,t.name),we(f,t.name),N("boolean"==typeof _,t,"internal-error"),N("boolean"==typeof w,t,"internal-error"),we(d,t.name),we(p,t.name),we(v,t.name),we(g,t.name),we(m,t.name),we(y,t.name);var T=new e({uid:k,auth:t,email:f,emailVerified:_,displayName:h,isAnonymous:w,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:y});return b&&Array.isArray(b)&&(T.providerData=b.map(function(e){return Object.assign({},e)})),g&&(T._redirectEventId=g),T}},{key:"_fromIdTokenResponse",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,u.Z)(regeneratorRuntime.mark(function i(){var o,a;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return(o=new _e).updateFromServerResponse(n),a=new e({uid:n.localId,auth:t,stsTokenManager:o,isAnonymous:r}),i.next=5,pe(a);case 5:return i.abrupt("return",a);case 6:case"end":return i.stop()}},i)}))()}}]),e}(),xe=function(){var e=function(){function e(){d(this,e),this.type="NONE",this.storage={}}return f(e,[{key:"_isAvailable",value:function(){return(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}},e)}))()}},{key:"_set",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n.storage[e]=t;case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.storage[e],n.abrupt("return",void 0===r?null:r);case 2:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:delete t.storage[e];case 1:case"end":return n.stop()}},n)}))()}},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();return e.type="NONE",e}();function Ie(e,t,n){return"firebase:".concat(e,":").concat(t,":").concat(n)}var Te=function(){function e(t,n,r){d(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,o=i.config,a=i.name;this.fullUserKey=Ie(this.userKey,o.apiKey,a),this.fullPersistenceKey=Ie("persistence",o.apiKey,a),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return f(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.persistence._get(e.fullUserKey);case 2:return n=t.sent,t.abrupt("return",n?be._fromJSON(e.auth,n):null);case 4:case"end":return t.stop()}},t)}))()}},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.persistence!==e){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,t.getCurrentUser();case 4:return r=n.sent,n.next=7,t.removeCurrentUser();case 7:return t.persistence=e,n.abrupt("return",r?t.setCurrentUser(r):void 0);case 9:case"end":return n.stop()}},n)}))()}},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";return(0,u.Z)(regeneratorRuntime.mark(function i(){var o,a,c,l,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(n.length){i.next=2;break}return i.abrupt("return",new e(L(xe),t,r));case 2:return i.next=4,Promise.all(n.map(function(){var e=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 4:o=i.sent.filter(function(e){return e}),a=o[0]||L(xe),c=Ie(r,t.config.apiKey,t.name),l=null,h=s(n),i.prev=9,h.s();case 11:if((f=h.n()).done){i.next=27;break}return d=f.value,i.prev=13,i.next=16,d._get(c);case 16:if(!(p=i.sent)){i.next=21;break}return v=be._fromJSON(t,p),d!==a&&(l=v),a=d,i.abrupt("break",27);case 21:i.next=25;break;case 23:i.prev=23,i.t0=i.catch(13);case 25:i.next=11;break;case 27:i.next=32;break;case 29:i.prev=29,i.t1=i.catch(9),h.e(i.t1);case 32:return i.prev=32,h.f(),i.finish(32);case 35:if(g=o.filter(function(e){return e._shouldAllowMigration}),!a._shouldAllowMigration||!g.length){i.next=47;break}if(a=g[0],i.t3=l,!i.t3){i.next=42;break}return i.next=42,a._set(c,l.toJSON());case 42:return i.next=44,Promise.all(n.map(function(){var e=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===a){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}},e,null,[[1,6]])}));return function(t){return e.apply(this,arguments)}}()));case 44:i.t2=new e(a,t,r),i.next=48;break;case 47:i.t2=new e(a,t,r);case 48:return i.abrupt("return",i.t2);case 49:case"end":return i.stop()}},i,null,[[9,29,32,35],[13,23]])}))()}}]),e}();function Ce(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ae(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ee(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Oe(t))return"Blackberry";if(Pe(t))return"Webos";if(Se(t))return"Safari";if((t.includes("chrome/")||Re(t))&&!t.includes("edge/"))return"Chrome";if(Ne(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null==n?void 0:n.length)?n[1]:"Other"}function Ee(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/firefox\//i.test(e)}function Se(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)(),t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/crios\//i.test(e)}function Ae(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/iemobile/i.test(e)}function Ne(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/android/i.test(e)}function Oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/blackberry/i.test(e)}function Pe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/webos/i.test(e)}function De(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/iphone|ipad|ipod/i.test(e)}function Le(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Me(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return De(e)||Ne(e)||Pe(e)||Oe(e)||/windows phone/i.test(e)||Ae(e)}function Fe(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Ce((0,c.z$)());break;case"Worker":t="".concat(Ce((0,c.z$)()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/JsCore/").concat(l.SDK_VERSION,"/").concat(r)}var Ue=function(){function e(t,n){d(this,e),this.app=t,this.config=n,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new je(this),this.idTokenSubscription=new je(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=x,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=n.sdkClientVersion}return f(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=L(t)),this._initializationPromise=this.queue((0,u.Z)(regeneratorRuntime.mark(function r(){var i,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=!n._deleted,!r.t0){r.next=6;break}return r.next=4,Te.create(n,e);case 4:n.persistenceManager=r.sent,r.t0=!n._deleted;case 6:if(!r.t0){r.next=19;break}if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t1=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted&&(n._isInitialized=!0);case 19:case"end":return r.stop()}},r,null,[[8,13]])}))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._deleted){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.assertedPersistence.getCurrentUser();case 4:if(n=t.sent,!e.currentUser&&!n){t.next=13;break}if(!e.currentUser||!n||e.currentUser.uid!==n.uid){t.next=11;break}return e._currentUser._assign(n),t.next=10,e.currentUser.getIdToken();case 10:return t.abrupt("return",void t.sent);case 11:return t.next=13,e._updateCurrentUser(n);case 13:case"end":return t.stop()}},t)}))()}},{key:"initializeCurrentUser",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i,o,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.getCurrentUser();case 2:if(i=n.sent,!e||!t.config.authDomain){n.next=12;break}return n.next=6,t.getOrInitRedirectPersistenceManager();case 6:return o=null===(r=t.redirectUser)||void 0===r?void 0:r._redirectEventId,a=null==i?void 0:i._redirectEventId,n.next=10,t.tryRedirectSignIn(e);case 10:u=n.sent,(!o||o===a)&&(null==u?void 0:u.user)&&(i=u.user);case 12:if(!i){n.next=24;break}if(!i._redirectEventId){n.next=20;break}return N(t._popupRedirectResolver,t,"argument-error"),n.next=17,t.getOrInitRedirectPersistenceManager();case 17:n.t1=t.redirectUser&&t.redirectUser._redirectEventId===i._redirectEventId?t.directlySetCurrentUser(i):t.reloadAndSetCurrentUserOrClear(i),n.next=21;break;case 20:n.t1=t.reloadAndSetCurrentUserOrClear(i);case 21:n.t0=n.t1,n.next=25;break;case 24:n.t0=t.directlySetCurrentUser(null);case 25:return n.abrupt("return",n.t0);case 26:case"end":return n.stop()}},n)}))()}},{key:"tryRedirectSignIn",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=null,n.prev=1,n.next=4,t._popupRedirectResolver._completeRedirectFn(t,e,!0);case 4:r=n.sent,n.next=11;break;case 7:return n.prev=7,n.t0=n.catch(1),n.next=11,t._setRedirectUser(null);case 11:return n.abrupt("return",r);case 12:case"end":return n.stop()}},n,null,[[1,7]])}))()}},{key:"reloadAndSetCurrentUserOrClear",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,pe(e);case 3:n.next=9;break;case 5:if(n.prev=5,n.t0=n.catch(0),"auth/network-request-failed"===n.t0.code){n.next=9;break}return n.abrupt("return",t.directlySetCurrentUser(null));case 9:return n.abrupt("return",t.directlySetCurrentUser(e));case 10:case"end":return n.stop()}},n,null,[[0,5]])}))()}},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"==typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e._deleted=!0;case 1:case"end":return t.stop()}},t)}))()}},{key:"updateCurrentUser",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e?(0,c.m9)(e):null,n.abrupt("return",(r&&N(r.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(r&&r._clone(t))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_updateCurrentUser",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t._deleted){n.next=2;break}return n.abrupt("return",(e&&N(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.directlySetCurrentUser(e);case 2:t.notifyAuthListeners();case 3:case"end":return n.stop()}},n)})))));case 2:case"end":return n.stop()}},n)}))()}},{key:"signOut",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.redirectPersistenceManager||e._popupRedirectResolver,!t.t0){t.next=4;break}return t.next=4,e._setRedirectUser(null);case 4:return t.abrupt("return",e._updateCurrentUser(null));case 5:case"end":return t.stop()}},t)}))()}},{key:"setPersistence",value:function(e){var t=this;return this.queue((0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(L(e));case 2:case"end":return n.stop()}},n)})))}},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new c.LL("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.getOrInitRedirectPersistenceManager(t);case 2:return i=r.sent,r.abrupt("return",null===e?i.removeCurrentUser():i.setCurrentUser(e));case 4:case"end":return r.stop()}},r)}))()}},{key:"getOrInitRedirectPersistenceManager",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.redirectPersistenceManager){n.next=9;break}return N(r=e&&L(e)||t._popupRedirectResolver,t,"argument-error"),n.next=5,Te.create(t,[L(r._redirectPersistence)],"redirectUser");case 5:return t.redirectPersistenceManager=n.sent,n.next=8,t.redirectPersistenceManager.getCurrentUser();case 8:t.redirectUser=n.sent;case 9:return n.abrupt("return",t.redirectPersistenceManager);case 10:case"end":return n.stop()}},n)}))()}},{key:"_redirectUserForId",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t._isInitialized,!n.t0){n.next=4;break}return n.next=4,t.queue((0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)})));case 4:return n.abrupt("return",(null===(r=t._currentUser)||void 0===r?void 0:r._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null);case 5:case"end":return n.stop()}},n)}))()}},{key:"_persistUserIfCurrent",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e!==t.currentUser){n.next=2;break}return n.abrupt("return",t.queue((0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.directlySetCurrentUser(e));case 1:case"end":return n.stop()}},n)}))));case 2:case"end":return n.stop()}},n)}))()}},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var o="function"==typeof t?t:t.next.bind(t),a=this._isInitialized?Promise.resolve():this._initializationPromise;return N(a,this,"internal-error"),a.then(function(){return o(i.currentUser)}),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}},{key:"directlySetCurrentUser",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,!e){n.next=7;break}return n.next=5,t.assertedPersistence.setCurrentUser(e);case 5:n.next=9;break;case 7:return n.next=9,t.assertedPersistence.removeCurrentUser();case 9:case"end":return n.stop()}},n)}))()}},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return N(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Fe(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={"X-Client-Version":e.clientVersion},t.abrupt("return",(e.app.options.appId&&(n["X-Firebase-gmpid"]=e.app.options.appId),n));case 2:case"end":return t.stop()}},t)}))()}}]),e}();function Ve(e){return(0,c.m9)(e)}var je=function(){function e(t){var n=this;d(this,e),this.auth=t,this.observer=null,this.addObserver=(0,c.ne)(function(e){return n.observer=e})}return f(e,[{key:"next",get:function(){return N(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function qe(e,n,r){var i=Ve(e);N(i._canInitEmulator,i,"emulator-config-failed"),N(/^https?:\/\//.test(n),i,"invalid-emulator-scheme");var o=!!(null==r?void 0:r.disableWarnings),a=Be(n),u=function(e){var n=Be(e),r=/(\/\/)?([^?#/]+)/.exec(e.substr(n.length));if(!r)return{host:"",port:null};var i=r[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(i);if(o){var a=o[1];return{host:a,port:ze(i.substr(a.length+1))}}var u=t(i.split(":"),2);return{host:u[0],port:ze(u[1])}}(n),s=u.host,c=u.port;i.config.emulator={url:"".concat(a,"//").concat(s).concat(null===c?"":":".concat(c),"/")},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:s,port:c,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:o})}),o||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Be(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ze(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Ze=function(){function e(t,n){d(this,e),this.providerId=t,this.signInMethod=n}return f(e,[{key:"toJSON",value:function(){return O("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return O("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return O("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return O("not implemented")}}]),e}();function He(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:resetPassword",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function We(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Je(){return(Je=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithPassword",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $e(e,t){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:sendOobCode",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function et(e,t){return tt.apply(this,arguments)}function tt(){return(tt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$e(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function nt(e,t){return rt.apply(this,arguments)}function rt(){return(rt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$e(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function it(e,t){return ot.apply(this,arguments)}function ot(){return(ot=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$e(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function at(e,t){return ut.apply(this,arguments)}function ut(){return(ut=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",$e(t,n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function st(){return(st=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithEmailLink",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ct(){return(ct=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithEmailLink",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var lt=function(e){p(n,e);var t=v(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(o=t.call(this,"password",i))._email=e,o._password=r,o._tenantId=a,o}return f(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=t.signInMethod,n.next="password"===n.t0?3:"emailLink"===n.t0?4:5;break;case 3:return n.abrupt("return",function(e,t){return Je.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password}));case 4:return n.abrupt("return",function(e,t){return st.apply(this,arguments)}(e,{email:t._email,oobCode:t._password}));case 5:C(e,"internal-error");case 6:case"end":return n.stop()}},n)}))()}},{key:"_linkToIdToken",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:r.t0=n.signInMethod,r.next="password"===r.t0?3:"emailLink"===r.t0?4:5;break;case 3:return r.abrupt("return",We(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password}));case 4:return r.abrupt("return",function(e,t){return ct.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password}));case 5:C(e,"internal-error");case 6:case"end":return r.stop()}},r)}))()}},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return new n(e,t,"emailLink",r)}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Ze);function ht(e,t){return ft.apply(this,arguments)}function ft(){return(ft=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithIdp",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var dt=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return f(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return ht(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ht(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ht(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,c.xO)(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):C("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=(0,h._T)(t,["providerId","signInMethod"]);if(!r||!i)return null;var a=new n(r,i);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}}]),n}(Ze);function pt(e,t){return vt.apply(this,arguments)}function vt(){return(vt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:sendVerificationCode",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gt(){return(gt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithPhoneNumber",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mt(){return(mt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y(t,"POST","/v1/accounts:signInWithPhoneNumber",Z(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw X(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var yt={USER_NOT_FOUND:"user-not-found"};function kt(){return(kt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithPhoneNumber",Z(t,Object.assign(Object.assign({},n),{operation:"REAUTH"})),yt));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var _t=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone","phone")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return gt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return mt.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return kt.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"==typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,o=t.phoneNumber,a=t.temporaryProof;return i||r||o||a?new n({verificationId:r,verificationCode:i,phoneNumber:o,temporaryProof:a}):null}}]),n}(Ze),wt=function(){function e(t){var n,r,i,o,a,u;d(this,e);var s=(0,c.zd)((0,c.pd)(t)),l=null!==(n=s.apiKey)&&void 0!==n?n:null,h=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);N(l&&h&&f,"argument-error"),this.apiKey=l,this.operation=f,this.code=h,this.continueUrl=null!==(o=s.continueUrl)&&void 0!==o?o:null,this.languageCode=null!==(a=s.languageCode)&&void 0!==a?a:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return f(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=(0,c.zd)((0,c.pd)(e)).link,n=t?(0,c.zd)((0,c.pd)(t)).deep_link_id:null,r=(0,c.zd)((0,c.pd)(e)).deep_link_id;return(r?(0,c.zd)((0,c.pd)(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}(),bt=function(){var e=function(){function e(){d(this,e),this.providerId=e.PROVIDER_ID}return f(e,null,[{key:"credential",value:function(e,t){return lt._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=wt.parseLink(t);return N(n,"argument-error"),lt._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e}(),xt=function(){function e(t){d(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return f(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),It=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).scopes=[],e}return f(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return a(this.scopes)}}]),n}(xt),Tt=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return N(e.idToken||e.accessToken,"argument-error"),dt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e;return N("providerId"in t&&"signInMethod"in t,"argument-error"),dt._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,o=t.oauthTokenSecret,a=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!o&&!r&&!a||!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:a})}catch(c){return null}}}]),n}(It),Ct=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"facebook.com")}return f(n,null,[{key:"credential",value:function(e){return dt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e}(),Et=function(){var e=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return f(n,null,[{key:"credential",value:function(e,t){return dt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(It);return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e}(),St=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"github.com")}return f(n,null,[{key:"credential",value:function(e){return dt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(It);return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e}(),Rt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return f(n,[{key:"_getIdTokenResponse",value:function(e){return ht(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,ht(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,ht(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"==typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,o=t.pendingToken;return r&&i&&o&&r===i?new n(r,o):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ze),At=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),N(e.startsWith("saml."),"argument-error"),t.call(this,e)}return f(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Rt.fromJSON(e);return N(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Rt._create(r,n)}catch(i){return null}}}]),n}(xt),Nt=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,"twitter.com")}return f(n,null,[{key:"credential",value:function(e,t){return dt._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(o){return null}}}]),n}(It);return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e}();function Ot(e,t){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signUp",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Dt=function(){function e(t){d(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return f(e,null,[{key:"_fromIdTokenResponse",value:function(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return(0,u.Z)(regeneratorRuntime.mark(function o(){var a,u;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,be._fromIdTokenResponse(t,r,i);case 2:return a=o.sent,u=Lt(r),o.abrupt("return",new e({user:a,providerId:u,_tokenResponse:r,operationType:n}));case 5:case"end":return o.stop()}},o)}))()}},{key:"_forOperation",value:function(t,n,r){return(0,u.Z)(regeneratorRuntime.mark(function i(){var o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t._updateTokensIfNecessary(r,!0);case 2:return o=Lt(r),i.abrupt("return",new e({user:t,providerId:o,_tokenResponse:r,operationType:n}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function Lt(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Mt(e){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Dt({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,Ot(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Dt._fromIdTokenResponse(r,"signIn",i,!0);case 10:return o=e.sent,e.next=13,r._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Ut=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a,u;return d(this,n),(a=t.call(this,r.code,r.message)).operationType=i,a.user=o,Object.setPrototypeOf(m(a),n.prototype),a.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},a}return f(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(c.ZR);function Vt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(function(n){throw"auth/multi-factor-auth-required"===n.code?Ut._fromErrorAndOperation(e,n,t,r):n})}function jt(e){return new Set(e.map(function(e){return e.providerId}).filter(function(e){return!!e}))}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.m9)(t),e.next=3,Ht(!0,r,n);case 3:return e.t0=te,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,o=i.providerUserInfo,a=jt(o||[]),r.providerData=r.providerData.filter(function(e){return a.has(e.providerId)}),a.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function zt(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=ce,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Dt._forOperation(t,"link",i));case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ht(e,t,n){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(n);case 2:i=!1===t?"provider-already-linked":"no-such-provider",N(jt(n.providerData).has(r)===t,n.auth,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Wt(e,t){return Kt.apply(this,arguments)}function Kt(){return(Kt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,s,c=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=t.auth,o="reauthenticate",e.prev=2,e.next=5,ce(t,Vt(i,o,n,t),r);case 5:return N((a=e.sent).idToken,i,"internal-error"),N(u=se(a.idToken),i,"internal-error"),s=u.sub,e.abrupt("return",(N(t.uid===s,i,"user-mismatch"),Dt._forOperation(t,o,a)));case 13:throw e.prev=13,e.t0=e.catch(2),"auth/user-not-found"===(null==e.t0?void 0:e.t0.code)&&C(i,"user-mismatch"),e.t0;case 16:case"end":return e.stop()}},e,null,[[2,13]])}))).apply(this,arguments)}function Yt(e,t){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i="signIn",e.next=4,Vt(t,i,n);case 4:return o=e.sent,e.next=7,Dt._fromIdTokenResponse(t,i,o);case 7:if(a=e.sent,e.t0=r,e.t0){e.next=12;break}return e.next=12,t._updateCurrentUser(a.user);case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Yt(Ve(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xt(e,t){return en.apply(this,arguments)}function en(){return(en=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.m9)(t),e.next=3,Ht(!1,r,n.providerId);case 3:return e.abrupt("return",zt(r,n));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tn(e,t){return nn.apply(this,arguments)}function nn(){return(nn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Wt((0,c.m9)(t),n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rn(e,t){return on.apply(this,arguments)}function on(){return(on=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Y(t,"POST","/v1/accounts:signInWithCustomToken",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function an(e,t){return un.apply(this,arguments)}function un(){return(un=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=Ve(t),e.next=3,rn(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Dt._fromIdTokenResponse(r,"signIn",i);case 6:return o=e.sent,e.next=9,r._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}var sn=function(){function e(t,n){d(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return f(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?cn._fromServerResponse(e,t):C(e,"internal-error")}}]),e}(),cn=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return f(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(sn);function ln(e,t,n){var r;N((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),N(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(N(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(N(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function hn(e,t,n){return fn.apply(this,arguments)}function fn(){return(fn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,c.m9)(t),o={requestType:"PASSWORD_RESET",email:n},r&&ln(i,o,r),e.next=4,nt(i,o);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function dn(e,t,n){return pn.apply(this,arguments)}function pn(){return(pn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He((0,c.m9)(t),{oobCode:n,newPassword:r});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function vn(e,t){return gn.apply(this,arguments)}function gn(){return(gn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye((0,c.m9)(t),{oobCode:n});case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mn(e,t){return yn.apply(this,arguments)}function yn(){return(yn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.m9)(t),e.next=3,He(r,{oobCode:n});case 3:i=e.sent,o=i.requestType,e.t0=(N(o,r,"internal-error"),o),e.next="EMAIL_SIGNIN"===e.t0?8:"VERIFY_AND_CHANGE_EMAIL"===e.t0?9:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?11:12;break;case 8:return e.abrupt("break",13);case 9:return N(i.newEmail,r,"internal-error"),e.abrupt("break",13);case 11:N(i.mfaInfo,r,"internal-error");case 12:N(i.email,r,"internal-error");case 13:return a=null,e.abrupt("return",(i.mfaInfo&&(a=sn._fromServerResponse(Ve(r),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:a},operation:o}));case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kn(e,t){return _n.apply(this,arguments)}function _n(){return(_n=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn((0,c.m9)(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function wn(e,t,n){return bn.apply(this,arguments)}function bn(){return(bn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),e.next=3,Ot(i,{returnSecureToken:!0,email:n,password:r});case 3:return o=e.sent,e.next=6,Dt._fromIdTokenResponse(i,"signIn",o);case 6:return a=e.sent,e.next=9,i._updateCurrentUser(a.user);case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}},e)}))).apply(this,arguments)}function xn(e,t,n){return Jt((0,c.m9)(e),bt.credential(t,n))}function In(e,t,n){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,c.m9)(t),o={requestType:"EMAIL_SIGNIN",email:n},N(r.handleCodeInApp,i,"argument-error"),r&&ln(i,o,r),e.next=5,it(i,o);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Cn(e,t){var n=wt.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function En(e,t,n){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,c.m9)(t),o=bt.credentialWithLink(n,r||M()),e.abrupt("return",(N(o._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Jt(i,o)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rn(e,t){return An.apply(this,arguments)}function An(){return(An=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:createAuthUri",Z(t,n)));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Nn(e,t){return On.apply(this,arguments)}function On(){return(On=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={identifier:n,continueUri:F()?M():"http://localhost"},e.next=3,Rn((0,c.m9)(t),r);case 3:return i=e.sent,o=i.signinMethods,e.abrupt("return",o||[]);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Pn(e,t){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,c.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,i={requestType:"VERIFY_EMAIL",idToken:e.t0},n&&ln(r.auth,i,n),e.next=8,et(r.auth,i);case 8:if(o=e.sent,a=o.email,e.t1=a!==t.email,!e.t1){e.next=14;break}return e.next=14,t.reload();case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ln(e,t,n){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,c.m9)(t),e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=n,o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:e.t0,newEmail:e.t1},r&&ln(i.auth,o,r),e.next=9,at(i.auth,o);case 9:if(a=e.sent,u=a.email,e.t2=u!==t.email,!e.t2){e.next=15;break}return e.next=15,t.reload();case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fn(e,t){return Un.apply(this,arguments)}function Un(){return(Un=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Vn(e,t){return jn.apply(this,arguments)}function jn(){return(jn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return o=(0,c.m9)(t),e.next=6,o.getIdToken();case 6:return e.t0=e.sent,e.t1=r,e.t2=i,e.t3=!0,a={idToken:e.t0,displayName:e.t1,photoUrl:e.t2,returnSecureToken:e.t3},e.next=13,ce(o,Fn(o.auth,a));case 13:return u=e.sent,o.displayName=u.displayName||null,o.photoURL=u.photoUrl||null,(s=o.providerData.find(function(e){return"password"===e.providerId}))&&(s.displayName=o.displayName,s.photoURL=o.photoURL),e.next=19,o._updateTokensIfNecessary(u);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function qn(e,t){return zn((0,c.m9)(e),t,null)}function Bn(e,t){return zn((0,c.m9)(e),null,t)}function zn(e,t,n){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return e.t0=e.sent,e.t1=!0,o={idToken:e.t0,returnSecureToken:e.t1},n&&(o.email=n),r&&(o.password=r),e.next=9,ce(t,We(i,o));case 9:return a=e.sent,e.next=12,t._updateTokensIfNecessary(a,!0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Hn=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.isNewUser=t,this.providerId=n,this.profile=r},Gn=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r,i)).username=o,a}return n}(Hn),Wn=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"facebook.com",r)}return n}(Hn),Kn=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"github.com",r,"string"==typeof(null==r?void 0:r.login)?null==r?void 0:r.login:null)}return n}(Gn),Yn=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"google.com",r)}return n}(Hn),Qn=function(e){p(n,e);var t=v(n);function n(e,r,i){return d(this,n),t.call(this,e,"twitter.com",r,i)}return n}(Gn);function Jn(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){var a=null===(n=null===(t=se(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(a)return new Hn(o,"anonymous"!==a&&"custom"!==a?a:null)}if(!r)return null;switch(r){case"facebook.com":return new Wn(o,i);case"github.com":return new Kn(o,i);case"google.com":return new Yn(o,i);case"twitter.com":return new Qn(o,i,e.screenName||null);case"custom":case"anonymous":return new Hn(o,null);default:return new Hn(o,r,i)}}(n)}function $n(e,t,n,r){return(0,c.m9)(e).onAuthStateChanged(t,n,r)}var Xn=function(){function t(e,n){d(this,t),this.type=e,this.credential=n}return f(t,[{key:"toJSON",value:function(){return{multiFactorSession:e({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(e){return new t("enroll",e)}},{key:"_fromMfaPendingCredential",value:function(e){return new t("signin",e)}},{key:"fromJSON",value:function(e){var n,r;if(null==e?void 0:e.multiFactorSession){if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return t._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(r=e.multiFactorSession)||void 0===r?void 0:r.idToken)return t._fromIdtoken(e.multiFactorSession.idToken)}return null}}]),t}(),er=function(){function e(t,n,r){d(this,e),this.session=t,this.hints=n,this.signInResolver=r}return f(e,[{key:"resolveSignIn",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t.signInResolver(e));case 1:case"end":return n.stop()}},n)}))()}}],[{key:"_fromError",value:function(t,n){var r=Ve(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(function(e){return sn._fromServerResponse(r,e)});N(i.mfaPendingCredential,r,"internal-error");var a,s=Xn._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,(a=(0,u.Z)(regeneratorRuntime.mark(function e(t){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:o=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,a=Object.assign(Object.assign({},i),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?8:"reauthenticate"===e.t0?14:15;break;case 8:return e.next=10,Dt._fromIdTokenResponse(r,n.operationType,a);case 10:return u=e.sent,e.next=13,r._updateCurrentUser(u.user);case 13:return e.abrupt("return",u);case 14:return e.abrupt("return",(N(n.user,r,"internal-error"),Dt._forOperation(n.user,n.operationType,a)));case 15:C(r,"internal-error");case 16:case"end":return e.stop()}},e)})),function(e){return a.apply(this,arguments)}))}}]),e}();function tr(e,t){var n,r=(0,c.m9)(e),i=t;return N(t.customData.operationType,r,"argument-error"),N(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),er._fromError(r,i)}function nr(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:start",Z(e,t))}var rr=function(){function e(t){var n=this;d(this,e),this.user=t,this.enrolledFactors=[],t._onReload(function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map(function(e){return sn._fromServerResponse(t.auth,e)}))})}return f(e,[{key:"getSession",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Xn,t.next=3,e.user.getIdToken();case 3:return t.t1=t.sent,t.abrupt("return",t.t0._fromIdtoken.call(t.t0,t.t1));case 5:case"end":return t.stop()}},t)}))()}},{key:"enroll",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var i,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return i=e,r.next=3,n.getSession();case 3:return o=r.sent,r.next=6,ce(n.user,i._process(n.user.auth,o,t));case 6:return a=r.sent,r.next=9,n.user._updateTokensIfNecessary(a);case 9:return r.abrupt("return",n.user.reload());case 10:case"end":return r.stop()}},r)}))()}},{key:"unenroll",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r="string"==typeof e?e:e.uid,n.next=3,t.user.getIdToken();case 3:return i=n.sent,n.next=6,ce(t.user,function(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Z(e,t))}(t.user.auth,{idToken:i,mfaEnrollmentId:r}));case 6:return o=n.sent,t.enrolledFactors=t.enrolledFactors.filter(function(e){return e.uid!==r}),n.next=10,t.user._updateTokensIfNecessary(o);case 10:return n.prev=10,n.next=13,t.user.reload();case 13:n.next=19;break;case 15:if(n.prev=15,n.t0=n.catch(10),"auth/user-token-expired"===n.t0.code){n.next=19;break}throw n.t0;case 19:case"end":return n.stop()}},n,null,[[10,15]])}))()}}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),ir=new WeakMap;function or(e){var t=(0,c.m9)(e);return ir.has(t)||ir.set(t,rr._fromUser(t)),ir.get(t)}var ar="__sak",ur=function(){function e(t,n){d(this,e),this.storageRetriever=t,this.type=n}return f(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(ar,"1"),this.storage.removeItem(ar),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}(),sr=function(){var e=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.call(this,function(){return window.localStorage},"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=(0,c.z$)();return Se(e)||De(e)}()&&function(){try{return!(!window||window===window.top)}catch(n){return!1}}(),e.fallbackToPolling=Me(),e._shouldAllowMigration=!0,e}return f(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),o=this.localCache[r];i!==o&&e(r,o,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var o=function(){var e=t.storage.getItem(r);!n&&t.localCache[r]===e||t.notifyListeners(r,e)},a=this.storage.getItem(r);(0,c.w1)()&&10===document.documentMode&&a!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,10):o()}else this.forAllChangedKeys(function(e,n,r){t.notifyListeners(e,r)})}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t&&JSON.parse(t))}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(function(){e.forAllChangedKeys(function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(e,t){var r=this,o=this;return(0,u.Z)(regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,i(b(n.prototype),"_set",r).call(o,e,t);case 2:o.localCache[e]=JSON.stringify(t);case 3:case"end":return a.stop()}},a)}))()}},{key:"_get",value:function(e){var t=this,r=this;return(0,u.Z)(regeneratorRuntime.mark(function o(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i(b(n.prototype),"_get",t).call(r,e);case 2:return a=o.sent,o.abrupt("return",(r.localCache[e]=JSON.stringify(a),a));case 4:case"end":return o.stop()}},o)}))()}},{key:"_remove",value:function(e){var t=this,r=this;return(0,u.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i(b(n.prototype),"_remove",t).call(r,e);case 2:delete r.localCache[e];case 3:case"end":return o.stop()}},o)}))()}}]),n}(ur);return e.type="LOCAL",e}(),cr=function(){var e=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,function(){return window.sessionStorage},"SESSION")}return f(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(ur);return e.type="SESSION",e}(),lr=function(){var e=function(){function e(t){d(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return f(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i,o,a,s,c,l,h;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(i=(r=e).data,o=i.eventId,a=i.eventType,s=i.data,null==(c=t.handlersMap[a])?void 0:c.size){n.next=3;break}return n.abrupt("return");case 3:return r.ports[0].postMessage({status:"ack",eventId:o,eventType:a}),l=Array.from(c).map(function(){var e=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(r.origin,s));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.next=7,function(e){return Promise.all(e.map((t=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=!0,e.next=4,t;case 4:return e.t1=e.sent,e.abrupt("return",{fulfilled:e.t0,value:e.t1});case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t2});case 11:case"end":return e.stop()}},e,null,[[0,8]])})),function(e){return t.apply(this,arguments)})));var t}(l);case 7:h=n.sent,r.ports[0].postMessage({status:"done",eventId:o,eventType:a,response:h});case 9:case"end":return n.stop()}},n)}))()}},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find(function(e){return e.isListeningto(t)});if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();return e.receivers=[],e}();function hr(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}var fr=function(){function e(t){d(this,e),this.target=t,this.handlers=new Set}return f(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,r=this;return(0,u.Z)(regeneratorRuntime.mark(function i(){var o,a,u;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(o="undefined"!=typeof MessageChannel?new MessageChannel:null){i.next=3;break}throw new Error("connection_unavailable");case 3:return i.abrupt("return",new Promise(function(i,s){var c=hr("",20);o.port1.start();var l=setTimeout(function(){s(new Error("unsupported_event"))},n);u={messageChannel:o,onMessage:function(e){var t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),a=setTimeout(function(){s(new Error("timeout"))},3e3);break;case"done":clearTimeout(a),i(t.data.response);break;default:clearTimeout(l),clearTimeout(a),s(new Error("invalid_response"))}}},r.handlers.add(u),o.port1.addEventListener("message",u.onMessage),r.target.postMessage({eventType:e,eventId:c,data:t},[o.port2])}).finally(function(){u&&r.removeMessageHandler(u)}));case 4:case"end":return i.stop()}},i)}))()}}]),e}();function dr(){return window}function pr(){return void 0!==dr().WorkerGlobalScope&&"function"==typeof dr().importScripts}function vr(){return(vr=(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null==navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return e.abrupt("return",e.sent.active);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",null);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}var gr="firebaseLocalStorageDb",mr="firebaseLocalStorage",yr="fbase_key",kr=function(){function e(t){d(this,e),this.request=t}return f(e,[{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.request.addEventListener("success",function(){t(e.request.result)}),e.request.addEventListener("error",function(){n(e.request.error)})})}}]),e}();function _r(e,t){return e.transaction([mr],t?"readwrite":"readonly").objectStore(mr)}function wr(){var e=indexedDB.open(gr,1);return new Promise(function(t,n){e.addEventListener("error",function(){n(e.error)}),e.addEventListener("upgradeneeded",function(){var t=e.result;try{t.createObjectStore(mr,{keyPath:yr})}catch(r){n(r)}}),e.addEventListener("success",(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(r=e.result).objectStoreNames.contains(mr)){n.next=5;break}t(r),n.next=13;break;case 5:return r.close(),n.next=8,function(){var e=indexedDB.deleteDatabase(gr);return new kr(e).toPromise()}();case 8:return n.t0=t,n.next=11,wr();case 11:n.t1=n.sent,(0,n.t0)(n.t1);case 13:case"end":return n.stop()}},n)})))})}function br(e,t,n){return xr.apply(this,arguments)}function xr(){return(xr=(0,u.Z)(regeneratorRuntime.mark(function t(n,r,i){var o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=_r(n,!0).put((e(o={},yr,r),e(o,"value",i),o)),t.abrupt("return",new kr(a).toPromise());case 2:case"end":return t.stop()}},t)}))).apply(this,arguments)}function Ir(){return(Ir=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=_r(t,!1).get(n),e.next=3,new kr(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tr(e,t){var n=_r(e,!0).delete(t);return new kr(n).toPromise()}var Cr=function(){var e=function(){function e(){d(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(function(){},function(){})}return f(e,[{key:"_openDb",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.db,t.t0){t.next=5;break}return t.next=4,wr();case 4:e.db=t.sent;case 5:return t.abrupt("return",e.db);case 6:case"end":return t.stop()}},t)}))()}},{key:"_withRetries",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:r=0;case 1:return n.prev=1,n.next=4,t._openDb();case 4:return i=n.sent,n.next=7,e(i);case 7:return n.abrupt("return",n.sent);case 10:if(n.prev=10,n.t0=n.catch(1),!(r++>3)){n.next=14;break}throw n.t0;case 14:t.db&&(t.db.close(),t.db=void 0);case 15:n.next=1;break;case 17:case"end":return n.stop()}},n,null,[[1,10]])}))()}},{key:"initializeServiceWorkerMessaging",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",pr()?e.initializeReceiver():e.initializeSender());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeReceiver",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.receiver=lr._getInstance(pr()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,u.Z)(regeneratorRuntime.mark(function t(n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._poll();case 2:return t.t0=t.sent.includes(r.key),t.abrupt("return",{keyProcessed:t.t0});case 4:case"end":return t.stop()}},t)}));return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}());case 1:case"end":return t.stop()}},t)}))()}},{key:"initializeSender",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(){return vr.apply(this,arguments)}();case 2:if(e.activeServiceWorker=t.sent,e.activeServiceWorker){t.next=5;break}return t.abrupt("return");case 5:return e.sender=new fr(e.activeServiceWorker),t.next=8,e.sender._send("ping",{},800);case 8:!(i=t.sent)||(null===(n=i[0])||void 0===n?void 0:n.fulfilled)&&(null===(r=i[0])||void 0===r?void 0:r.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0);case 10:case"end":return t.stop()}},t)}))()}},{key:"notifyServiceWorker",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.sender||!t.activeServiceWorker||function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()!==t.activeServiceWorker){n.next=8;break}return n.prev=1,n.next=4,t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:case"end":return n.stop()}},n,null,[[1,6]])}))()}},{key:"_isAvailable",value:function(){return(0,u.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,wr();case 5:return t=e.sent,e.next=8,br(t,ar,"1");case 8:return e.next=10,Tr(t,ar);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}},e,null,[[0,13]])}))()}},{key:"_withPendingWrite",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.pendingWrites++,n.prev=1,n.next=4,e();case 4:return n.prev=4,t.pendingWrites--,n.finish(4);case 7:case"end":return n.stop()}},n,null,[[1,,4,7]])}))()}},{key:"_set",value:function(e,t){var n=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n._withPendingWrite((0,u.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n._withRetries(function(n){return br(n,e,t)});case 2:return n.localCache[e]=t,r.abrupt("return",n.notifyServiceWorker(e));case 4:case"end":return r.stop()}},r)}))));case 1:case"end":return r.stop()}},r)}))()}},{key:"_get",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return function(e,t){return Ir.apply(this,arguments)}(t,e)});case 2:return r=n.sent,n.abrupt("return",(t.localCache[e]=r,r));case 4:case"end":return n.stop()}},n)}))()}},{key:"_remove",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",t._withPendingWrite((0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t._withRetries(function(t){return Tr(t,e)});case 2:return delete t.localCache[e],n.abrupt("return",t.notifyServiceWorker(e));case 4:case"end":return n.stop()}},n)}))));case 1:case"end":return n.stop()}},n)}))()}},{key:"_poll",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n,r,i,o,a,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._withRetries(function(e){var t=_r(e,!1).getAll();return new kr(t).toPromise()});case 2:if(n=t.sent){t.next=5;break}return t.abrupt("return",[]);case 5:if(0===e.pendingWrites){t.next=7;break}return t.abrupt("return",[]);case 7:r=[],i=new Set,o=s(n);try{for(o.s();!(a=o.n()).done;)u=a.value,c=u.fbase_key,l=u.value,i.add(c),JSON.stringify(e.localCache[c])!==JSON.stringify(l)&&(e.notifyListeners(c,l),r.push(c))}catch(p){o.e(p)}finally{o.f()}for(h=0,f=Object.keys(e.localCache);h<f.length;h++)d=f[h],e.localCache[d]&&!i.has(d)&&(e.notifyListeners(d,null),r.push(d));return t.abrupt("return",r);case 12:case"end":return t.stop()}},t)}))()}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}},t)})),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();return e.type="LOCAL",e}();function Er(e,t){return H(e,"POST","/v2/accounts/mfaSignIn:start",Z(e,t))}function Sr(){return(Sr=(0,u.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Rr(e){return new Promise(function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=E("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Ar(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var Nr=1e12,Or=function(){function e(t){d(this,e),this.auth=t,this.counter=Nr,this._widgets=new Map}return f(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new Pr(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||Nr;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t;return(null===(t=this._widgets.get(e||Nr))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(null===(r=t._widgets.get(e||Nr))||void 0===r||r.execute(),""));case 1:case"end":return n.stop()}},n)}))()}}]),e}(),Pr=function(){function e(t,n,r){var i=this;d(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var o="string"==typeof t?document.getElementById(t):t;N(o,"argument-error",{appName:n}),this.container=o,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return f(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout(function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()},6e4)},500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}(),Dr=Ar("rcb"),Lr=new V(3e4,6e4),Mr=function(){function e(){d(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!dr().grecaptcha}return f(e,[{key:"load",value:function(e){var t,n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return N((t=r).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t),e,"argument-error"),this.shouldResolveImmediately(r)?Promise.resolve(dr().grecaptcha):new Promise(function(t,i){var o=dr().setTimeout(function(){i(E(e,"network-request-failed"))},Lr.get());dr()[Dr]=function(){dr().clearTimeout(o),delete dr()[Dr];var a=dr().grecaptcha;if(a){var u=a.render;a.render=function(e,t){var r=u(e,t);return n.counter++,r},n.hostLanguage=r,t(a)}else i(E(e,"internal-error"))},Rr("https://www.google.com/recaptcha/api.js??".concat((0,c.xO)({onload:Dr,render:"explicit",hl:r}))).catch(function(){clearTimeout(o),i(E(e,"internal-error"))})})}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){return!!dr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}(),Fr=function(){function e(){d(this,e)}return f(e,[{key:"load",value:function(e){return(0,u.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Or(e));case 1:case"end":return t.stop()}},t)}))()}},{key:"clearedOneInstance",value:function(){}}]),e}(),Ur="recaptcha",Vr={theme:"light",type:"image"},jr=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.assign({},Vr),r=arguments.length>2?arguments[2]:void 0;d(this,e),this.parameters=n,this.type=Ur,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ve(r),this.isInvisible="invisible"===this.parameters.size,N("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"==typeof t?document.getElementById(t):t;N(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Fr:new Mr,this.validateStartingState()}return f(e,[{key:"verify",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.assertNotDestroyed(),t.next=3,e.render();case 3:return n=t.sent,r=e.getAssertedRecaptcha(),t.abrupt("return",r.getResponse(n)||new Promise(function(t){e.tokenChangeListeners.add(function n(r){!r||(e.tokenChangeListeners.delete(n),t(r))}),e.isInvisible&&r.execute(n)}));case 6:case"end":return t.stop()}},t)}))()}},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(function(t){throw e.renderPromise=null,t})),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(function(t){e.container.removeChild(t)})}},{key:"validateStartingState",value:function(){N(!this.parameters.sitekey,this.auth,"argument-error"),N(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),N("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach(function(e){return e(n)}),"function"==typeof e)e(n);else if("string"==typeof e){var r=dr()[e];"function"==typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){N(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.init();case 2:if(e.widgetId){t.next=6;break}n=e.container,e.isInvisible||(r=document.createElement("div"),n.appendChild(r),n=r),e.widgetId=e.getAssertedRecaptcha().render(n,e.parameters);case 6:return t.abrupt("return",e.widgetId);case 7:case"end":return t.stop()}},t)}))()}},{key:"init",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return N(F()&&!pr(),e.auth,"internal-error"),t.next=3,function(){var e=null;return new Promise(function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()}).catch(function(t){throw e&&window.removeEventListener("load",e),t})}();case 3:return t.next=5,e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);case 5:return e.recaptcha=t.sent,t.next=8,function(e){return Sr.apply(this,arguments)}(e.auth);case 8:N(n=t.sent,e.auth,"internal-error"),e.parameters.sitekey=n;case 10:case"end":return t.stop()}},t)}))()}},{key:"getAssertedRecaptcha",value:function(){return N(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}(),qr=function(){function e(t,n){d(this,e),this.verificationId=t,this.onConfirmation=n}return f(e,[{key:"confirm",value:function(e){var t=_t._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function Br(e,t,n){return zr.apply(this,arguments)}function zr(){return(zr=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),e.next=3,Kr(i,n,(0,c.m9)(r));case 3:return o=e.sent,e.abrupt("return",new qr(o,function(e){return Jt(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Zr(e,t,n){return Hr.apply(this,arguments)}function Hr(){return(Hr=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,c.m9)(t),e.next=3,Ht(!1,i,"phone");case 3:return e.next=5,Kr(i.auth,n,(0,c.m9)(r));case 5:return o=e.sent,e.abrupt("return",new qr(o,function(e){return Xt(i,e)}));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gr(e,t,n){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=(0,c.m9)(t),e.next=3,Kr(i.auth,n,(0,c.m9)(r));case 3:return o=e.sent,e.abrupt("return",new qr(o,function(e){return tn(i,e)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Kr(e,t,n){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,N("string"==typeof o,t,"argument-error"),N(r.type===Ur,t,"argument-error"),!("session"in(a="string"==typeof n?{phoneNumber:n}:n))){e.next=17;break}if(u=a.session,!("phoneNumber"in a)){e.next=11;break}return N("enroll"===u.type,t,"internal-error"),e.next=10,nr(t,{idToken:u.credential,phoneEnrollmentInfo:{phoneNumber:a.phoneNumber,recaptchaToken:o}});case 10:return e.abrupt("return",e.sent.phoneSessionInfo.sessionInfo);case 11:return N("signin"===u.type,t,"internal-error"),N(s=(null===(i=a.multiFactorHint)||void 0===i?void 0:i.uid)||a.multiFactorUid,t,"missing-multi-factor-info"),e.next=16,Er(t,{mfaPendingCredential:u.credential,mfaEnrollmentId:s,phoneSignInInfo:{recaptchaToken:o}});case 16:return e.abrupt("return",e.sent.phoneResponseInfo.sessionInfo);case 17:return e.next=19,pt(t,{phoneNumber:a.phoneNumber,recaptchaToken:o});case 19:return c=e.sent,l=c.sessionInfo,e.abrupt("return",l);case 22:return e.prev=22,r._reset(),e.finish(22);case 25:case"end":return e.stop()}},e,null,[[3,,22,25]])}))).apply(this,arguments)}function Qr(e,t){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zt((0,c.m9)(t),n);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $r=function(){var e=function(){function e(t){d(this,e),this.providerId=e.PROVIDER_ID,this.auth=Ve(t)}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return Kr(this.auth,e,(0,c.m9)(t))}}],[{key:"credential",value:function(e,t){return _t._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){return e.credentialFromTaggedObject(t)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?_t._fromTokenResponse(n,r):null}}]),e}();return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e}();function Xr(e,t){return t?L(t):(N(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}var ei=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"custom","custom")).params=e,r}return f(n,[{key:"_getIdTokenResponse",value:function(e){return ht(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return ht(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return ht(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Ze);function ti(e){return Yt(e.auth,new ei(e),e.bypassAuthState)}function ni(e){var t=e.auth,n=e.user;return N(n,t,"internal-error"),Wt(n,new ei(e),e.bypassAuthState)}function ri(e){return ii.apply(this,arguments)}function ii(){return(ii=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,r=t.user,e.abrupt("return",(N(r,n,"internal-error"),zt(r,new ei(t),t.bypassAuthState)));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var oi=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];d(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return f(e,[{key:"execute",value:function(){var e,t=this;return new Promise((e=(0,u.Z)(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.pendingPromise={resolve:n,reject:r},e.prev=1,e.next=4,t.resolver._initialize(t.auth);case 4:return t.eventManager=e.sent,e.next=7,t.onExecution();case 7:t.eventManager.registerConsumer(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),t.reject(e.t0);case 13:case"end":return e.stop()}},e,null,[[1,10]])})),function(t,n){return e.apply(this,arguments)}))}},{key:"onAuthEvent",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i,o,a,u,s,c;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.urlResponse,i=e.sessionId,o=e.postBody,a=e.tenantId,u=e.error,s=e.type,!u){n.next=3;break}return n.abrupt("return",void t.reject(u));case 3:return c={auth:t.auth,requestUri:r,sessionId:i,tenantId:a||void 0,postBody:o||void 0,user:t.user,bypassAuthState:t.bypassAuthState},n.prev=4,n.t0=t,n.next=8,t.getIdpTask(s)(c);case 8:n.t1=n.sent,n.t0.resolve.call(n.t0,n.t1),n.next=15;break;case 12:n.prev=12,n.t2=n.catch(4),t.reject(n.t2);case 15:case"end":return n.stop()}},n,null,[[4,12]])}))()}},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ti;case"linkViaPopup":case"linkViaRedirect":return ri;case"reauthViaPopup":case"reauthViaRedirect":return ni;default:C(this.auth,"internal-error")}}},{key:"resolve",value:function(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){P(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),ai=new V(2e3,1e4);function ui(e,t,n){return si.apply(this,arguments)}function si(){return(si=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),R(t,n,xt),o=Xr(i,r),e.abrupt("return",new di(i,"signInViaPopup",n,o).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ci(e,t,n){return li.apply(this,arguments)}function li(){return(li=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,c.m9)(t)).auth,n,xt),o=Xr(i.auth,r),e.abrupt("return",new di(i.auth,"reauthViaPopup",n,o,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hi(e,t,n){return fi.apply(this,arguments)}function fi(){return(fi=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,c.m9)(t)).auth,n,xt),o=Xr(i.auth,r),e.abrupt("return",new di(i.auth,"linkViaPopup",n,o,i).executeNotNull());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var di=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a){var u;return d(this,n),(u=t.call(this,e,r,o,a)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=m(u),u}return f(n,[{key:"executeNotNull",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.execute();case 2:return n=t.sent,t.abrupt("return",(N(n,e.auth,"internal-error"),n));case 4:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){var e=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return P(1===e.filter.length,"Popup operations only handle one event"),n=hr(),t.next=4,e.resolver._openPopup(e.auth,e.provider,e.filter[0],n);case 4:e.authWindow=t.sent,e.authWindow.associatedEvent=n,e.resolver._originValidation(e.auth).catch(function(t){e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,function(t){t||e.reject(E(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation();case 9:case"end":return t.stop()}},t)}))()}},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(E(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;e.pollId=(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?window.setTimeout(function(){e.pollId=null,e.reject(E(e.auth,"popup-closed-by-user"))},2e3):window.setTimeout(t,ai.get())}()}}]),n}(oi);return e.currentPopupAction=null,e}(),pi=new Map,vi=function(e){p(n,e);var t=v(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,o)).eventId=null,i}return f(n,[{key:"execute",value:function(){var e=this,t=this;return(0,u.Z)(regeneratorRuntime.mark(function r(){var o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(o=pi.get(t.auth._key())){r.next=20;break}return r.prev=2,r.next=5,function(e,t){return gi.apply(this,arguments)}(t.resolver,t.auth);case 5:if(!r.sent){r.next=11;break}return r.next=8,i(b(n.prototype),"execute",e).call(t);case 8:r.t0=r.sent,r.next=12;break;case 11:r.t0=null;case 12:a=r.t0,o=function(){return Promise.resolve(a)},r.next=19;break;case 16:r.prev=16,r.t1=r.catch(2),o=function(){return Promise.reject(r.t1)};case 19:pi.set(t.auth._key(),o);case 20:return r.abrupt("return",(t.bypassAuthState||pi.set(t.auth._key(),function(){return Promise.resolve(null)}),o()));case 21:case"end":return r.stop()}},r,null,[[2,16]])}))()}},{key:"onAuthEvent",value:function(e){var t=this,r=function(){return i(b(n.prototype),"onAuthEvent",t)},o=this;return(0,u.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("signInViaRedirect"!==e.type){t.next=2;break}return t.abrupt("return",r().call(o,e));case 2:if("unknown"===e.type){t.next=12;break}if(!e.eventId){t.next=10;break}return t.next=6,o.auth._redirectUserForId(e.eventId);case 6:if(!(n=t.sent)){t.next=9;break}return t.abrupt("return",(o.user=n,r().call(o,e)));case 9:o.resolve(null);case 10:t.next=13;break;case 12:o.resolve(null);case 13:case"end":return t.stop()}},t)}))()}},{key:"onExecution",value:function(){return(0,u.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()}},{key:"cleanUp",value:function(){}}]),n}(oi);function gi(){return(gi=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=wi(n),i=_i(t),e.next=3,i._isAvailable();case 3:if(e.sent){e.next=5;break}return e.abrupt("return",!1);case 5:return e.next=7,i._get(r);case 7:return e.t0=e.sent,o="true"===e.t0,e.next=11,i._remove(r);case 11:return e.abrupt("return",o);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function mi(e,t){return yi.apply(this,arguments)}function yi(){return(yi=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_i(t)._set(wi(n),"true"));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ki(){pi.clear()}function _i(e){return L(e._redirectPersistence)}function wi(e){return Ie("pendingRedirect",e.config.apiKey,e.name)}function bi(e,t,n){return function(e,t,n){return xi.apply(this,arguments)}(e,t,n)}function xi(){return(xi=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=Ve(t),R(t,n,xt),o=Xr(i,r),e.next=5,mi(o,i);case 5:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ii(e,t,n){return function(e,t,n){return Ti.apply(this,arguments)}(e,t,n)}function Ti(){return(Ti=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,c.m9)(t)).auth,n,xt),o=Xr(i.auth,r),e.next=5,mi(o,i.auth);case 5:return e.next=7,Oi(i);case 7:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"reauthViaRedirect",a));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ci(e,t,n){return function(e,t,n){return Ei.apply(this,arguments)}(e,t,n)}function Ei(){return(Ei=(0,u.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R((i=(0,c.m9)(t)).auth,n,xt),o=Xr(i.auth,r),e.next=5,Ht(!1,i,n.providerId);case 5:return e.next=7,mi(o,i.auth);case 7:return e.next=9,Oi(i);case 9:return a=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"linkViaRedirect",a));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Si(e,t){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ve(t)._initializationPromise;case 2:return e.abrupt("return",Ai(t,n,!1));case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ai(e,t){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,u.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]&&u[2],i=Ve(t),o=Xr(i,n),e.next=5,new vi(i,o,r).execute();case 5:if(a=e.sent,e.t0=a&&!r,!e.t0){e.next=13;break}return delete a.user._redirectEventId,e.next=11,i._persistUserIfCurrent(a.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",a);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Oi(e){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=hr("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Di=function(){function e(t){d(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return f(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach(function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Mi(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!Mi(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(E(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Li(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(Li(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function Li(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(function(e){return e}).join("-")}function Mi(e){var t=e.type,n=e.error;return"unknown"===t&&"auth/no-auth-event"===(null==n?void 0:n.code)}function Fi(e){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",H(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ji=/^https?/;function qi(){return(qi=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Fi(t);case 4:n=e.sent,r=n.authorizedDomains,i=s(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(a=o.value,e.prev=11,!Bi(a)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:C(t,"unauthorized-domain");case 29:case"end":return e.stop()}},e,null,[[7,22,25,28],[11,16]])}))).apply(this,arguments)}function Bi(e){var t=M(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var o=new URL(e);return""===o.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&o.hostname===i}if(!ji.test(r))return!1;if(Vi.test(e))return i===e;var a=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+a+"|"+a+")$","i").test(i)}var zi=new V(3e4,6e4);function Zi(){var e=dr().___jsl;if(null==e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=a(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var Hi=null;function Gi(e){return Hi=Hi||function(e){return new Promise(function(t,n){var r,i,o;function a(){Zi(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){Zi(),n(E(e,"network-request-failed"))},timeout:zi.get()})}if(null===(i=null===(r=dr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=dr().gapi)||void 0===o?void 0:o.load)){var u=Ar("iframefcb");return dr()[u]=function(){gapi.load?a():n(E(e,"network-request-failed"))},Rr("https://apis.google.com/js/api.js?onload=".concat(u)).catch(function(e){return n(e)})}a()}}).catch(function(e){throw Hi=null,e})}(e)}var Wi=new V(5e3,15e3),Ki={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Qi(e){var t=e.config;N(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?j(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:l.SDK_VERSION},i=Yi.get(e.config.apiHost);i&&(r.eid=i);var o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat((0,c.xO)(r).slice(1))}function Ji(){return(Ji=(0,u.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Gi(t);case 2:return n=e.sent,r=dr().gapi,e.abrupt("return",(N(r,t,"internal-error"),n.open({where:document.body,url:Qi(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ki,dontclear:!0},function(e){return new Promise((n=(0,u.Z)(regeneratorRuntime.mark(function n(r,i){var o,a,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u=function(){dr().clearTimeout(a),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=E(t,"network-request-failed"),a=dr().setTimeout(function(){i(o)},Wi.get()),e.ping(u).then(u,function(){i(o)});case 5:case"end":return n.stop()}},n)})),function(e,t){return n.apply(this,arguments)}));var n})));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var $i={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Xi=function(){function e(t){d(this,e),this.window=t,this.associatedEvent=null}return f(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function eo(e,n,r,i,o,a){N(e.config.authDomain,e,"auth-domain-config-required"),N(e.config.apiKey,e,"invalid-api-key");var u={apiKey:e.config.apiKey,appName:e.name,authType:r,redirectUrl:i,v:l.SDK_VERSION,eventId:o};if(n instanceof xt){n.setDefaultLanguage(e.languageCode),u.providerId=n.providerId||"",(0,c.xb)(n.getCustomParameters())||(u.customParameters=JSON.stringify(n.getCustomParameters()));for(var s=0,h=Object.entries(a||{});s<h.length;s++){var f=t(h[s],2),d=f[0],p=f[1];u[d]=p}}if(n instanceof It){var v=n.getScopes().filter(function(e){return""!==e});v.length>0&&(u.scopes=v.join(","))}e.tenantId&&(u.tid=e.tenantId);for(var g=u,m=0,y=Object.keys(g);m<y.length;m++){var k=y[m];void 0===g[k]&&delete g[k]}return"".concat(function(e){var t=e.config;return t.emulator?j(t,"emulator/auth/handler"):"https://".concat(t.authDomain,"/__/auth/handler")}(e),"?").concat((0,c.xO)(g).slice(1))}var to,no="webStorageSupport",ro=function(){function e(){d(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=cr,this._completeRedirectFn=Ai}return f(e,[{key:"_openPopup",value:function(e,n,r,i){var o=this;return(0,u.Z)(regeneratorRuntime.mark(function a(){var u,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return P(null===(u=o.eventManagers[e._key()])||void 0===u?void 0:u.manager,"_initialize() not called before _openPopup()"),s=eo(e,n,r,M(),i),a.abrupt("return",function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-o)/2,0).toString(),u=Math.max((window.screen.availWidth-i)/2,0).toString(),s="",l=Object.assign(Object.assign({},$i),{width:i.toString(),height:o.toString(),top:a,left:u}),h=(0,c.z$)().toLowerCase();r&&(s=Re(h)?"_blank":r),Ee(h)&&(n=n||"http://localhost",l.scrollbars="yes");var f=Object.entries(l).reduce(function(e,n){var r=t(n,2),i=r[0],o=r[1];return"".concat(e).concat(i,"=").concat(o,",")},"");if(function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.z$)();return De(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(h)&&"_self"!==s)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(n||"",s),new Xi(null);var d=window.open(n||"",s,f);N(d,e,"popup-blocked");try{d.focus()}catch(p){}return new Xi(d)}(e,s,hr()));case 3:case"end":return a.stop()}},a)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,u.Z)(regeneratorRuntime.mark(function o(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i._originValidation(e);case 2:return a=eo(e,t,n,M(),r),dr().location.href=a,o.abrupt("return",new Promise(function(){}));case 5:case"end":return o.stop()}},o)}))()}},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,o=r.promise;return i?Promise.resolve(i):(P(o,"If manager is not set, promise should be"),o)}var a=this.initAndGetManager(e);return this.eventManagers[n]={promise:a},a.catch(function(){delete t.eventManagers[n]}),a}},{key:"initAndGetManager",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,function(e){return Ji.apply(this,arguments)}(e);case 2:return r=n.sent,i=new Di(e),n.abrupt("return",(r.register("authEvent",function(t){return N(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:i.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:i},t.iframes[e._key()]=r,i));case 5:case"end":return n.stop()}},n)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(no,{type:no},function(n){var r,i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[no];void 0!==i&&t(!!i),C(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return qi.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return Me()||Se()||De()}}]),e}(),io=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,"phone")).credential=e,r}return f(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return H(e,"POST","/v2/accounts/mfaEnrollment:finalize",Z(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return H(e,"POST","/v2/accounts/mfaSignIn:finalize",Z(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(function(){function e(t){d(this,e),this.factorId=t}return f(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return O("unexpected MultiFactorSessionType")}}}]),e}()),oo=function(){var e=function(){function e(){d(this,e)}return f(e,null,[{key:"assertion",value:function(e){return io._fromCredential(e)}}]),e}();return e.FACTOR_ID="phone",e}(),ao="@firebase/auth",uo=function(){function e(t){d(this,e),this.auth=t,this.internalListeners=new Map}return f(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(e){var t=this;return(0,u.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.assertAuthConfigured(),n.next=3,t.auth._initializationPromise;case 3:if(!t.auth.currentUser){n.next=10;break}return n.next=6,t.auth.currentUser.getIdToken(e);case 6:n.t1=n.sent,n.t0={accessToken:n.t1},n.next=11;break;case 10:n.t0=null;case 11:return n.abrupt("return",n.t0);case 12:case"end":return n.stop()}},n)}))()}},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged(function(t){var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){N(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,l.getApp)(),t=(0,l._getProvider)(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){var n=(0,l._getProvider)(e,"auth");if(n.isInitialized()){var r=n.getImmediate(),i=n.getOptions();if((0,c.vZ)(i,null!=t?t:{}))return r;C(r,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:ro,persistence:[Cr,sr,cr]})}to="Browser",(0,l._registerComponent)(new y.wA("auth",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=r.options,o=i.apiKey,a=i.authDomain;return function(e){N(o&&!o.includes(":"),"invalid-api-key",{appName:e.name}),N(!(null==a?void 0:a.includes(":")),"argument-error",{appName:e.name});var t={apiKey:o,authDomain:a,clientPlatform:to,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Fe(to)},r=new Ue(e,t);return function(e,t){var n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(L);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(r,n),r}(r)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider("auth-internal").initialize()})),(0,l._registerComponent)(new y.wA("auth-internal",function(e){var t=Ve(e.getProvider("auth").getImmediate());return new uo(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,l.registerVersion)(ao,"0.19.4",void 0),(0,l.registerVersion)(ao,"0.19.4","esm2017")},3854:function(e,n,r){"use strict";r.d(n,{BH:function(){return _},LL:function(){return F},ZR:function(){return M},gQ:function(){return X},zI:function(){return L},hu:function(){return i},g5:function(){return o},US:function(){return u},tV:function(){return l},h$:function(){return s},$s:function(){return ae},r3:function(){return Z},Sg:function(){return w},ne:function(){return ee},p$:function(){return h},vZ:function(){return K},ZB:function(){return g},gK:function(){return re},pd:function(){return $},m9:function(){return ue},z$:function(){return b},GJ:function(){return z},jU:function(){return T},ru:function(){return C},d:function(){return S},xb:function(){return G},w1:function(){return R},hl:function(){return P},uI:function(){return x},UG:function(){return I},Yr:function(){return N},b$:function(){return E},G6:function(){return O},Mn:function(){return A},w9:function(){return B},cI:function(){return V},UI:function(){return W},xO:function(){return Q},zd:function(){return J},DV:function(){return H},ug:function(){return oe},dS:function(){return ie},Pz:function(){return j},eu:function(){return D}});var i=function(e,t){if(!e)throw o(t)},o=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},a=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},u={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var o=e[i],a=i+1<e.length,u=a?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=(15&u)<<2|c>>6,h=63&c;s||(h=64,a||(l=64)),r.push(n[o>>2],n[(3&o)<<4|u>>4],n[l],n[h])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var a=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(a>>10)),t[r++]=String.fromCharCode(56320+(1023&a))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var o=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==o||null==a||null==u||null==s)throw Error();r.push(o<<2|a>>4),64!==u&&(r.push(a<<4&240|u>>2),64!==s&&r.push(u<<6&192|s))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},s=function(e){var t=a(e);return u.encodeByteArray(t,!0)},c=function(e){return s(e).replace(/\./g,"")},l=function(e){try{return u.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function h(e){return g(void 0,e)}function g(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)!t.hasOwnProperty(n)||!k(n)||(e[n]=g(e[n],t[n]));return e}function k(e){return"__proto__"!==e}var _=function(){function e(){var t=this;d(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return f(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"==typeof e&&(t.promise.catch(function(){}),1===e.length?e(n):e(n,r))}}}]),e}();function w(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var o=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(o)),""].join(".")}function b(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function x(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(b())}function I(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function T(){return"object"==typeof self&&self.self===self}function C(){var e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function E(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function S(){return b().indexOf("Electron/")>=0}function R(){var e=b();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function A(){return b().indexOf("MSAppHost/")>=0}function N(){return!1}function O(){return!I()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function P(){return"object"==typeof indexedDB}function D(){return new Promise(function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function L(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}var M=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,r)).code=e,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(m(o),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(m(o),F.prototype.create),o}return n}(y(Error)),F=function(){function e(t,n,r){d(this,e),this.service=t,this.serviceName=n,this.errors=r}return f(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(U,function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error";return new M(n,"".concat(this.serviceName,": ").concat(i," (").concat(n,")."),t)}}]),e}(),U=/\{\$([^}]+)}/g;function V(e){return JSON.parse(e)}function j(e){return JSON.stringify(e)}var q=function(e){var t={},n={},r={},i="";try{var o=e.split(".");t=V(l(o[0])||""),n=V(l(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(o){}return{header:t,claims:n,data:r,signature:i}},B=function(e){var t=q(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},z=function(e){var t=q(e).claims;return"object"==typeof t&&!0===t.admin};function Z(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function H(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function G(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function W(e,t,n){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function K(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,o=n;i<o.length;i++){var a=o[i];if(!r.includes(a))return!1;var u=e[a],s=t[a];if(Y(u)&&Y(s)){if(!K(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var h=l[c];if(!n.includes(h))return!1}return!0}function Y(e){return null!==e&&"object"==typeof e}function Q(e){for(var n=[],r=function(){var e=t(o[i],2),r=e[0],a=e[1];Array.isArray(a)?a.forEach(function(e){n.push(encodeURIComponent(r)+"="+encodeURIComponent(e))}):n.push(encodeURIComponent(r)+"="+encodeURIComponent(a))},i=0,o=Object.entries(e);i<o.length;i++)r();return n.length?"&"+n.join("&"):""}function J(e){var n={};return e.replace(/^\?/,"").split("&").forEach(function(e){if(e){var r=t(e.split("="),2),i=r[0],o=r[1];n[decodeURIComponent(i)]=decodeURIComponent(o)}}),n}function $(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}var X=function(){function e(){d(this,e),this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return f(e,[{key:"reset",value:function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}},{key:"compress_",value:function(e,t){t||(t=0);var n=this.W_;if("string"==typeof e)for(var r=0;r<16;r++)n[r]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(var i=0;i<16;i++)n[i]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(var o=16;o<80;o++){var a=n[o-3]^n[o-8]^n[o-14]^n[o-16];n[o]=4294967295&(a<<1|a>>>31)}for(var u,s,c=this.chain_[0],l=this.chain_[1],h=this.chain_[2],f=this.chain_[3],d=this.chain_[4],p=0;p<80;p++){p<40?p<20?(u=f^l&(h^f),s=1518500249):(u=l^h^f,s=1859775393):p<60?(u=l&h|f&(l|h),s=2400959708):(u=l^h^f,s=3395469782);var v=(c<<5|c>>>27)+u+d+s+n[p]&4294967295;d=f,f=h,h=4294967295&(l<<30|l>>>2),l=c,c=v}this.chain_[0]=this.chain_[0]+c&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+d&4294967295}},{key:"update",value:function(e,t){if(null!=e){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<t;){if(0===o)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[o]=e.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<t;)if(i[o]=e[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=t}}},{key:"digest",value:function(){var e=[],t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&t,t/=256;this.compress_(this.buf_);for(var r=0,i=0;i<5;i++)for(var o=24;o>=0;o-=8)e[r]=this.chain_[i]>>o&255,++r;return e}}]),e}();function ee(e,t){var n=new te(e,t);return n.subscribe.bind(n)}var te=function(){function e(t,n){var r=this;d(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(function(){t(r)}).catch(function(e){r.error(e)})}return f(e,[{key:"next",value:function(e){this.forEachObserver(function(t){t.next(e)})}},{key:"error",value:function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)}},{key:"complete",value:function(){this.forEachObserver(function(e){e.complete()}),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in e&&"function"==typeof e[i])return!0}return!1}(e)?e:{next:e,error:t,complete:n}).next&&(r.next=ne),void 0===r.error&&(r.error=ne),void 0===r.complete&&(r.complete=ne);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}}),this.observers.push(r),o}},{key:"unsubscribeOne",value:function(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))}}]),e}();function ne(){}function re(e,t){return"".concat(e," failed: ").concat(t," argument ")}var ie=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var o=e.charCodeAt(r);if(o>=55296&&o<=56319){var a=o-55296;r++,i(r<e.length,"Surrogate pair missing trail surrogate."),o=65536+(a<<10)+(e.charCodeAt(r)-56320)}o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=63&o|128):o<65536?(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=63&o|128):(t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=63&o|128)}return t},oe=function(e){for(var t=0,n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function ae(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function ue(e){return e&&e._delegate?e._delegate:e}},3935:function(e,n,r){"use strict";r.d(n,{IH:function(){return Q},Gb:function(){return J},Kz:function(){return ee},Iv:function(){return X}});var i=r(8239),o=r(8026),a=r(5422),u=r(3854),c=r(3910);r(3328);var l="analytics",h="firebase_id",p="origin",v="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",g="https://www.googletagmanager.com/gtag/js",m=new a.Yd("@firebase/analytics");function y(e){return Promise.all(e.map(function(e){return e.catch(function(e){return e})}))}function k(e,t){var n=document.createElement("script");n.src="".concat(g,"?l=").concat(e,"&id=").concat(t),n.async=!0,document.head.appendChild(n)}function _(e,t,n,r,i,o){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)(regeneratorRuntime.mark(function e(t,n,r,i,o,a){var u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=i[o],e.prev=1,!u){e.next=7;break}return e.next=5,n[u];case 5:e.next=14;break;case 7:return e.next=9,y(r);case 9:if(s=e.sent.find(function(e){return e.measurementId===o}),e.t0=s,!e.t0){e.next=14;break}return e.next=14,n[s.appId];case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(1),m.error(e.t1);case 19:t("config",o,a);case 20:case"end":return e.stop()}},e,null,[[1,16]])}))).apply(this,arguments)}function b(e,t,n,r,i){return x.apply(this,arguments)}function x(){return(x=(0,i.Z)(regeneratorRuntime.mark(function e(t,n,r,i,o){var a,u,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=[],!o||!o.send_to){e.next=26;break}return u=o.send_to,Array.isArray(u)||(u=[u]),e.next=7,y(r);case 7:c=e.sent,l=s(u),e.prev=9,f=function(){var e=h.value,t=c.find(function(t){return t.measurementId===e}),r=t&&n[t.appId];if(!r)return a=[],"break";a.push(r)},l.s();case 12:if((h=l.n()).done){e.next=18;break}if("break"!==f()){e.next=16;break}return e.abrupt("break",18);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(9),l.e(e.t0);case 23:return e.prev=23,l.f(),e.finish(23);case 26:return 0===a.length&&(a=Object.values(n)),e.next=29,Promise.all(a);case 29:t("event",i,o||{}),e.next=35;break;case 32:e.prev=32,e.t1=e.catch(0),m.error(e.t1);case 35:case"end":return e.stop()}},e,null,[[0,32],[9,20,23,26]])}))).apply(this,arguments)}function I(){for(var e=window.document.getElementsByTagName("script"),t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if(r.src&&r.src.includes(g))return r}return null}var T=new u.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),C=new(function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;d(this,e),this.throttleMetadata=t,this.intervalMillis=n}return f(e,[{key:"getThrottleMetadata",value:function(e){return this.throttleMetadata[e]}},{key:"setThrottleMetadata",value:function(e,t){this.throttleMetadata[e]=t}},{key:"deleteThrottleMetadata",value:function(e){delete this.throttleMetadata[e]}}]),e}());function E(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function S(e){return R.apply(this,arguments)}function R(){return(R=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appId,i=t.apiKey,o={method:"GET",headers:E(i)},a=v.replace("{app-id}",r),e.next=6,fetch(a,o);case 6:if(200===(u=e.sent).status||304===u.status){e.next=19;break}return s="",e.prev=9,e.next=12,u.json();case 12:c=e.sent,(null===(n=c.error)||void 0===n?void 0:n.message)&&(s=c.error.message),e.next=18;break;case 16:e.prev=16,e.t0=e.catch(9);case 18:throw T.create("config-fetch-failed",{httpStatus:u.status,responseMessage:s});case 19:return e.abrupt("return",u.json());case 20:case"end":return e.stop()}},e,null,[[9,16]])}))).apply(this,arguments)}function A(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r,o,a,u,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]?h[1]:C,r=h.length>2?h[2]:void 0,o=t.options,a=o.appId,u=o.apiKey,s=o.measurementId,a){e.next=5;break}throw T.create("no-app-id");case 5:if(u){e.next=9;break}if(!s){e.next=8;break}return e.abrupt("return",{measurementId:s,appId:a});case 8:throw T.create("no-api-key");case 9:return c=n.getThrottleMetadata(a)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new M,e.abrupt("return",(setTimeout((0,i.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.abort();case 1:case"end":return e.stop()}},e)})),void 0!==r?r:6e4),O({appId:a,apiKey:u,measurementId:s},c,l,n)));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t,n){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,s,c,l,h,f,d=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=n.throttleEndTimeMillis,o=n.backoffCount,a=d.length>3&&void 0!==d[3]?d[3]:C,s=t.appId,c=t.measurementId,e.prev=3,e.next=6,D(r,i);case 6:e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(3),!c){e.next=12;break}return e.abrupt("return",(m.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(c,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t0.message,"]")),{appId:s,measurementId:c}));case 12:throw e.t0;case 13:return e.prev=13,e.next=16,S(t);case 16:return l=e.sent,e.abrupt("return",(a.deleteThrottleMetadata(s),l));case 20:if(e.prev=20,e.t1=e.catch(13),L(e.t1)){e.next=26;break}if(a.deleteThrottleMetadata(s),!c){e.next=25;break}return e.abrupt("return",(m.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ".concat(c,' provided in the "measurementId" field in the local Firebase config. [').concat(e.t1.message,"]")),{appId:s,measurementId:c}));case 25:throw e.t1;case 26:return h=503===Number(e.t1.customData.httpStatus)?(0,u.$s)(o,a.intervalMillis,30):(0,u.$s)(o,a.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:o+1},e.abrupt("return",(a.setThrottleMetadata(s,f),m.debug("Calling attemptFetch again in ".concat(h," millis")),O(t,f,r,a)));case 28:case"end":return e.stop()}},e,null,[[3,8],[13,20]])}))).apply(this,arguments)}function D(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(T.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function L(e){if(!(e instanceof u.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}var M=function(){function e(){d(this,e),this.listeners=[]}return f(e,[{key:"addEventListener",value:function(e){this.listeners.push(e)}},{key:"abort",value:function(){this.listeners.forEach(function(e){return e()})}}]),e}();function F(){return U.apply(this,arguments)}function U(){return(U=(0,i.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,u.hl)()){e.next=2;break}return e.abrupt("return",(m.warn(T.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1));case 2:return e.prev=2,e.next=5,(0,u.eu)();case 5:e.next=10;break;case 7:return e.prev=7,e.t0=e.catch(2),e.abrupt("return",(m.warn(T.create("indexeddb-unavailable",{errorInfo:e.t0}).message),!1));case 10:return e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,null,[[2,7]])}))).apply(this,arguments)}function V(){return(V=(0,i.Z)(regeneratorRuntime.mark(function e(n,r,i,o,a,u,s){var c,l,f,d,v,g,y,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(l=A(n)).then(function(e){i[e.measurementId]=e.appId,n.options.measurementId&&e.measurementId!==n.options.measurementId&&m.warn("The measurement ID in the local Firebase config (".concat(n.options.measurementId,") does not match the measurement ID fetched from the server (").concat(e.measurementId,"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config."))}).catch(function(e){return m.error(e)}),r.push(l),f=F().then(function(e){if(e)return o.getId()}),e.next=5,Promise.all([l,f]);case 5:return d=e.sent,v=t(d,2),g=v[0],y=v[1],I()||k(u,g.measurementId),a("js",new Date),_=null!==(c=null==s?void 0:s.config)&&void 0!==c?c:{},e.abrupt("return",(_[p]="firebase",_.update=!0,null!=y&&(_[h]=y),a("config",g.measurementId,_),g.measurementId));case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j,q,B=function(){function e(t){d(this,e),this.app=t}return f(e,[{key:"_delete",value:function(){return delete z[this.app.options.appId],Promise.resolve()}}]),e}(),z={},Z=[],H={},G="dataLayer",W=!1;function K(){return(K=(0,i.Z)(regeneratorRuntime.mark(function e(t,n,r,i,o){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!o.global){e.next=4;break}t("event",r,i),e.next=8;break;case 4:return e.next=6,n;case 6:a=e.sent,t("event",r,Object.assign(Object.assign({},i),{send_to:a}));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Y(){return(Y=(0,i.Z)(regeneratorRuntime.mark(function e(t,n,r,i){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!i||!i.global){e.next=2;break}return e.abrupt("return",(t("set",{user_id:r}),Promise.resolve()));case 2:return e.t0=t,e.next=5,n;case 5:e.t1=e.sent,e.t2={update:!0,user_id:r},(0,e.t0)("config",e.t1,e.t2);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.getApp)();e=(0,u.m9)(e);var t=(0,o._getProvider)(e,l);return t.isInitialized()?t.getImmediate():function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=(0,o._getProvider)(e,l);if(n.isInitialized()){var r=n.getImmediate();if((0,u.vZ)(t,n.getOptions()))return r;throw T.create("already-initialized")}return n.initialize({options:t})}(e)}function J(){return $.apply(this,arguments)}function $(){return($=(0,i.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(0,u.ru)()&&(0,u.zI)()&&(0,u.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,u.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}function X(e,t,n){e=(0,u.m9)(e),function(e,t,n,r){return Y.apply(this,arguments)}(q,z[e.app.options.appId],t,n).catch(function(e){return m.error(e)})}function ee(e,t,n,r){e=(0,u.m9)(e),function(e,t,n,r,i){return K.apply(this,arguments)}(q,z[e.app.options.appId],t,n,r).catch(function(e){return m.error(e)})}var te="@firebase/analytics";(0,o._registerComponent)(new c.wA(l,function(e,t){var n=t.options;return function(e,t,n){!function(){var e=[];if((0,u.ru)()&&e.push("This is a browser extension environment."),(0,u.zI)()||e.push("Cookies are not available."),e.length>0){var t=e.map(function(e,t){return"(".concat(t+1,") ").concat(e)}).join(" "),n=T.create("invalid-analytics-context",{errorInfo:t});m.warn(n.message)}}();var r=e.options.appId;if(!r)throw T.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw T.create("no-api-key");m.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '.concat(e.options.measurementId,' provided in the "measurementId" field in the local Firebase config.'))}if(null!=z[r])throw T.create("already-exists",{id:r});if(!W){!function(e){var t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(G);var o=function(e,t,n,r,o){var a=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[o]&&"function"==typeof window[o]&&(a=window[o]),window[o]=function(e,t,n,r){function o(){return(o=(0,i.Z)(regeneratorRuntime.mark(function i(o,a,u){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,"event"!==o){i.next=6;break}return i.next=4,b(e,t,n,a,u);case 4:i.next=12;break;case 6:if("config"!==o){i.next=11;break}return i.next=9,_(e,t,n,r,a,u);case 9:i.next=12;break;case 11:e("set",a);case 12:i.next=17;break;case 14:i.prev=14,i.t0=i.catch(0),m.error(i.t0);case 17:case"end":return i.stop()}},i,null,[[0,14]])}))).apply(this,arguments)}return function(e,t,n){return o.apply(this,arguments)}}(a,e,t,n),{gtagCore:a,wrappedGtag:window[o]}}(z,Z,H,G,"gtag"),a=o.wrappedGtag,s=o.gtagCore;q=a,j=s,W=!0}return z[r]=function(e,t,n,r,i,o,a){return V.apply(this,arguments)}(e,Z,H,t,j,G,n),new B(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),(0,o._registerComponent)(new c.wA("analytics-internal",function(e){try{var t=e.getProvider(l).getImmediate();return{logEvent:function(e,n,r){return ee(t,e,n,r)}}}catch(t){throw T.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,o.registerVersion)(te,"0.7.4"),(0,o.registerVersion)(te,"0.7.4","esm2017")},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},KN:function(){return r.registerVersion}});var r=n(8026);(0,r.registerVersion)("firebase","9.6.1","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(3394);r.Z.registerVersion("firebase","9.6.1","app-compat")},4828:function(e,t,o){"use strict";o.r(t);var a=o(8239),s=o(3394),l=o(9353),h=o(3854),g=(o(8026),o(5422),o(3910));function m(){return window}function y(){return(y=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=m(),a=o.BuildInfo,(0,l.ap)(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,w(n.sessionId);case 4:return u=e.sent,s={},e.abrupt("return",((0,l.aq)()?s.ibi=a.packageName:(0,l.ar)()?s.apn=a.packageName:(0,l.as)(t,"operation-not-supported-in-this-environment"),a.displayName&&(s.appDisplayName=a.displayName),s.sessionId=u,(0,l.at)(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,s)));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(){return(k=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=m(),r=n.BuildInfo,i={},(0,l.aq)()?i.iosBundleId=r.packageName:(0,l.ar)()?i.androidPackageName=r.packageName:(0,l.as)(t,"operation-not-supported-in-this-environment"),e.next=4,(0,l.au)(t,i);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _(){return(_=(0,a.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=m(),o=i.cordova,a=function(){},e.prev=2,e.next=5,new Promise(function(e,i){var u=null;function s(){var t;e();var n=null===(t=o.plugins.browsertab)||void 0===t?void 0:t.close;"function"==typeof n&&n(),"function"==typeof(null==r?void 0:r.close)&&r.close()}function c(){u||(u=window.setTimeout(function(){i((0,l.av)(t,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null==document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),(0,l.ar)()&&document.addEventListener("visibilitychange",h,!1),a=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",h,!1),u&&window.clearTimeout(u)}});case 5:return e.prev=5,a(),e.finish(5);case 8:case"end":return e.stop()}},e,null,[[2,,5,8]])}))).apply(this,arguments)}function w(e){return x.apply(this,arguments)}function x(){return(x=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=I(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,e.abrupt("return",Array.from(new Uint8Array(r)).map(function(e){return e.toString(16).padStart(2,"0")}).join(""));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function I(e){if((0,l.ap)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var T=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise(function(t){e.resolveInialized=t}),e}return f(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach(function(t){return t(e)}),i(b(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.initPromise;case 2:case"end":return t.stop()}},t)}))()}}]),n}(l.az);function C(e){return E.apply(this,arguments)}function E(){return(E=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R()._get(A(t));case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=7;break}return e.next=7,R()._remove(A(t));case 7:return e.abrupt("return",n);case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function S(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<20;n++){var r=Math.floor(Math.random()*t.length);e.push(t.charAt(r))}return e.join("")}function R(){return(0,l.ax)(l.b)}function A(e){return(0,l.ay)("authEvent",e.config.apiKey,e.name)}function N(e){if(!(null==e?void 0:e.includes("?")))return{};var t,i=e.split("?"),o=r(t=i)||u(t)||c(t)||n(),a=(o[0],o.slice(1));return(0,h.zd)(a.join("?"))}function O(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,l.av)("no-auth-event")}}function P(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function D(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,h.z$)();return!("file:"!==P()&&"ionic:"!==P()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function L(){try{var e=self.localStorage,t=l.aG();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,h.z$)();return(0,h.w1)()&&11===(null==document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,h.z$)();return/Edge\/\d+/.test(e)}(e)}()||(0,h.hl)()}catch(ae){return M()&&(0,h.hl)()}return!1}function M(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function F(){return("http:"===P()||"https:"===P()||(0,h.ru)()||D())&&!((0,h.b$)()||(0,h.UG)())&&L()&&!M()}function U(){return D()&&"undefined"!=typeof document}function V(){return(V=(0,a.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!!U()&&new Promise(function(e){var t=setTimeout(function(){e(!1)},1e3);document.addEventListener("deviceready",function(){clearTimeout(t),e(!0)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}var j={LOCAL:"local",NONE:"none",SESSION:"session"},q=l.aw,B="persistence";function z(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,a.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=H(),r=l.ay(B,t.config.apiKey,t.name),(null==n?void 0:n.sessionStorage)&&n.sessionStorage.setItem(r,t._getPersistence());case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(){return"undefined"!=typeof window?window:null}var G=l.aw,W=function(){function e(){d(this,e),this.browserResolver=l.ax(l.k),this.cordovaResolver=l.ax(function(){function e(){d(this,e),this._redirectPersistence=l.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=l.aA}return f(e,[{key:"_initialize",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=e._key(),i=t.eventManagers.get(r),n.abrupt("return",(i||(i=new T(e),t.eventManagers.set(r,i),t.attachCallbackListeners(e,i)),i));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e){(0,l.as)(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,a.Z)(regeneratorRuntime.mark(function o(){var a,u,s,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return function(e){var t,n,r,i,o,a,u,s,c,h,f=m();(0,l.aw)("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,l.aw)(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,l.aw)("function"==typeof(null===(o=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,l.aw)("function"==typeof(null===(s=null===(u=null===(a=null==f?void 0:f.cordova)||void 0===a?void 0:a.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,l.aw)("function"==typeof(null===(h=null===(c=null==f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===h?void 0:h.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e),o.next=3,i._initialize(e);case 3:return a=o.sent,o.next=6,a.initialized();case 6:return a.resetRedirect(),(0,l.aB)(),o.next=10,i._originValidation(e);case 10:return u=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:t,eventId:n,urlResponse:null,sessionId:S(),postBody:null,tenantId:e.tenantId,error:(0,l.av)(e,"no-auth-event")}}(e,n,r),o.next=13,function(e,t){return R()._set(A(e),t)}(e,u);case 13:return o.next=15,function(e,t,n){return y.apply(this,arguments)}(e,u,t);case 15:return s=o.sent,o.next=18,function(e){var t=m().cordova;return new Promise(function(n){t.plugins.browsertab.isAvailable(function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,l.ao)()?"_blank":"_system","location=yes"),n(i)})})}(s);case 18:return c=o.sent,o.abrupt("return",function(e,t,n){return _.apply(this,arguments)}(e,a,c));case 20:case"end":return o.stop()}},o)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return k.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n,r=m(),i=r.universalLinks,o=r.handleOpenURL,u=r.BuildInfo,s=setTimeout((0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C(e);case 2:t.onEvent(O());case 3:case"end":return n.stop()}},n)})),500),c=(n=(0,a.Z)(regeneratorRuntime.mark(function n(r){var i,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,C(e);case 3:i=n.sent,o=null,i&&(null==r?void 0:r.url)&&(o=function(e,t){var n,r,i=function(e){var t=N(e),n=t.link?decodeURIComponent(t.link):void 0,r=N(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return N(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var o=N(i),a=o.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(o.firebaseError)):null,u=null===(r=null===(n=null==a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?(0,l.av)(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(i,r.url)),t.onEvent(o||O());case 6:case"end":return n.stop()}},n)})),function(e){return n.apply(this,arguments)});void 0!==i&&"function"==typeof i.subscribe&&i.subscribe(null,c);var h=o,f="".concat(u.packageName.toLowerCase(),"://");m().handleOpenURL=function(){var e=(0,a.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"==typeof h)try{h(t)}catch(n){console.error(n)}case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}}]),e}()),this.underlyingResolver=null,this._redirectPersistence=l.a,this._completeRedirectFn=l.aA}return f(e,[{key:"_initialize",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.selectUnderlyingResolver();case 2:return n.abrupt("return",t.assertedUnderlyingResolver._initialize(e));case 3:case"end":return n.stop()}},n)}))()}},{key:"_openPopup",value:function(e,t,n,r){var i=this;return(0,a.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.selectUnderlyingResolver();case 2:return o.abrupt("return",i.assertedUnderlyingResolver._openPopup(e,t,n,r));case 3:case"end":return o.stop()}},o)}))()}},{key:"_openRedirect",value:function(e,t,n,r){var i=this;return(0,a.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i.selectUnderlyingResolver();case 2:return o.abrupt("return",i.assertedUnderlyingResolver._openRedirect(e,t,n,r));case 3:case"end":return o.stop()}},o)}))()}},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return U()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return G(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.underlyingResolver){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,function(){return V.apply(this,arguments)}();case 4:n=t.sent,e.underlyingResolver=n?e.cordovaResolver:e.browserResolver;case 6:case"end":return t.stop()}},t)}))()}}]),e}();function K(e){return e.unwrap()}function Y(e){return Q(e)}function Q(e){var t=(e instanceof h.ZR?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof h.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return l.P.credentialFromResult(e);var n,r=t.providerId;if(!r||r===l.o.PASSWORD)return null;switch(r){case l.o.GOOGLE:n=l.N;break;case l.o.FACEBOOK:n=l.M;break;case l.o.GITHUB:n=l.Q;break;case l.o.TWITTER:n=l.V;break;default:var i=t.oauthIdToken,o=t.oauthAccessToken,a=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return o||a||i||u?u?r.startsWith("saml.")?l.aJ._create(r,u):l.I._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:o}):new l.T(r).credential({idToken:i,accessToken:o,rawNonce:s}):null}return e instanceof h.ZR?n.credentialFromError(e):n.credentialFromResult(e)}function J(e,t){return t.catch(function(t){throw t instanceof h.ZR&&function(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new ee(e,l.am(e,t));else if(r){var i=Q(t),o=t;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(function(e){var t=e.user;return{operationType:e.operationType,credential:Y(e),additionalUserInfo:l.ak(e),user:te.getOrCreate(t)}})}function $(e,t){return X.apply(this,arguments)}function X(){return(X=(0,a.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return J(t,r.confirm(e))}});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ee=function(){function e(t,n){d(this,e),this.resolver=n,this.auth=t.wrapped()}return f(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return J(K(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),te=function(){function e(t){d(this,e),this._delegate=t,this.multiFactor=l.an(t)}return f(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,l.Y(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithPhoneNumber",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",$(n.auth,l.l(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"linkWithPopup",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,l.d(t._delegate,e,W)));case 1:case"end":return n.stop()}},n)}))()}},{key:"linkWithRedirect",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z(l.aC(t.auth));case 2:return n.abrupt("return",l.g(t._delegate,e,W));case 3:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",J(t.auth,l.Z(t._delegate,e)));case 1:case"end":return n.stop()}},n)}))()}},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return $(this.auth,l.r(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return J(this.auth,l.e(this._delegate,e,W))}},{key:"reauthenticateWithRedirect",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z(l.aC(t.auth));case 2:return n.abrupt("return",l.h(t._delegate,e,W));case 3:case"end":return n.stop()}},n)}))()}},{key:"sendEmailVerification",value:function(e){return l.aa(this._delegate,e)}},{key:"unlink",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.aj(t._delegate,e);case 2:return n.abrupt("return",t);case 3:case"end":return n.stop()}},n)}))()}},{key:"updateEmail",value:function(e){return l.af(this._delegate,e)}},{key:"updatePassword",value:function(e){return l.ag(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return l.u(this._delegate,e)}},{key:"updateProfile",value:function(e){return l.ae(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return l.ab(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();te.USER_MAP=new WeakMap;var ne=l.aw,re=function(){var e=function(){function e(t,n){if(d(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;ne(r,"invalid-api-key",{appName:t.name});var i=[l.K];if("undefined"!=typeof window){i=function(e,t){var n=H();if(!(null==n?void 0:n.sessionStorage))return[];var r=l.ay(B,e,t);switch(n.sessionStorage.getItem(r)){case j.NONE:return[l.K];case j.LOCAL:return[l.i,l.a];case j.SESSION:return[l.a];default:return[]}}(r,t.name);for(var o=0,a=[l.i,l.b,l.a];o<a.length;o++){var u=a[o];i.includes(u)||i.push(u)}}ne(r,"invalid-api-key",{appName:t.name});var s="undefined"!=typeof window?W:void 0;this._delegate=n.initialize({options:{persistence:i,popupRedirectResolver:s}}),this._delegate._updateErrorMap(l.z),this.linkUnderlyingAuth()}return f(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?te.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){l.E(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return l.a1(this._delegate,e)}},{key:"checkActionCode",value:function(e){return l.a2(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return l.a0(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(e,t){var n=this;return(0,a.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",J(n._delegate,l.a4(n._delegate,e,t)));case 1:case"end":return r.stop()}},r)}))()}},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return l.a9(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return l.a7(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return ne(F(),e._delegate,"operation-not-supported-in-this-environment"),t.next=3,l.j(e._delegate,W);case 3:return n=t.sent,t.abrupt("return",n?J(e._delegate,Promise.resolve(n)):{credential:null,user:null});case 5:case"end":return t.stop()}},t)}))()}},{key:"addFrameworkForLogging",value:function(e){!function(e,t){(0,l.aC)(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=ie(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onAuthStateChanged(i,o,a)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=ie(e,t,n),i=r.next,o=r.error,a=r.complete;return this._delegate.onIdTokenChanged(i,o,a)}},{key:"sendSignInLinkToEmail",value:function(e,t){return l.a6(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return l.$(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:n.t0=(function(e,t){q(Object.values(j).includes(t),e,"invalid-persistence-type"),(0,h.b$)()?q(t!==j.SESSION,e,"unsupported-persistence-type"):(0,h.UG)()?q(t===j.NONE,e,"unsupported-persistence-type"):M()?q(t===j.NONE||t===j.LOCAL&&(0,h.hl)(),e,"unsupported-persistence-type"):q(t===j.NONE||L(),e,"unsupported-persistence-type")}(t._delegate,e),e),n.next=n.t0===j.SESSION?3:n.t0===j.LOCAL?5:n.t0===j.NONE?14:16;break;case 3:return r=l.a,n.abrupt("break",17);case 5:return n.next=7,l.ax(l.i)._isAvailable();case 7:if(!n.sent){n.next=11;break}n.t1=l.i,n.next=12;break;case 11:n.t1=l.b;case 12:return r=n.t1,n.abrupt("break",17);case 14:return r=l.K,n.abrupt("break",17);case 16:return n.abrupt("return",l.as("argument-error",{appName:t._delegate.name}));case 17:return n.abrupt("return",t._delegate.setPersistence(r));case 18:case"end":return n.stop()}},n)}))()}},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return J(this._delegate,l.W(this._delegate))}},{key:"signInWithCredential",value:function(e){return J(this._delegate,l.X(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return J(this._delegate,l._(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return J(this._delegate,l.a5(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return J(this._delegate,l.a8(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return $(this._delegate,l.s(this._delegate,e,t))}},{key:"signInWithPopup",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",(ne(F(),t._delegate,"operation-not-supported-in-this-environment"),J(t._delegate,l.c(t._delegate,e,W))));case 1:case"end":return n.stop()}},n)}))()}},{key:"signInWithRedirect",value:function(e){var t=this;return(0,a.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return ne(F(),t._delegate,"operation-not-supported-in-this-environment"),n.next=3,z(t._delegate);case 3:return n.abrupt("return",l.f(t._delegate,e,W));case 4:case"end":return n.stop()}},n)}))()}},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return l.a3(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();return e.Persistence=j,e}();function ie(e,t,n){var r,i=e;"function"!=typeof e&&(i=(r=e).next,t=r.error,n=r.complete);var o=i;return{next:function(e){return o(e&&te.getOrCreate(e))},error:t,complete:n}}var oe=function(){function e(){d(this,e),this.providerId="phone",this._delegate=new l.P(K(s.Z.auth()))}return f(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return l.P.credential(e,t)}}]),e}();oe.PHONE_SIGN_IN_METHOD=l.P.PHONE_SIGN_IN_METHOD,oe.PROVIDER_ID=l.P.PROVIDER_ID;var ae,ue=l.aw;(ae=s.Z).INTERNAL.registerComponent(new g.wA("auth-compat",function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new re(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:l.A.EMAIL_SIGNIN,PASSWORD_RESET:l.A.PASSWORD_RESET,RECOVER_EMAIL:l.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:l.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:l.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:l.A.VERIFY_EMAIL}},EmailAuthProvider:l.L,FacebookAuthProvider:l.M,GithubAuthProvider:l.Q,GoogleAuthProvider:l.N,OAuthProvider:l.T,SAMLAuthProvider:l.U,PhoneAuthProvider:oe,PhoneMultiFactorGenerator:l.m,RecaptchaVerifier:function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.Z.app();d(this,e),ue(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new l.R(t,n,i.auth()),this.type=this._delegate.type}return f(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}(),TwitterAuthProvider:l.V,Auth:re,AuthCredential:l.G,Error:h.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),ae.registerVersion("@firebase/auth-compat","0.2.4")},6241:function(e,t,n){"use strict";n.d(t,{KL:function(){return Ce},Gb:function(){return Ie}});var r,i=n(8239),o=(n(3328),n(3910)),u=n(6676),s=n(3854),c=n(8026),l="/firebase-messaging-sw.js",h="/firebase-cloud-messaging-push-scope",p="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",v="google.c.a.c_id",g="google.c.a.c_l",m="google.c.a.ts",y="google.c.a.e",k=((r=k||(k={})).PUSH_RECEIVED="push-received",r.NOTIFICATION_CLICKED="notification-clicked",k);function _(e){var t=new Uint8Array(e);return btoa(String.fromCharCode.apply(String,a(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function w(e){for(var t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}var b="fcm_token_details_db",x="fcm_token_object_Store";function I(e){return T.apply(this,arguments)}function T(){return(T=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0="databases"in indexedDB,!e.t0){e.next=5;break}return e.next=4,indexedDB.databases();case 4:e.t0=!e.sent.map(function(e){return e.name}).includes(b);case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",null);case 7:return n=null,e.next=10,(0,u.openDb)(b,5,function(){var e=(0,i.Z)(regeneratorRuntime.mark(function e(r){var i,o,a,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.oldVersion<2)&&r.objectStoreNames.contains(x)){e.next=2;break}return e.abrupt("return");case 2:return o=r.transaction.objectStore(x),e.next=5,o.index("fcmSenderId").get(t);case 5:return a=e.sent,e.next=8,o.clear();case 8:if(!a){e.next=17;break}if(2!==r.oldVersion){e.next=16;break}if((u=a).auth&&u.p256dh&&u.endpoint){e.next=13;break}return e.abrupt("return");case 13:n={token:u.fcmToken,createTime:null!==(i=u.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:u.auth,p256dh:u.p256dh,endpoint:u.endpoint,swScope:u.swScope,vapidKey:"string"==typeof u.vapidKey?u.vapidKey:_(u.vapidKey)}},e.next=17;break;case 16:3===r.oldVersion?n={token:(s=a).fcmToken,createTime:s.createTime,subscriptionOptions:{auth:_(s.auth),p256dh:_(s.p256dh),endpoint:s.endpoint,swScope:s.swScope,vapidKey:_(s.vapidKey)}}:4===r.oldVersion&&(n={token:(c=a).fcmToken,createTime:c.createTime,subscriptionOptions:{auth:_(c.auth),p256dh:_(c.p256dh),endpoint:c.endpoint,swScope:c.swScope,vapidKey:_(c.vapidKey)}});case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:return e.sent.close(),e.next=13,(0,u.deleteDb)(b);case 13:return e.next=15,(0,u.deleteDb)("fcm_vapid_details_db");case 15:return e.next=17,(0,u.deleteDb)("undefined");case 17:return e.abrupt("return",C(n)?n:null);case 18:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){if(!e||!e.subscriptionOptions)return!1;var t=e.subscriptionOptions;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}var E="firebase-messaging-store",S=null;function R(){return S||(S=(0,u.openDb)("firebase-messaging-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(E)}})),S}function A(e){return N.apply(this,arguments)}function N(){return(N=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(t),e.next=3,R();case 3:return e.next=5,e.sent.transaction(E).objectStore(E).get(n);case 5:if(!(r=e.sent)){e.next=8;break}return e.abrupt("return",r);case 8:return e.next=10,I(t.appConfig.senderId);case 10:if(!(i=e.sent)){e.next=15;break}return e.next=14,O(t,i);case 14:return e.abrupt("return",i);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function O(e,t){return P.apply(this,arguments)}function P(){return(P=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=M(t),e.next=3,R();case 3:return i=e.sent.transaction(E,"readwrite"),e.next=6,i.objectStore(E).put(n,r);case 6:return e.next=8,i.complete;case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e){return L.apply(this,arguments)}function L(){return(L=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(t),e.next=3,R();case 3:return r=e.sent.transaction(E,"readwrite"),e.next=6,r.objectStore(E).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function M(e){return e.appConfig.appId}var F=new s.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function U(e,t){return V.apply(this,arguments)}function V(){return(V=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:return r=e.sent,i=W(n),o={method:"POST",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch(Z(t.appConfig),o);case 8:return e.next=10,e.sent.json();case 10:a=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),F.create("token-subscribe-failed",{errorInfo:e.t0});case 16:if(!a.error){e.next=18;break}throw F.create("token-subscribe-failed",{errorInfo:a.error.message});case 18:if(a.token){e.next=20;break}throw F.create("token-subscribe-no-token");case 20:return e.abrupt("return",a.token);case 21:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}function j(e,t){return q.apply(this,arguments)}function q(){return(q=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:return r=e.sent,i=W(n.subscriptionOptions),o={method:"PATCH",headers:r,body:JSON.stringify(i)},e.prev=5,e.next=8,fetch("".concat(Z(t.appConfig),"/").concat(n.token),o);case 8:return e.next=10,e.sent.json();case 10:a=e.sent,e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(5),F.create("token-update-failed",{errorInfo:e.t0});case 16:if(!a.error){e.next=18;break}throw F.create("token-update-failed",{errorInfo:a.error.message});case 18:if(a.token){e.next=20;break}throw F.create("token-update-no-token");case 20:return e.abrupt("return",a.token);case 21:case"end":return e.stop()}},e,null,[[5,13]])}))).apply(this,arguments)}function B(e,t){return z.apply(this,arguments)}function z(){return(z=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H(t);case 2:return e.t0=e.sent,r={method:"DELETE",headers:e.t0},e.prev=4,e.next=7,fetch("".concat(Z(t.appConfig),"/").concat(n),r);case 7:return e.next=9,e.sent.json();case 9:if(!(i=e.sent).error){e.next=12;break}throw F.create("token-unsubscribe-failed",{errorInfo:i.error.message});case 12:e.next=17;break;case 14:throw e.prev=14,e.t1=e.catch(4),F.create("token-unsubscribe-failed",{errorInfo:e.t1});case 17:case"end":return e.stop()}},e,null,[[4,14]])}))).apply(this,arguments)}function Z(e){var t=e.projectId;return"https://fcmregistrations.googleapis.com/v1/projects/".concat(t,"/registrations")}function H(e){return G.apply(this,arguments)}function G(){return(G=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appConfig,r=t.installations,e.next=3,r.getToken();case 3:return i=e.sent,e.abrupt("return",new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(i)}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function W(e){var t=e.p256dh,n=e.auth,r=e.endpoint,i=e.vapidKey,o={web:{endpoint:r,auth:n,p256dh:t}};return i!==p&&(o.web.applicationPubKey=i),o}var K=6048e5;function Y(e){return Q.apply(this,arguments)}function Q(){return(Q=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re(t.swRegistration,t.vapidKey);case 2:return n=e.sent,r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:n.endpoint,auth:_(n.getKey("auth")),p256dh:_(n.getKey("p256dh"))},e.next=6,A(t.firebaseDependencies);case 6:if(!(i=e.sent)){e.next=19;break}if(!oe(i.subscriptionOptions,r)){e.next=10;break}return e.abrupt("return",Date.now()>=i.createTime+K?X(t,{token:i.token,createTime:Date.now(),subscriptionOptions:r}):i.token);case 10:return e.prev=10,e.next=13,B(t.firebaseDependencies,i.token);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(10),console.warn(e.t0);case 18:case 19:return e.abrupt("return",te(t.firebaseDependencies,r));case 20:case"end":return e.stop()}},e,null,[[10,15]])}))).apply(this,arguments)}function J(e){return $.apply(this,arguments)}function $(){return($=(0,i.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(t.firebaseDependencies);case 2:if(n=e.sent,e.t0=n,!e.t0){e.next=9;break}return e.next=7,B(t.firebaseDependencies,n.token);case 7:return e.next=9,D(t.firebaseDependencies);case 9:return e.next=11,t.swRegistration.pushManager.getSubscription();case 11:return r=e.sent,e.abrupt("return",!r||r.unsubscribe());case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function X(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(t.firebaseDependencies,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{token:r,createTime:Date.now()}),e.next=7,O(t.firebaseDependencies,i);case 7:return e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),e.next=14,J(t);case 14:throw e.t0;case 15:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U(t,n);case 2:return e.t0=e.sent,e.t1=Date.now(),e.t2=n,r={token:e.t0,createTime:e.t1,subscriptionOptions:e.t2},e.next=8,O(t,r);case 8:return e.abrupt("return",r.token);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.pushManager.getSubscription();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0=t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:w(n)});case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function ae(e){var t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(t.notification){e.notification={};var n=t.notification.title;n&&(e.notification.title=n);var r=t.notification.body;r&&(e.notification.body=r);var i=t.notification.image;i&&(e.notification.image=i)}}(t,e),function(e,t){!t.data||(e.data=t.data)}(t,e),function(e,t){if(t.fcmOptions){e.fcmOptions={};var n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);var r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}}(t,e),t}function ue(e){return"object"==typeof e&&!!e&&v in e}function se(e,t){for(var n=[],r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function ce(e){return F.create("missing-app-config-values",{valueName:e})}se("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),se("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");var le=function(){function e(t,n,r){d(this,e),this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;var i=function(e){if(!e||!e.options)throw ce("App Configuration Object");if(!e.name)throw ce("App Name");for(var t=e.options,n=0,r=["projectId","apiKey","appId","messagingSenderId"];n<r.length;n++){var i=r[n];if(!t[i])throw ce(i)}return{appName:e.name,projectId:t.projectId,apiKey:t.apiKey,appId:t.appId,senderId:t.messagingSenderId}}(t);this.firebaseDependencies={app:t,appConfig:i,installations:n,analyticsProvider:r}}return f(e,[{key:"_delete",value:function(){return Promise.resolve()}}]),e}();function he(e){return fe.apply(this,arguments)}function fe(){return(fe=(0,i.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.serviceWorker.register(l,{scope:h});case 3:t.swRegistration=e.sent,t.swRegistration.update().catch(function(){}),e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),F.create("failed-service-worker-registration",{browserErrorMessage:e.t0.message});case 10:case"end":return e.stop()}},e,null,[[0,7]])}))).apply(this,arguments)}function de(e,t){return pe.apply(this,arguments)}function pe(){return(pe=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!n&&!t.swRegistration,!e.t0){e.next=4;break}return e.next=4,he(t);case 4:if(!n&&t.swRegistration){e.next=8;break}if(n instanceof ServiceWorkerRegistration){e.next=7;break}throw F.create("invalid-sw-registration");case 7:t.swRegistration=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e,t){return ge.apply(this,arguments)}function ge(){return(ge=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n?t.vapidKey=n:t.vapidKey||(t.vapidKey=p);case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function me(){return(me=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(navigator){e.next=2;break}throw F.create("only-available-in-window");case 2:if(e.t0="default"===Notification.permission,!e.t0){e.next=6;break}return e.next=6,Notification.requestPermission();case 6:if("granted"===Notification.permission){e.next=8;break}throw F.create("permission-blocked");case 8:return e.next=10,ve(t,null==n?void 0:n.vapidKey);case 10:return e.next=12,de(t,null==n?void 0:n.serviceWorkerRegistration);case 12:return e.abrupt("return",Y(t));case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ye(e,t,n){return ke.apply(this,arguments)}function ke(){return(ke=(0,i.Z)(regeneratorRuntime.mark(function e(t,n,r){var i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=_e(n),e.next=3,t.firebaseDependencies.analyticsProvider.get();case 3:e.sent.logEvent(i,{message_id:r[v],message_name:r[g],message_time:r[m],message_device_time:Math.floor(Date.now()/1e3)});case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _e(e){switch(e){case k.NOTIFICATION_CLICKED:return"notification_open";case k.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function we(){return(we=(0,i.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=n.data).isFirebaseMessaging){e.next=3;break}return e.abrupt("return");case 3:if(t.onMessageHandler&&r.messageType===k.PUSH_RECEIVED&&("function"==typeof t.onMessageHandler?t.onMessageHandler(ae(r)):t.onMessageHandler.next(ae(r))),i=r.data,e.t0=ue(i)&&"1"===i[y],!e.t0){e.next=9;break}return e.next=9,ye(t,r.messageType,i);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}var be="@firebase/messaging",xe="0.9.4";function Ie(){return Te.apply(this,arguments)}function Te(){return(Te=(0,i.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t7="undefined"!=typeof window&&(0,s.hl)(),!e.t7){e.next=5;break}return e.next=4,(0,s.eu)();case 4:e.t7=e.sent;case 5:if(e.t6=e.t7,!e.t6){e.next=8;break}e.t6=(0,s.zI)();case 8:if(e.t5=e.t6,!e.t5){e.next=11;break}e.t5="serviceWorker"in navigator;case 11:if(e.t4=e.t5,!e.t4){e.next=14;break}e.t4="PushManager"in window;case 14:if(e.t3=e.t4,!e.t3){e.next=17;break}e.t3="Notification"in window;case 17:if(e.t2=e.t3,!e.t2){e.next=20;break}e.t2="fetch"in window;case 20:if(e.t1=e.t2,!e.t1){e.next=23;break}e.t1=ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification");case 23:if(e.t0=e.t1,!e.t0){e.next=26;break}e.t0=PushSubscription.prototype.hasOwnProperty("getKey");case 26:return e.abrupt("return",e.t0);case 27:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,c.getApp)();return Ie().then(function(e){if(!e)throw F.create("unsupported-browser")},function(e){throw F.create("indexed-db-unsupported")}),(0,c._getProvider)((0,s.m9)(e),"messaging").getImmediate()}(0,c._registerComponent)(new o.wA("messaging",function(e){var t=new le(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",function(e){return function(e,t){return we.apply(this,arguments)}(t,e)}),t},"PUBLIC")),(0,c._registerComponent)(new o.wA("messaging-internal",function(e){var t=e.getProvider("messaging").getImmediate();return{getToken:function(e){return function(e,t){return me.apply(this,arguments)}(t,e)}}},"PRIVATE")),(0,c.registerVersion)(be,xe),(0,c.registerVersion)(be,xe,"esm2017")},4347:function(e,n,r){"use strict";r.d(n,{sN:function(){return v},Gb:function(){return T}});var i=r(8239),o=r(8026),a=r(3854),u=r(3910),s=r(5422);r(3328);var c="@firebase/remote-config",l="0.3.3",h="remote-config",p=new a.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,o.getApp)();return e=(0,a.m9)(e),(0,o._getProvider)(e,h).getImmediate()}var g=function(){function e(t,n,r,i){d(this,e),this.client=t,this.storage=n,this.storageCache=r,this.logger=i}return f(e,[{key:"isCachedDataFresh",value:function(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-t,r=n<=e;return this.logger.debug("Config fetch cache check. Cache age millis: ".concat(n,". Cache max age millis (minimumFetchIntervalMillis setting): ").concat(e,". Is cache hit: ").concat(r,".")),r}},{key:"fetch",value:function(e){var n=this;return(0,i.Z)(regeneratorRuntime.mark(function r(){var i,o,a,u,s,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.storage.getLastSuccessfulFetchTimestampMillis(),n.storage.getLastSuccessfulFetchResponse()]);case 2:if(i=r.sent,o=t(i,2),a=o[0],!(u=o[1])||!n.isCachedDataFresh(e.cacheMaxAgeMillis,a)){r.next=8;break}return r.abrupt("return",u);case 8:return e.eTag=u&&u.eTag,r.next=11,n.client.fetch(e);case 11:return s=r.sent,c=[n.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===s.status&&c.push(n.storage.setLastSuccessfulFetchResponse(s)),r.next=16,Promise.all(c);case 16:return r.abrupt("return",s);case 17:case"end":return r.stop()}},r)}))()}}]),e}();function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator;return e.languages&&e.languages[0]||e.language}var y=function(){function e(t,n,r,i,o,a){d(this,e),this.firebaseInstallations=t,this.sdkVersion=n,this.namespace=r,this.projectId=i,this.apiKey=o,this.appId=a}return f(e,[{key:"fetch",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var n=this;return(0,i.Z)(regeneratorRuntime.mark(function r(){var i,o,a,u,s,c,l,h,f,d,v,g,y,k,_,w,b;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([n.firebaseInstallations.getId(),n.firebaseInstallations.getToken()]);case 2:return i=r.sent,o=t(i,2),a=o[0],u=o[1],s="".concat(window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com","/v1/projects/").concat(n.projectId,"/namespaces/").concat(n.namespace,":fetch?key=").concat(n.apiKey),c={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},l={sdk_version:n.sdkVersion,app_instance_id:a,app_instance_id_token:u,app_id:n.appId,language_code:m()},h={method:"POST",headers:c,body:JSON.stringify(l)},f=fetch(s,h),d=new Promise(function(t,n){e.signal.addEventListener(function(){var e=new Error("The operation was aborted.");e.name="AbortError",n(e)})}),r.prev=12,r.next=15,Promise.race([f,d]);case 15:return r.next=17,f;case 17:v=r.sent,r.next=24;break;case 20:throw r.prev=20,r.t0=r.catch(12),g="fetch-client-network","AbortError"===r.t0.name&&(g="fetch-timeout"),p.create(g,{originalErrorMessage:r.t0.message});case 24:if(y=v.status,k=v.headers.get("ETag")||void 0,200!==v.status){r.next=37;break}return r.prev=27,r.next=30,v.json();case 30:b=r.sent,r.next=36;break;case 33:throw r.prev=33,r.t1=r.catch(27),p.create("fetch-client-parse",{originalErrorMessage:r.t1.message});case 36:_=b.entries,w=b.state;case 37:if("INSTANCE_STATE_UNSPECIFIED"===w?y=500:"NO_CHANGE"===w?y=304:("NO_TEMPLATE"===w||"EMPTY_CONFIG"===w)&&(_={}),304===y||200===y){r.next=39;break}throw p.create("fetch-status",{httpStatus:y});case 39:return r.abrupt("return",{status:y,eTag:k,config:_});case 40:case"end":return r.stop()}},r,null,[[12,20],[27,33]])}))()})}]),e}(),k=function(){function e(t,n){d(this,e),this.client=t,this.storage=n}return f(e,[{key:"fetch",value:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.storage.getThrottleMetadata();case 2:if(n.t0=n.sent,n.t0){n.next=5;break}n.t0={backoffCount:0,throttleEndTimeMillis:Date.now()};case 5:return r=n.t0,n.abrupt("return",t.attemptFetch(e,r));case 7:case"end":return n.stop()}},n)}))()}},{key:"attemptFetch",value:function(e,t){var n=t.throttleEndTimeMillis,r=t.backoffCount,o=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){var i,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t){return new Promise(function(n,r){var i=Math.max(t-Date.now(),0),o=setTimeout(n,i);e.addEventListener(function(){clearTimeout(o),r(p.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,n);case 2:return t.prev=2,t.next=5,o.client.fetch(e);case 5:return i=t.sent,t.next=8,o.storage.deleteThrottleMetadata();case 8:return t.abrupt("return",i);case 11:if(t.prev=11,t.t0=t.catch(2),function(e){if(!(e instanceof a.ZR&&e.customData))return!1;var t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t.t0)){t.next=15;break}throw t.t0;case 15:return u={throttleEndTimeMillis:Date.now()+(0,a.$s)(r),backoffCount:r+1},t.next=18,o.storage.setThrottleMetadata(u);case 18:return t.abrupt("return",o.attemptFetch(e,u));case 19:case"end":return t.stop()}},t,null,[[2,11]])}))()}}]),e}(),_=function(){function e(t,n,r,i,o){d(this,e),this.app=t,this._client=n,this._storageCache=r,this._storage=i,this._logger=o,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}return f(e,[{key:"fetchTimeMillis",get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}},{key:"lastFetchStatus",get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}]),e}();function w(e,t){var n=e.target.error||void 0;return p.create(t,{originalErrorMessage:n&&n.message})}var b="app_namespace_store",x=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Promise(function(e,t){try{var r=indexedDB.open("firebase_remote_config",1);r.onerror=function(e){t(w(e,"storage-open"))},r.onsuccess=function(t){e(t.target.result)},r.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(b,{keyPath:"compositeKey"})}}}catch(n){t(p.create("storage-open",{originalErrorMessage:n}))}});d(this,e),this.appId=t,this.appName=n,this.namespace=r,this.openDbPromise=i}return f(e,[{key:"getLastFetchStatus",value:function(){return this.get("last_fetch_status")}},{key:"setLastFetchStatus",value:function(e){return this.set("last_fetch_status",e)}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.get("last_successful_fetch_timestamp_millis")}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.set("last_successful_fetch_timestamp_millis",e)}},{key:"getLastSuccessfulFetchResponse",value:function(){return this.get("last_successful_fetch_response")}},{key:"setLastSuccessfulFetchResponse",value:function(e){return this.set("last_successful_fetch_response",e)}},{key:"getActiveConfig",value:function(){return this.get("active_config")}},{key:"setActiveConfig",value:function(e){return this.set("active_config",e)}},{key:"getActiveConfigEtag",value:function(){return this.get("active_config_etag")}},{key:"setActiveConfigEtag",value:function(e){return this.set("active_config_etag",e)}},{key:"getThrottleMetadata",value:function(){return this.get("throttle_metadata")}},{key:"setThrottleMetadata",value:function(e){return this.set("throttle_metadata",e)}},{key:"deleteThrottleMetadata",value:function(){return this.delete("throttle_metadata")}},{key:"get",value:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var o=r.transaction([b],"readonly").objectStore(b),a=t.createCompositeKey(e);try{var u=o.get(a);u.onerror=function(e){i(w(e,"storage-get"))},u.onsuccess=function(e){var t=e.target.result;n(t?t.value:void 0)}}catch(u){i(p.create("storage-get",{originalErrorMessage:u&&u.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){var n=this;return(0,i.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,n.openDbPromise;case 2:return i=r.sent,r.abrupt("return",new Promise(function(r,o){var a=i.transaction([b],"readwrite").objectStore(b),u=n.createCompositeKey(e);try{var s=a.put({compositeKey:u,value:t});s.onerror=function(e){o(w(e,"storage-set"))},s.onsuccess=function(){r()}}catch(s){o(p.create("storage-set",{originalErrorMessage:s&&s.message}))}}));case 4:case"end":return r.stop()}},r)}))()}},{key:"delete",value:function(e){var t=this;return(0,i.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.openDbPromise;case 2:return r=n.sent,n.abrupt("return",new Promise(function(n,i){var o=r.transaction([b],"readwrite").objectStore(b),a=t.createCompositeKey(e);try{var u=o.delete(a);u.onerror=function(e){i(w(e,"storage-delete"))},u.onsuccess=function(){n()}}catch(u){i(p.create("storage-delete",{originalErrorMessage:u&&u.message}))}}));case 4:case"end":return n.stop()}},n)}))()}},{key:"createCompositeKey",value:function(e){return[this.appId,this.appName,this.namespace,e].join()}}]),e}(),I=function(){function e(t){d(this,e),this.storage=t}return f(e,[{key:"getLastFetchStatus",value:function(){return this.lastFetchStatus}},{key:"getLastSuccessfulFetchTimestampMillis",value:function(){return this.lastSuccessfulFetchTimestampMillis}},{key:"getActiveConfig",value:function(){return this.activeConfig}},{key:"loadFromStorage",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){var n,r,i,o,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.storage.getLastFetchStatus(),r=e.storage.getLastSuccessfulFetchTimestampMillis(),i=e.storage.getActiveConfig(),t.next=5,n;case 5:return(o=t.sent)&&(e.lastFetchStatus=o),t.next=9,r;case 9:return(a=t.sent)&&(e.lastSuccessfulFetchTimestampMillis=a),t.next=13,i;case 13:(u=t.sent)&&(e.activeConfig=u);case 15:case"end":return t.stop()}},t)}))()}},{key:"setLastFetchStatus",value:function(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}},{key:"setLastSuccessfulFetchTimestampMillis",value:function(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}},{key:"setActiveConfig",value:function(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}]),e}();function T(){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,a.hl)()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.prev=2,e.next=5,(0,a.eu)();case 5:return e.abrupt("return",e.sent);case 8:return e.prev=8,e.t0=e.catch(2),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,null,[[2,8]])}))).apply(this,arguments)}(0,o._registerComponent)(new u.wA(h,function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw p.create("registration-window");if(!(0,a.hl)())throw p.create("indexed-db-unavailable");var u=r.options,l=u.projectId,h=u.apiKey,f=u.appId;if(!l)throw p.create("registration-project-id");if(!h)throw p.create("registration-api-key");if(!f)throw p.create("registration-app-id");var d=new x(f,r.name,n=n||"firebase"),v=new I(d),m=new s.Yd(c);m.logLevel=s.in.ERROR;var w=new y(i,o.SDK_VERSION,n,l,h,f),b=new k(w,d),T=new g(b,d,v,m),C=new _(r,T,v,d,m);return function(e){var t=(0,a.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0}))}(C),C},"PUBLIC").setMultipleInstances(!0)),(0,o.registerVersion)(c,l),(0,o.registerVersion)(c,l,"esm2017")},6676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,o=new Promise(function(o,a){n(i=e[t].apply(e,r)).then(o,a)});return o.request=i,o}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function o(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function a(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function u(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function s(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function c(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function f(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function d(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new f(n)}function p(e){this._db=e}o(c,"_index",["name","keyPath","multiEntry","unique"]),a(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),s(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),o(l,"_cursor",["direction","key","primaryKey","value"]),a(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},o(h,"_store",["name","keyPath","indexNames","autoIncrement"]),a(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),s(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),u(h,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},o(f,"_tx",["objectStoreNames","mode"]),u(f,"_tx",IDBTransaction,["abort"]),d.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},o(d,"_db",["name","version","objectStoreNames"]),u(d,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},o(p,"_db",["name","version","objectStoreNames"]),u(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,c].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,o=i[e].apply(i,n.slice(0,-1));o.onsuccess=function(){r(o.result)}})})}),[c,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),o=i.request;return o&&(o.onupgradeneeded=function(e){n&&n(new d(o.result,e.oldVersion,o.transaction))}),i.then(function(e){return new p(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},1593:function(e,t,n){"use strict";n.d(t,{P:function(){return a}});var r=n(9193),i=n(5917),o=n(7574),a=function(){function e(t,n,r){d(this,e),this.kind=t,this.value=n,this.error=r,this.hasValue="N"===t}return f(e,[{key:"observe",value:function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}},{key:"do",value:function(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}},{key:"accept",value:function(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}},{key:"toObservable",value:function(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return e=this.error,new o.y(function(t){return t.error(e)});case"C":return(0,r.c)()}var e;throw new Error("unexpected notification kind value")}}],[{key:"createNext",value:function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification}},{key:"createError",value:function(t){return new e("E",void 0,t)}},{key:"createComplete",value:function(){return e.completeNotification}}]),e}();a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return l}});var r,i=n(7393),o=n(9181),a=n(6490),u=n(6554),s=n(4487),c=n(2494),l=((r=function(e){function t(e){d(this,t),this._isScalar=!1,e&&(this._subscribe=e)}return f(t,[{key:"lift",value:function(e){var n=new t;return n.source=this,n.operator=e,n}},{key:"subscribe",value:function(e,t,n){var r=this.operator,u=function(e,t,n){if(e){if(e instanceof i.L)return e;if(e[o.b])return e[o.b]()}return e||t||n?new i.L(e,t,n):new i.L(a.c)}(e,t,n);if(u.add(r?r.call(u,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!u.syncErrorThrowable?this._subscribe(u):this._trySubscribe(u)),c.v.useDeprecatedSynchronousErrorHandling&&u.syncErrorThrowable&&(u.syncErrorThrowable=!1,u.syncErrorThrown))throw u.syncErrorValue;return u}},{key:"_trySubscribe",value:function(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){var t=e,n=t.closed,r=t.destination,o=t.isStopped;if(n||o)return!1;e=r&&r instanceof i.L?r:null}return!0}(e)?e.error(t):console.warn(t)}}},{key:"forEach",value:function(e,t){var n=this;return new(t=h(t))(function(t,r){var i;i=n.subscribe(function(t){try{e(t)}catch(n){r(n),i&&i.unsubscribe()}},r,t)})}},{key:"_subscribe",value:function(e){var t=this.source;return t&&t.subscribe(e)}},{key:e,value:function(){return this}},{key:"pipe",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?this:function(e){return 0===e.length?s.y:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)}}(t)(this)}},{key:"toPromise",value:function(e){var t=this;return new(e=h(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})}}]),t}(u.L)).create=function(e){return new r(e)},r);function h(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return o}});var r=n(2494),i=n(4449),o={closed:!0,next:function(e){},error:function(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete:function(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return h},xQ:function(){return g}});var r,o=n(7574),a=n(7393),u=n(5319),s=n(7971),c=n(8858),l=n(9181),h=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).destination=e,r}return n}(a.L),g=((r=function(e,t){p(r,e);var n=v(r);function r(){var e;return d(this,r),(e=n.call(this)).observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return f(r,[{key:t,value:function(){return new h(this)}},{key:"lift",value:function(e){var t=new m(this,this);return t.operator=e,t}},{key:"next",value:function(e){if(this.closed)throw new s.N;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)}},{key:"error",value:function(e){if(this.closed)throw new s.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0}},{key:"complete",value:function(){if(this.closed)throw new s.N;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0}},{key:"unsubscribe",value:function(){this.isStopped=!0,this.closed=!0,this.observers=null}},{key:"_trySubscribe",value:function(e){if(this.closed)throw new s.N;return i(b(r.prototype),"_trySubscribe",this).call(this,e)}},{key:"_subscribe",value:function(e){if(this.closed)throw new s.N;return this.hasError?(e.error(this.thrownError),u.w.EMPTY):this.isStopped?(e.complete(),u.w.EMPTY):(this.observers.push(e),new c.W(this,e))}},{key:"asObservable",value:function(){var e=new o.y;return e.source=this,e}}]),r}(o.y,l.b)).create=function(e,t){return new m(e,t)},r),m=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).destination=e,i.source=r,i}return f(n,[{key:"next",value:function(e){var t=this.destination;t&&t.next&&t.next(e)}},{key:"error",value:function(e){var t=this.destination;t&&t.error&&this.destination.error(e)}},{key:"complete",value:function(){var e=this.destination;e&&e.complete&&this.destination.complete()}},{key:"_subscribe",value:function(e){return this.source?this.source.subscribe(e):u.w.EMPTY}}]),n}(g)},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});var r=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).subject=e,i.subscriber=r,i.closed=!1,i}return f(n,[{key:"unsubscribe",value:function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}}}]),n}(n(5319).w)},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return l}});var r=n(9105),o=n(6490),a=n(5319),u=n(9181),s=n(2494),c=n(4449),l=function(e,t){p(r,e);var n=v(r);function r(e,t,i){var a;switch(d(this,r),(a=n.call(this)).syncErrorValue=null,a.syncErrorThrown=!1,a.syncErrorThrowable=!1,a.isStopped=!1,arguments.length){case 0:a.destination=o.c;break;case 1:if(!e){a.destination=o.c;break}if("object"==typeof e){e instanceof r?(a.syncErrorThrowable=e.syncErrorThrowable,a.destination=e,e.add(m(a))):(a.syncErrorThrowable=!0,a.destination=new h(m(a),e));break}default:a.syncErrorThrowable=!0,a.destination=new h(m(a),e,t,i)}return a}return f(r,[{key:t,value:function(){return this}},{key:"next",value:function(e){this.isStopped||this._next(e)}},{key:"error",value:function(e){this.isStopped||(this.isStopped=!0,this._error(e))}},{key:"complete",value:function(){this.isStopped||(this.isStopped=!0,this._complete())}},{key:"unsubscribe",value:function(){this.closed||(this.isStopped=!0,i(b(r.prototype),"unsubscribe",this).call(this))}},{key:"_next",value:function(e){this.destination.next(e)}},{key:"_error",value:function(e){this.destination.error(e),this.unsubscribe()}},{key:"_complete",value:function(){this.destination.complete(),this.unsubscribe()}},{key:"_unsubscribeAndRecycle",value:function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}],[{key:"create",value:function(e,t,n){var i=new r(e,t,n);return i.syncErrorThrowable=!1,i}}]),r}(a.w,u.b),h=function(e){p(n,e);var t=v(n);function n(e,i,a,u){var s;d(this,n),(s=t.call(this))._parentSubscriber=e;var c,l=m(s);return(0,r.m)(i)?c=i:i&&(c=i.next,a=i.error,u=i.complete,i!==o.c&&(l=Object.create(i),(0,r.m)(l.unsubscribe)&&s.add(l.unsubscribe.bind(l)),l.unsubscribe=s.unsubscribe.bind(m(s)))),s._context=l,s._next=c,s._error=a,s._complete=u,s}return f(n,[{key:"next",value:function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}},{key:"error",value:function(e){if(!this.isStopped){var t=this._parentSubscriber,n=s.v.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}},{key:"complete",value:function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};s.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}},{key:"__tryOrUnsub",value:function(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),s.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}},{key:"__tryOrSetError",value:function(e,t,n){if(!s.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return s.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}},{key:"_unsubscribe",value:function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}]),n}(l)},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});var r,i=n(9796),o=n(1555),a=n(9105),u=function(){function e(e){return Error.call(this),this.message=e?"".concat(e.length," errors occurred during unsubscription:\n").concat(e.map(function(e,t){return"".concat(t+1,") ").concat(e.toString())}).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),s=function(){function e(t){d(this,e),this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return f(e,[{key:"unsubscribe",value:function(){var t;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,s=this._unsubscribe,l=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof e)n.remove(this);else if(null!==n)for(var h=0;h<n.length;++h)n[h].remove(this);if((0,a.m)(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(h){t=h instanceof u?c(h.errors):[h]}}if((0,i.k)(l))for(var f=-1,d=l.length;++f<d;){var p=l[f];if((0,o.K)(p))try{p.unsubscribe()}catch(v){t=t||[],v instanceof u?t=t.concat(c(v.errors)):t.push(v)}}if(t)throw new u(t)}}},{key:"add",value:function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}},{key:"remove",value:function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}]),e}();function c(e){return e.reduce(function(e,t){return e.concat(t instanceof u?t.errors:t)},[])}s.EMPTY=((r=new s).closed=!0,r)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=!1,i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return a},Ds:function(){return u},ft:function(){return s}});var r=n(7393),i=n(7574),o=n(7444),a=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).parent=e,r}return f(n,[{key:"_next",value:function(e){this.parent.notifyNext(e)}},{key:"_error",value:function(e){this.parent.notifyError(e),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(),this.unsubscribe()}}]),n}(r.L),u=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyError",value:function(e){this.destination.error(e)}},{key:"notifyComplete",value:function(){this.destination.complete()}}]),n}(r.L);function s(e,t){if(!t.closed){if(e instanceof i.y)return e.subscribe(t);var n;try{n=(0,o.s)(e)(t)}catch(r){t.error(r)}return n}}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return c},N:function(){return l}});var r,o=n(9765),a=n(7574),u=n(5319),s=n(1307),c=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).source=e,i.subjectFactory=r,i._refCount=0,i._isComplete=!1,i}return f(n,[{key:"_subscribe",value:function(e){return this.getSubject().subscribe(e)}},{key:"getSubject",value:function(){var e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}},{key:"connect",value:function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new u.w).add(this.source.subscribe(new h(this.getSubject(),this))),e.closed&&(this._connection=null,e=u.w.EMPTY)),e}},{key:"refCount",value:function(){return(0,s.x)()(this)}}]),n}(a.y),l={operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:(r=c.prototype)._subscribe},_isComplete:{value:r._isComplete,writable:!0},getSubject:{value:r.getSubject},connect:{value:r.connect},refCount:{value:r.refCount}},h=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).connectable=r,i}return f(n,[{key:"_error",value:function(e){this._unsubscribe(),i(b(n.prototype),"_error",this).call(this,e)}},{key:"_complete",value:function(){this.connectable._isComplete=!0,this._unsubscribe(),i(b(n.prototype),"_complete",this).call(this)}},{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}]),n}(o.Yc)},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return o}});var r=n(7574),i=new r.y(function(e){return e.complete()});function o(e){return e?function(e){return new r.y(function(t){return e.schedule(function(){return t.complete()})})}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),o=n(5319),a=n(6554),u=n(4087),s=n(377),c=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[a.L]}(e))return function(e,t){return new r.y(function(n){var r=new o.w;return r.add(t.schedule(function(){var i=e[a.L]();r.add(i.subscribe({next:function(e){r.add(t.schedule(function(){return n.next(e)}))},error:function(e){r.add(t.schedule(function(){return n.error(e)}))},complete:function(){r.add(t.schedule(function(){return n.complete()}))}}))})),r})}(e,t);if((0,c.t)(e))return function(e,t){return new r.y(function(n){var r=new o.w;return r.add(t.schedule(function(){return e.then(function(e){r.add(t.schedule(function(){n.next(e),r.add(t.schedule(function(){return n.complete()}))}))},function(e){r.add(t.schedule(function(){return n.error(e)}))})})),r})}(e,t);if((0,l.z)(e))return(0,u.r)(e,t);if(function(e){return e&&"function"==typeof e[s.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(function(n){var r,i=new o.w;return i.add(function(){r&&"function"==typeof r.return&&r.return()}),i.add(t.schedule(function(){r=e[s.hZ](),i.add(t.schedule(function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(i){return void n.error(i)}t?n.complete():(n.next(e),this.schedule())}}))})),i})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return a}});var r=n(7574),i=n(5015),o=n(4087);function a(e,t){return t?(0,o.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return u}});var r=n(7574),i=n(4869),o=n(3282),a=n(6693);function u(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var u=Number.POSITIVE_INFINITY,s=null,c=t[t.length-1];return(0,i.K)(c)?(s=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(u=t.pop())):"number"==typeof c&&(u=t.pop()),null===s&&1===t.length&&t[0]instanceof r.y?t[0]:(0,o.J)(u)((0,a.n)(t,s))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return a}});var r=n(4869),i=n(6693),o=n(4087);function a(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var a=t[t.length-1];return(0,r.K)(a)?(t.pop(),(0,o.r)(t,a)):(0,i.n)(t)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(e,t))}}var o=function(){function e(t,n){d(this,e),this.project=t,this.thisArg=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new a(e,this.project,this.thisArg))}}]),e}(),a=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e)).project=r,o.count=0,o.thisArg=i||m(o),o}return f(n,[{key:"_next",value:function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(r.L)},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return o}});var r=n(9773),i=n(4487);function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY;return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return a}});var r=n(8002),i=n(4402),o=n(5345);function a(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return"function"==typeof t?function(o){return o.pipe(a(function(n,o){return(0,i.D)(e(n,o)).pipe((0,r.U)(function(e,r){return t(n,e,o,r)}))},n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new u(e,n))})}var u=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY;d(this,e),this.project=t,this.concurrent=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.project,this.concurrent))}}]),e}(),s=function(e){p(n,e);var t=v(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.POSITIVE_INFINITY;return d(this,n),(i=t.call(this,e)).project=r,i.concurrent=o,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return f(n,[{key:"_next",value:function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=new o.IY(this),n=this.destination;n.add(t);var r=(0,o.ft)(e,t);r!==t&&n.add(r)}},{key:"_complete",value:function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}},{key:"notifyNext",value:function(e){this.destination.next(e)}},{key:"notifyComplete",value:function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}]),n}(o.Ds)},9746:function(e,t,n){"use strict";n.d(t,{QV:function(){return o},ht:function(){return u}});var r=n(7393),i=n(1593);function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new a(e,t))}}var a=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,e),this.scheduler=t,this.delay=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))}}]),e}(),u=function(e){p(n,e);var t=v(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return d(this,n),(i=t.call(this,e)).scheduler=r,i.delay=o,i}return f(n,[{key:"scheduleMessage",value:function(e){this.destination.add(this.scheduler.schedule(n.dispatch,this.delay,new s(e,this.destination)))}},{key:"_next",value:function(e){this.scheduleMessage(i.P.createNext(e))}},{key:"_error",value:function(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}},{key:"_complete",value:function(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}],[{key:"dispatch",value:function(e){var t=e.notification,n=e.destination;t.observe(n),this.unsubscribe()}}]),n}(r.L),s=function e(t,n){d(this,e),this.notification=t,this.destination=n}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new o(e))}}var o=function(){function e(t){d(this,e),this.connectable=t}return f(e,[{key:"call",value:function(e,t){var n=this.connectable;n._refCount++;var r=new a(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}]),e}(),a=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).connectable=r,i}return f(n,[{key:"_unsubscribe",value:function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}else this.connection=null}}]),n}(r.L)},8819:function(e,t,n){"use strict";n.d(t,{B:function(){return u}});var r=n(2441),i=n(1307),o=n(9765);function a(){return new o.xQ}function u(){return function(e){return(0,i.x)()(function(e,t){return function(t){var n;n="function"==typeof e?e:function(){return e};var i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i}}(a)(e))}}},2639:function(e,t,n){"use strict";n.d(t,{R:function(){return k}});var r=n(7574),o=1,a=Promise.resolve(),u={};function s(e){return e in u&&(delete u[e],!0)}var c=function(e){var t=o++;return u[t]=!0,a.then(function(){return s(t)&&e()}),t},l=function(e){s(e)},h=n(6465),g=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"flush",value:function(e){this.active=!0,this.scheduled=void 0;var t,n=this.actions,r=-1,i=n.length;e=e||n.shift();do{if(t=e.execute(e.state,e.delay))break}while(++r<i&&(e=n.shift()));if(this.active=!1,t){for(;++r<i&&(e=n.shift());)e.unsubscribe();throw t}}}]),n}(n(6102).v))(function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return f(n,[{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0?i(b(n.prototype),"requestAsyncId",this).call(this,e,t,r):(e.actions.push(this),e.scheduled||(e.scheduled=c(e.flush.bind(e,null))))}},{key:"recycleAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==r&&r>0||null===r&&this.delay>0)return i(b(n.prototype),"recycleAsyncId",this).call(this,e,t,r);0===e.actions.length&&(l(t),e.scheduled=void 0)}}]),n}(h.o)),m=n(6561),y=function(e){p(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return d(this,n),(r=t.call(this)).source=e,r.delayTime=i,r.scheduler=o,(!(0,m.k)(i)||i<0)&&(r.delayTime=0),(!o||"function"!=typeof o.schedule)&&(r.scheduler=g),r}return f(n,[{key:"_subscribe",value:function(e){return this.scheduler.schedule(n.dispatch,this.delayTime,{source:this.source,subscriber:e})}}],[{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return new n(e,t,r)}},{key:"dispatch",value:function(e){var t=e.source,n=e.subscriber;return this.add(t.subscribe(n))}}]),n}(r.y);function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n){return n.lift(new _(e,t))}}var _=function(){function e(t,n){d(this,e),this.scheduler=t,this.delay=n}return f(e,[{key:"call",value:function(e,t){return new y(t,this.delay,this.scheduler).subscribe(e)}}]),e}()},8307:function(e,t,n){"use strict";n.d(t,{b:function(){return a}});var r=n(7393),i=n(8640),o=n(9105);function a(e,t,n){return function(r){return r.lift(new u(e,t,n))}}var u=function(){function e(t,n,r){d(this,e),this.nextOrObserver=t,this.error=n,this.complete=r}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new s(e,this.nextOrObserver,this.error,this.complete))}}]),e}(),s=function(e){p(n,e);var t=v(n);function n(e,r,a,u){var s;return d(this,n),(s=t.call(this,e))._tapNext=i.Z,s._tapError=i.Z,s._tapComplete=i.Z,s._tapError=a||i.Z,s._tapComplete=u||i.Z,(0,o.m)(r)?(s._context=m(s),s._tapNext=r):r&&(s._context=r,s._tapNext=r.next||i.Z,s._tapError=r.error||i.Z,s._tapComplete=r.complete||i.Z),s}return f(n,[{key:"_next",value:function(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}},{key:"_error",value:function(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}},{key:"_complete",value:function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}]),n}(r.L)},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var r=n(7574),i=n(5319);function o(e,t){return new r.y(function(n){var r=new i.w,o=0;return r.add(t.schedule(function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});var r=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i.pending=!1,i}return f(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}},{key:"requestAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return setInterval(e.flush.bind(e,this),n)}},{key:"recycleAsyncId",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}},{key:"execute",value:function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}},{key:"_execute",value:function(e,t){var n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}},{key:"_unsubscribe",value:function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}]),n}(function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this)}return f(n,[{key:"schedule",value:function(e){return this}}]),n}(n(5319).w))},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return a}});var r,o=((r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.now;d(this,e),this.SchedulerAction=t,this.now=n}return f(e,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0;return new this.SchedulerAction(this,e).schedule(n,t)}}]),e}()).now=function(){return Date.now()},r),a=function(e){p(n,e);var t=v(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.now;return d(this,n),(r=t.call(this,e,function(){return n.delegate&&n.delegate!==m(r)?n.delegate.now():i()})).actions=[],r.active=!1,r.scheduled=void 0,r}return f(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2?arguments[2]:void 0;return n.delegate&&n.delegate!==this?n.delegate.schedule(e,t,r):i(b(n.prototype),"schedule",this).call(this,e,t,r)}},{key:"flush",value:function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}}]),n}(o)},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return o}});var r=n(6465),i=new(n(6102).v)(r.o),o=i},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return o}});var r=n(6465),o=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(n(6102).v))(function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).scheduler=e,i.work=r,i}return f(n,[{key:"schedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t>0?i(b(n.prototype),"schedule",this).call(this,e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}},{key:"execute",value:function(e,t){return t>0||this.closed?i(b(n.prototype),"execute",this).call(this,e,t):this._execute(e,t)}},{key:"requestAsyncId",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return null!==r&&r>0||null===r&&this.delay>0?i(b(n.prototype),"requestAsyncId",this).call(this,e,t,r):e.flush(this)}}]),n}(r.o)),a=o},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});var r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});var r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});var r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});var r=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}()},4449:function(e,t,n){"use strict";function r(e){setTimeout(function(){throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});var r=Array.isArray||function(e){return e&&"number"==typeof e.length}},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});var r=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e}},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},6561:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},8640:function(e,t,n){"use strict";function r(){}n.d(t,{Z:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),o=n(377),a=n(6554),u=n(9489),s=n(4072),c=n(1555),l=function(e){if(e&&"function"==typeof e[a.L])return function(e){return function(t){var n=e[a.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)}}(e);if((0,u.z)(e))return(0,r.V)(e);if((0,s.t)(e))return function(e){return function(t){return e.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,i.z),t}}(e);if(e&&"function"==typeof e[o.hZ])return function(e){return function(t){for(var n=e[o.hZ]();;){var r=void 0;try{r=n.next()}catch(i){return t.error(i),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add(function(){n.return&&n.return()}),t}}(e);var t="You provided ".concat((0,c.K)(e)?"an invalid object":"'".concat(e,"'")," where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.");throw new TypeError(t)}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});var r=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}}},2340:function(n,r,o){"use strict";var u=o(7716),c=null;function l(){return c}var h=new u.OlP("DocumentToken"),_=function(){var e=function(){function e(){d(this,e)}return f(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:w,token:e,providedIn:"platform"}),e}();function w(){return(0,u.LFG)(I)}var x=new u.OlP("Location Initialized"),I=function(){var e=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this))._doc=e,r._init(),r}return f(n,[{key:"_init",value:function(){this.location=window.location,this._history=window.history}},{key:"getBaseHrefFromDOM",value:function(){return l().getBaseHref(this._doc)}},{key:"onPopState",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),function(){return t.removeEventListener("popstate",e)}}},{key:"onHashChange",value:function(e){var t=l().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),function(){return t.removeEventListener("hashchange",e)}}},{key:"href",get:function(){return this.location.href}},{key:"protocol",get:function(){return this.location.protocol}},{key:"hostname",get:function(){return this.location.hostname}},{key:"port",get:function(){return this.location.port}},{key:"pathname",get:function(){return this.location.pathname},set:function(e){this.location.pathname=e}},{key:"search",get:function(){return this.location.search}},{key:"hash",get:function(){return this.location.hash}},{key:"pushState",value:function(e,t,n){T()?this._history.pushState(e,t,n):this.location.hash=n}},{key:"replaceState",value:function(e,t,n){T()?this._history.replaceState(e,t,n):this.location.hash=n}},{key:"forward",value:function(){this._history.forward()}},{key:"back",value:function(){this._history.back()}},{key:"historyGo",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._history.go(e)}},{key:"getState",value:function(){return this._history.state}}]),n}(_);return e.\u0275fac=function(t){return new(t||e)(u.LFG(h))},e.\u0275prov=(0,u.Yz7)({factory:C,token:e,providedIn:"platform"}),e}();function T(){return!!window.history.pushState}function C(){return new I((0,u.LFG)(h))}function E(e,t){if(0==e.length)return t;if(0==t.length)return e;var n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function S(e){var t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function R(e){return e&&"?"!==e[0]?"?"+e:e}var A=function(){var e=function(){function e(){d(this,e)}return f(e,[{key:"historyGo",value:function(e){throw new Error("Not implemented")}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:N,token:e,providedIn:"root"}),e}();function N(e){var t=(0,u.LFG)(h).location;return new P((0,u.LFG)(_),t&&t.origin||"")}var O=new u.OlP("appBaseHref"),P=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;if(d(this,n),(i=t.call(this))._platformLocation=e,i._removeListenerFns=[],null==r&&(r=i._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");return i._baseHref=r,g(i)}return f(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"prepareExternalUrl",value:function(e){return E(this._baseHref,e)}},{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._platformLocation.pathname+R(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?"".concat(t).concat(n):t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+R(r));this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+R(r));this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(u.LFG(_),u.LFG(O,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),D=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this))._platformLocation=e,i._baseHref="",i._removeListenerFns=[],null!=r&&(i._baseHref=r),i}return f(n,[{key:"ngOnDestroy",value:function(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}},{key:"onPopState",value:function(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}},{key:"getBaseHref",value:function(){return this._baseHref}},{key:"path",value:function(){var e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}},{key:"prepareExternalUrl",value:function(e){var t=E(this._baseHref,e);return t.length>0?"#"+t:t}},{key:"pushState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+R(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}},{key:"replaceState",value:function(e,t,n,r){var i=this.prepareExternalUrl(n+R(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}},{key:"forward",value:function(){this._platformLocation.forward()}},{key:"back",value:function(){this._platformLocation.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformLocation).historyGo)||void 0===t||t.call(e,n)}}]),n}(A);return e.\u0275fac=function(t){return new(t||e)(u.LFG(_),u.LFG(O,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),L=function(){var e=function(){function e(t,n){var r=this;d(this,e),this._subject=new u.vpe,this._urlChangeListeners=[],this._platformStrategy=t;var i=this._platformStrategy.getBaseHref();this._platformLocation=n,this._baseHref=S(F(i)),this._platformStrategy.onPopState(function(e){r._subject.emit({url:r.path(!0),pop:!0,state:e.state,type:e.type})})}return f(e,[{key:"path",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.normalize(this._platformStrategy.path(e))}},{key:"getState",value:function(){return this._platformLocation.getState()}},{key:"isCurrentPathEqualTo",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return this.path()==this.normalize(e+R(t))}},{key:"normalize",value:function(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,F(t)))}},{key:"prepareExternalUrl",value:function(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}},{key:"go",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+R(t)),n)}},{key:"replaceState",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+R(t)),n)}},{key:"forward",value:function(){this._platformStrategy.forward()}},{key:"back",value:function(){this._platformStrategy.back()}},{key:"historyGo",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;null===(t=(e=this._platformStrategy).historyGo)||void 0===t||t.call(e,n)}},{key:"onUrlChange",value:function(e){var t=this;this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(function(e){t._notifyUrlChangeListeners(e.url,e.state)}))}},{key:"_notifyUrlChangeListeners",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;this._urlChangeListeners.forEach(function(n){return n(e,t)})}},{key:"subscribe",value:function(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(A),u.LFG(_))},e.normalizeQueryParams=R,e.joinWithSlash=E,e.stripTrailingSlash=S,e.\u0275prov=(0,u.Yz7)({factory:M,token:e,providedIn:"root"}),e}();function M(){return new L((0,u.LFG)(A),(0,u.LFG)(_))}function F(e){return e.replace(/\/index.html$/,"")}var U=((U=U||{})[U.Zero=0]="Zero",U[U.One=1]="One",U[U.Two=2]="Two",U[U.Few=3]="Few",U[U.Many=4]="Many",U[U.Other=5]="Other",U),V=u.kL8,j=function e(){d(this,e)},q=function(){var e=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).locale=e,r}return f(n,[{key:"getPluralCategory",value:function(e,t){switch(V(t||this.locale)(e)){case U.Zero:return"zero";case U.One:return"one";case U.Two:return"two";case U.Few:return"few";case U.Many:return"many";default:return"other"}}}]),n}(j);return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.soG))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),B=function(){var e=function(){function e(t,n,r,i){d(this,e),this._iterableDiffers=t,this._keyValueDiffers=n,this._ngEl=r,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}return f(e,[{key:"klass",set:function(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}},{key:"ngClass",set:function(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,u.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}},{key:"ngDoCheck",value:function(){if(this._iterableDiffer){var e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){var t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}},{key:"_applyKeyValueChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachChangedItem(function(e){return t._toggleClass(e.key,e.currentValue)}),e.forEachRemovedItem(function(e){e.previousValue&&t._toggleClass(e.key,!1)})}},{key:"_applyIterableChanges",value:function(e){var t=this;e.forEachAddedItem(function(e){if("string"!=typeof e.item)throw new Error("NgClass can only toggle CSS classes expressed as strings, got ".concat((0,u.AaK)(e.item)));t._toggleClass(e.item,!0)}),e.forEachRemovedItem(function(e){return t._toggleClass(e.item,!1)})}},{key:"_applyClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!0)}):Object.keys(e).forEach(function(n){return t._toggleClass(n,!!e[n])}))}},{key:"_removeClasses",value:function(e){var t=this;e&&(Array.isArray(e)||e instanceof Set?e.forEach(function(e){return t._toggleClass(e,!1)}):Object.keys(e).forEach(function(e){return t._toggleClass(e,!1)}))}},{key:"_toggleClass",value:function(e,t){var n=this;(e=e.trim())&&e.split(/\s+/g).forEach(function(e){t?n._renderer.addClass(n._ngEl.nativeElement,e):n._renderer.removeClass(n._ngEl.nativeElement,e)})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.ZZ4),u.Y36(u.aQg),u.Y36(u.SBq),u.Y36(u.Qsj))},e.\u0275dir=u.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e}(),z=function(){var e=function(){function e(t,n){d(this,e),this._viewContainer=t,this._context=new Z,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}return f(e,[{key:"ngIf",set:function(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}},{key:"ngIfThen",set:function(e){H("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}},{key:"ngIfElse",set:function(e){H("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}},{key:"_updateView",value:function(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}}],[{key:"ngTemplateContextGuard",value:function(e,t){return!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.s_b),u.Y36(u.Rgc))},e.\u0275dir=u.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e}(),Z=function e(){d(this,e),this.$implicit=null,this.ngIf=null};function H(e,t){if(t&&!t.createEmbeddedView)throw new Error("".concat(e," must be a TemplateRef, but received '").concat((0,u.AaK)(t),"'."))}var G=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[{provide:j,useClass:q}]}),e}();function W(e){return"browser"===e}function K(e){return"server"===e}var Y=function(){var e=function e(){d(this,e)};return e.\u0275prov=(0,u.Yz7)({token:e,providedIn:"root",factory:function(){return new Q((0,u.LFG)(h),window)}}),e}(),Q=function(){function e(t,n){d(this,e),this.document=t,this.window=n,this.offset=function(){return[0,0]}}return f(e,[{key:"setOffset",value:function(e){this.offset=Array.isArray(e)?function(){return e}:e}},{key:"getScrollPosition",value:function(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}},{key:"scrollToPosition",value:function(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}},{key:"scrollToAnchor",value:function(e){if(this.supportsScrolling()){var t=function(e,t){var n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow))for(var r=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT),i=r.currentNode;i;){var o=i.shadowRoot;if(o){var a=o.getElementById(t)||o.querySelector('[name="'.concat(t,'"]'));if(a)return a}i=r.nextNode()}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}}},{key:"setHistoryScrollRestoration",value:function(e){if(this.supportScrollRestoration()){var t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}},{key:"scrollToElement",value:function(e){var t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}},{key:"attemptFocus",value:function(e){return e.focus(),this.document.activeElement===e}},{key:"supportScrollRestoration",value:function(){try{if(!this.supportsScrolling())return!1;var e=J(this.window.history)||J(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}},{key:"supportsScrolling",value:function(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}]),e}();function J(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}var $,X=function(e){p(r,e);var n=v(r);function r(){return d(this,r),n.apply(this,arguments)}return f(r,[{key:"onAndCancel",value:function(e,t,n){return e.addEventListener(t,n,!1),function(){e.removeEventListener(t,n,!1)}}},{key:"dispatchEvent",value:function(e,t){e.dispatchEvent(t)}},{key:"remove",value:function(e){e.parentNode&&e.parentNode.removeChild(e)}},{key:"createElement",value:function(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}},{key:"createHtmlDocument",value:function(){return document.implementation.createHTMLDocument("fakeTitle")}},{key:"getDefaultDocument",value:function(){return document}},{key:"isElementNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE}},{key:"isShadowRoot",value:function(e){return e instanceof DocumentFragment}},{key:"getGlobalEventTarget",value:function(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}},{key:"getBaseHref",value:function(e){var t=(ee=ee||document.querySelector("base"))?ee.getAttribute("href"):null;return null==t?null:function(e){($=$||document.createElement("a")).setAttribute("href",e);var t=$.pathname;return"/"===t.charAt(0)?t:"/".concat(t)}(t)}},{key:"resetBaseElement",value:function(){ee=null}},{key:"getUserAgent",value:function(){return window.navigator.userAgent}},{key:"getCookie",value:function(e){return function(e,n){n=encodeURIComponent(n);var r,i=s(e.split(";"));try{for(i.s();!(r=i.n()).done;){var o=r.value,a=o.indexOf("="),u=t(-1==a?[o,""]:[o.slice(0,a),o.slice(a+1)],2),c=u[0],l=u[1];if(c.trim()===n)return decodeURIComponent(l)}}catch(h){i.e(h)}finally{i.f()}return null}(document.cookie,e)}}],[{key:"makeCurrent",value:function(){var e;e=new r,c||(c=e)}}]),r}(function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments)).supportsDOMEvents=!0,e}return n}(function(){return function e(){d(this,e)}}())),ee=null,te=new u.OlP("TRANSITION_ID"),ne=[{provide:u.ip1,useFactory:function(e,t,n){return function(){n.get(u.CZH).donePromise.then(function(){for(var n=l(),r=t.querySelectorAll('style[ng-transition="'.concat(e,'"]')),i=0;i<r.length;i++)n.remove(r[i])})}},deps:[te,h,u.zs3],multi:!0}],re=function(){function e(){d(this,e)}return f(e,[{key:"addToWindow",value:function(e){u.dqk.getAngularTestability=function(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},u.dqk.getAllAngularTestabilities=function(){return e.getAllTestabilities()},u.dqk.getAllAngularRootElements=function(){return e.getAllRootElements()},u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(function(e){var t=u.dqk.getAllAngularTestabilities(),n=t.length,r=!1,i=function(t){r=r||t,0==--n&&e(r)};t.forEach(function(e){e.whenStable(i)})})}},{key:"findTestabilityInTree",value:function(e,t,n){if(null==t)return null;var r=e.getTestability(t);return null!=r?r:n?l().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}],[{key:"init",value:function(){(0,u.VLi)(new e)}}]),e}(),ie=function(){var e=function(){function e(){d(this,e)}return f(e,[{key:"build",value:function(){return new XMLHttpRequest}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),oe=new u.OlP("EventManagerPlugins"),ae=function(){var e=function(){function e(t,n){var r=this;d(this,e),this._zone=n,this._eventNameToPlugin=new Map,t.forEach(function(e){return e.manager=r}),this._plugins=t.slice().reverse()}return f(e,[{key:"addEventListener",value:function(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}},{key:"addGlobalEventListener",value:function(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}},{key:"getZone",value:function(){return this._zone}},{key:"_findPluginFor",value:function(e){var t=this._eventNameToPlugin.get(e);if(t)return t;for(var n=this._plugins,r=0;r<n.length;r++){var i=n[r];if(i.supports(e))return this._eventNameToPlugin.set(e,i),i}throw new Error("No event manager plugin found for event ".concat(e))}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(oe),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ue=function(){function e(t){d(this,e),this._doc=t}return f(e,[{key:"addGlobalEventListener",value:function(e,t,n){var r=l().getGlobalEventTarget(this._doc,e);if(!r)throw new Error("Unsupported event target ".concat(r," for event ").concat(t));return this.addEventListener(r,t,n)}}]),e}(),se=function(){var e=function(){function e(){d(this,e),this._stylesSet=new Set}return f(e,[{key:"addStyles",value:function(e){var t=this,n=new Set;e.forEach(function(e){t._stylesSet.has(e)||(t._stylesSet.add(e),n.add(e))}),this.onStylesAdded(n)}},{key:"onStylesAdded",value:function(e){}},{key:"getAllStyles",value:function(){return Array.from(this._stylesSet)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ce=function(){var e=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this))._doc=e,r._hostNodes=new Map,r._hostNodes.set(e.head,[]),r}return f(n,[{key:"_addStylesToHost",value:function(e,t,n){var r=this;e.forEach(function(e){var i=r._doc.createElement("style");i.textContent=e,n.push(t.appendChild(i))})}},{key:"addHost",value:function(e){var t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}},{key:"removeHost",value:function(e){var t=this._hostNodes.get(e);t&&t.forEach(le),this._hostNodes.delete(e)}},{key:"onStylesAdded",value:function(e){var t=this;this._hostNodes.forEach(function(n,r){t._addStylesToHost(e,r,n)})}},{key:"ngOnDestroy",value:function(){this._hostNodes.forEach(function(e){return e.forEach(le)})}}]),n}(se);return e.\u0275fac=function(t){return new(t||e)(u.LFG(h))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function le(e){l().remove(e)}var he={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},fe=/%COMP%/g;function de(e,t,n){for(var r=0;r<t.length;r++){var i=t[r];Array.isArray(i)?de(e,i,n):(i=i.replace(fe,e),n.push(i))}return n}function pe(e){return function(t){if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}var ve=function(){var e=function(){function e(t,n,r){d(this,e),this.eventManager=t,this.sharedStylesHost=n,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new ge(t)}return f(e,[{key:"createRenderer",value:function(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case u.ifc.Emulated:var n=this.rendererByCompId.get(t.id);return n||(n=new me(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n;case 1:case u.ifc.ShadowDom:return new ye(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){var r=de(t.id,t.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}},{key:"begin",value:function(){}},{key:"end",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(ae),u.LFG(ce),u.LFG(u.AFp))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),ge=function(){function e(t){d(this,e),this.eventManager=t,this.data=Object.create(null)}return f(e,[{key:"destroy",value:function(){}},{key:"createElement",value:function(e,t){return t?document.createElementNS(he[t]||t,e):document.createElement(e)}},{key:"createComment",value:function(e){return document.createComment(e)}},{key:"createText",value:function(e){return document.createTextNode(e)}},{key:"appendChild",value:function(e,t){e.appendChild(t)}},{key:"insertBefore",value:function(e,t,n){e&&e.insertBefore(t,n)}},{key:"removeChild",value:function(e,t){e&&e.removeChild(t)}},{key:"selectRootElement",value:function(e,t){var n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error('The selector "'.concat(e,'" did not match any elements'));return t||(n.textContent=""),n}},{key:"parentNode",value:function(e){return e.parentNode}},{key:"nextSibling",value:function(e){return e.nextSibling}},{key:"setAttribute",value:function(e,t,n,r){if(r){t=r+":"+t;var i=he[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}},{key:"removeAttribute",value:function(e,t,n){if(n){var r=he[n];r?e.removeAttributeNS(r,t):e.removeAttribute("".concat(n,":").concat(t))}else e.removeAttribute(t)}},{key:"addClass",value:function(e,t){e.classList.add(t)}},{key:"removeClass",value:function(e,t){e.classList.remove(t)}},{key:"setStyle",value:function(e,t,n,r){r&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,n,r&u.JOm.Important?"important":""):e.style[t]=n}},{key:"removeStyle",value:function(e,t,n){n&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}},{key:"setProperty",value:function(e,t,n){e[t]=n}},{key:"setValue",value:function(e,t){e.nodeValue=t}},{key:"listen",value:function(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,pe(n)):this.eventManager.addEventListener(e,t,pe(n))}}]),e}(),me=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;d(this,n),(a=t.call(this,e)).component=i;var u=de(o+"-"+i.id,i.styles,[]);return r.addStyles(u),a.contentAttr="_ngcontent-%COMP%".replace(fe,o+"-"+i.id),a.hostAttr=function(e){return"_nghost-%COMP%".replace(fe,e)}(o+"-"+i.id),a}return f(n,[{key:"applyToHost",value:function(e){i(b(n.prototype),"setAttribute",this).call(this,e,this.hostAttr,"")}},{key:"createElement",value:function(e,t){var r=i(b(n.prototype),"createElement",this).call(this,e,t);return i(b(n.prototype),"setAttribute",this).call(this,r,this.contentAttr,""),r}}]),n}(ge),ye=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;d(this,n),(a=t.call(this,e)).sharedStylesHost=r,a.hostEl=i,a.shadowRoot=i.attachShadow({mode:"open"}),a.sharedStylesHost.addHost(a.shadowRoot);for(var u=de(o.id,o.styles,[]),s=0;s<u.length;s++){var c=document.createElement("style");c.textContent=u[s],a.shadowRoot.appendChild(c)}return a}return f(n,[{key:"nodeOrShadowRoot",value:function(e){return e===this.hostEl?this.shadowRoot:e}},{key:"destroy",value:function(){this.sharedStylesHost.removeHost(this.shadowRoot)}},{key:"appendChild",value:function(e,t){return i(b(n.prototype),"appendChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"insertBefore",value:function(e,t,r){return i(b(n.prototype),"insertBefore",this).call(this,this.nodeOrShadowRoot(e),t,r)}},{key:"removeChild",value:function(e,t){return i(b(n.prototype),"removeChild",this).call(this,this.nodeOrShadowRoot(e),t)}},{key:"parentNode",value:function(e){return this.nodeOrShadowRoot(i(b(n.prototype),"parentNode",this).call(this,this.nodeOrShadowRoot(e)))}}]),n}(ge),ke=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return f(n,[{key:"supports",value:function(e){return!0}},{key:"addEventListener",value:function(e,t,n){var r=this;return e.addEventListener(t,n,!1),function(){return r.removeEventListener(e,t,n)}}},{key:"removeEventListener",value:function(e,t,n){return e.removeEventListener(t,n)}}]),n}(ue);return e.\u0275fac=function(t){return new(t||e)(u.LFG(h))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),_e=["alt","control","meta","shift"],we={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},be={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},xe={alt:function(e){return e.altKey},control:function(e){return e.ctrlKey},meta:function(e){return e.metaKey},shift:function(e){return e.shiftKey}},Ie=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return f(n,[{key:"supports",value:function(e){return null!=n.parseEventName(e)}},{key:"addEventListener",value:function(e,t,r){var i=n.parseEventName(t),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(function(){return l().onAndCancel(e,i.domEventName,o)})}}],[{key:"parseEventName",value:function(e){var t=e.toLowerCase().split("."),r=t.shift();if(0===t.length||"keydown"!==r&&"keyup"!==r)return null;var i=n._normalizeKey(t.pop()),o="";if(_e.forEach(function(e){var n=t.indexOf(e);n>-1&&(t.splice(n,1),o+=e+".")}),o+=i,0!=t.length||0===i.length)return null;var a={};return a.domEventName=r,a.fullKey=o,a}},{key:"getEventFullKey",value:function(e){var t="",n=function(e){var t=e.key;if(null==t){if(null==(t=e.keyIdentifier))return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&be.hasOwnProperty(t)&&(t=be[t]))}return we[t]||t}(e);return" "===(n=n.toLowerCase())?n="space":"."===n&&(n="dot"),_e.forEach(function(r){r!=n&&xe[r](e)&&(t+=r+".")}),t+=n}},{key:"eventCallback",value:function(e,t,r){return function(i){n.getEventFullKey(i)===e&&r.runGuarded(function(){return t(i)})}}},{key:"_normalizeKey",value:function(e){switch(e){case"esc":return"escape";default:return e}}}]),n}(ue);return e.\u0275fac=function(t){return new(t||e)(u.LFG(h))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Te=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:"browser"},{provide:u.g9A,useValue:function(){X.makeCurrent(),re.init()},multi:!0},{provide:h,useFactory:function(){return(0,u.RDi)(document),document},deps:[]}]),Ce=[[],{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function(){return new u.qLn},deps:[]},{provide:oe,useClass:ke,multi:!0,deps:[h,u.R0b,u.Lbi]},{provide:oe,useClass:Ie,multi:!0,deps:[h]},[],{provide:ve,useClass:ve,deps:[ae,ce,u.AFp]},{provide:u.FYo,useExisting:ve},{provide:se,useExisting:ce},{provide:ce,useClass:ce,deps:[h]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b]},{provide:ae,useClass:ae,deps:[oe,u.R0b]},{provide:function e(){d(this,e)},useClass:ie,deps:[]},[]],Ee=function(){var e=function(){function e(t){if(d(this,e),t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}return f(e,null,[{key:"withServerTransition",value:function(t){return{ngModule:e,providers:[{provide:u.AFp,useValue:t.appId},{provide:te,useExisting:u.AFp},ne]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(e,12))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:Ce,imports:[G,u.hGG]}),e}();function Se(){return new Re((0,u.LFG)(h))}var Re=function(){var e=function(){function e(t){d(this,e),this._doc=t}return f(e,[{key:"getTitle",value:function(){return this._doc.title}},{key:"setTitle",value:function(e){this._doc.title=e||""}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(h))},e.\u0275prov=(0,u.Yz7)({factory:Se,token:e,providedIn:"root"}),e}();"undefined"!=typeof window&&window;var Ae=o(4402),Ne=o(5917),Oe=o(9765),Pe=o(7971),De=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this))._value=e,r}return f(n,[{key:"value",get:function(){return this.getValue()}},{key:"_subscribe",value:function(e){var t=i(b(n.prototype),"_subscribe",this).call(this,e);return t&&!t.closed&&e.next(this._value),t}},{key:"getValue",value:function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new Pe.N;return this._value}},{key:"next",value:function(e){i(b(n.prototype),"next",this).call(this,this._value=e)}}]),n}(Oe.xQ),Le=o(4869),Me=o(9796),Fe=o(7393),Ue=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"notifyNext",value:function(e,t,n,r,i){this.destination.next(t)}},{key:"notifyError",value:function(e,t){this.destination.error(e)}},{key:"notifyComplete",value:function(e){this.destination.complete()}}]),n}(Fe.L),Ve=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).parent=e,o.outerValue=r,o.outerIndex=i,o.index=0,o}return f(n,[{key:"_next",value:function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}},{key:"_error",value:function(e){this.parent.notifyError(e,this),this.unsubscribe()}},{key:"_complete",value:function(){this.parent.notifyComplete(this),this.unsubscribe()}}]),n}(Fe.L),je=o(7444),qe=o(7574);function Be(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ve(e,n,r);if(!i.closed)return t instanceof qe.y?t.subscribe(i):(0,je.s)(t)(i)}var ze=o(6693),Ze={},He=function(){function e(t){d(this,e),this.resultSelector=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new Ge(e,this.resultSelector))}}]),e}(),Ge=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).resultSelector=r,i.active=0,i.values=[],i.observables=[],i}return f(n,[{key:"_next",value:function(e){this.values.push(Ze),this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var n=0;n<t;n++)this.add(Be(this,e[n],void 0,n))}}},{key:"notifyComplete",value:function(e){0==(this.active-=1)&&this.destination.complete()}},{key:"notifyNext",value:function(e,t,n){var r=this.values,i=this.toRespond?r[n]===Ze?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}},{key:"_tryResultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Ue),We=function(){function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e}(),Ke=o(3282);function Ye(){return(0,Ke.J)(1)(Ne.of.apply(void 0,arguments))}var Qe=o(9193);function Je(e){return new qe.y(function(t){var n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,Ae.D)(n):(0,Qe.c)()).subscribe(t)})}var $e=o(2441),Xe=o(8002),et=o(5345);function tt(e,t){return"function"==typeof t?function(n){return n.pipe(tt(function(n,r){return(0,Ae.D)(e(n,r)).pipe((0,Xe.U)(function(e,i){return t(n,e,r,i)}))}))}:function(t){return t.lift(new nt(e))}}var nt=function(){function e(t){d(this,e),this.project=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new rt(e,this.project))}}]),e}(),rt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).project=r,i.index=0,i}return f(n,[{key:"_next",value:function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}},{key:"_innerSub",value:function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new et.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,et.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}},{key:"_complete",value:function(){var e=this.innerSubscription;(!e||e.closed)&&i(b(n.prototype),"_complete",this).call(this),this.unsubscribe()}},{key:"_unsubscribe",value:function(){this.innerSubscription=void 0}},{key:"notifyComplete",value:function(){this.innerSubscription=void 0,this.isStopped&&i(b(n.prototype),"_complete",this).call(this)}},{key:"notifyNext",value:function(e){this.destination.next(e)}}]),n}(et.Ds),it=function(){function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e}();function ot(e){return function(t){return 0===e?(0,Qe.c)():t.lift(new at(e))}}var at=function(){function e(t){if(d(this,e),this.total=t,this.total<0)throw new it}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new ut(e,this.total))}}]),e}(),ut=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).total=r,i.count=0,i}return f(n,[{key:"_next",value:function(e){var t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}]),n}(Fe.L);function st(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return(0,Le.K)(r)?(t.pop(),function(e){return Ye(t,e,r)}):function(e){return Ye(t,e)}}function ct(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new lt(e,t,n))}}var lt=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];d(this,e),this.accumulator=t,this.seed=n,this.hasSeed=r}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new ht(e,this.accumulator,this.seed,this.hasSeed))}}]),e}(),ht=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e)).accumulator=r,a._seed=i,a.hasSeed=o,a.index=0,a}return f(n,[{key:"seed",get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e}},{key:"_next",value:function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}},{key:"_tryNext",value:function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(r){this.destination.error(r)}this.seed=t,this.destination.next(t)}}]),n}(Fe.L);function ft(e,t){return function(n){return n.lift(new dt(e,t))}}var dt=function(){function e(t,n){d(this,e),this.predicate=t,this.thisArg=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new pt(e,this.predicate,this.thisArg))}}]),e}(),pt=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e)).predicate=r,o.thisArg=i,o.count=0,o}return f(n,[{key:"_next",value:function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}]),n}(Fe.L);function vt(e){return function(t){var n=new gt(e),r=t.lift(n);return n.caught=r}}var gt=function(){function e(t){d(this,e),this.selector=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new mt(e,this.selector,this.caught))}}]),e}(),mt=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e)).selector=r,o.caught=i,o}return f(n,[{key:"error",value:function(e){if(!this.isStopped){var t;try{t=this.selector(e,this.caught)}catch(a){return void i(b(n.prototype),"error",this).call(this,a)}this._unsubscribeAndRecycle();var r=new et.IY(this);this.add(r);var o=(0,et.ft)(t,r);o!==r&&this.add(o)}}}]),n}(et.Ds),yt=o(9773);function kt(e,t){return(0,yt.zg)(e,t,1)}function _t(e){return function(t){return 0===e?(0,Qe.c)():t.lift(new wt(e))}}var wt=function(){function e(t){if(d(this,e),this.total=t,this.total<0)throw new it}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new bt(e,this.total))}}]),e}(),bt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).total=r,i.ring=new Array,i.count=0,i}return f(n,[{key:"_next",value:function(e){var t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}},{key:"_complete",value:function(){var e=this.destination,t=this.count;if(t>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=t++%n;e.next(r[o])}e.complete()}}]),n}(Fe.L);function xt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct;return function(t){return t.lift(new It(e))}}var It=function(){function e(t){d(this,e),this.errorFactory=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new Tt(e,this.errorFactory))}}]),e}(),Tt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).errorFactory=r,i.hasValue=!1,i}return f(n,[{key:"_next",value:function(e){this.hasValue=!0,this.destination.next(e)}},{key:"_complete",value:function(){if(this.hasValue)return this.destination.complete();var e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}]),n}(Fe.L);function Ct(){return new We}function Et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(t){return t.lift(new St(e))}}var St=function(){function e(t){d(this,e),this.defaultValue=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new Rt(e,this.defaultValue))}}]),e}(),Rt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).defaultValue=r,i.isEmpty=!0,i}return f(n,[{key:"_next",value:function(e){this.isEmpty=!1,this.destination.next(e)}},{key:"_complete",value:function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}]),n}(Fe.L),At=o(4487);function Nt(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ft(function(t,n){return e(t,n,r)}):At.y,ot(1),n?Et(t):xt(function(){return new We}))}}var Ot=o(8307),Pt=o(1307),Dt=o(5319),Lt=function(){function e(t){d(this,e),this.callback=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new Mt(e,this.callback))}}]),e}(),Mt=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).add(new Dt.w(r)),i}return n}(Fe.L),Ft=function e(t,n){d(this,e),this.id=t,this.url=n},Ut=function(e){p(n,e);var t=v(n);function n(e,r){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"imperative",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return d(this,n),(i=t.call(this,e,r)).navigationTrigger=o,i.restoredState=a,i}return f(n,[{key:"toString",value:function(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Ft),Vt=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r)).urlAfterRedirects=i,o}return f(n,[{key:"toString",value:function(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}]),n}(Ft),jt=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r)).reason=i,o}return f(n,[{key:"toString",value:function(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}]),n}(Ft),qt=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r)).error=i,o}return f(n,[{key:"toString",value:function(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}]),n}(Ft),Bt=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return f(n,[{key:"toString",value:function(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),zt=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return f(n,[{key:"toString",value:function(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),Zt=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a){var u;return d(this,n),(u=t.call(this,e,r)).urlAfterRedirects=i,u.state=o,u.shouldActivate=a,u}return f(n,[{key:"toString",value:function(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}]),n}(Ft),Ht=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return f(n,[{key:"toString",value:function(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),Gt=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a;return d(this,n),(a=t.call(this,e,r)).urlAfterRedirects=i,a.state=o,a}return f(n,[{key:"toString",value:function(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}]),n}(Ft),Wt=function(){function e(t){d(this,e),this.route=t}return f(e,[{key:"toString",value:function(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}]),e}(),Kt=function(){function e(t){d(this,e),this.route=t}return f(e,[{key:"toString",value:function(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}]),e}(),Yt=function(){function e(t){d(this,e),this.snapshot=t}return f(e,[{key:"toString",value:function(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Qt=function(){function e(t){d(this,e),this.snapshot=t}return f(e,[{key:"toString",value:function(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Jt=function(){function e(t){d(this,e),this.snapshot=t}return f(e,[{key:"toString",value:function(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),$t=function(){function e(t){d(this,e),this.snapshot=t}return f(e,[{key:"toString",value:function(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}]),e}(),Xt=function(){function e(t,n,r){d(this,e),this.routerEvent=t,this.position=n,this.anchor=r}return f(e,[{key:"toString",value:function(){return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(this.position?"".concat(this.position[0],", ").concat(this.position[1]):null,"')")}}]),e}(),en="primary",tn=function(){function e(t){d(this,e),this.params=t||{}}return f(e,[{key:"has",value:function(e){return Object.prototype.hasOwnProperty.call(this.params,e)}},{key:"get",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t[0]:t}return null}},{key:"getAll",value:function(e){if(this.has(e)){var t=this.params[e];return Array.isArray(t)?t:[t]}return[]}},{key:"keys",get:function(){return Object.keys(this.params)}}]),e}();function nn(e){return new tn(e)}var rn="ngNavigationCancelingError";function on(e){var t=Error("NavigationCancelingError: "+e);return t[rn]=!0,t}function an(e,t,n){var r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;for(var i={},o=0;o<r.length;o++){var a=r[o],u=e[o];if(a.startsWith(":"))i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function un(e,t){var n,r=e?Object.keys(e):void 0,i=t?Object.keys(t):void 0;if(!r||!i||r.length!=i.length)return!1;for(var o=0;o<r.length;o++)if(!sn(e[n=r[o]],t[n]))return!1;return!0}function sn(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;var n=a(e).sort(),r=a(t).sort();return n.every(function(e,t){return r[t]===e})}return e===t}function cn(e){return Array.prototype.concat.apply([],e)}function ln(e){return e.length>0?e[e.length-1]:null}function hn(e,t){for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function fn(e){return(0,u.CqO)(e)?e:(0,u.QGY)(e)?(0,Ae.D)(Promise.resolve(e)):(0,Ne.of)(e)}var dn={exact:function e(t,n,r){if(!bn(t.segments,n.segments)||!yn(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(var i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:gn},pn={exact:function(e,t){return un(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(function(n){return sn(e[n],t[n])})},ignored:function(){return!0}};function vn(e,t,n){return dn[n.paths](e.root,t.root,n.matrixParams)&&pn[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function gn(e,t,n){return mn(e,t,t.segments,n)}function mn(e,t,n,r){if(e.segments.length>n.length){var i=e.segments.slice(0,n.length);return!(!bn(i,n)||t.hasChildren()||!yn(i,n,r))}if(e.segments.length===n.length){if(!bn(e.segments,n)||!yn(e.segments,n,r))return!1;for(var o in t.children)if(!e.children[o]||!gn(e.children[o],t.children[o],r))return!1;return!0}var a=n.slice(0,e.segments.length),u=n.slice(e.segments.length);return!!(bn(e.segments,a)&&yn(e.segments,a,r)&&e.children[en])&&mn(e.children[en],t,u,r)}function yn(e,t,n){return t.every(function(t,r){return pn[n](e[r].parameters,t.parameters)})}var kn=function(){function e(t,n,r){d(this,e),this.root=t,this.queryParams=n,this.fragment=r}return f(e,[{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=nn(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return Tn.serialize(this)}}]),e}(),_n=function(){function e(t,n){var r=this;d(this,e),this.segments=t,this.children=n,this.parent=null,hn(n,function(e,t){return e.parent=r})}return f(e,[{key:"hasChildren",value:function(){return this.numberOfChildren>0}},{key:"numberOfChildren",get:function(){return Object.keys(this.children).length}},{key:"toString",value:function(){return Cn(this)}}]),e}(),wn=function(){function e(t,n){d(this,e),this.path=t,this.parameters=n}return f(e,[{key:"parameterMap",get:function(){return this._parameterMap||(this._parameterMap=nn(this.parameters)),this._parameterMap}},{key:"toString",value:function(){return Pn(this)}}]),e}();function bn(e,t){return e.length===t.length&&e.every(function(e,n){return e.path===t[n].path})}var xn=function e(){d(this,e)},In=function(){function e(){d(this,e)}return f(e,[{key:"parse",value:function(e){var t=new Un(e);return new kn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}},{key:"serialize",value:function(e){var t;return"".concat("/".concat(En(e.root,!0)),function(e){var t=Object.keys(e).map(function(t){var n=e[t];return Array.isArray(n)?n.map(function(e){return"".concat(Rn(t),"=").concat(Rn(e))}).join("&"):"".concat(Rn(t),"=").concat(Rn(n))}).filter(function(e){return!!e});return t.length?"?".concat(t.join("&")):""}(e.queryParams)).concat("string"==typeof e.fragment?"#".concat((t=e.fragment,encodeURI(t))):"")}}]),e}(),Tn=new In;function Cn(e){return e.segments.map(function(e){return Pn(e)}).join("/")}function En(e,t){if(!e.hasChildren())return Cn(e);if(t){var n=e.children[en]?En(e.children[en],!1):"",r=[];return hn(e.children,function(e,t){t!==en&&r.push("".concat(t,":").concat(En(e,!1)))}),r.length>0?"".concat(n,"(").concat(r.join("//"),")"):n}var i=function(e,t){var n=[];return hn(e.children,function(e,r){r===en&&(n=n.concat(t(e,r)))}),hn(e.children,function(e,r){r!==en&&(n=n.concat(t(e,r)))}),n}(e,function(t,n){return n===en?[En(e.children[en],!1)]:["".concat(n,":").concat(En(t,!1))]});return 1===Object.keys(e.children).length&&null!=e.children[en]?"".concat(Cn(e),"/").concat(i[0]):"".concat(Cn(e),"/(").concat(i.join("//"),")")}function Sn(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rn(e){return Sn(e).replace(/%3B/gi,";")}function An(e){return Sn(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Nn(e){return decodeURIComponent(e)}function On(e){return Nn(e.replace(/\+/g,"%20"))}function Pn(e){return"".concat(An(e.path)).concat(function(e){return Object.keys(e).map(function(t){return";".concat(An(t),"=").concat(An(e[t]))}).join("")}(e.parameters))}var Dn=/^[^\/()?;=#]+/;function Ln(e){var t=e.match(Dn);return t?t[0]:""}var Mn=/^[^=?&#]+/,Fn=/^[^?&#]+/,Un=function(){function e(t){d(this,e),this.url=t,this.remaining=t}return f(e,[{key:"parseRootSegment",value:function(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _n([],{}):new _n([],this.parseChildren())}},{key:"parseQueryParams",value:function(){var e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}},{key:"parseFragment",value:function(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}},{key:"parseChildren",value:function(){if(""===this.remaining)return{};this.consumeOptional("/");var e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());var t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));var n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[en]=new _n(e,t)),n}},{key:"parseSegment",value:function(){var e=Ln(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error("Empty path url segment cannot have parameters: '".concat(this.remaining,"'."));return this.capture(e),new wn(Nn(e),this.parseMatrixParams())}},{key:"parseMatrixParams",value:function(){for(var e={};this.consumeOptional(";");)this.parseParam(e);return e}},{key:"parseParam",value:function(e){var t=Ln(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=Ln(this.remaining);r&&(n=r,this.capture(n))}e[Nn(t)]=Nn(n)}}},{key:"parseQueryParam",value:function(e){var t=function(e){var t=e.match(Mn);return t?t[0]:""}(this.remaining);if(t){this.capture(t);var n="";if(this.consumeOptional("=")){var r=function(e){var t=e.match(Fn);return t?t[0]:""}(this.remaining);r&&(n=r,this.capture(n))}var i=On(t),o=On(n);if(e.hasOwnProperty(i)){var a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}}},{key:"parseParens",value:function(e){var t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){var n=Ln(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error("Cannot parse url '".concat(this.url,"'"));var i=void 0;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=en);var o=this.parseChildren();t[i]=1===Object.keys(o).length?o[en]:new _n([],o),this.consumeOptional("//")}return t}},{key:"peekStartsWith",value:function(e){return this.remaining.startsWith(e)}},{key:"consumeOptional",value:function(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}},{key:"capture",value:function(e){if(!this.consumeOptional(e))throw new Error('Expected "'.concat(e,'".'))}}]),e}(),Vn=function(){function e(t){d(this,e),this._root=t}return f(e,[{key:"root",get:function(){return this._root.value}},{key:"parent",value:function(e){var t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}},{key:"children",value:function(e){var t=jn(e,this._root);return t?t.children.map(function(e){return e.value}):[]}},{key:"firstChild",value:function(e){var t=jn(e,this._root);return t&&t.children.length>0?t.children[0].value:null}},{key:"siblings",value:function(e){var t=qn(e,this._root);return t.length<2?[]:t[t.length-2].children.map(function(e){return e.value}).filter(function(t){return t!==e})}},{key:"pathFromRoot",value:function(e){return qn(e,this._root).map(function(e){return e.value})}}]),e}();function jn(e,t){if(e===t.value)return t;var n,r=s(t.children);try{for(r.s();!(n=r.n()).done;){var i=jn(e,n.value);if(i)return i}}catch(o){r.e(o)}finally{r.f()}return null}function qn(e,t){if(e===t.value)return[t];var n,r=s(t.children);try{for(r.s();!(n=r.n()).done;){var i=qn(e,n.value);if(i.length)return i.unshift(t),i}}catch(o){r.e(o)}finally{r.f()}return[]}var Bn=function(){function e(t,n){d(this,e),this.value=t,this.children=n}return f(e,[{key:"toString",value:function(){return"TreeNode(".concat(this.value,")")}}]),e}();function zn(e){var t={};return e&&e.children.forEach(function(e){return t[e.value.outlet]=e}),t}var Zn=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).snapshot=r,Qn(m(i),e),i}return f(n,[{key:"toString",value:function(){return this.snapshot.toString()}}]),n}(Vn);function Hn(e,t){var n=function(e,t){var n=new Kn([],{},{},"",{},en,t,null,e.root,-1,{});return new Yn("",new Bn(n,[]))}(e,t),r=new De([new wn("",{})]),i=new De({}),o=new De({}),a=new De({}),u=new De(""),s=new Gn(r,i,a,u,o,en,t,n.root);return s.snapshot=n.root,new Zn(new Bn(s,[]),n)}var Gn=function(){function e(t,n,r,i,o,a,u,s){d(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this._futureSnapshot=s}return f(e,[{key:"routeConfig",get:function(){return this._futureSnapshot.routeConfig}},{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=this.params.pipe((0,Xe.U)(function(e){return nn(e)}))),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Xe.U)(function(e){return nn(e)}))),this._queryParamMap}},{key:"toString",value:function(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}]),e}();function Wn(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"emptyOnly",n=e.pathFromRoot,r=0;if("always"!==t)for(r=n.length-1;r>=1;){var i=n[r],o=n[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(o.component)break;r--}}return function(e){return e.reduce(function(e,t){return{params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}},{params:{},data:{},resolve:{}})}(n.slice(r))}var Kn=function(){function e(t,n,r,i,o,a,u,s,c,l,h){d(this,e),this.url=t,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=s,this._urlSegment=c,this._lastPathIndex=l,this._resolve=h}return f(e,[{key:"root",get:function(){return this._routerState.root}},{key:"parent",get:function(){return this._routerState.parent(this)}},{key:"firstChild",get:function(){return this._routerState.firstChild(this)}},{key:"children",get:function(){return this._routerState.children(this)}},{key:"pathFromRoot",get:function(){return this._routerState.pathFromRoot(this)}},{key:"paramMap",get:function(){return this._paramMap||(this._paramMap=nn(this.params)),this._paramMap}},{key:"queryParamMap",get:function(){return this._queryParamMap||(this._queryParamMap=nn(this.queryParams)),this._queryParamMap}},{key:"toString",value:function(){return"Route(url:'".concat(this.url.map(function(e){return e.toString()}).join("/"),"', path:'").concat(this.routeConfig?this.routeConfig.path:"","')")}}]),e}(),Yn=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,r)).url=e,Qn(m(i),r),i}return f(n,[{key:"toString",value:function(){return Jn(this._root)}}]),n}(Vn);function Qn(e,t){t.value._routerState=e,t.children.forEach(function(t){return Qn(e,t)})}function Jn(e){var t=e.children.length>0?" { ".concat(e.children.map(Jn).join(", ")," } "):"";return"".concat(e.value).concat(t)}function $n(e){if(e.snapshot){var t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,un(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),un(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n)if(!un(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),un(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Xn(e,t){return un(e.params,t.params)&&function(e,t){return bn(e,t)&&e.every(function(e,n){return un(e.parameters,t[n].parameters)})}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Xn(e.parent,t.parent))}function er(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){var r=n.value;r._futureSnapshot=t.value;var i=function(e,t,n){return t.children.map(function(t){var r,i=s(n.children);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(e.shouldReuseRoute(t.value,o.value.snapshot))return er(e,t,o)}}catch(a){i.e(a)}finally{i.f()}return er(e,t)})}(e,t,n);return new Bn(r,i)}if(e.shouldAttach(t.value)){var o=e.retrieve(t.value);if(null!==o){var a=o.route;return tr(t,a),a}}var u=function(e){return new Gn(new De(e.url),new De(e.params),new De(e.queryParams),new De(e.fragment),new De(e.data),e.outlet,e.component,e)}(t.value),c=t.children.map(function(t){return er(e,t)});return new Bn(u,c)}function tr(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(var n=0;n<e.children.length;++n)tr(e.children[n],t.children[n])}function nr(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function rr(e){return"object"==typeof e&&null!=e&&e.outlets}function ir(e,t,n,r,i){var o={};return r&&hn(r,function(e,t){o[t]=Array.isArray(e)?e.map(function(e){return"".concat(e)}):"".concat(e)}),new kn(n.root===e?t:or(n.root,e,t),o,i)}function or(e,t,n){var r={};return hn(e.children,function(e,i){r[i]=e===t?n:or(e,t,n)}),new _n(e.segments,r)}var ar=function(){function e(t,n,r){if(d(this,e),this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=r,t&&r.length>0&&nr(r[0]))throw new Error("Root segment cannot have matrix parameters");var i=r.find(rr);if(i&&i!==ln(r))throw new Error("{outlets:{}} has to be the last command")}return f(e,[{key:"toRoot",value:function(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}]),e}(),ur=function e(t,n,r){d(this,e),this.segmentGroup=t,this.processChildren=n,this.index=r};function sr(e,t,n){if(e||(e=new _n([],{})),0===e.segments.length&&e.hasChildren())return cr(e,t,n);var r=function(e,t,n){for(var r=0,i=t,o={match:!1,pathIndex:0,commandIndex:0};i<e.segments.length;){if(r>=n.length)return o;var a=e.segments[i],u=n[r];if(rr(u))break;var s="".concat(u),c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===s)break;if(s&&c&&"object"==typeof c&&void 0===c.outlets){if(!dr(s,c,a))return o;r+=2}else{if(!dr(s,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){var o=new _n(e.segments.slice(0,r.pathIndex),{});return o.children[en]=new _n(e.segments.slice(r.pathIndex),e.children),cr(o,0,i)}return r.match&&0===i.length?new _n(e.segments,{}):r.match&&!e.hasChildren()?lr(e,t,n):r.match?cr(e,0,i):lr(e,t,n)}function cr(t,n,r){if(0===r.length)return new _n(t.segments,{});var i=function(t){return rr(t[0])?t[0].outlets:e({},en,t)}(r),o={};return hn(i,function(e,r){"string"==typeof e&&(e=[e]),null!==e&&(o[r]=sr(t.children[r],n,e))}),hn(t.children,function(e,t){void 0===i[t]&&(o[t]=e)}),new _n(t.segments,o)}function lr(e,t,n){for(var r=e.segments.slice(0,t),i=0;i<n.length;){var o=n[i];if(rr(o)){var a=hr(o.outlets);return new _n(r,a)}if(0===i&&nr(n[0]))r.push(new wn(e.segments[t].path,fr(n[0]))),i++;else{var u=rr(o)?o.outlets[en]:"".concat(o),s=i<n.length-1?n[i+1]:null;u&&s&&nr(s)?(r.push(new wn(u,fr(s))),i+=2):(r.push(new wn(u,{})),i++)}}return new _n(r,{})}function hr(e){var t={};return hn(e,function(e,n){"string"==typeof e&&(e=[e]),null!==e&&(t[n]=lr(new _n([],{}),0,e))}),t}function fr(e){var t={};return hn(e,function(e,n){return t[n]="".concat(e)}),t}function dr(e,t,n){return e==n.path&&un(t,n.parameters)}var pr=function(){function e(t,n,r,i){d(this,e),this.routeReuseStrategy=t,this.futureState=n,this.currState=r,this.forwardEvent=i}return f(e,[{key:"activate",value:function(e){var t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),$n(this.futureState.root),this.activateChildRoutes(t,n,e)}},{key:"deactivateChildRoutes",value:function(e,t,n){var r=this,i=zn(t);e.children.forEach(function(e){var t=e.value.outlet;r.deactivateRoutes(e,i[t],n),delete i[t]}),hn(i,function(e,t){r.deactivateRouteAndItsChildren(e,n)})}},{key:"deactivateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if(r===i)if(r.component){var o=n.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}},{key:"deactivateRouteAndItsChildren",value:function(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}},{key:"detachAndStoreRouteSubtree",value:function(e,t){var n=t.getContext(e.value.outlet);if(n&&n.outlet){var r=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:r,route:e,contexts:i})}}},{key:"deactivateRouteAndOutlet",value:function(e,t){for(var n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=zn(e),o=0,a=Object.keys(i);o<a.length;o++){var u=a[o];this.deactivateRouteAndItsChildren(i[u],r)}n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}},{key:"activateChildRoutes",value:function(e,t,n){var r=this,i=zn(t);e.children.forEach(function(e){r.activateRoutes(e,i[e.value.outlet],n),r.forwardEvent(new $t(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Qt(e.value.snapshot))}},{key:"activateRoutes",value:function(e,t,n){var r=e.value,i=t?t.value:null;if($n(r),r===i)if(r.component){var o=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,n);else if(r.component){var a=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){var u=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),vr(u.route)}else{var s=function(e){for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(r.snapshot),c=s?s.module.componentFactoryResolver:null;a.attachRef=null,a.route=r,a.resolver=c,a.outlet&&a.outlet.activateWith(r,c),this.activateChildRoutes(e,null,a.children)}}else this.activateChildRoutes(e,null,n)}}]),e}();function vr(e){$n(e.value),e.children.forEach(vr)}var gr=function e(t,n){d(this,e),this.routes=t,this.module=n};function mr(e){return"function"==typeof e}function yr(e){return e instanceof kn}var kr=Symbol("INITIAL_VALUE");function _r(){return tt(function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,i;return(0,Le.K)(t[t.length-1])&&(i=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&(0,Me.k)(t[0])&&(t=t[0]),(0,ze.n)(t,i).lift(new He(r))}(e.map(function(e){return e.pipe(ot(1),st(kr))})).pipe(ct(function(e,t){var n=!1;return t.reduce(function(e,r,i){return e!==kr?e:(r===kr&&(n=!0),n||!1!==r&&i!==t.length-1&&!yr(r)?e:r)},e)},kr),ft(function(e){return e!==kr}),(0,Xe.U)(function(e){return yr(e)?e:!0===e}),ot(1))})}var wr=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&u._UZ(0,"router-outlet")},directives:function(){return[vi]},encapsulation:2}),e}();function br(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=0;n<e.length;n++){var r=e[n];xr(r,Ir(t,r))}}function xr(e,t){e.children&&br(e.children,t)}function Ir(e,t){return t?e||t.path?e&&!t.path?"".concat(e,"/"):!e&&t.path?t.path:"".concat(e,"/").concat(t.path):"":e}function Tr(e){var t=e.children&&e.children.map(Tr),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==en&&(n.component=wr),n}function Cr(e){return e.outlet||en}function Er(e,t){var n=e.filter(function(e){return Cr(e)===t});return n.push.apply(n,a(e.filter(function(e){return Cr(e)!==t}))),n}var Sr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Rr(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Sr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};var i=(t.matcher||an)(n,e,t);if(!i)return Object.assign({},Sr);var o={};hn(i.posParams,function(e,t){o[t]=e.path});var a=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Ar(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"corrected";if(n.length>0&&function(e,t,n){return n.some(function(n){return Nr(e,t,n)&&Cr(n)!==en})}(e,n,r)){var o=new _n(t,function(e,t,n,r){var i={};i[en]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;var o,a=s(n);try{for(a.s();!(o=a.n()).done;){var u=o.value;if(""===u.path&&Cr(u)!==en){var c=new _n([],{});c._sourceSegment=e,c._segmentIndexShift=t.length,i[Cr(u)]=c}}}catch(l){a.e(l)}finally{a.f()}return i}(e,t,r,new _n(n,e.children)));return o._sourceSegment=e,o._segmentIndexShift=t.length,{segmentGroup:o,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(function(n){return Nr(e,t,n)})}(e,n,r)){var a=new _n(e.segments,function(e,t,n,r,i,o){var a,u={},c=s(r);try{for(c.s();!(a=c.n()).done;){var l=a.value;if(Nr(e,n,l)&&!i[Cr(l)]){var h=new _n([],{});h._sourceSegment=e,h._segmentIndexShift="legacy"===o?e.segments.length:t.length,u[Cr(l)]=h}}}catch(f){c.e(f)}finally{c.f()}return Object.assign(Object.assign({},i),u)}(e,t,n,r,e.children,i));return a._sourceSegment=e,a._segmentIndexShift=t.length,{segmentGroup:a,slicedSegments:n}}var u=new _n(e.segments,e.children);return u._sourceSegment=e,u._segmentIndexShift=t.length,{segmentGroup:u,slicedSegments:n}}function Nr(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function Or(e,t,n,r){return!!(Cr(e)===r||r!==en&&Nr(t,n,e))&&("**"===e.path||Rr(t,e,n).matched)}function Pr(e,t,n){return 0===t.length&&!e.children[n]}var Dr=function e(t){d(this,e),this.segmentGroup=t||null},Lr=function e(t){d(this,e),this.urlTree=t};function Mr(e){return new qe.y(function(t){return t.error(new Dr(e))})}function Fr(e){return new qe.y(function(t){return t.error(new Lr(e))})}function Ur(e){return new qe.y(function(t){return t.error(new Error("Only absolute redirects can have named outlets. redirectTo: '".concat(e,"'")))})}var Vr=function(){function t(e,n,r,i,o){d(this,t),this.configLoader=n,this.urlSerializer=r,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=e.get(u.h0i)}return f(t,[{key:"apply",value:function(){var e=this,t=Ar(this.urlTree.root,[],[],this.config).segmentGroup,n=new _n(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,n,en).pipe((0,Xe.U)(function(t){return e.createUrlTree(jr(t),e.urlTree.queryParams,e.urlTree.fragment)})).pipe(vt(function(t){if(t instanceof Lr)return e.allowRedirects=!1,e.match(t.urlTree);throw t instanceof Dr?e.noMatchError(t):t}))}},{key:"match",value:function(e){var t=this;return this.expandSegmentGroup(this.ngModule,this.config,e.root,en).pipe((0,Xe.U)(function(n){return t.createUrlTree(jr(n),e.queryParams,e.fragment)})).pipe(vt(function(e){throw e instanceof Dr?t.noMatchError(e):e}))}},{key:"noMatchError",value:function(e){return new Error("Cannot match any routes. URL Segment: '".concat(e.segmentGroup,"'"))}},{key:"createUrlTree",value:function(t,n,r){var i=t.segments.length>0?new _n([],e({},en,t)):t;return new kn(i,n,r)}},{key:"expandSegmentGroup",value:function(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Xe.U)(function(e){return new _n([],e)})):this.expandSegment(e,n,t,n.segments,r,!0)}},{key:"expandChildren",value:function(e,t,n){for(var r=this,i=[],o=0,a=Object.keys(n.children);o<a.length;o++){var u=a[o];"primary"===u?i.unshift(u):i.push(u)}return(0,Ae.D)(i).pipe(kt(function(i){var o=n.children[i],a=Er(t,i);return r.expandSegmentGroup(e,a,o,i).pipe((0,Xe.U)(function(e){return{segment:e,outlet:i}}))}),ct(function(e,t){return e[t.outlet]=t.segment,e},{}),function(e,t){var n=arguments.length>=2;return function(r){return r.pipe(e?ft(function(t,n){return e(t,n,r)}):At.y,_t(1),n?Et(t):xt(function(){return new We}))}}())}},{key:"expandSegment",value:function(e,t,n,r,i,o){var a=this;return(0,Ae.D)(n).pipe(kt(function(u){return a.expandSegmentAgainstRoute(e,t,n,u,r,i,o).pipe(vt(function(e){if(e instanceof Dr)return(0,Ne.of)(null);throw e}))}),Nt(function(e){return!!e}),vt(function(e,n){if(e instanceof We||"EmptyError"===e.name){if(Pr(t,r,i))return(0,Ne.of)(new _n([],{}));throw new Dr(t)}throw e}))}},{key:"expandSegmentAgainstRoute",value:function(e,t,n,r,i,o,a){return Or(r,t,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o):Mr(t):Mr(t)}},{key:"expandSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,o)}},{key:"expandWildCardWithParamsAgainstRouteUsingRedirect",value:function(e,t,n,r){var i=this,o=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Fr(o):this.lineralizeSegments(n,o).pipe((0,yt.zg)(function(n){var o=new _n(n,{});return i.expandSegment(e,o,t,n,r,!1)}))}},{key:"expandRegularSegmentAgainstRouteUsingRedirect",value:function(e,t,n,r,i,o){var a=this,u=Rr(t,r,i),s=u.matched,c=u.consumedSegments,l=u.lastChild,h=u.positionalParamSegments;if(!s)return Mr(t);var f=this.applyRedirectCommands(c,r.redirectTo,h);return r.redirectTo.startsWith("/")?Fr(f):this.lineralizeSegments(r,f).pipe((0,yt.zg)(function(r){return a.expandSegment(e,t,n,r.concat(i.slice(l)),o,!1)}))}},{key:"matchSegmentAgainstRoute",value:function(e,t,n,r,i){var o=this;if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,Ne.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Xe.U)(function(e){return n._loadedConfig=e,new _n(r,{})})):(0,Ne.of)(new _n(r,{}));var a=Rr(t,n,r),u=a.matched,s=a.consumedSegments,c=a.lastChild;if(!u)return Mr(t);var l=r.slice(c);return this.getChildConfig(e,n,r).pipe((0,yt.zg)(function(e){var r=e.module,a=e.routes,u=Ar(t,s,l,a),c=u.segmentGroup,h=u.slicedSegments,f=new _n(c.segments,c.children);if(0===h.length&&f.hasChildren())return o.expandChildren(r,a,f).pipe((0,Xe.U)(function(e){return new _n(s,e)}));if(0===a.length&&0===h.length)return(0,Ne.of)(new _n(s,{}));var d=Cr(n)===i;return o.expandSegment(r,f,a,h,d?en:i,!0).pipe((0,Xe.U)(function(e){return new _n(s.concat(e.segments),e.children)}))}))}},{key:"getChildConfig",value:function(e,t,n){var r=this;return t.children?(0,Ne.of)(new gr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,Ne.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,yt.zg)(function(n){return n?r.configLoader.load(e.injector,t).pipe((0,Xe.U)(function(e){return t._loadedConfig=e,e})):(i=t,new qe.y(function(e){return e.error(on("Cannot load children because the guard of the route \"path: '".concat(i.path,"'\" returned false")))}));var i})):(0,Ne.of)(new gr([],e))}},{key:"runCanLoadGuards",value:function(e,t,n){var r=this,i=t.canLoad;if(!i||0===i.length)return(0,Ne.of)(!0);var o=i.map(function(r){var i,o,a=e.get(r);if((o=a)&&mr(o.canLoad))i=a.canLoad(t,n);else{if(!mr(a))throw new Error("Invalid CanLoad guard");i=a(t,n)}return fn(i)});return(0,Ne.of)(o).pipe(_r(),(0,Ot.b)(function(e){if(yr(e)){var t=on('Redirecting to "'.concat(r.urlSerializer.serialize(e),'"'));throw t.url=e,t}}),(0,Xe.U)(function(e){return!0===e}))}},{key:"lineralizeSegments",value:function(e,t){for(var n=[],r=t.root;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,Ne.of)(n);if(r.numberOfChildren>1||!r.children[en])return Ur(e.redirectTo);r=r.children[en]}}},{key:"applyRedirectCommands",value:function(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}},{key:"applyRedirectCreatreUrlTree",value:function(e,t,n,r){var i=this.createSegmentGroup(e,t.root,n,r);return new kn(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}},{key:"createQueryParams",value:function(e,t){var n={};return hn(e,function(e,r){if("string"==typeof e&&e.startsWith(":")){var i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}},{key:"createSegmentGroup",value:function(e,t,n,r){var i=this,o=this.createSegments(e,t.segments,n,r),a={};return hn(t.children,function(t,o){a[o]=i.createSegmentGroup(e,t,n,r)}),new _n(o,a)}},{key:"createSegments",value:function(e,t,n,r){var i=this;return t.map(function(t){return t.path.startsWith(":")?i.findPosParam(e,t,r):i.findOrReturn(t,n)})}},{key:"findPosParam",value:function(e,t,n){var r=n[t.path.substring(1)];if(!r)throw new Error("Cannot redirect to '".concat(e,"'. Cannot find '").concat(t.path,"'."));return r}},{key:"findOrReturn",value:function(e,t){var n,r=0,i=s(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.path===e.path)return t.splice(r),o;r++}}catch(a){i.e(a)}finally{i.f()}return e}}]),t}();function jr(e){for(var t={},n=0,r=Object.keys(e.children);n<r.length;n++){var i=r[n],o=jr(e.children[i]);(o.segments.length>0||o.hasChildren())&&(t[i]=o)}return function(e){if(1===e.numberOfChildren&&e.children[en]){var t=e.children[en];return new _n(e.segments.concat(t.segments),t.children)}return e}(new _n(e.segments,t))}var qr=function e(t){d(this,e),this.path=t,this.route=this.path[this.path.length-1]},Br=function e(t,n){d(this,e),this.component=t,this.route=n};function zr(e,t,n){var r=e._root;return Hr(r,t?t._root:null,n,[r.value])}function Zr(e,t,n){var r=function(e){if(!e)return null;for(var t=e.parent;t;t=t.parent){var n=t.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Hr(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=zn(t);return e.children.forEach(function(e){(function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{canDeactivateChecks:[],canActivateChecks:[]},o=e.value,a=t?t.value:null,u=n?n.getContext(e.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){var s=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!bn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!bn(e.url,t.url)||!un(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Xn(e,t)||!un(e.queryParams,t.queryParams);case"paramsChange":default:return!Xn(e,t)}}(a,o,o.routeConfig.runGuardsAndResolvers);s?i.canActivateChecks.push(new qr(r)):(o.data=a.data,o._resolvedData=a._resolvedData),Hr(e,t,o.component?u?u.children:null:n,r,i),s&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Br(u.outlet.component,a))}else a&&Gr(t,u,i),i.canActivateChecks.push(new qr(r)),Hr(e,null,o.component?u?u.children:null:n,r,i)})(e,o[e.value.outlet],n,r.concat([e.value]),i),delete o[e.value.outlet]}),hn(o,function(e,t){return Gr(e,n.getContext(t),i)}),i}function Gr(e,t,n){var r=zn(e),i=e.value;hn(r,function(e,r){Gr(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Br(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}var Wr=function e(){d(this,e)};function Kr(e){return new qe.y(function(t){return t.error(e)})}var Yr=function(){function e(t,n,r,i,o,a){d(this,e),this.rootComponentType=t,this.config=n,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.relativeLinkResolution=a}return f(e,[{key:"recognize",value:function(){var e=Ar(this.urlTree.root,[],[],this.config.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,en);if(null===t)return null;var n=new Kn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},en,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Bn(n,t),i=new Yn(this.url,r);return this.inheritParamsAndData(i._root),i}},{key:"inheritParamsAndData",value:function(e){var t=this,n=e.value,r=Wn(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(function(e){return t.inheritParamsAndData(e)})}},{key:"processSegmentGroup",value:function(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}},{key:"processChildren",value:function(e,t){for(var n=[],r=0,i=Object.keys(t.children);r<i.length;r++){var o=i[r],u=t.children[o],s=Er(e,o),c=this.processSegmentGroup(s,u,o);if(null===c)return null;n.push.apply(n,a(c))}var l=Qr(n);return l.sort(function(e,t){return e.value.outlet===en?-1:t.value.outlet===en?1:e.value.outlet.localeCompare(t.value.outlet)}),l}},{key:"processSegment",value:function(e,t,n,r){var i,o=s(e);try{for(o.s();!(i=o.n()).done;){var a=i.value,u=this.processSegmentAgainstRoute(a,t,n,r);if(null!==u)return u}}catch(c){o.e(c)}finally{o.f()}return Pr(t,n,r)?[]:null}},{key:"processSegmentAgainstRoute",value:function(e,t,n,r){if(e.redirectTo||!Or(e,t,n,r))return null;var i,o=[],a=[];if("**"===e.path){var u=n.length>0?ln(n).parameters:{};i=new Kn(n,u,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xr(e),Cr(e),e.component,e,Jr(t),$r(t)+n.length,ei(e))}else{var s=Rr(t,e,n);if(!s.matched)return null;o=s.consumedSegments,a=n.slice(s.lastChild),i=new Kn(o,s.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Xr(e),Cr(e),e.component,e,Jr(t),$r(t)+o.length,ei(e))}var c,l=(c=e).children?c.children:c.loadChildren?c._loadedConfig.routes:[],h=Ar(t,o,a,l.filter(function(e){return void 0===e.redirectTo}),this.relativeLinkResolution),f=h.segmentGroup,d=h.slicedSegments;if(0===d.length&&f.hasChildren()){var p=this.processChildren(l,f);return null===p?null:[new Bn(i,p)]}if(0===l.length&&0===d.length)return[new Bn(i,[])];var v=Cr(e)===r,g=this.processSegment(l,f,d,v?en:r);return null===g?null:[new Bn(i,g)]}}]),e}();function Qr(e){var t,n=[],r=new Set,i=s(e);try{var o=function(){var e,i=t.value;if(!function(e){var t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}(i))return n.push(i),"continue";var o=n.find(function(e){return i.value.routeConfig===e.value.routeConfig});void 0!==o?((e=o.children).push.apply(e,a(i.children)),r.add(o)):n.push(i)};for(i.s();!(t=i.n()).done;)o()}catch(f){i.e(f)}finally{i.f()}var u,c=s(r);try{for(c.s();!(u=c.n()).done;){var l=u.value,h=Qr(l.children);n.push(new Bn(l.value,h))}}catch(f){c.e(f)}finally{c.f()}return n.filter(function(e){return!r.has(e)})}function Jr(e){for(var t=e;t._sourceSegment;)t=t._sourceSegment;return t}function $r(e){for(var t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;t._sourceSegment;)n+=(t=t._sourceSegment)._segmentIndexShift?t._segmentIndexShift:0;return n-1}function Xr(e){return e.data||{}}function ei(e){return e.resolve||{}}function ti(e){return tt(function(t){var n=e(t);return n?(0,Ae.D)(n).pipe((0,Xe.U)(function(){return t})):(0,Ne.of)(t)})}var ni=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(function(){function e(){d(this,e)}return f(e,[{key:"shouldDetach",value:function(e){return!1}},{key:"store",value:function(e,t){}},{key:"shouldAttach",value:function(e){return!1}},{key:"retrieve",value:function(e){return null}},{key:"shouldReuseRoute",value:function(e,t){return e.routeConfig===t.routeConfig}}]),e}()),ri=new u.OlP("ROUTES"),ii=function(){function e(t,n,r,i){d(this,e),this.loader=t,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=i}return f(e,[{key:"load",value:function(e,t){var n=this;if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);var r=this.loadModuleFactory(t.loadChildren).pipe((0,Xe.U)(function(r){n.onLoadEndListener&&n.onLoadEndListener(t);var i=r.create(e);return new gr(cn(i.injector.get(ri,void 0,u.XFs.Self|u.XFs.Optional)).map(Tr),i)}),vt(function(e){throw t._loader$=void 0,e}));return t._loader$=new $e.c(r,function(){return new Oe.xQ}).pipe((0,Pt.x)()),t._loader$}},{key:"loadModuleFactory",value:function(e){var t=this;return"string"==typeof e?(0,Ae.D)(this.loader.load(e)):fn(e()).pipe((0,yt.zg)(function(e){return e instanceof u.YKP?(0,Ne.of)(e):(0,Ae.D)(t.compiler.compileModuleAsync(e))}))}}]),e}(),oi=function e(){d(this,e),this.outlet=null,this.route=null,this.resolver=null,this.children=new ai,this.attachRef=null},ai=function(){function e(){d(this,e),this.contexts=new Map}return f(e,[{key:"onChildOutletCreated",value:function(e,t){var n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}},{key:"onChildOutletDestroyed",value:function(e){var t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}},{key:"onOutletDeactivated",value:function(){var e=this.contexts;return this.contexts=new Map,e}},{key:"onOutletReAttached",value:function(e){this.contexts=e}},{key:"getOrCreateContext",value:function(e){var t=this.getContext(e);return t||(t=new oi,this.contexts.set(e,t)),t}},{key:"getContext",value:function(e){return this.contexts.get(e)||null}}]),e}(),ui=function(){function e(){d(this,e)}return f(e,[{key:"shouldProcessUrl",value:function(e){return!0}},{key:"extract",value:function(e){return e}},{key:"merge",value:function(e,t){return e}}]),e}();function si(e){throw e}function ci(e,t,n){return t.parse("/")}function li(e,t){return(0,Ne.of)(null)}var hi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},fi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},di=function(){var e=function(){function e(t,n,r,i,o,a,s,c){var l=this;d(this,e),this.rootComponentType=t,this.urlSerializer=n,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oe.xQ,this.errorHandler=si,this.malformedUriErrorHandler=ci,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:li,afterPreactivation:li},this.urlHandlingStrategy=new ui,this.routeReuseStrategy=new ni,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=o.get(u.h0i),this.console=o.get(u.c2e);var h=o.get(u.R0b);this.isNgZoneEnabled=h instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new kn(new _n([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new ii(a,s,function(e){return l.triggerEvent(new Wt(e))},function(e){return l.triggerEvent(new Kt(e))}),this.routerState=Hn(this.currentUrlTree,this.rootComponentType),this.transitions=new De({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}return f(e,[{key:"browserPageId",get:function(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}},{key:"setupNavigations",value:function(e){var t=this,n=this.events;return e.pipe(ft(function(e){return 0!==e.id}),(0,Xe.U)(function(e){return Object.assign(Object.assign({},e),{extractedUrl:t.urlHandlingStrategy.extract(e.rawUrl)})}),tt(function(e){var r=!1,i=!1;return(0,Ne.of)(e).pipe((0,Ot.b)(function(e){t.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:t.lastSuccessfulNavigation?Object.assign(Object.assign({},t.lastSuccessfulNavigation),{previousNavigation:null}):null}}),tt(function(e){var r=t.browserUrlTree.toString(),o=!t.navigated||e.extractedUrl.toString()!==r||r!==t.currentUrlTree.toString();if(("reload"===t.onSameUrlNavigation||o)&&t.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return pi(e.source)&&(t.browserUrlTree=e.extractedUrl),(0,Ne.of)(e).pipe(tt(function(e){var r=t.transitions.getValue();return n.next(new Ut(e.id,t.serializeUrl(e.extractedUrl),e.source,e.restoredState)),r!==t.transitions.getValue()?Qe.E:Promise.resolve(e)}),function(e,t,n,r){return tt(function(i){return function(e,t,n,r,i){return new Vr(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,Xe.U)(function(e){return Object.assign(Object.assign({},i),{urlAfterRedirects:e})}))})}(t.ngModule.injector,t.configLoader,t.urlSerializer,t.config),(0,Ot.b)(function(e){t.currentNavigation=Object.assign(Object.assign({},t.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,n,r,o,a){return(0,yt.zg)(function(r){return function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"emptyOnly",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"legacy";try{var u=new Yr(e,t,n,r,o,a).recognize();return null===u?Kr(new Wr):(0,Ne.of)(u)}catch(i){return Kr(i)}}(e,n,r.urlAfterRedirects,(u=r.urlAfterRedirects,t.serializeUrl(u)),o,a).pipe((0,Xe.U)(function(e){return Object.assign(Object.assign({},r),{targetSnapshot:e})}));var u})}(t.rootComponentType,t.config,0,t.paramsInheritanceStrategy,t.relativeLinkResolution),(0,Ot.b)(function(e){"eager"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(e.urlAfterRedirects,e),t.browserUrlTree=e.urlAfterRedirects);var r=new Bt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);n.next(r)}));if(o&&t.rawUrlTree&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){var a=e.id,u=e.extractedUrl,s=e.source,c=e.restoredState,l=e.extras,h=new Ut(a,t.serializeUrl(u),s,c);n.next(h);var f=Hn(u,t.rootComponentType).snapshot;return(0,Ne.of)(Object.assign(Object.assign({},e),{targetSnapshot:f,urlAfterRedirects:u,extras:Object.assign(Object.assign({},l),{skipLocationChange:!1,replaceUrl:!1})}))}return t.rawUrlTree=e.rawUrl,t.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Qe.E}),ti(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,u=a.skipLocationChange,s=a.replaceUrl;return t.hooks.beforePreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Ot.b)(function(e){var n=new zt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),(0,Xe.U)(function(e){return Object.assign(Object.assign({},e),{guards:zr(e.targetSnapshot,e.currentSnapshot,t.rootContexts)})}),function(e,t){return(0,yt.zg)(function(n){var r=n.targetSnapshot,i=n.currentSnapshot,o=n.guards,a=o.canActivateChecks,u=o.canDeactivateChecks;return 0===u.length&&0===a.length?(0,Ne.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,Ae.D)(e).pipe((0,yt.zg)(function(e){return function(e,t,n,r,i){var o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||0===o.length)return(0,Ne.of)(!0);var a=o.map(function(o){var a,u=Zr(o,t,i);if(function(e){return e&&mr(e.canDeactivate)}(u))a=fn(u.canDeactivate(e,t,n,r));else{if(!mr(u))throw new Error("Invalid CanDeactivate guard");a=fn(u(e,t,n,r))}return a.pipe(Nt())});return(0,Ne.of)(a).pipe(_r())}(e.component,e.route,n,t,r)}),Nt(function(e){return!0!==e},!0))}(u,r,i,e).pipe((0,yt.zg)(function(n){return n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,Ae.D)(t).pipe(kt(function(t){return Ye(function(e,t){return null!==e&&t&&t(new Yt(e)),(0,Ne.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Jt(e)),(0,Ne.of)(!0)}(t.route,r),function(e,t,n){var r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(function(e){return function(e){var t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)}).filter(function(e){return null!==e}).map(function(t){return Je(function(){var i=t.guards.map(function(i){var o,a=Zr(i,t.node,n);if(function(e){return e&&mr(e.canActivateChild)}(a))o=fn(a.canActivateChild(r,e));else{if(!mr(a))throw new Error("Invalid CanActivateChild guard");o=fn(a(r,e))}return o.pipe(Nt())});return(0,Ne.of)(i).pipe(_r())})});return(0,Ne.of)(i).pipe(_r())}(e,t.path,n),function(e,t,n){var r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,Ne.of)(!0);var i=r.map(function(r){return Je(function(){var i,o=Zr(r,t,n);if(function(e){return e&&mr(e.canActivate)}(o))i=fn(o.canActivate(t,e));else{if(!mr(o))throw new Error("Invalid CanActivate guard");i=fn(o(t,e))}return i.pipe(Nt())})});return(0,Ne.of)(i).pipe(_r())}(e,t.route,n))}),Nt(function(e){return!0!==e},!0))}(r,a,e,t):(0,Ne.of)(n)}),(0,Xe.U)(function(e){return Object.assign(Object.assign({},n),{guardsResult:e})}))})}(t.ngModule.injector,function(e){return t.triggerEvent(e)}),(0,Ot.b)(function(e){if(yr(e.guardsResult)){var n=on('Redirecting to "'.concat(t.serializeUrl(e.guardsResult),'"'));throw n.url=e.guardsResult,n}var r=new Zt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);t.triggerEvent(r)}),ft(function(e){return!!e.guardsResult||(t.restoreHistory(e),t.cancelNavigationTransition(e,""),!1)}),ti(function(e){if(e.guards.canActivateChecks.length)return(0,Ne.of)(e).pipe((0,Ot.b)(function(e){var n=new Ht(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}),tt(function(e){var n=!1;return(0,Ne.of)(e).pipe(function(e,t){return(0,yt.zg)(function(n){var r=n.targetSnapshot,i=n.guards.canActivateChecks;if(!i.length)return(0,Ne.of)(n);var o=0;return(0,Ae.D)(i).pipe(kt(function(n){return function(e,t,n,r){return function(e,t,n,r){var i=Object.keys(e);if(0===i.length)return(0,Ne.of)({});var o={};return(0,Ae.D)(i).pipe((0,yt.zg)(function(i){return function(e,t,n,r){var i=Zr(e,t,r);return fn(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,Ot.b)(function(e){o[i]=e}))}),_t(1),(0,yt.zg)(function(){return Object.keys(o).length===i.length?(0,Ne.of)(o):Qe.E}))}(e._resolve,e,t,r).pipe((0,Xe.U)(function(t){return e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Wn(e,n).resolve),null}))}(n.route,r,e,t)}),(0,Ot.b)(function(){return o++}),_t(1),(0,yt.zg)(function(e){return o===i.length?(0,Ne.of)(n):Qe.E}))})}(t.paramsInheritanceStrategy,t.ngModule.injector),(0,Ot.b)({next:function(){return n=!0},complete:function(){n||(t.restoreHistory(e),t.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,Ot.b)(function(e){var n=new Gt(e.id,t.serializeUrl(e.extractedUrl),t.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.triggerEvent(n)}))}),ti(function(e){var n=e.targetSnapshot,r=e.id,i=e.extractedUrl,o=e.rawUrl,a=e.extras,u=a.skipLocationChange,s=a.replaceUrl;return t.hooks.afterPreactivation(n,{navigationId:r,appliedUrlTree:i,rawUrlTree:o,skipLocationChange:!!u,replaceUrl:!!s})}),(0,Xe.U)(function(e){var n=function(e,t,n){var r=er(e,t._root,n?n._root:void 0);return new Zn(r,t)}(t.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:n})}),(0,Ot.b)(function(e){t.currentUrlTree=e.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),t.routerState=e.targetRouterState,"deferred"===t.urlUpdateStrategy&&(e.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,e),t.browserUrlTree=e.urlAfterRedirects)}),function(e,t,n){return(0,Xe.U)(function(r){return new pr(t,r.targetRouterState,r.currentRouterState,n).activate(e),r})}(t.rootContexts,t.routeReuseStrategy,function(e){return t.triggerEvent(e)}),(0,Ot.b)({next:function(){r=!0},complete:function(){r=!0}}),function(e){return function(t){return t.lift(new Lt(e))}}(function(){var n;if(!r&&!i){var o="Navigation ID ".concat(e.id," is not equal to the current navigation id ").concat(t.navigationId);"replace"===t.canceledNavigationResolution?(t.restoreHistory(e),t.cancelNavigationTransition(e,o)):t.cancelNavigationTransition(e,o)}(null===(n=t.currentNavigation)||void 0===n?void 0:n.id)===e.id&&(t.currentNavigation=null)}),vt(function(r){if(i=!0,function(e){return e&&e[rn]}(r)){var o=yr(r.url);o||(t.navigated=!0,t.restoreHistory(e,!0));var a=new jt(e.id,t.serializeUrl(e.extractedUrl),r.message);n.next(a),o?setTimeout(function(){var n=t.urlHandlingStrategy.merge(r.url,t.rawUrlTree),i={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||pi(e.source)};t.scheduleNavigation(n,"imperative",null,i,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{t.restoreHistory(e,!0);var u=new qt(e.id,t.serializeUrl(e.extractedUrl),r);n.next(u);try{e.resolve(t.errorHandler(r))}catch(a){e.reject(a)}}return Qe.E}))}))}},{key:"resetRootComponentType",value:function(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}},{key:"getTransition",value:function(){var e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}},{key:"setTransition",value:function(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}},{key:"initialNavigation",value:function(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}},{key:"setUpLocationChangeListener",value:function(){var e=this;this.locationSubscription||(this.locationSubscription=this.location.subscribe(function(t){var n=e.extractLocationChangeInfoFromEvent(t);e.shouldScheduleNavigation(e.lastLocationChangeInfo,n)&&setTimeout(function(){var t=n.source,r=n.state,i=n.urlTree,o={replaceUrl:!0};if(r){var a=Object.assign({},r);delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(o.state=a)}e.scheduleNavigation(i,t,r,o)},0),e.lastLocationChangeInfo=n}))}},{key:"extractLocationChangeInfoFromEvent",value:function(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}},{key:"shouldScheduleNavigation",value:function(e,t){if(!e)return!0;var n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}},{key:"url",get:function(){return this.serializeUrl(this.currentUrlTree)}},{key:"getCurrentNavigation",value:function(){return this.currentNavigation}},{key:"triggerEvent",value:function(e){this.events.next(e)}},{key:"resetConfig",value:function(e){br(e),this.config=e.map(Tr),this.navigated=!1,this.lastSuccessfulId=-1}},{key:"ngOnDestroy",value:function(){this.dispose()}},{key:"dispose",value:function(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}},{key:"createUrlTree",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.relativeTo,r=t.queryParams,i=t.fragment,o=t.queryParamsHandling,u=t.preserveFragment,s=n||this.routerState.root,c=u?this.currentUrlTree.fragment:i,l=null;switch(o){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return ir(t.root,t.root,t,r,i);var o=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new ar(!0,0,e);var t=0,n=!1,r=e.reduce(function(e,r,i){if("object"==typeof r&&null!=r){if(r.outlets){var o={};return hn(r.outlets,function(e,t){o[t]="string"==typeof e?e.split("/"):e}),[].concat(a(e),[{outlets:o}])}if(r.segmentPath)return[].concat(a(e),[r.segmentPath])}return"string"!=typeof r?[].concat(a(e),[r]):0===i?(r.split("/").forEach(function(r,i){0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[].concat(a(e),[r])},[]);return new ar(n,t,r)}(n);if(o.toRoot())return ir(t.root,new _n([],{}),t,r,i);var u=function(e,t,n){if(e.isAbsolute)return new ur(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){var r=n.snapshot._urlSegment;return new ur(r,r===t.root,0)}var i=nr(e.commands[0])?0:1;return function(e,t,n){for(var r=e,i=t,o=n;o>i;){if(o-=i,!(r=r.parent))throw new Error("Invalid number of '../'");i=r.segments.length}return new ur(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,e.numberOfDoubleDots)}(o,t,e),s=u.processChildren?cr(u.segmentGroup,u.index,o.commands):sr(u.segmentGroup,u.index,o.commands);return ir(u.segmentGroup,s,t,r,i)}(s,this.currentUrlTree,e,l,null!=c?c:null)}},{key:"navigateByUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1},n=yr(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}},{key:"navigate",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{skipLocationChange:!1};return function(e){for(var t=0;t<e.length;t++){var n=e[t];if(null==n)throw new Error("The requested path contains ".concat(n," segment at index ").concat(t))}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}},{key:"serializeUrl",value:function(e){return this.urlSerializer.serialize(e)}},{key:"parseUrl",value:function(e){var t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}},{key:"isActive",value:function(e,t){var n;if(n=!0===t?Object.assign({},hi):!1===t?Object.assign({},fi):t,yr(e))return vn(this.currentUrlTree,e,n);var r=this.parseUrl(e);return vn(this.currentUrlTree,r,n)}},{key:"removeEmptyProps",value:function(e){return Object.keys(e).reduce(function(t,n){var r=e[n];return null!=r&&(t[n]=r),t},{})}},{key:"processNavigations",value:function(){var e=this;this.navigations.subscribe(function(t){e.navigated=!0,e.lastSuccessfulId=t.id,e.currentPageId=t.targetPageId,e.events.next(new Vt(t.id,e.serializeUrl(t.extractedUrl),e.serializeUrl(e.currentUrlTree))),e.lastSuccessfulNavigation=e.currentNavigation,t.resolve(!0)},function(t){e.console.warn("Unhandled Navigation Error: ".concat(t))})}},{key:"scheduleNavigation",value:function(e,t,n,r,i){var o,a;if(this.disposed)return Promise.resolve(!1);var u,s,c,l=this.getTransition(),h=pi(t)&&l&&!pi(l.source),f=(this.lastSuccessfulId===l.id||this.currentNavigation?l.rawUrl:l.urlAfterRedirects).toString()===e.toString();if(h&&f)return Promise.resolve(!0);i?(u=i.resolve,s=i.reject,c=i.promise):c=new Promise(function(e,t){u=e,s=t});var d,p=++this.navigationId;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),d=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(o=this.browserPageId)&&void 0!==o?o:0:(null!==(a=this.browserPageId)&&void 0!==a?a:0)+1):d=0,this.setTransition({id:p,targetPageId:d,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:s,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(function(e){return Promise.reject(e)})}},{key:"setBrowserUrl",value:function(e,t){var n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}},{key:"restoreHistory",value:function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("computed"===this.canceledNavigationResolution){var i=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(t=this.currentNavigation)||void 0===t?void 0:t.finalUrl)||0===i?this.currentUrlTree===(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)&&0===i&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(e),this.resetUrlToCurrentUrlTree())}},{key:"resetState",value:function(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}},{key:"resetUrlToCurrentUrlTree",value:function(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}},{key:"cancelNavigationTransition",value:function(e,t){var n=new jt(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}},{key:"generateNgRouterState",value:function(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.DyG),u.LFG(xn),u.LFG(ai),u.LFG(L),u.LFG(u.zs3),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(void 0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function pi(e){return"imperative"!==e}var vi=function(){var e=function(){function e(t,n,r,i,o){d(this,e),this.parentContexts=t,this.location=n,this.resolver=r,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.name=i||en,t.onChildOutletCreated(this.name,this)}return f(e,[{key:"ngOnDestroy",value:function(){this.parentContexts.onChildOutletDestroyed(this.name)}},{key:"ngOnInit",value:function(){if(!this.activated){var e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}},{key:"isActivated",get:function(){return!!this.activated}},{key:"component",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}},{key:"activatedRoute",get:function(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}},{key:"activatedRouteData",get:function(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}},{key:"detach",value:function(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();var e=this.activated;return this.activated=null,this._activatedRoute=null,e}},{key:"attach",value:function(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}},{key:"deactivate",value:function(){if(this.activated){var e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}},{key:"activateWith",value:function(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;var n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new gi(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(ai),u.Y36(u.s_b),u.Y36(u._Vd),u.$8M("name"),u.Y36(u.sBO))},e.\u0275dir=u.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e}(),gi=function(){function e(t,n,r){d(this,e),this.route=t,this.childContexts=n,this.parent=r}return f(e,[{key:"get",value:function(e,t){return e===Gn?this.route:e===ai?this.childContexts:this.parent.get(e,t)}}]),e}(),mi=function e(){d(this,e)},yi=function(){function e(){d(this,e)}return f(e,[{key:"preload",value:function(e,t){return(0,Ne.of)(null)}}]),e}(),ki=function(){var e=function(){function e(t,n,r,i,o){d(this,e),this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=new ii(n,r,function(e){return t.triggerEvent(new Wt(e))},function(e){return t.triggerEvent(new Kt(e))})}return f(e,[{key:"setUpPreloading",value:function(){var e=this;this.subscription=this.router.events.pipe(ft(function(e){return e instanceof Vt}),kt(function(){return e.preload()})).subscribe(function(){})}},{key:"preload",value:function(){var e=this.injector.get(u.h0i);return this.processRoutes(e,this.router.config)}},{key:"ngOnDestroy",value:function(){this.subscription&&this.subscription.unsubscribe()}},{key:"processRoutes",value:function(e,t){var n,r=[],i=s(t);try{for(i.s();!(n=i.n()).done;){var o=n.value;if(o.loadChildren&&!o.canLoad&&o._loadedConfig){var a=o._loadedConfig;r.push(this.processRoutes(a.module,a.routes))}else o.loadChildren&&!o.canLoad?r.push(this.preloadConfig(e,o)):o.children&&r.push(this.processRoutes(e,o.children))}}catch(u){i.e(u)}finally{i.f()}return(0,Ae.D)(r).pipe((0,Ke.J)(),(0,Xe.U)(function(e){}))}},{key:"preloadConfig",value:function(e,t){var n=this;return this.preloadingStrategy.preload(t,function(){return(t._loadedConfig?(0,Ne.of)(t._loadedConfig):n.loader.load(e.injector,t)).pipe((0,yt.zg)(function(e){return t._loadedConfig=e,n.processRoutes(e.module,e.routes)}))})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(di),u.LFG(u.v3s),u.LFG(u.Sil),u.LFG(u.zs3),u.LFG(mi))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),_i=function(){var e=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};d(this,e),this.router=t,this.viewportScroller=n,this.options=r,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},r.scrollPositionRestoration=r.scrollPositionRestoration||"disabled",r.anchorScrolling=r.anchorScrolling||"disabled"}return f(e,[{key:"init",value:function(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}},{key:"createScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Ut?(e.store[e.lastId]=e.viewportScroller.getScrollPosition(),e.lastSource=t.navigationTrigger,e.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Vt&&(e.lastId=t.id,e.scheduleScrollEvent(t,e.router.parseUrl(t.urlAfterRedirects).fragment))})}},{key:"consumeScrollEvents",value:function(){var e=this;return this.router.events.subscribe(function(t){t instanceof Xt&&(t.position?"top"===e.options.scrollPositionRestoration?e.viewportScroller.scrollToPosition([0,0]):"enabled"===e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===e.options.anchorScrolling?e.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==e.options.scrollPositionRestoration&&e.viewportScroller.scrollToPosition([0,0]))})}},{key:"scheduleScrollEvent",value:function(e,t){this.router.triggerEvent(new Xt(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}},{key:"ngOnDestroy",value:function(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(di),u.LFG(Y),u.LFG(void 0))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),wi=new u.OlP("ROUTER_CONFIGURATION"),bi=new u.OlP("ROUTER_FORROOT_GUARD"),xi=[L,{provide:xn,useClass:In},{provide:di,useFactory:function(e,t,n,r,i,o,a){var u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:{},s=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,l=new di(null,e,t,n,r,i,o,cn(a));return s&&(l.urlHandlingStrategy=s),c&&(l.routeReuseStrategy=c),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(u,l),u.enableTracing&&l.events.subscribe(function(e){var t,n;null===(t=console.group)||void 0===t||t.call(console,"Router Event: ".concat(e.constructor.name)),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[xn,ai,L,u.zs3,u.v3s,u.Sil,ri,wi,[function(){return function e(){d(this,e)}}(),new u.FiY],[function(){return function e(){d(this,e)}}(),new u.FiY]]},ai,{provide:Gn,useFactory:function(e){return e.routerState.root},deps:[di]},{provide:u.v3s,useClass:u.EAV},ki,yi,function(){function e(){d(this,e)}return f(e,[{key:"preload",value:function(e,t){return t().pipe(vt(function(){return(0,Ne.of)(null)}))}}]),e}(),{provide:wi,useValue:{enableTracing:!1}}];function Ii(){return new u.PXZ("Router",di)}var Ti=function(){var e=function(){function e(t,n){d(this,e)}return f(e,null,[{key:"forRoot",value:function(t,n){return{ngModule:e,providers:[xi,Ri(t),{provide:bi,useFactory:Si,deps:[[di,new u.FiY,new u.tp0]]},{provide:wi,useValue:n||{}},{provide:A,useFactory:Ei,deps:[_,[new u.tBr(O),new u.FiY],wi]},{provide:_i,useFactory:Ci,deps:[di,Y,wi]},{provide:mi,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:yi},{provide:u.PXZ,multi:!0,useFactory:Ii},[Ai,{provide:u.ip1,multi:!0,useFactory:Ni,deps:[Ai]},{provide:Pi,useFactory:Oi,deps:[Ai]},{provide:u.tb,multi:!0,useExisting:Pi}]]}}},{key:"forChild",value:function(t){return{ngModule:e,providers:[Ri(t)]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(bi,8),u.LFG(di,8))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}();function Ci(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new _i(e,t,n)}function Ei(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return n.useHash?new D(e,t):new P(e,t)}function Si(e){return"guarded"}function Ri(e){return[{provide:u.deG,multi:!0,useValue:e},{provide:ri,multi:!0,useValue:e}]}var Ai=function(){var e=function(){function e(t){d(this,e),this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new Oe.xQ}return f(e,[{key:"appInitializer",value:function(){var e=this;return this.injector.get(x,Promise.resolve(null)).then(function(){if(e.destroyed)return Promise.resolve(!0);var t=null,n=new Promise(function(e){return t=e}),r=e.injector.get(di),i=e.injector.get(wi);return"disabled"===i.initialNavigation?(r.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(r.hooks.afterPreactivation=function(){return e.initNavigation?(0,Ne.of)(null):(e.initNavigation=!0,t(!0),e.resultOfPreactivationDone)},r.initialNavigation()):t(!0),n})}},{key:"bootstrapListener",value:function(e){var t=this.injector.get(wi),n=this.injector.get(ki),r=this.injector.get(_i),i=this.injector.get(di),o=this.injector.get(u.z2F);e===o.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&i.initialNavigation(),n.setUpPreloading(),r.init(),i.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}},{key:"ngOnDestroy",value:function(){this.destroyed=!0}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.zs3))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}();function Ni(e){return e.appInitializer.bind(e)}function Oi(e){return e.bootstrapListener.bind(e)}var Pi=new u.OlP("Router Initializer"),Di=o(7667),Li=o(2329),Mi=function e(t){return d(this,e),t},Fi=function e(){return d(this,e),(0,Li.C6)()},Ui=new u.OlP("angularfire2._apps"),Vi={provide:Mi,useFactory:function(e){return e&&1===e.length?e[0]:new Mi((0,Li.Mq)())},deps:[[new u.FiY,Ui]]},ji={provide:Fi,deps:[[new u.FiY,Ui]]};function qi(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new Mi(r)}}var Bi=function(){var e=function e(t){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"core"),(0,Li.KN)("angularfire",Di.q4.full,"app"),(0,Li.KN)("angular",u.q4F.full,t.toString())};return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.Lbi))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[Vi,ji]}),e}();function zi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Bi,providers:[{provide:Ui,useFactory:qi(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU].concat(n)}]}}var Zi=(0,Di.u3)(Li.ZF,!0),Hi=o(8239),Gi=o(8026),Wi=o(3910),Ki=o(3854),Yi=o(5422),Qi=new Map,Ji={activated:!1,tokenObservers:[]},$i={initialized:!1,enabled:!1};function Xi(e){return Qi.get(e)||Ji}function eo(e,t){Qi.set(e,t)}function to(){return $i}var no=function(){function e(t,n,r,i,o){if(d(this,e),this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=o,this.pending=null,this.nextErrorWaitInterval=i,i>o)throw new Error("Proactive refresh lower bound greater than upper bound!")}return f(e,[{key:"start",value:function(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(function(){})}},{key:"stop",value:function(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}},{key:"isRunning",value:function(){return!!this.pending}},{key:"process",value:function(e){var t=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.stop(),n.prev=1,t.pending=new Ki.BH,n.next=5,r=t.getNextRun(e),new Promise(function(e){setTimeout(e,r)});case 5:return t.pending.resolve(),n.next=8,t.pending.promise;case 8:return t.pending=new Ki.BH,n.next=11,t.operation();case 11:return t.pending.resolve(),n.next=14,t.pending.promise;case 14:t.process(!0).catch(function(){}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),t.retryPolicy(n.t0)?t.process(!1).catch(function(){}):t.stop();case 20:case"end":return n.stop()}},n,null,[[1,17]])}))()}},{key:"getNextRun",value:function(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();var t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}]),e}(),ro=new Ki.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function io(e){if(!Xi(e).activated)throw ro.create("use-before-activation",{appName:e.name})}function oo(e,t){return ao.apply(this,arguments)}function ao(){return(ao=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,s,c,l,h,f;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.url,i=t.body,o={"Content-Type":"application/json"},(a=n.getImmediate({optional:!0}))&&(o["X-Firebase-Client"]=a.getPlatformInfoString()),u={method:"POST",body:JSON.stringify(i),headers:o},e.prev=4,e.next=7,fetch(r,u);case 7:s=e.sent,e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(4),ro.create("fetch-network-error",{originalErrorMessage:e.t0.message});case 13:if(200===s.status){e.next=15;break}throw ro.create("fetch-status-error",{httpStatus:s.status});case 15:return e.prev=15,e.next=18,s.json();case 18:c=e.sent,e.next=24;break;case 21:throw e.prev=21,e.t1=e.catch(15),ro.create("fetch-parse-error",{originalErrorMessage:e.t1.message});case 24:if((l=c.ttl.match(/^([\d.]+)(s)$/))&&l[2]&&!isNaN(Number(l[1]))){e.next=27;break}throw ro.create("fetch-parse-error",{originalErrorMessage:"ttl field (timeToLive) is not in standard Protobuf Duration format: ".concat(c.ttl)});case 27:return h=1e3*Number(l[1]),f=Date.now(),e.abrupt("return",{token:c.attestationToken,expireTimeMillis:f+h,issuedAtTimeMillis:f});case 29:case"end":return e.stop()}},e,null,[[4,10],[15,21]])}))).apply(this,arguments)}function uo(e,t){var n=e.options,r=n.projectId,i=n.appId,o=n.apiKey;return{url:"https://content-firebaseappcheck.googleapis.com/v1beta/projects/".concat(r,"/apps/").concat(i,":exchangeDebugToken?key=").concat(o),body:{debug_token:t}}}var so="firebase-app-check-store",co=null;function lo(){return co||(co=new Promise(function(e,t){try{var n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=function(t){e(t.target.result)},n.onerror=function(e){var n;t(ro.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=function(e){var t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(so,{keyPath:"compositeKey"})}}}catch(n){t(ro.create("storage-open",{originalErrorMessage:n.message}))}}))}function ho(){return(ho=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,lo();case 2:return r=e.sent.transaction(so,"readwrite"),i=r.objectStore(so).put({compositeKey:t,value:n}),e.abrupt("return",new Promise(function(e,t){i.onsuccess=function(t){e()},r.onerror=function(e){var n;t(ro.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}}));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}var fo=new Yi.Yd("@firebase/app-check");function po(e,t){return(0,Ki.hl)()?function(e,t){return function(e,t){return ho.apply(this,arguments)}(function(e){return"".concat(e.options.appId,"-").concat(e.name)}(e),t)}(e,t).catch(function(e){fo.warn("Failed to write token to IndexedDB. Error: ".concat(e))}):Promise.resolve()}function vo(){return to().enabled}function go(){return mo.apply(this,arguments)}function mo(){return(mo=(0,Hi.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=to()).enabled||!t.token){e.next=3;break}return e.abrupt("return",t.token.promise);case 3:throw Error("\n            Can't get debug token in production mode.\n        ");case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var yo={error:"UNKNOWN_ERROR"};function ko(e){return Ki.US.encodeString(JSON.stringify(e),!1)}function _o(e){return wo.apply(this,arguments)}function wo(){return(wo=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o,a,u,s,c,l,h=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=h.length>1&&void 0!==h[1]&&h[1],io(r=t.app),i=Xi(r),a=i.token){e.next=10;break}return e.next=8,i.cachedTokenPromise;case 8:(u=e.sent)&&To(u)&&(a=u);case 10:if(n||!a||!To(a)){e.next=12;break}return e.abrupt("return",{token:a.token});case 12:if(c=!1,!vo()){e.next=33;break}if(e.t0=i.exchangeTokenPromise,e.t0){e.next=26;break}return e.t1=oo,e.t2=uo,e.t3=r,e.next=21,go();case 21:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=t.platformLoggerProvider,i.exchangeTokenPromise=(0,e.t1)(e.t5,e.t6).then(function(e){return i.exchangeTokenPromise=void 0,e}),c=!0;case 26:return e.next=28,i.exchangeTokenPromise;case 28:return l=e.sent,e.next=31,po(r,l);case 31:return eo(r,Object.assign(Object.assign({},i),{token:l})),e.abrupt("return",{token:l.token});case 33:return e.prev=33,i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().then(function(e){return i.exchangeTokenPromise=void 0,e}),c=!0),e.next=37,i.exchangeTokenPromise;case 37:a=e.sent,e.next=43;break;case 40:e.prev=40,e.t7=e.catch(33),"appCheck/throttled"===e.t7.code?fo.warn(e.t7.message):fo.error(e.t7),o=e.t7;case 43:if(!a){e.next=50;break}return s={token:a.token},eo(r,Object.assign(Object.assign({},i),{token:a})),e.next=48,po(r,a);case 48:e.next=51;break;case 50:s=Co(o);case 51:return c&&Io(r,s),e.abrupt("return",s);case 53:case"end":return e.stop()}},e,null,[[33,40]])}))).apply(this,arguments)}function bo(e,t){var n=Xi(e),r=n.tokenObservers.filter(function(e){return e.next!==t});0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),eo(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function xo(e){var t=e.app,n=Xi(t),r=n.tokenRefresher;r||(r=function(e){var t=e.app;return new no((0,Hi.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!Xi(t).token){n.next=6;break}return n.next=3,_o(e,!0);case 3:n.t0=n.sent,n.next=9;break;case 6:return n.next=8,_o(e);case 8:n.t0=n.sent;case 9:if(!(r=n.t0).error){n.next=12;break}throw r.error;case 12:case"end":return n.stop()}},n)})),function(){return!0},function(){var e=Xi(t);if(e.token){var n=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return n=Math.min(n,e.token.expireTimeMillis-3e5),Math.max(0,n-Date.now())}return 0},3e4,96e4)}(e),eo(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function Io(e,t){var n,r=s(Xi(e).tokenObservers);try{for(r.s();!(n=r.n()).done;){var i=n.value;try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(o){}}}catch(a){r.e(a)}finally{r.f()}}function To(e){return e.expireTimeMillis-Date.now()>0}function Co(e){return{token:ko(yo),error:e}}var Eo=function(){function e(t,n){d(this,e),this.app=t,this.platformLoggerProvider=n}return f(e,[{key:"_delete",value:function(){var e,t=s(Xi(this.app).tokenObservers);try{for(t.s();!(e=t.n()).done;){var n=e.value;bo(this.app,n.next)}}catch(r){t.e(r)}finally{t.f()}return Promise.resolve()}}]),e}(),So="app-check-internal";(0,Gi._registerComponent)(new Wi.wA("app-check",function(e){return function(e,t){return new Eo(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger"))},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(function(e,t,n){e.getProvider(So).initialize()})),(0,Gi._registerComponent)(new Wi.wA(So,function(e){return function(e){return{getToken:function(t){return _o(e,t)},addTokenListener:function(t){return function(e,t,n,r){var i=e.app,o=Xi(i),u={next:n,error:void 0,type:"INTERNAL"};if(eo(i,Object.assign(Object.assign({},o),{tokenObservers:[].concat(a(o.tokenObservers),[u])})),o.token&&To(o.token)){var s=o.token;Promise.resolve().then(function(){n({token:s.token}),xo(e)}).catch(function(){})}o.cachedTokenPromise.then(function(){return xo(e)})}(e,0,t)},removeTokenListener:function(t){return bo(e.app,t)}}}(e.getProvider("app-check").getImmediate())},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Gi.registerVersion)("@firebase/app-check","0.5.2");var Ro=function e(){return d(this,e),(0,Di.vb)("app-check")};"undefined"!=typeof window&&window;var Ao=o(9353);var No=function e(t){return d(this,e),t},Oo=function e(){return d(this,e),(0,Di.vb)("auth")},Po=new u.OlP("angularfire2.auth-instances");function Do(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new No(r)}}var Lo={provide:Oo,deps:[[new u.FiY,Po]]},Mo={provide:No,useFactory:function(e,t){var n=(0,Di.JM)("auth",e,t);return n&&new No(n)},deps:[[new u.FiY,Po],Mi]},Fo=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"auth")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[Mo,Lo]}),e}();function Uo(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:Fo,providers:[{provide:Po,useFactory:Do(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi,[new u.FiY,Ro]].concat(n)}]}}var Vo,jo=(0,Di.u3)(function(e){return new qe.y(function(t){return{unsubscribe:(0,Ao.t)(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})},!0),qo=(0,Di.u3)(Ao.n,!0),Bo="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},zo={},Zo=Zo||{},Ho=Bo||self;function Go(){}function Wo(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ko(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Yo="closure_uid_"+(1e9*Math.random()>>>0),Qo=0;function Jo(e,t,n){return e.call.apply(e.bind,arguments)}function $o(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Xo(e,t,n){return(Xo=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Jo:$o).apply(null,arguments)}function ea(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function ta(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function na(){this.s=this.s,this.o=this.o}var ra={};na.prototype.s=!1,na.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Yo)&&e[Yo]||(e[Yo]=++Qo)}(this);delete ra[e]}},na.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var ia=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},oa=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){for(var r=e.length,i="string"==typeof e?e.split(""):e,o=0;o<r;o++)o in i&&t.call(n,i[o],o,e)};function aa(e){return Array.prototype.concat.apply([],arguments)}function ua(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function sa(e){return/^[\s\xa0]*$/.test(e)}var ca,la=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function ha(e,t){return-1!=e.indexOf(t)}function fa(e,t){return e<t?-1:e>t?1:0}e:{var da=Ho.navigator;if(da){var pa=da.userAgent;if(pa){ca=pa;break e}}ca=""}function va(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function ga(e){var t={};for(var n in e)t[n]=e[n];return t}var ma="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ya(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var o=0;o<ma.length;o++)n=ma[o],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function ka(e){return ka[" "](e),e}ka[" "]=Go;var _a,wa,ba=ha(ca,"Opera"),xa=ha(ca,"Trident")||ha(ca,"MSIE"),Ia=ha(ca,"Edge"),Ta=Ia||xa,Ca=ha(ca,"Gecko")&&!(ha(ca.toLowerCase(),"webkit")&&!ha(ca,"Edge"))&&!(ha(ca,"Trident")||ha(ca,"MSIE"))&&!ha(ca,"Edge"),Ea=ha(ca.toLowerCase(),"webkit")&&!ha(ca,"Edge");function Sa(){var e=Ho.document;return e?e.documentMode:void 0}e:{var Ra="",Aa=(wa=ca,Ca?/rv:([^\);]+)(\)|;)/.exec(wa):Ia?/Edge\/([\d\.]+)/.exec(wa):xa?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(wa):Ea?/WebKit\/(\S+)/.exec(wa):ba?/(?:Version)[ \/]?(\S+)/.exec(wa):void 0);if(Aa&&(Ra=Aa?Aa[1]:""),xa){var Na=Sa();if(null!=Na&&Na>parseFloat(Ra)){_a=String(Na);break e}}_a=Ra}var Oa={};var Pa=Ho.document&&xa&&(Sa()||parseInt(_a,10))||void 0,Da=function(){if(!Ho.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Ho.addEventListener("test",Go,t),Ho.removeEventListener("test",Go,t)}catch(n){}return e}();function La(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Ma(e,t){if(La.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Ca){e:{try{ka(t.nodeName);var i=!0;break e}catch(o){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:Fa[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Ma.Z.h.call(this)}}La.prototype.h=function(){this.defaultPrevented=!0},ta(Ma,La);var Fa={2:"touch",3:"pen",4:"mouse"};Ma.prototype.h=function(){Ma.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Ua="closure_listenable_"+(1e6*Math.random()|0),Va=0;function ja(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Va,this.ca=this.fa=!1}function qa(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function Ba(e){this.src=e,this.g={},this.h=0}function za(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=ia(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(qa(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Za(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.ca&&o.listener==t&&o.capture==!!n&&o.ia==r)return i}return-1}Ba.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=Za(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new ja(t,this.src,o,!!r,i)).fa=n,e.push(t)),t};var Ha="closure_lm_"+(1e6*Math.random()|0),Ga={};function Wa(e,t,n,r,i){if(r&&r.once)return Ya(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)Wa(e,t[o],n,r,i);return null}return n=nu(n),e&&e[Ua]?e.N(t,n,Ko(r)?!!r.capture:!!r,i):Ka(e,t,n,!1,r,i)}function Ka(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=Ko(i)?!!i.capture:!!i,u=eu(e);if(u||(e[Ha]=u=new Ba(e)),(n=u.add(t,n,r,a,o)).proxy)return n;if(r=function(){var e=Xa;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Da||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent($a(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ya(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)Ya(e,t[o],n,r,i);return null}return n=nu(n),e&&e[Ua]?e.O(t,n,Ko(r)?!!r.capture:!!r,i):Ka(e,t,n,!0,r,i)}function Qa(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)Qa(e,t[o],n,r,i);else r=Ko(r)?!!r.capture:!!r,n=nu(n),e&&e[Ua]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Za(o=e.g[t],n,r,i))&&(qa(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=eu(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Za(t,n,r,i)),(n=-1<e?t[e]:null)&&Ja(n))}function Ja(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[Ua])za(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent($a(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=eu(t))?(za(n,e),0==n.h&&(n.src=null,t[Ha]=null)):qa(e)}}}function $a(e){return e in Ga?Ga[e]:Ga[e]="on"+e}function Xa(e,t){if(e.ca)e=!0;else{t=new Ma(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&Ja(e),e=n.call(r,t)}return e}function eu(e){return(e=e[Ha])instanceof Ba?e:null}var tu="__closure_events_fn_"+(1e9*Math.random()>>>0);function nu(e){return"function"==typeof e?e:(e[tu]||(e[tu]=function(t){return e.handleEvent(t)}),e[tu])}function ru(){na.call(this),this.i=new Ba(this),this.P=this,this.I=null}function iu(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new La(t,e);else if(t instanceof La)t.target=t.target||e;else{var i=t;ya(t=new La(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ou(a,r,!0,t)&&i}if(i=ou(a=t.g=e,r,!0,t)&&i,i=ou(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ou(a=t.g=n[o],r,!1,t)&&i}function ou(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.ca&&a.capture==n){var u=a.listener,s=a.ia||a.src;a.fa&&za(e.i,a),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}ta(ru,na),ru.prototype[Ua]=!0,ru.prototype.removeEventListener=function(e,t,n,r){Qa(this,e,t,n,r)},ru.prototype.M=function(){if(ru.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)qa(n[r]);delete t.g[e],t.h--}}this.I=null},ru.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ru.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var au=Ho.JSON.stringify;function uu(){var e=pu,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var su,cu=new(function(){function e(t,n){d(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return f(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())(function(){return new lu},function(e){return e.reset()}),lu=function(){function e(){d(this,e),this.next=this.g=this.h=null}return f(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function hu(e){Ho.setTimeout(function(){throw e},0)}function fu(e,t){su||function(){var e=Ho.Promise.resolve(void 0);su=function(){e.then(vu)}}(),du||(su(),du=!0),pu.add(e,t)}var du=!1,pu=new(function(){function e(){d(this,e),this.h=this.g=null}return f(e,[{key:"add",value:function(e,t){var n=cu.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}());function vu(){for(var e;e=uu();){try{e.h.call(e.g)}catch(n){hu(n)}var t=cu;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}du=!1}function gu(e,t){ru.call(this),this.h=e||1,this.g=t||Ho,this.j=Xo(this.kb,this),this.l=Date.now()}function mu(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function yu(e,t,n){if("function"==typeof e)n&&(e=Xo(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Xo(e.handleEvent,e)}return 2147483647<Number(t)?-1:Ho.setTimeout(e,t||0)}function ku(e){e.g=yu(function(){e.g=null,e.i&&(e.i=!1,ku(e))},e.j);var t=e.h;e.h=null,e.m.apply(null,t)}ta(gu,ru),(Vo=gu.prototype).da=!1,Vo.S=null,Vo.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),iu(this,"tick"),this.da&&(mu(this),this.start()))}},Vo.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Vo.M=function(){gu.Z.M.call(this),mu(this),delete this.g};var _u=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return f(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:ku(this)}},{key:"M",value:function(){i(b(n.prototype),"M",this).call(this),this.g&&(Ho.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(na);function wu(e){na.call(this),this.h=e,this.g={}}ta(wu,na);var bu=[];function xu(e,t,n,r){Array.isArray(n)||(n&&(bu[0]=n.toString()),n=bu);for(var i=0;i<n.length;i++){var o=Wa(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function Iu(e){va(e.g,function(e,t){this.g.hasOwnProperty(t)&&Ja(e)},e),e.g={}}function Tu(){this.g=!0}function Cu(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return au(n)}catch(u){return t}}(e,n)+(r?" "+r:"")})}wu.prototype.M=function(){wu.Z.M.call(this),Iu(this)},wu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Tu.prototype.Aa=function(){this.g=!1},Tu.prototype.info=function(){};var Eu={},Su=null;function Ru(){return Su=Su||new ru}function Au(e){La.call(this,Eu.Ma,e)}function Nu(e){var t=Ru();iu(t,new Au(t,e))}function Ou(e,t){La.call(this,Eu.STAT_EVENT,e),this.stat=t}function Pu(e){var t=Ru();iu(t,new Ou(t,e))}function Du(e,t){La.call(this,Eu.Na,e),this.size=t}function Lu(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Ho.setTimeout(function(){e()},t)}Eu.Ma="serverreachability",ta(Au,La),Eu.STAT_EVENT="statevent",ta(Ou,La),Eu.Na="timingevent",ta(Du,La);var Mu={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Fu={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Uu(){}function Vu(){}Uu.prototype.h=null;var ju,qu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Bu(){La.call(this,"d")}function zu(){La.call(this,"c")}function Zu(){}function Hu(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new wu(this),this.P=Wu,this.W=new gu(e=Ta?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gu}function Gu(){this.i=null,this.g="",this.h=!1}ta(Bu,La),ta(zu,La),ta(Zu,Uu),Zu.prototype.g=function(){return new XMLHttpRequest},Zu.prototype.i=function(){return{}},ju=new Zu;var Wu=45e3,Ku={},Yu={};function Qu(e,t,n){e.K=1,e.v=ks(ds(t)),e.s=n,e.U=!0,Ju(e,null)}function Ju(e,t){e.F=Date.now(),ts(e),e.A=ds(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Os(n.h,"t",r),e.C=0,n=e.l.H,e.h=new Gu,e.g=Oc(e.l,n?t:null,!e.s),0<e.O&&(e.L=new _u(Xo(e.Ia,e,e.g),e.O)),xu(e.V,e.g,"readystatechange",e.gb),t=e.H?ga(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Nu(1),function(e,t,n,r,i,o){e.info(function(){if(e.g)if(o)for(var a="",u=o.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");a=2<=h.length&&"type"==h[1]?a+(l+"=")+c+"&":a+(l+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.j,e.u,e.A,e.m,e.X,e.s)}function $u(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Xu(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=es(e,n))==Yu){4==t&&(e.o=4,Pu(14),i=!1),Cu(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ku){e.o=4,Pu(15),Cu(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Cu(e.j,e.m,r,null),as(e,r)}$u(e)&&r!=Yu&&r!=Ku&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Pu(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Ic(t),t.L=!0,Pu(11))):(Cu(e.j,e.m,n,"[Invalid Chunked Response]"),os(e),is(e))}function es(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Yu:(n=Number(t.substring(n,r)),isNaN(n)?Ku:(r+=1)+n>t.length?Yu:(t=t.substr(r,n),e.C=r+n,t))}function ts(e){e.Y=Date.now()+e.P,ns(e,e.P)}function ns(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Lu(Xo(e.eb,e),t)}function rs(e){e.B&&(Ho.clearTimeout(e.B),e.B=null)}function is(e){0==e.l.G||e.I||Ec(e.l,e)}function os(e){rs(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,mu(e.W),Iu(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function as(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||Us(n.i,e)))if(n.I=e.N,!e.J&&Us(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Lu(Xo(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;Cc(n),vc(n)}xc(n),Pu(18)}if(1>=Fs(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else Rc(n,11)}else if((e.J||n.g==e)&&Cc(n),!sa(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){var o=i[t];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var a=o[3];null!=a&&(n.ma=a,n.h.info("VER="+n.ma));var u=o[4];null!=u&&(n.za=u,n.h.info("SVER="+n.za));var s=o[5];null!=s&&"number"==typeof s&&0<s&&(n.K=r=1.5*s,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=r.i;!h.g&&(ha(l,"spdy")||ha(l,"quic")||ha(l,"h2"))&&(h.j=h.l,h.g=new Set,h.h&&(Vs(h,h.h),h.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,ys(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=e;if((r=n).oa=Nc(r,r.H?r.la:null,r.W),d.J){js(r.i,d);var p=d,v=r.K;v&&p.setTimeout(v),p.B&&(rs(p),ts(p)),r.g=d}else bc(r);0<n.l.length&&yc(n)}else"stop"!=o[0]&&"close"!=o[0]||Rc(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?Rc(n,7):pc(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}Nu(4)}catch(o){}}function us(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Wo(e)||"string"==typeof e)oa(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Wo(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Wo(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}}function ss(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof ss)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function cs(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];ls(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)ls(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function ls(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(Vo=Hu.prototype).setTimeout=function(e){this.P=e},Vo.gb=function(e){e=e.target;var t=this.L;t&&3==cc(e)?t.l():this.Ia(e)},Vo.Ia=function(e){try{if(e==this.g)e:{var t=cc(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>t)&&(3!=t||Ta||this.g&&(this.h.h||this.g.ga()||lc(this.g)))){this.I||4!=t||7==n||Nu(8==n||0>=r?3:2),rs(this);var i=this.g.ba();this.N=i;t:if($u(this)){var o=lc(this.g);e="";var a=o.length,u=4==cc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){os(this),is(this);var s="";break t}this.h.i=new Ho.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(o[n],{stream:u&&n==a-1});o.splice(0,a),this.h.g+=e,this.C=0,s=this.h.g}else s=this.g.ga();if(this.i=200==i,function(e,t,n,r,i,o,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a})}(this.j,this.u,this.A,this.m,this.X,t,i),this.i){if(this.$&&!this.J){t:{if(this.g){var c,l=this.g;if((c=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!sa(c)){var h=c;break t}}h=null}if(!(i=h)){this.i=!1,this.o=3,Pu(12),os(this),is(this);break e}Cu(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,as(this,i)}this.U?(Xu(this,t,s),Ta&&this.i&&3==t&&(xu(this.V,this.W,"tick",this.fb),this.W.start())):(Cu(this.j,this.m,s,null),as(this,s)),4==t&&os(this),this.i&&!this.I&&(4==t?Ec(this.l,this):(this.i=!1,ts(this)))}else 400==i&&0<s.indexOf("Unknown SID")?(this.o=3,Pu(12)):(this.o=0,Pu(13)),os(this),is(this)}}}catch(t){}},Vo.fb=function(){if(this.g){var e=cc(this.g),t=this.g.ga();this.C<t.length&&(rs(this),Xu(this,e,t),this.i&&4!=e&&ts(this))}},Vo.cancel=function(){this.I=!0,os(this)},Vo.eb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Nu(3),Pu(17)),os(this),this.o=2,is(this)):ns(this,this.Y-e)},(Vo=ss.prototype).R=function(){cs(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},Vo.T=function(){return cs(this),this.g.concat()},Vo.get=function(e,t){return ls(this.h,e)?this.h[e]:t},Vo.set=function(e,t){ls(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},Vo.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);e.call(t,o,i,this)}};var hs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function fs(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof fs){this.g=void 0!==t?t:e.g,ps(this,e.j),this.s=e.s,vs(this,e.i),gs(this,e.m),this.l=e.l,t=e.h;var n=new Ss;n.i=t.i,t.g&&(n.g=new ss(t.g),n.h=t.h),ms(this,n),this.o=e.o}else e&&(n=String(e).match(hs))?(this.g=!!t,ps(this,n[1]||"",!0),this.s=_s(n[2]||""),vs(this,n[3]||"",!0),gs(this,n[4]),this.l=_s(n[5]||"",!0),ms(this,n[6]||"",!0),this.o=_s(n[7]||"")):(this.g=!!t,this.h=new Ss(null,this.g))}function ds(e){return new fs(e)}function ps(e,t,n){e.j=n?_s(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function vs(e,t,n){e.i=n?_s(t,!0):t}function gs(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ms(e,t,n){t instanceof Ss?(e.h=t,function(e,t){t&&!e.j&&(Rs(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(As(this,t),Os(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=ws(t,Cs)),e.h=new Ss(t,e.g))}function ys(e,t,n){e.h.set(t,n)}function ks(e){return ys(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function _s(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ws(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,bs),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bs(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}fs.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ws(t,xs,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ws(t,xs,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(ws(n,"/"==n.charAt(0)?Ts:Is,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ws(n,Es)),e.join("")};var xs=/[#\/\?@]/g,Is=/[#\?:]/g,Ts=/[#\?]/g,Cs=/[#\?@]/g,Es=/#/g;function Ss(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rs(e){e.g||(e.g=new ss,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function As(e,t){Rs(e),t=Ps(e,t),ls(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,ls((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&cs(e)))}function Ns(e,t){return Rs(e),t=Ps(e,t),ls(e.g.h,t)}function Os(e,t,n){As(e,t),0<n.length&&(e.i=null,e.g.set(Ps(e,t),ua(n)),e.h+=n.length)}function Ps(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Ds(e){this.l=e||Ls,e=Ho.PerformanceNavigationTiming?0<(e=Ho.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Ho.g&&Ho.g.Ea&&Ho.g.Ea()&&Ho.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Vo=Ss.prototype).add=function(e,t){Rs(this),this.i=null,e=Ps(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Vo.forEach=function(e,t){Rs(this),this.g.forEach(function(n,r){oa(n,function(n){e.call(t,n,r,this)},this)},this)},Vo.T=function(){Rs(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],o=0;o<i.length;o++)n.push(t[r]);return n},Vo.R=function(e){Rs(this);var t=[];if("string"==typeof e)Ns(this,e)&&(t=aa(t,this.g.get(Ps(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=aa(t,e[n])}return t},Vo.set=function(e,t){return Rs(this),this.i=null,Ns(this,e=Ps(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Vo.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},Vo.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var a=i;""!==r[o]&&(a+="="+encodeURIComponent(String(r[o]))),e.push(a)}}return this.i=e.join("&")};var Ls=10;function Ms(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Fs(e){return e.h?1:e.g?e.g.size:0}function Us(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Vs(e,t){e.g?e.g.add(t):e.h=t}function js(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function qs(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=s(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(o){r.e(o)}finally{r.f()}return n}return ua(e.i)}function Bs(){}function zs(){this.g=new Bs}function Zs(e,t,n){var r=n||"";try{us(e,function(e,n){var i=e;Ko(e)&&(i=au(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Hs(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(o){}}function Gs(e){this.l=e.$b||null,this.j=e.ib||!1}function Ws(e,t){ru.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Ks,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ds.prototype.cancel=function(){if(this.i=qs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=s(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},Bs.prototype.stringify=function(e){return Ho.JSON.stringify(e,void 0)},Bs.prototype.parse=function(e){return Ho.JSON.parse(e,void 0)},ta(Gs,Uu),Gs.prototype.g=function(){return new Ws(this.l,this.j)},Gs.prototype.i=function(e){return function(){return e}}({}),ta(Ws,ru);var Ks=0;function Ys(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Qs(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Js(e)}function Js(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Vo=Ws.prototype).open=function(e,t){if(this.readyState!=Ks)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Js(this)},Vo.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Ho).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},Vo.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Qs(this)),this.readyState=Ks},Vo.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Js(this)),this.g&&(this.readyState=3,Js(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Ho.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ys(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},Vo.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Qs(this):Js(this),3==this.readyState&&Ys(this)}},Vo.Ua=function(e){this.g&&(this.response=this.responseText=e,Qs(this))},Vo.Ta=function(e){this.g&&(this.response=e,Qs(this))},Vo.ha=function(){this.g&&Qs(this)},Vo.setRequestHeader=function(e,t){this.v.append(e,t)},Vo.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Vo.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ws.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var $s=Ho.JSON.parse;function Xs(e){ru.call(this),this.headers=new ss,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=ec,this.K=this.L=!1}ta(Xs,ru);var ec="",tc=/^https?$/i,nc=["POST","PUT"];function rc(e){return"content-type"==e.toLowerCase()}function ic(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,oc(e),uc(e)}function oc(e){e.D||(e.D=!0,iu(e,"complete"),iu(e,"error"))}function ac(e){if(e.h&&void 0!==Zo&&(!e.C[1]||4!=cc(e)||2!=e.ba()))if(e.v&&4==cc(e))yu(e.Fa,0,e);else if(iu(e,"readystatechange"),4==cc(e)){e.h=!1;try{var t,n=e.ba();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.H).match(hs)[1]||null;if(!o&&Ho.self&&Ho.self.location){var a=Ho.self.location.protocol;o=a.substr(0,a.length-1)}i=!tc.test(o?o.toLowerCase():"")}t=i}if(t)iu(e,"complete"),iu(e,"success");else{e.m=6;try{var u=2<cc(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.ba()+"]",oc(e)}}finally{uc(e)}}}function uc(e,t){if(e.g){sc(e);var n=e.g,r=e.C[0]?Go:null;e.g=null,e.C=null,t||iu(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function sc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Ho.clearTimeout(e.A),e.A=null)}function cc(e){return e.g?e.g.readyState:0}function lc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case ec:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function hc(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){var t="";return va(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ys(e,t,n))}function fc(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function dc(e){this.za=0,this.l=[],this.h=new Tu,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=fc("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=fc("baseRetryDelayMs",5e3,e),this.$a=fc("retryDelaySeedMs",1e4,e),this.Ya=fc("forwardChannelMaxRetries",2,e),this.ra=fc("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Ds(e&&e.concurrentRequestLimit),this.Ca=new zs,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function pc(e){if(gc(e),3==e.G){var t=e.V++,n=ds(e.F);ys(n,"SID",e.J),ys(n,"RID",t),ys(n,"TYPE","terminate"),_c(e,n),(t=new Hu(e,e.h,t,void 0)).K=2,t.v=ks(ds(n)),n=!1,Ho.navigator&&Ho.navigator.sendBeacon&&(n=Ho.navigator.sendBeacon(t.v.toString(),"")),!n&&Ho.Image&&((new Image).src=t.v,n=!0),n||(t.g=Oc(t.l,null),t.g.ea(t.v)),t.F=Date.now(),ts(t)}Ac(e)}function vc(e){e.g&&(Ic(e),e.g.cancel(),e.g=null)}function gc(e){vc(e),e.u&&(Ho.clearTimeout(e.u),e.u=null),Cc(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Ho.clearTimeout(e.m),e.m=null)}function mc(e,t){e.l.push(new(function(){return function e(t,n){d(this,e),this.h=t,this.g=n}}())(e.Za++,t)),3==e.G&&yc(e)}function yc(e){Ms(e.i)||e.m||(e.m=!0,fu(e.Ha,e),e.C=0)}function kc(e,t){var n;n=t?t.m:e.V++;var r=ds(e.F);ys(r,"SID",e.J),ys(r,"RID",n),ys(r,"AID",e.U),_c(e,r),e.o&&e.s&&hc(r,e.o,e.s),n=new Hu(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=wc(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Vs(e.i,n),Qu(n,r,t)}function _c(e,t){e.j&&us({},function(e,n){ys(t,n,e)})}function wc(e,t,n){n=Math.min(e.l.length,n);var r=e.j?Xo(e.j.Oa,e.j,e):null;e:for(var i=e.l,o=-1;;){var a=["count="+n];-1==o?0<n?(o=i[0].h,a.push("ofs="+o)):o=0:a.push("ofs="+o);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=o))o=Math.max(0,i[s].h-100),u=!1;else try{Zs(l,a,"req"+c+"_")}catch(h){r&&r(l)}}if(u){r=a.join("&");break e}}return e=e.l.splice(0,n),t.D=e,r}function bc(e){e.g||e.u||(e.Y=1,fu(e.Ga,e),e.A=0)}function xc(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Lu(Xo(e.Ga,e),Sc(e,e.A)),e.A++,0))}function Ic(e){null!=e.B&&(Ho.clearTimeout(e.B),e.B=null)}function Tc(e){e.g=new Hu(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=ds(e.oa);ys(t,"RID","rpc"),ys(t,"SID",e.J),ys(t,"CI",e.N?"0":"1"),ys(t,"AID",e.U),_c(e,t),ys(t,"TYPE","xmlhttp"),e.o&&e.s&&hc(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=ks(ds(t)),n.s=null,n.U=!0,Ju(n,e)}function Cc(e){null!=e.v&&(Ho.clearTimeout(e.v),e.v=null)}function Ec(e,t){var n=null;if(e.g==t){Cc(e),Ic(e),e.g=null;var r=2}else{if(!Us(e.i,t))return;n=t.D,js(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;iu(r=Ru(),new Du(r,n,t,i)),yc(e)}else bc(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Fs(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Lu(Xo(e.Ha,e,t),Sc(e,e.C)),e.C++,0)))}(e,t)||2==r&&xc(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Rc(e,5);break;case 4:Rc(e,10);break;case 3:Rc(e,6);break;default:Rc(e,2)}}function Sc(e,t){var n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Rc(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=Xo(e.jb,e);n||(n=new fs("//www.google.com/images/cleardot.gif"),Ho.location&&"http"==Ho.location.protocol||ps(n,"https"),ks(n)),function(e,t){var n=new Tu;if(Ho.Image){var r=new Image;r.onload=ea(Hs,n,r,"TestLoadImage: loaded",!0,t),r.onerror=ea(Hs,n,r,"TestLoadImage: error",!1,t),r.onabort=ea(Hs,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=ea(Hs,n,r,"TestLoadImage: timeout",!1,t),Ho.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Pu(2);e.G=0,e.j&&e.j.va(t),Ac(e),gc(e)}function Ac(e){e.G=0,e.I=-1,e.j&&((0!=qs(e.i).length||0!=e.l.length)&&(e.i.i.length=0,ua(e.l),e.l.length=0),e.j.ua())}function Nc(e,t,n){var r=function(e){return e instanceof fs?ds(e):new fs(e,void 0)}(n);if(""!=r.i)t&&vs(r,t+"."+r.i),gs(r,r.m);else{var i=Ho.location;r=function(e,t,n,r){var i=new fs(null,void 0);return e&&ps(i,e),t&&vs(i,t),n&&gs(i,n),r&&(i.l=r),i}(i.protocol,t?t+"."+i.hostname:i.hostname,+i.port,n)}return e.aa&&va(e.aa,function(e,t){ys(r,t,e)}),n=e.sa,(t=e.D)&&n&&ys(r,t,n),ys(r,"VER",e.ma),_c(e,r),r}function Oc(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Xs(n&&e.Ba&&!e.qa?new Gs({ib:!0}):e.qa)).L=e.H,t}function Pc(){}function Dc(){if(xa&&!(10<=Number(Pa)))throw Error("Environmental error: no available transport.")}function Lc(e,t){ru.call(this),this.g=new dc(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!sa(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!sa(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new Uc(this)}function Mc(e){Bu.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Fc(){zu.call(this),this.status=1}function Uc(e){this.g=e}(Vo=Xs.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ju.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:ju),this.g.onreadystatechange=Xo(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(o){return void ic(this,o)}e=n||"";var i=new ss(this.headers);r&&us(r,function(e,t){i.set(t,e)}),r=function(e){e:{for(var t=rc,n=e.length,r="string"==typeof e?e.split(""):e,i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Ho.FormData&&e instanceof Ho.FormData,!(0<=ia(nc,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{sc(this),0<this.B&&((this.K=function(e){return xa&&function(){return e=Oa,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){for(var e=0,t=la(String(_a)).split("."),n=la("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var o=t[i]||"",a=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==o[0].length&&0==a[0].length)break;e=fa(0==o[1].length?0:parseInt(o[1],10),0==a[1].length?0:parseInt(a[1],10))||fa(0==o[2].length,0==a[2].length)||fa(o[2],a[2]),o=o[3],a=a[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Xo(this.pa,this)):this.A=yu(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(o){ic(this,o)}},Vo.pa=function(){void 0!==Zo&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,iu(this,"timeout"),this.abort(8))},Vo.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,iu(this,"complete"),iu(this,"abort"),uc(this))},Vo.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),uc(this,!0)),Xs.Z.M.call(this)},Vo.Fa=function(){this.s||(this.F||this.v||this.l?ac(this):this.cb())},Vo.cb=function(){ac(this)},Vo.ba=function(){try{return 2<cc(this)?this.g.status:-1}catch(wa){return-1}},Vo.ga=function(){try{return this.g?this.g.responseText:""}catch(wa){return""}},Vo.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),$s(t)}},Vo.Da=function(){return this.m},Vo.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Vo=dc.prototype).ma=8,Vo.G=1,Vo.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},Vo.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;var t=new Hu(this,this.h,e,void 0),n=this.s;if(this.P&&(n?ya(n=ga(n),this.P):n=this.P),null===this.o&&(t.H=n),this.ja)e:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break e}if(4096===r||i===this.l.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=wc(this,t,r),ys(i=ds(this.F),"RID",e),ys(i,"CVER",22),this.D&&ys(i,"X-HTTP-Session-Id",this.D),_c(this,i),this.o&&n&&hc(i,this.o,n),Vs(this.i,t),this.Ra&&ys(i,"TYPE","init"),this.ja?(ys(i,"$req",r),ys(i,"SID","null"),t.$=!0,Qu(t,i,null)):Qu(t,i,r),this.G=2}}else 3==this.G&&(e?kc(this,e):0==this.l.length||Ms(this.i)||kc(this))},Vo.Ga=function(){if(this.u=null,Tc(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Lu(Xo(this.bb,this),e)}},Vo.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Pu(10),vc(this),Tc(this))},Vo.ab=function(){null!=this.v&&(this.v=null,vc(this),xc(this),Pu(19))},Vo.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Pu(2)):(this.h.info("Failed to ping google.com"),Pu(1))},(Vo=Pc.prototype).xa=function(){},Vo.wa=function(){},Vo.va=function(){},Vo.ua=function(){},Vo.Oa=function(){},Dc.prototype.g=function(e,t){return new Lc(e,t)},ta(Lc,ru),Lc.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),fu(Xo(e.hb,e,t))),Pu(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Nc(e,null,e.W),yc(e)},Lc.prototype.close=function(){pc(this.g)},Lc.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,mc(this.g,t)}else this.v?((t={}).__data__=au(e),mc(this.g,t)):mc(this.g,e)},Lc.prototype.M=function(){this.g.j=null,delete this.j,pc(this.g),delete this.g,Lc.Z.M.call(this)},ta(Mc,Bu),ta(Fc,zu),ta(Uc,Pc),Uc.prototype.xa=function(){iu(this.g,"a")},Uc.prototype.wa=function(e){iu(this.g,new Mc(e))},Uc.prototype.va=function(e){iu(this.g,new Fc(e))},Uc.prototype.ua=function(){iu(this.g,"b")},Dc.prototype.createWebChannel=Dc.prototype.g,Lc.prototype.send=Lc.prototype.u,Lc.prototype.open=Lc.prototype.m,Lc.prototype.close=Lc.prototype.close,Mu.NO_ERROR=0,Mu.TIMEOUT=8,Mu.HTTP_ERROR=6,Fu.COMPLETE="complete",Vu.EventType=qu,qu.OPEN="a",qu.CLOSE="b",qu.ERROR="c",qu.MESSAGE="d",ru.prototype.listen=ru.prototype.N,Xs.prototype.listenOnce=Xs.prototype.O,Xs.prototype.getLastError=Xs.prototype.La,Xs.prototype.getLastErrorCode=Xs.prototype.Da,Xs.prototype.getStatus=Xs.prototype.ba,Xs.prototype.getResponseJson=Xs.prototype.Qa,Xs.prototype.getResponseText=Xs.prototype.ga,Xs.prototype.send=Xs.prototype.ea;var Vc=zo.createWebChannelTransport=function(){return new Dc},jc=zo.getStatEventTarget=function(){return Ru()},qc=zo.ErrorCode=Mu,Bc=zo.EventType=Fu,zc=zo.Event=Eu,Zc=zo.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Hc=zo.FetchXmlHttpFactory=Gs,Gc=zo.WebChannel=Vu,Wc=zo.XhrIo=Xs,Kc="@firebase/firestore",Yc=function(){function e(t){d(this,e),this.uid=t}return f(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Yc.UNAUTHENTICATED=new Yc(null),Yc.GOOGLE_CREDENTIALS=new Yc("google-credentials-uid"),Yc.FIRST_PARTY=new Yc("first-party-uid"),Yc.MOCK_USER=new Yc("mock-user");var Qc="9.6.1",Jc=new Yi.Yd("@firebase/firestore");function $c(){return Jc.logLevel}function Xc(e){if(Jc.logLevel<=Yi.in.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nl);Jc.debug.apply(Jc,["Firestore (".concat(Qc,"): ").concat(e)].concat(a(i)))}}function el(e){if(Jc.logLevel<=Yi.in.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nl);Jc.error.apply(Jc,["Firestore (".concat(Qc,"): ").concat(e)].concat(a(i)))}}function tl(e){if(Jc.logLevel<=Yi.in.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(nl);Jc.warn.apply(Jc,["Firestore (".concat(Qc,"): ").concat(e)].concat(a(i)))}}function nl(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function rl(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Qc,") INTERNAL ASSERTION FAILED: ")+e;throw el(t),new Error(t)}function il(e,t){e||rl()}function ol(e,t){return e}var al={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ul=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,r)).code=e,i.message=r,i.name="FirebaseError",i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return n}(y(Error)),sl=function e(){var t=this;d(this,e),this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},cl=function e(t,n){d(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))},ll=function(){function e(){d(this,e)}return f(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(Yc.UNAUTHENTICATED)})}},{key:"shutdown",value:function(){}}]),e}(),hl=function(){function e(t){d(this,e),this.token=t,this.changeListener=null}return f(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable(function(){return t(n.token.user)})}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),fl=function(){function e(t){d(this,e),this.t=t,this.currentUser=Yc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return f(e,[{key:"start",value:function(e,t){var n=this,r=this,i=this.i,o=function(e){return n.i!==i?(i=n.i,t(e)):Promise.resolve()},a=new sl;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new sl,e.enqueueRetryable(function(){return o(n.currentUser)})};var u=function(){var t=a;e.enqueueRetryable((0,Hi.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,o(r.currentUser);case 4:case"end":return e.stop()}},e)})))},s=function(e){Xc("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),u()};this.t.onInit(function(e){return s(e)}),setTimeout(function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?s(e):(Xc("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new sl)}},0),u()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return e.i!==t?(Xc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(il("string"==typeof n.accessToken),new cl(n.accessToken,e.currentUser)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return il(null===e||"string"==typeof e),new Yc(e)}}]),e}(),dl=function e(t,n,r){d(this,e),this.type="FirstParty",this.user=Yc.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);var i=t.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)},pl=function(){function e(t,n,r){d(this,e),this.h=t,this.l=n,this.m=r}return f(e,[{key:"getToken",value:function(){return Promise.resolve(new dl(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable(function(){return t(Yc.FIRST_PARTY)})}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),vl=function e(t){d(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)},gl=function(){function e(t){d(this,e),this.g=t,this.forceRefresh=!1,this.appCheck=null}return f(e,[{key:"start",value:function(e,t){var n=this;this.o=function(n){e.enqueueRetryable(function(){return null!=(e=n).error&&Xc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message)),t(e.token);var e})};var r=function(e){Xc("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.g.onInit(function(e){return r(e)}),setTimeout(function(){if(!n.appCheck){var e=n.g.getImmediate({optional:!0});e?r(e):Xc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}},{key:"getToken",value:function(){var e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(function(e){return e?(il("string"==typeof e.token),new vl(e.token)):null}):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}(),ml=function(){function e(t,n){var r=this;d(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.p(e)},this.T=function(e){return n.writeSequenceNumber(e)})}return f(e,[{key:"p",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.T&&this.T(e),e}}]),e}();function yl(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ml.I=-1;var kl=function(){function e(){d(this,e)}return f(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,n="";n.length<20;)for(var r=yl(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length));return n}}]),e}();function _l(e,t){return e<t?-1:e>t?1:0}function wl(e,t,n){return e.length===t.length&&e.every(function(e,r){return n(e,t[r])})}function bl(e){return e+"\0"}var xl=function(){function e(t,n){if(d(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ul(al.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ul(al.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ul(al.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ul(al.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return f(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?_l(this.nanoseconds,e.nanoseconds):_l(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Il=function(){function e(t){d(this,e),this.timestamp=t}return f(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new xl(0,0))}}]),e}();function Tl(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Cl(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function El(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var Sl=function(){function e(t,n,r){d(this,e),void 0===n?n=0:n>t.length&&rl(),void 0===r?r=t.length-n:r>t.length-n&&rl(),this.segments=t,this.offset=n,this.len=r}return f(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach(function(e){n.push(e)}):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),o=t.get(r);if(i<o)return-1;if(i>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Rl=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var o=0,u=r;o<u.length;o++){var s=u[o];if(s.indexOf("//")>=0)throw new ul(al.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push.apply(e,a(s.split("/").filter(function(e){return e.length>0})))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Sl),Al=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Nl=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map(function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e}).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Al.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,o=function(){if(0===r.length)throw new ul(al.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},a=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ul(al.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ul(al.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(a=!a,i++):"."!==u||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new ul(al.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(Sl),Ol=function(){function e(t){d(this,e),this.fields=t,t.sort(Nl.comparator)}return f(e,[{key:"covers",value:function(e){var t,n=s(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return wl(this.fields,e.fields,function(e,t){return e.isEqual(t)})}}]),e}(),Pl=function(){function e(t){d(this,e),this.binaryString=t}return f(e,[{key:"toBase64",value:function(){return btoa(this.binaryString)}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return _l(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(t){return new e(atob(t))}},{key:"fromUint8Array",value:function(t){return new e(function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(t))}}]),e}();Pl.EMPTY_BYTE_STRING=new Pl("");var Dl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ll(e){if(il(!!e),"string"==typeof e){var t=0,n=Dl.exec(e);if(il(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Ml(e.seconds),nanos:Ml(e.nanos)}}function Ml(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Fl(e){return"string"==typeof e?Pl.fromBase64String(e):Pl.fromUint8Array(e)}function Ul(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Vl(e){var t=e.mapValue.fields.__previous_value__;return Ul(t)?Vl(t):t}function jl(e){var t=Ll(e.mapValue.fields.__local_write_time__.timestampValue);return new xl(t.seconds,t.nanos)}function ql(e){return null==e}function Bl(e){return 0===e&&1/e==-1/0}function zl(e){return"number"==typeof e&&Number.isInteger(e)&&!Bl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}var Zl=function(){function e(t){d(this,e),this.path=t}return f(e,[{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"isEqual",value:function(e){return null!==e&&0===Rl.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Rl.fromString(t))}},{key:"fromName",value:function(t){return new e(Rl.fromString(t).popFirst(5))}},{key:"comparator",value:function(e,t){return Rl.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Rl(t.slice()))}}]),e}();function Hl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ul(e)?4:10:rl()}function Gl(e,t){var n,r=Hl(e);if(r!==Hl(t))return!1;switch(r){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jl(e).isEqual(jl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ll(e.timestampValue),r=Ll(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return n=t,Fl(e.bytesValue).isEqual(Fl(n.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ml(e.geoPointValue.latitude)===Ml(t.geoPointValue.latitude)&&Ml(e.geoPointValue.longitude)===Ml(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ml(e.integerValue)===Ml(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Ml(e.doubleValue),r=Ml(t.doubleValue);return n===r?Bl(n)===Bl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return wl(e.arrayValue.values||[],t.arrayValue.values||[],Gl);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Tl(n)!==Tl(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Gl(n[i],r[i])))return!1;return!0}(e,t);default:return rl()}}function Wl(e,t){return void 0!==(e.values||[]).find(function(e){return Gl(e,t)})}function Kl(e,t){var n,r,i,o,a=Hl(e),u=Hl(t);if(a!==u)return _l(a,u);switch(a){case 0:return 0;case 1:return _l(e.booleanValue,t.booleanValue);case 2:return r=t,i=Ml((n=e).integerValue||n.doubleValue),o=Ml(r.integerValue||r.doubleValue),i<o?-1:i>o?1:i===o?0:isNaN(i)?isNaN(o)?0:-1:1;case 3:return Yl(e.timestampValue,t.timestampValue);case 4:return Yl(jl(e),jl(t));case 5:return _l(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Fl(e),r=Fl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var o=_l(n[i],r[i]);if(0!==o)return o}return _l(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=_l(Ml(e.latitude),Ml(t.latitude));return 0!==n?n:_l(Ml(e.longitude),Ml(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var o=Kl(n[i],r[i]);if(o)return o}return _l(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var a=0;a<r.length&&a<o.length;++a){var u=_l(r[a],o[a]);if(0!==u)return u;var s=Kl(n[r[a]],i[o[a]]);if(0!==s)return s}return _l(r.length,o.length)}(e.mapValue,t.mapValue);default:throw rl()}}function Yl(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return _l(e,t);var n=Ll(e),r=Ll(t),i=_l(n.seconds,r.seconds);return 0!==i?i:_l(n.nanos,r.nanos)}function Ql(e){return Jl(e)}function Jl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(t=e.timestampValue,n=Ll(t),"time(".concat(n.seconds,",").concat(n.nanos,")")):"stringValue"in e?e.stringValue:"bytesValue"in e?Fl(e.bytesValue).toBase64():"referenceValue"in e?Zl.fromName(e.referenceValue).toString():"geoPointValue"in e?"geo(".concat((r=e.geoPointValue).latitude,",").concat(r.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=s(e.values||[]);try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+=Jl(o)}}catch(a){i.e(a)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=s(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var o=t.value;r?r=!1:n+=",",n+="".concat(o,":").concat(Jl(e.fields[o]))}}catch(a){i.e(a)}finally{i.f()}return n+"}"}(e.mapValue):rl();var t,n,r}function $l(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Xl(e){return!!e&&"integerValue"in e}function eh(e){return!!e&&"arrayValue"in e}function th(e){return!!e&&"nullValue"in e}function nh(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function rh(e){return!!e&&"mapValue"in e}function ih(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Cl(e.mapValue.fields,function(e,n){return t.mapValue.fields[e]=ih(n)}),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=ih(e.arrayValue.values[r]);return n}return Object.assign({},e)}var oh=function(){function e(t){d(this,e),this.value=t}return f(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!rh(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ih(t)}},{key:"setAll",value:function(e){var t=this,n=Nl.emptyPath(),r={},i=[];e.forEach(function(e,o){if(!n.isImmediateParentOf(o)){var a=t.getFieldsMap(n);t.applyChanges(a,r,i),r={},i=[],n=o.popLast()}e?r[o.lastSegment()]=ih(e):i.push(o.lastSegment())});var o=this.getFieldsMap(n);this.applyChanges(o,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());rh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Gl(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];rh(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Cl(t,function(t,n){return e[t]=n});var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;delete e[o]}}catch(a){i.e(a)}finally{i.f()}}},{key:"clone",value:function(){return new e(ih(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function ah(e){var t=[];return Cl(e.fields,function(e,n){var r=new Nl([e]);if(rh(n)){var i=ah(n.mapValue).fields;if(0===i.length)t.push(r);else{var o,a=s(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;t.push(r.child(u))}}catch(c){a.e(c)}finally{a.f()}}}else t.push(r)}),new Ol(t)}var uh=function(){function e(t,n,r,i,o){d(this,e),this.key=t,this.documentType=n,this.version=r,this.data=i,this.documentState=o}return f(e,[{key:"convertToFoundDocument",value:function(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=oh.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=oh.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"clone",value:function(){return new e(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Il.min(),oh.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r){return new e(t,1,n,r,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,oh.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,oh.empty(),2)}}]),e}(),sh=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;d(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.R=null};function ch(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;return new sh(e,t,n,r,i,o,a)}function lh(e){var t=ol(e);if(null===t.R){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(function(e){return function(e){return e.field.canonicalString()+e.op.toString()+Ql(e.value)}(e)}).join(","),n+="|ob:",n+=t.orderBy.map(function(e){return(t=e).field.canonicalString()+t.dir;var t}).join(","),ql(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=xh(t.startAt)),t.endAt&&(n+="|ub:",n+=xh(t.endAt)),t.R=n}return t.R}function hh(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Th(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if((i=e.filters[r]).op!==(o=t.filters[r]).op||!i.field.isEqual(o.field)||!Gl(i.value,o.value))return!1;var i,o;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Eh(e.startAt,t.startAt)&&Eh(e.endAt,t.endAt)}function fh(e){return Zl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}var dh=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).field=e,o.op=r,o.value=i,o}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Kl(t,this.value)):null!==t&&Hl(this.value)===Hl(t)&&this.v(Kl(t,this.value))}},{key:"v",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return rl()}}},{key:"V",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,r):new ph(e,t,r):"array-contains"===t?new yh(e,r):"in"===t?new kh(e,r):"not-in"===t?new _h(e,r):"array-contains-any"===t?new wh(e,r):new n(e,t,r)}},{key:"P",value:function(e,t,n){return"in"===t?new vh(e,n):new gh(e,n)}}]),n}(function(){return function e(){d(this,e)}}()),ph=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r,i)).key=Zl.fromName(i.referenceValue),o}return f(n,[{key:"matches",value:function(e){var t=Zl.comparator(e.key,this.key);return this.v(t)}}]),n}(dh),vh=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"in",r)).keys=mh(0,r),i}return f(n,[{key:"matches",value:function(e){return this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(dh),gh=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,"not-in",r)).keys=mh(0,r),i}return f(n,[{key:"matches",value:function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})}}]),n}(dh);function mh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(e){return Zl.fromName(e.referenceValue)})}var yh=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return eh(t)&&Wl(t.arrayValue,this.value)}}]),n}(dh),kh=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"in",r)}return f(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Wl(this.value.arrayValue,t)}}]),n}(dh),_h=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"not-in",r)}return f(n,[{key:"matches",value:function(e){if(Wl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Wl(this.value.arrayValue,t)}}]),n}(dh),wh=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,"array-contains-any",r)}return f(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!eh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(e){return Wl(t.value.arrayValue,e)})}}]),n}(dh),bh=function e(t,n){d(this,e),this.position=t,this.before=n};function xh(e){return"".concat(e.before?"b":"a",":").concat(e.position.map(function(e){return Ql(e)}).join(","))}var Ih=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";d(this,e),this.field=t,this.dir=n};function Th(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ch(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var o=t[i],a=e.position[i];if(r=o.field.isKeyField()?Zl.comparator(Zl.fromName(a.referenceValue),n.key):Kl(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Eh(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Gl(e.position[n],t.position[n]))return!1;return!0}var Sh=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;d(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=s,this.S=null,this.D=null};function Rh(e,t,n,r,i,o,a,u){return new Sh(e,t,n,r,i,o,a,u)}function Ah(e){return new Sh(e)}function Nh(e){return!ql(e.limit)&&"F"===e.limitType}function Oh(e){return!ql(e.limit)&&"L"===e.limitType}function Ph(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Dh(e){var t,n=s(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(r.V())return r.field}}catch(i){n.e(i)}finally{n.f()}return null}function Lh(e){return null!==e.collectionGroup}function Mh(e){var t=ol(e);if(null===t.S){t.S=[];var n=Dh(t),r=Ph(t);if(null!==n&&null===r)n.isKeyField()||t.S.push(new Ih(n)),t.S.push(new Ih(Nl.keyField(),"asc"));else{var i,o=!1,a=s(t.explicitOrderBy);try{for(a.s();!(i=a.n()).done;){var u=i.value;t.S.push(u),u.field.isKeyField()&&(o=!0)}}catch(l){a.e(l)}finally{a.f()}if(!o){var c=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new Ih(Nl.keyField(),c))}}}return t.S}function Fh(e){var t=ol(e);if(!t.D)if("F"===t.limitType)t.D=ch(t.path,t.collectionGroup,Mh(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=s(Mh(t));try{for(i.s();!(n=i.n()).done;){var o=n.value;r.push(new Ih(o.field,"desc"===o.dir?"asc":"desc"))}}catch(c){i.e(c)}finally{i.f()}var a=t.endAt?new bh(t.endAt.position,!t.endAt.before):null,u=t.startAt?new bh(t.startAt.position,!t.startAt.before):null;t.D=ch(t.path,t.collectionGroup,r,t.filters,t.limit,a,u)}return t.D}function Uh(e,t,n){return new Sh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Vh(e,t){return hh(Fh(e),Fh(t))&&e.limitType===t.limitType}function jh(e){return"".concat(lh(Fh(e)),"|lt:").concat(e.limitType)}function qh(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(function(e){return"".concat((t=e).field.canonicalString()," ").concat(t.op," ").concat(Ql(t.value));var t}).join(", "),"]")),ql(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(function(e){return"".concat((t=e).field.canonicalString()," (").concat(t.dir,")");var t}).join(", "),"]")),e.startAt&&(t+=", startAt: "+xh(e.startAt)),e.endAt&&(t+=", endAt: "+xh(e.endAt)),"Target(".concat(t,")")}(Fh(e)),"; limitType=").concat(e.limitType,")")}function Bh(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Zl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=s(e.explicitOrderBy);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(o){r.e(o)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=s(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&(r=t,!((n=e).startAt&&!Ch(n.startAt,Mh(n),r)||n.endAt&&Ch(n.endAt,Mh(n),r)));var n,r}function zh(e){return function(t,n){var r,i=!1,o=s(Mh(e));try{for(o.s();!(r=o.n()).done;){var a=r.value,u=Zh(a,t,n);if(0!==u)return u;i=i||a.field.isKeyField()}}catch(c){o.e(c)}finally{o.f()}return 0}}function Zh(e,t,n){var r=e.field.isKeyField()?Zl.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Kl(r,i):rl()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return rl()}}function Hh(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bl(t)?"-0":t}}function Gh(e){return{integerValue:""+e}}function Wh(e,t){return zl(t)?Gh(t):Hh(e,t)}var Kh=function e(){d(this,e),this._=void 0};function Yh(e,t,n){return e instanceof $h?(i=t,o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:(r=n).seconds,nanos:r.nanoseconds}}}},i&&(o.fields.__previous_value__=i),{mapValue:o}):e instanceof Xh?ef(e,t):e instanceof tf?nf(e,t):function(e,t){var n=Jh(e,t),r=of(n)+of(e.N);return Xl(n)&&Xl(e.N)?Gh(r):Hh(e.k,r)}(e,t);var r,i,o}function Qh(e,t,n){return e instanceof Xh?ef(e,t):e instanceof tf?nf(e,t):n}function Jh(e,t){return e instanceof rf?Xl(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}var $h=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(Kh),Xh=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return n}(Kh);function ef(e,t){var n,r=af(t),i=s(e.elements);try{var o=function(){var e=n.value;r.some(function(t){return Gl(t,e)})||r.push(e)};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var tf=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).elements=e,r}return n}(Kh);function nf(e,t){var n,r=af(t),i=s(e.elements);try{var o=function(){var e=n.value;r=r.filter(function(t){return!Gl(t,e)})};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return{arrayValue:{values:r}}}var rf=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).k=e,i.N=r,i}return n}(Kh);function of(e){return Ml(e.integerValue||e.doubleValue)}function af(e){return eh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var uf=function e(t,n){d(this,e),this.field=t,this.transform=n},sf=function e(t,n){d(this,e),this.version=t,this.transformResults=n},cf=function(){function e(t,n){d(this,e),this.updateTime=t,this.exists=n}return f(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function lf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var hf=function e(){d(this,e)};function ff(e,t,n){var r,i,o,a,u;e instanceof mf?(i=t,o=n,a=(r=e).value.clone(),u=_f(r.fieldTransforms,i,o.transformResults),a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()):e instanceof yf?function(e,t,n){if(lf(e.precondition,t)){var r=_f(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(kf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function df(e,t,n){var r;e instanceof mf?function(e,t,n){if(lf(e.precondition,t)){var r=e.value.clone(),i=wf(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(gf(t),r).setHasLocalMutations()}}(e,t,n):e instanceof yf?function(e,t,n){if(lf(e.precondition,t)){var r=wf(e.fieldTransforms,n,t),i=t.data;i.setAll(kf(e)),i.setAll(r),t.convertToFoundDocument(gf(t),i).setHasLocalMutations()}}(e,t,n):lf(e.precondition,r=t)&&r.convertToNoDocument(Il.min())}function pf(e,t){var n,r=null,i=s(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var o=n.value,a=t.data.field(o.field),u=Jh(o.transform,a||null);null!=u&&(null==r&&(r=oh.empty()),r.set(o.field,u))}}catch(c){i.e(c)}finally{i.f()}return r||null}function vf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&wl(n,r,function(e,t){return function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof Xh&&r instanceof Xh||n instanceof tf&&r instanceof tf?wl(n.elements,r.elements,Gl):n instanceof rf&&r instanceof rf?Gl(n.N,r.N):n instanceof $h&&r instanceof $h);var n,r}(e,t)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function gf(e){return e.isFoundDocument()?e.version:Il.min()}var mf=function(e){p(n,e);var t=v(n);function n(e,r,i){var o,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return d(this,n),(o=t.call(this)).key=e,o.value=r,o.precondition=i,o.fieldTransforms=a,o.type=0,o}return n}(hf),yf=function(e){p(n,e);var t=v(n);function n(e,r,i,o){var a,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return d(this,n),(a=t.call(this)).key=e,a.data=r,a.fieldMask=i,a.precondition=o,a.fieldTransforms=u,a.type=1,a}return n}(hf);function kf(e){var t=new Map;return e.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}}),t}function _f(e,t,n){var r=new Map;il(e.length===n.length);for(var i=0;i<n.length;i++){var o=e[i],a=o.transform,u=t.data.field(o.field);r.set(o.field,Qh(a,u,n[i]))}return r}function wf(e,t,n){var r,i=new Map,o=s(e);try{for(o.s();!(r=o.n()).done;){var a=r.value,u=a.transform,c=n.data.field(a.field);i.set(a.field,Yh(u,c,t))}}catch(l){o.e(l)}finally{o.f()}return i}var bf,xf,If=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return n}(hf),Tf=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return n}(hf),Cf=function e(t){d(this,e),this.count=t};function Ef(e){switch(e){default:return rl();case al.CANCELLED:case al.UNKNOWN:case al.DEADLINE_EXCEEDED:case al.RESOURCE_EXHAUSTED:case al.INTERNAL:case al.UNAVAILABLE:case al.UNAUTHENTICATED:return!1;case al.INVALID_ARGUMENT:case al.NOT_FOUND:case al.ALREADY_EXISTS:case al.PERMISSION_DENIED:case al.FAILED_PRECONDITION:case al.ABORTED:case al.OUT_OF_RANGE:case al.UNIMPLEMENTED:case al.DATA_LOSS:return!0}}function Sf(e){if(void 0===e)return el("GRPC error has no .code"),al.UNKNOWN;switch(e){case bf.OK:return al.OK;case bf.CANCELLED:return al.CANCELLED;case bf.UNKNOWN:return al.UNKNOWN;case bf.DEADLINE_EXCEEDED:return al.DEADLINE_EXCEEDED;case bf.RESOURCE_EXHAUSTED:return al.RESOURCE_EXHAUSTED;case bf.INTERNAL:return al.INTERNAL;case bf.UNAVAILABLE:return al.UNAVAILABLE;case bf.UNAUTHENTICATED:return al.UNAUTHENTICATED;case bf.INVALID_ARGUMENT:return al.INVALID_ARGUMENT;case bf.NOT_FOUND:return al.NOT_FOUND;case bf.ALREADY_EXISTS:return al.ALREADY_EXISTS;case bf.PERMISSION_DENIED:return al.PERMISSION_DENIED;case bf.FAILED_PRECONDITION:return al.FAILED_PRECONDITION;case bf.ABORTED:return al.ABORTED;case bf.OUT_OF_RANGE:return al.OUT_OF_RANGE;case bf.UNIMPLEMENTED:return al.UNIMPLEMENTED;case bf.DATA_LOSS:return al.DATA_LOSS;default:return rl()}}(xf=bf||(bf={}))[xf.OK=0]="OK",xf[xf.CANCELLED=1]="CANCELLED",xf[xf.UNKNOWN=2]="UNKNOWN",xf[xf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",xf[xf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",xf[xf.NOT_FOUND=5]="NOT_FOUND",xf[xf.ALREADY_EXISTS=6]="ALREADY_EXISTS",xf[xf.PERMISSION_DENIED=7]="PERMISSION_DENIED",xf[xf.UNAUTHENTICATED=16]="UNAUTHENTICATED",xf[xf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",xf[xf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",xf[xf.ABORTED=10]="ABORTED",xf[xf.OUT_OF_RANGE=11]="OUT_OF_RANGE",xf[xf.UNIMPLEMENTED=12]="UNIMPLEMENTED",xf[xf.INTERNAL=13]="INTERNAL",xf[xf.UNAVAILABLE=14]="UNAVAILABLE",xf[xf.DATA_LOSS=15]="DATA_LOSS";var Rf=function(){function e(t,n){d(this,e),this.comparator=t,this.root=n||Nf.EMPTY}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Nf.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Nf.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal(function(t,n){return e(t,n),!1})}},{key:"toString",value:function(){var e=[];return this.inorderTraversal(function(t,n){return e.push("".concat(t,":").concat(n)),!1}),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new Af(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new Af(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new Af(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new Af(this.root,e,this.comparator,!0)}}]),e}(),Af=function(){function e(t,n,r,i){d(this,e),this.isReverse=i,this.nodeStack=[];for(var o=1;!t.isEmpty();)if(o=n?r(t.key,n):1,i&&(o*=-1),o<0)t=this.isReverse?t.left:t.right;else{if(0===o){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return f(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Nf=function(){function e(t,n,r,i,o){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=o?o:e.EMPTY,this.size=this.left.size+1+this.right.size}return f(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw rl();var e=this.left.check();if(e!==this.right.check())throw rl();return e+(this.isRed()?0:1)}}]),e}();Nf.EMPTY=null,Nf.RED=!0,Nf.BLACK=!1,Nf.EMPTY=new(function(){function e(){d(this,e),this.size=0}return f(e,[{key:"key",get:function(){throw rl()}},{key:"value",get:function(){throw rl()}},{key:"color",get:function(){throw rl()}},{key:"left",get:function(){throw rl()}},{key:"right",get:function(){throw rl()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Nf(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Of=function(){function e(t){d(this,e),this.comparator=t,this.data=new Rf(this.comparator)}return f(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal(function(t,n){return e(t),!1})}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Pf(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Pf(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach(function(e){t=t.add(e)}),t}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Pf=function(){function e(t){d(this,e),this.iter=t}return f(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}(),Df=new Rf(Zl.comparator);function Lf(){return Df}var Mf=new Rf(Zl.comparator);function Ff(){return Mf}var Uf=new Rf(Zl.comparator);function Vf(){return Uf}var jf=new Of(Zl.comparator);function qf(){for(var e=jf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=e.add(a)}return e}var Bf=new Of(_l);function zf(){return Bf}var Zf=function(){function e(t,n,r,i,o){d(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}return f(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n){var r=new Map;return r.set(t,Hf.createSynthesizedTargetChangeForCurrentChange(t,n)),new e(Il.min(),r,zf(),Lf(),qf())}}]),e}(),Hf=function(){function e(t,n,r,i,o){d(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}return f(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n){return new e(Pl.EMPTY_BYTE_STRING,n,qf(),qf(),qf())}}]),e}(),Gf=function e(t,n,r,i){d(this,e),this.$=t,this.removedTargetIds=n,this.key=r,this.F=i},Wf=function e(t,n){d(this,e),this.targetId=t,this.O=n},Kf=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Pl.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;d(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i},Yf=function(){function e(){d(this,e),this.M=0,this.L=$f(),this.B=Pl.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}return f(e,[{key:"current",get:function(){return this.U}},{key:"resumeToken",get:function(){return this.B}},{key:"K",get:function(){return 0!==this.M}},{key:"j",get:function(){return this.q}},{key:"W",value:function(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}},{key:"G",value:function(){var e=qf(),t=qf(),n=qf();return this.L.forEach(function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:rl()}}),new Hf(this.B,this.U,e,t,n)}},{key:"H",value:function(){this.q=!1,this.L=$f()}},{key:"J",value:function(e,t){this.q=!0,this.L=this.L.insert(e,t)}},{key:"Y",value:function(e){this.q=!0,this.L=this.L.remove(e)}},{key:"X",value:function(){this.M+=1}},{key:"Z",value:function(){this.M-=1}},{key:"tt",value:function(){this.q=!0,this.U=!0}}]),e}(),Qf=function(){function e(t){d(this,e),this.et=t,this.nt=new Map,this.st=Lf(),this.it=Jf(),this.rt=new Of(_l)}return f(e,[{key:"ot",value:function(e){var t,n=s(e.$);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F)}}catch(u){n.e(u)}finally{n.f()}var i,o=s(e.removedTargetIds);try{for(o.s();!(i=o.n()).done;){var a=i.value;this.ct(a,e.key,e.F)}}catch(u){o.e(u)}finally{o.f()}}},{key:"ut",value:function(e){var t=this;this.forEachTarget(e,function(n){var r=t.ht(n);switch(e.state){case 0:t.lt(n)&&r.W(e.resumeToken);break;case 1:r.Z(),r.K||r.H(),r.W(e.resumeToken);break;case 2:r.Z(),r.K||t.removeTarget(n);break;case 3:t.lt(n)&&(r.tt(),r.W(e.resumeToken));break;case 4:t.lt(n)&&(t.ft(n),r.W(e.resumeToken));break;default:rl()}})}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach(function(e,r){n.lt(r)&&t(r)})}},{key:"dt",value:function(e){var t=e.targetId,n=e.O.count,r=this.wt(t);if(r){var i=r.target;if(fh(i))if(0===n){var o=new Zl(i.path);this.ct(t,o,uh.newNoDocument(o,Il.min()))}else il(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}},{key:"gt",value:function(e){var t=this,n=new Map;this.nt.forEach(function(r,i){var o=t.wt(i);if(o){if(r.current&&fh(o.target)){var a=new Zl(o.target.path);null!==t.st.get(a)||t.yt(i,a)||t.ct(i,a,uh.newNoDocument(a,e))}r.j&&(n.set(i,r.G()),r.H())}});var r=qf();this.it.forEach(function(e,n){var i=!0;n.forEachWhile(function(e){var n=t.wt(e);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(e))});var i=new Zf(e,n,this.rt,this.st,r);return this.st=Lf(),this.it=Jf(),this.rt=new Of(_l),i}},{key:"at",value:function(e,t){if(this.lt(e)){var n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}}},{key:"ct",value:function(e,t,n){if(this.lt(e)){var r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}}},{key:"removeTarget",value:function(e){this.nt.delete(e)}},{key:"_t",value:function(e){var t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"X",value:function(e){this.ht(e).X()}},{key:"ht",value:function(e){var t=this.nt.get(e);return t||(t=new Yf,this.nt.set(e,t)),t}},{key:"Tt",value:function(e){var t=this.it.get(e);return t||(t=new Of(_l),this.it=this.it.insert(e,t)),t}},{key:"lt",value:function(e){var t=null!==this.wt(e);return t||Xc("WatchChangeAggregator","Detected inactive target",e),t}},{key:"wt",value:function(e){var t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}},{key:"ft",value:function(e){var t=this;this.nt.set(e,new Yf),this.et.getRemoteKeysForTarget(e).forEach(function(n){t.ct(e,n,null)})}},{key:"yt",value:function(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}]),e}();function Jf(){return new Rf(Zl.comparator)}function $f(){return new Rf(Zl.comparator)}var Xf={asc:"ASCENDING",desc:"DESCENDING"},ed={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},td=function e(t,n){d(this,e),this.databaseId=t,this.C=n};function nd(e,t){return e.C?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function rd(e,t){return e.C?t.toBase64():t.toUint8Array()}function id(e,t){return nd(e,t.toTimestamp())}function od(e){return il(!!e),Il.fromTimestamp((t=Ll(e),new xl(t.seconds,t.nanos)));var t}function ad(e,t){return(n=e,new Rl(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function ud(e){var t=Rl.fromString(e);return il(Nd(t)),t}function sd(e,t){return ad(e.databaseId,t.path)}function cd(e,t){var n=ud(t);if(n.get(1)!==e.databaseId.projectId)throw new ul(al.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ul(al.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Zl(dd(n))}function ld(e,t){return ad(e.databaseId,t)}function hd(e){var t=ud(e);return 4===t.length?Rl.emptyPath():dd(t)}function fd(e){return new Rl(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function dd(e){return il(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function pd(e,t,n){return{name:sd(e,t),fields:n.value.mapValue.fields}}function vd(e,t,n){var r=cd(e,t.name),i=od(t.updateTime),o=new oh({mapValue:{fields:t.fields}}),a=uh.newFoundDocument(r,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function gd(e,t){var n,r;if(t instanceof mf)n={update:pd(e,t.key,t.value)};else if(t instanceof If)n={delete:sd(e,t.key)};else if(t instanceof yf)n={update:pd(e,t.key,t.data),updateMask:Ad(t.fieldMask)};else{if(!(t instanceof Tf))return rl();n={verify:sd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(function(e){return function(e,t){var n=t.transform;if(n instanceof $h)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Xh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rf)return{fieldPath:t.field.canonicalString(),increment:n.N};throw rl()}(0,e)})),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:id(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:rl()),n}function md(e,t){var n,r=t.currentDocument?void 0!==(n=t.currentDocument).updateTime?cf.updateTime(od(n.updateTime)):void 0!==n.exists?cf.exists(n.exists):cf.none():cf.none(),i=t.updateTransforms?t.updateTransforms.map(function(t){return function(e,t){var n=null;"setToServerValue"in t?(il("REQUEST_TIME"===t.setToServerValue),n=new $h):"appendMissingElements"in t?n=new Xh(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new tf(t.removeAllFromArray.values||[]):"increment"in t?n=new rf(e,t.increment):rl();var r=Nl.fromServerFormat(t.fieldPath);return new uf(r,n)}(e,t)}):[];if(t.update){var o=cd(e,t.update.name),a=new oh({mapValue:{fields:t.update.fields}});if(t.updateMask){var u=new Ol((t.updateMask.fieldPaths||[]).map(function(e){return Nl.fromServerFormat(e)}));return new yf(o,a,u,r,i)}return new mf(o,a,r,i)}if(t.delete){var s=cd(e,t.delete);return new If(s,r)}if(t.verify){var c=cd(e,t.verify);return new Tf(c,r)}return rl()}function yd(e,t){return{documents:[ld(e,t.path)]}}function kd(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=ld(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=ld(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length){var t=e.map(function(e){return function(e){if("=="===e.op){if(nh(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NAN"}};if(th(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nh(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NOT_NAN"}};if(th(e.value))return{unaryFilter:{field:Cd(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Cd(e.field),op:Td(e.op),value:e.value}}}(e)});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(t.filters);i&&(n.structuredQuery.where=i);var o=function(e){if(0!==e.length)return e.map(function(e){return{field:Cd((t=e).field),direction:Id(t.dir)};var t})}(t.orderBy);o&&(n.structuredQuery.orderBy=o);var a,u=(a=t.limit,e.C||ql(a)?a:{value:a});return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt=bd(t.startAt)),t.endAt&&(n.structuredQuery.endAt=bd(t.endAt)),n}function _d(e){var t=hd(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){il(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:t=t.child(o.collectionId)}var a=[];n.where&&(a=wd(n.where));var u=[];n.orderBy&&(u=n.orderBy.map(function(e){return new Ih(Ed((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));var s=null;n.limit&&(s=function(e){var t;return ql(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=xd(n.startAt));var l=null;return n.endAt&&(l=xd(n.endAt)),Rh(t,i,u,a,s,"F",c,l)}function wd(e){return e?void 0!==e.unaryFilter?[Rd(e)]:void 0!==e.fieldFilter?[Sd(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(function(e){return wd(e)}).reduce(function(e,t){return e.concat(t)}):rl():[]}function bd(e){return{before:e.before,values:e.position}}function xd(e){return new bh(e.values||[],!!e.before)}function Id(e){return Xf[e]}function Td(e){return ed[e]}function Cd(e){return{fieldPath:e.canonicalString()}}function Ed(e){return Nl.fromServerFormat(e.fieldPath)}function Sd(e){return dh.create(Ed(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return rl()}}(e.fieldFilter.op),e.fieldFilter.value)}function Rd(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Ed(e.unaryFilter.field);return dh.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Ed(e.unaryFilter.field);return dh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Ed(e.unaryFilter.field);return dh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Ed(e.unaryFilter.field);return dh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return rl()}}function Ad(e){var t=[];return e.fields.forEach(function(e){return t.push(e.canonicalString())}),{fieldPaths:t}}function Nd(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function Od(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Dd(t)),t=Pd(e.get(n),t);return Dd(t)}function Pd(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var o=e.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function Dd(e){return e+"\x01\x01"}function Ld(e){var t=e.length;if(il(t>=2),2===t)return il("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Rl.emptyPath();for(var n=t-2,r=[],i="",o=0;o<t;){var a=e.indexOf("\x01",o);switch((a<0||a>n)&&rl(),e.charAt(a+1)){case"\x01":var u=e.substring(o,a),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(o,a),i+="\0";break;case"\x11":i+=e.substring(o,a+1);break;default:rl()}o=a+2}return new Rl(r)}var Md=function e(t,n){d(this,e),this.seconds=t,this.nanoseconds=n},Fd=function e(t,n,r){d(this,e),this.ownerId=t,this.allowTabSynchronization=n,this.leaseTimestampMs=r};Fd.store="owner",Fd.key="owner";var Ud=function e(t,n,r){d(this,e),this.userId=t,this.lastAcknowledgedBatchId=n,this.lastStreamToken=r};Ud.store="mutationQueues",Ud.keyPath="userId";var Vd=function e(t,n,r,i,o){d(this,e),this.userId=t,this.batchId=n,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=o};Vd.store="mutations",Vd.keyPath="batchId",Vd.userMutationsIndex="userMutationsIndex",Vd.userMutationsKeyPath=["userId","batchId"];var jd=function(){function e(){d(this,e)}return f(e,null,[{key:"prefixForUser",value:function(e){return[e]}},{key:"prefixForPath",value:function(e,t){return[e,Od(t)]}},{key:"key",value:function(e,t,n){return[e,Od(t),n]}}]),e}();jd.store="documentMutations",jd.PLACEHOLDER=new jd;var qd=function e(t,n){d(this,e),this.path=t,this.readTime=n},Bd=function e(t,n){d(this,e),this.path=t,this.version=n},zd=function e(t,n,r,i,o,a){d(this,e),this.unknownDocument=t,this.noDocument=n,this.document=r,this.hasCommittedMutations=i,this.readTime=o,this.parentPath=a};zd.store="remoteDocuments",zd.readTimeIndex="readTimeIndex",zd.readTimeIndexPath="readTime",zd.collectionReadTimeIndex="collectionReadTimeIndex",zd.collectionReadTimeIndexPath=["parentPath","readTime"];var Zd=function e(t){d(this,e),this.byteSize=t};Zd.store="remoteDocumentGlobal",Zd.key="remoteDocumentGlobalKey";var Hd=function e(t,n,r,i,o,a,u){d(this,e),this.targetId=t,this.canonicalId=n,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=o,this.lastLimboFreeSnapshotVersion=a,this.query=u};Hd.store="targets",Hd.keyPath="targetId",Hd.queryTargetsIndexName="queryTargetsIndex",Hd.queryTargetsKeyPath=["canonicalId","targetId"];var Gd=function e(t,n,r){d(this,e),this.targetId=t,this.path=n,this.sequenceNumber=r};Gd.store="targetDocuments",Gd.keyPath=["targetId","path"],Gd.documentTargetsIndex="documentTargetsIndex",Gd.documentTargetsKeyPath=["path","targetId"];var Wd=function e(t,n,r,i){d(this,e),this.highestTargetId=t,this.highestListenSequenceNumber=n,this.lastRemoteSnapshotVersion=r,this.targetCount=i};Wd.key="targetGlobalKey",Wd.store="targetGlobal";var Kd=function e(t,n){d(this,e),this.collectionId=t,this.parent=n};Kd.store="collectionParents",Kd.keyPath=["collectionId","parent"];var Yd=function e(t,n,r,i){d(this,e),this.clientId=t,this.updateTimeMs=n,this.networkEnabled=r,this.inForeground=i};Yd.store="clientMetadata",Yd.keyPath="clientId";var Qd=function e(t,n,r){d(this,e),this.bundleId=t,this.createTime=n,this.version=r};Qd.store="bundles",Qd.keyPath="bundleId";var Jd=function e(t,n,r){d(this,e),this.name=t,this.readTime=n,this.bundledQuery=r};Jd.store="namedQueries",Jd.keyPath="name";var $d=[Ud.store,Vd.store,jd.store,zd.store,Hd.store,Fd.store,Wd.store,Gd.store,Yd.store,Zd.store,Kd.store,Qd.store,Jd.store],Xd="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ep=function(){function e(){d(this,e),this.onCommittedListeners=[]}return f(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach(function(e){return e()})}}]),e}(),tp=function(){function e(t){var n=this;d(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)},function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)})}return f(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&rl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e(function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}})}},{key:"toPromise",value:function(){var e=this;return new Promise(function(t,n){e.next(t,n)})}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(n){return e.reject(n)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction(function(){return t(n)}):e.reject(n)}}],[{key:"resolve",value:function(t){return new e(function(e,n){e(t)})}},{key:"reject",value:function(t){return new e(function(e,n){n(t)})}},{key:"waitFor",value:function(t){return new e(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(e){return n(e)})}),o=!0,i===r&&e()})}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=s(t);try{var o=function(){var t=n.value;r=r.next(function(n){return n?e.resolve(n):t()})};for(i.s();!(n=i.n()).done;)o()}catch(a){i.e(a)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach(function(e,i){r.push(t.call(n,e,i))}),this.waitFor(r)}}]),e}(),np=function(){function e(t,n){var r=this;d(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.It=new sl,this.transaction.oncomplete=function(){r.It.resolve()},this.transaction.onabort=function(){n.error?r.It.reject(new op(t,n.error)):r.It.resolve()},this.transaction.onerror=function(e){var n=lp(e.target.error);r.It.reject(new op(t,n))}}return f(e,[{key:"At",get:function(){return this.It.promise}},{key:"abort",value:function(e){e&&this.It.reject(e),this.aborted||(Xc("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new up(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(o){throw new op(n,o)}}}]),e}(),rp=function(){function e(t,n,r){d(this,e),this.name=t,this.version=n,this.Rt=r,12.2===e.Pt((0,Ki.z$)())&&el("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return f(e,[{key:"Ct",value:function(e){var t=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.t0=t.db,n.t0){n.next=6;break}return Xc("SimpleDb","Opening database:",t.name),n.next=5,new Promise(function(n,r){var i=indexedDB.open(t.name,t.version);i.onsuccess=function(e){n(e.target.result)},i.onblocked=function(){r(new op(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var n=t.target.error;r("VersionError"===n.name?new ul(al.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new ul(al.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new op(e,n))},i.onupgradeneeded=function(e){Xc("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Rt.Nt(e.target.result,i.transaction,e.oldVersion,t.version).next(function(){Xc("SimpleDb","Database upgrade to version "+t.version+" complete")})}});case 5:t.db=n.sent;case 6:return t.kt&&(t.db.onversionchange=function(e){return t.kt(e)}),n.abrupt("return",t.db);case 8:case"end":return n.stop()}},n)}))()}},{key:"xt",value:function(e){this.kt=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(e,t,n,r){var i=this;return(0,Hi.Z)(regeneratorRuntime.mark(function o(){var a,u,s,c;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:a="readonly"===t,u=0;case 2:return++u,o.prev=3,o.delegateYield(regeneratorRuntime.mark(function t(){var o,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.Ct(e);case 2:return i.db=t.sent,o=np.open(i.db,e,a?"readonly":"readwrite",n),(u=r(o).catch(function(e){return o.abort(e),tp.reject(e)}).toPromise()).catch(function(){}),t.next=7,o.At;case 7:return t.t0=u,t.abrupt("return",{v:t.t0});case 9:case"end":return t.stop()}},t)})(),"t0",5);case 5:if("object"!=typeof(s=o.t0)){o.next=8;break}return o.abrupt("return",s.v);case 8:o.next=15;break;case 10:if(o.prev=10,o.t1=o.catch(3),c="FirebaseError"!==o.t1.name&&u<3,Xc("SimpleDb","Transaction failed with error:",o.t1.message,"Retrying:",c),i.close(),c){o.next=15;break}return o.abrupt("return",Promise.reject(o.t1));case 15:o.next=2;break;case 17:case"end":return o.stop()}},o,null,[[3,10]])}))()}},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Xc("SimpleDb","Removing database:",e),sp(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"bt",value:function(){if(!(0,Ki.hl)())return!1;if(e.vt())return!0;var t=(0,Ki.z$)(),n=e.Pt(t),r=0<n&&n<10,i=e.Vt(t),o=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||o)}},{key:"vt",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}},{key:"Dt",value:function(e,t){return e.store(t)}},{key:"Pt",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"Vt",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),ip=function(){function e(t){d(this,e),this.$t=t,this.Ft=!1,this.Ot=null}return f(e,[{key:"isDone",get:function(){return this.Ft}},{key:"Mt",get:function(){return this.Ot}},{key:"cursor",set:function(e){this.$t=e}},{key:"done",value:function(){this.Ft=!0}},{key:"Lt",value:function(e){this.Ot=e}},{key:"delete",value:function(){return sp(this.$t.delete())}}]),e}(),op=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,al.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return n}(ul);function ap(e){return"IndexedDbTransactionError"===e.name}var up=function(){function e(t){d(this,e),this.store=t}return f(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Xc("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Xc("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),sp(n)}},{key:"add",value:function(e){return Xc("SimpleDb","ADD",this.store.name,e,e),sp(this.store.add(e))}},{key:"get",value:function(e){var t=this;return sp(this.store.get(e)).next(function(n){return void 0===n&&(n=null),Xc("SimpleDb","GET",t.store.name,e,n),n})}},{key:"delete",value:function(e){return Xc("SimpleDb","DELETE",this.store.name,e),sp(this.store.delete(e))}},{key:"count",value:function(){return Xc("SimpleDb","COUNT",this.store.name),sp(this.store.count())}},{key:"Bt",value:function(e,t){var n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,function(e,t){r.push(t)}).next(function(){return r})}},{key:"qt",value:function(e,t){Xc("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Kt=!1;var r=this.cursor(n);return this.Ut(r,function(e,t,n){return n.delete()})}},{key:"jt",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.Ut(r,t)}},{key:"Qt",value:function(e){var t=this.cursor({});return new tp(function(n,r){t.onerror=function(e){var t=lp(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next(function(e){e?r.continue():n()}):n()}})}},{key:"Ut",value:function(e,t){var n=[];return new tp(function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var o=new ip(i),a=t(i.primaryKey,i.value,o);if(a instanceof tp){var u=a.catch(function(e){return o.done(),tp.reject(e)});n.push(u)}o.isDone?r():null===o.Mt?i.continue():i.continue(o.Mt)}else r()}}).next(function(){return tp.waitFor(n)})}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function sp(e){return new tp(function(t,n){e.onsuccess=function(e){t(e.target.result)},e.onerror=function(e){var t=lp(e.target.error);n(t)}})}var cp=!1;function lp(e){var t=rp.Pt((0,Ki.z$)());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ul("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return cp||(cp=!0,setTimeout(function(){throw r},0)),r}}return e}var hp=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Wt=e,i.currentSequenceNumber=r,i}return n}(ep);function fp(e,t){var n=ol(e);return rp.Dt(n.Wt,t)}var dp=function(){function e(t,n,r,i){d(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return f(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&ff(i,e,n[r])}}},{key:"applyToLocalView",value:function(e){var t,n=s(this.baseMutations);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.key.isEqual(e.key)&&df(r,e,this.localWriteTime)}}catch(u){n.e(u)}finally{n.f()}var i,o=s(this.mutations);try{for(o.s();!(i=o.n()).done;){var a=i.value;a.key.isEqual(e.key)&&df(a,e,this.localWriteTime)}}catch(u){o.e(u)}finally{o.f()}}},{key:"applyToLocalDocumentSet",value:function(e){var t=this;this.mutations.forEach(function(n){var r=e.get(n.key),i=r;t.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Il.min())})}},{key:"keys",value:function(){return this.mutations.reduce(function(e,t){return e.add(t.key)},qf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&wl(this.mutations,e.mutations,function(e,t){return vf(e,t)})&&wl(this.baseMutations,e.baseMutations,function(e,t){return vf(e,t)})}}]),e}(),pp=function(){function e(t,n,r,i){d(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return f(e,null,[{key:"from",value:function(t,n,r){il(t.mutations.length===r.length);for(var i=Vf(),o=t.mutations,a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new e(t,n,r,i)}}]),e}(),vp=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Il.min(),a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Il.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pl.EMPTY_BYTE_STRING;d(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=u}return f(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),gp=function e(t){d(this,e),this.Gt=t};function mp(e,t){if(t.document)return vd(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){var n=Zl.fromSegments(t.noDocument.path),r=bp(t.noDocument.readTime),i=uh.newNoDocument(n,r);return t.hasCommittedMutations?i.setHasCommittedMutations():i}if(t.unknownDocument){var o=Zl.fromSegments(t.unknownDocument.path),a=bp(t.unknownDocument.version);return uh.newUnknownDocument(o,a)}return rl()}function yp(e,t,n){var r,i,o=kp(n),a=t.key.path.popLast().toArray();if(t.isFoundDocument()){var u={name:sd(r=e.Gt,(i=t).key),fields:i.data.value.mapValue.fields,updateTime:nd(r,i.version.toTimestamp())};return new zd(null,null,u,t.hasCommittedMutations,o,a)}if(t.isNoDocument()){var s=t.key.path.toArray(),c=wp(t.version),l=t.hasCommittedMutations;return new zd(null,new qd(s,c),null,l,o,a)}if(t.isUnknownDocument()){var h=t.key.path.toArray(),f=wp(t.version);return new zd(new Bd(h,f),null,null,!0,o,a)}return rl()}function kp(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function _p(e){var t=new xl(e[0],e[1]);return Il.fromTimestamp(t)}function wp(e){var t=e.toTimestamp();return new Md(t.seconds,t.nanoseconds)}function bp(e){var t=new xl(e.seconds,e.nanoseconds);return Il.fromTimestamp(t)}function xp(e,t){for(var n=(t.baseMutations||[]).map(function(t){return md(e.Gt,t)}),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform&&(i.updateTransforms=t.mutations[r+1].transform.fieldTransforms,t.mutations.splice(r+1,1),++r)}var o=t.mutations.map(function(t){return md(e.Gt,t)}),a=xl.fromMillis(t.localWriteTimeMs);return new dp(t.batchId,a,n,o)}function Ip(e){var t,n,r=bp(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?bp(e.lastLimboFreeSnapshotVersion):Il.min();return void 0!==e.query.documents?(il(1===(n=e.query).documents.length),t=Fh(Ah(hd(n.documents[0])))):t=Fh(_d(e.query)),new vp(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Pl.fromBase64String(e.resumeToken))}function Tp(e,t){var n,r=wp(t.snapshotVersion),i=wp(t.lastLimboFreeSnapshotVersion);n=fh(t.target)?yd(e.Gt,t.target):kd(e.Gt,t.target);var o=t.resumeToken.toBase64();return new Hd(t.targetId,lh(t.target),r,o,t.sequenceNumber,i,n)}function Cp(e){var t=_d({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Uh(t,t.limit,"L"):t}var Ep=function(){function e(){d(this,e)}return f(e,[{key:"getBundleMetadata",value:function(e,t){return Sp(e).get(t).next(function(e){if(e)return{id:(t=e).bundleId,createTime:bp(t.createTime),version:t.version};var t})}},{key:"saveBundleMetadata",value:function(e,t){return Sp(e).put({bundleId:(n=t).id,createTime:wp(od(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return Rp(e).get(t).next(function(e){if(e)return{name:(t=e).name,query:Cp(t.bundledQuery),readTime:bp(t.readTime)};var t})}},{key:"saveNamedQuery",value:function(e,t){return Rp(e).put({name:(n=t).name,readTime:wp(od(n.readTime)),bundledQuery:n.bundledQuery});var n}}]),e}();function Sp(e){return fp(e,Qd.store)}function Rp(e){return fp(e,Jd.store)}var Ap=function(){function e(){d(this,e),this.zt=new Np}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.zt.add(t),tp.resolve()}},{key:"getCollectionParents",value:function(e,t){return tp.resolve(this.zt.getEntries(t))}}]),e}(),Np=function(){function e(){d(this,e),this.index={}}return f(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Of(Rl.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Of(Rl.comparator)).toArray()}}]),e}(),Op=function(){function e(){d(this,e),this.Ht=new Np}return f(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Ht.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(function(){n.Ht.add(t)});var o={collectionId:r,parent:Od(i)};return Pp(e).put(o)}return tp.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[bl(t),""],!1,!0);return Pp(e).Bt(r).next(function(e){var r,i=s(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;if(o.collectionId!==t)break;n.push(Ld(o.parent))}}catch(a){i.e(a)}finally{i.f()}return n})}}]),e}();function Pp(e){return fp(e,Kd.store)}var Dp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Lp=function(){function e(t,n,r){d(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return f(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Mp(e,t,n){var r=e.store(Vd.store),i=e.store(jd.store),o=[],a=IDBKeyRange.only(n.batchId),u=0,c=r.jt({range:a},function(e,t,n){return u++,n.delete()});o.push(c.next(function(){il(1===u)}));var l,h=[],f=s(n.mutations);try{for(f.s();!(l=f.n()).done;){var d=l.value,p=jd.key(t,d.key.path,n.batchId);o.push(i.delete(p)),h.push(d.key)}}catch(v){f.e(v)}finally{f.f()}return tp.waitFor(o).next(function(){return h})}function Fp(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw rl();t=e.noDocument}return JSON.stringify(t).length}Lp.DEFAULT_COLLECTION_PERCENTILE=10,Lp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Lp.DEFAULT=new Lp(41943040,Lp.DEFAULT_COLLECTION_PERCENTILE,Lp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Lp.DISABLED=new Lp(-1,0,0);var Up=function(){function e(t,n,r,i){d(this,e),this.userId=t,this.k=n,this.Jt=r,this.referenceDelegate=i,this.Yt={}}return f(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jp(e).jt({index:Vd.userMutationsIndex,range:n},function(e,n,r){t=!1,r.done()}).next(function(){return t})}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,o=qp(e),a=jp(e);return a.add({}).next(function(u){il("number"==typeof u);var c,l=new dp(u,t,n,r),h=function(e,t,n){var r=n.baseMutations.map(function(t){return gd(e.Gt,t)}),i=n.mutations.map(function(t){return gd(e.Gt,t)});return new Vd(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.k,i.userId,l),f=[],d=new Of(function(e,t){return _l(e.canonicalString(),t.canonicalString())}),p=s(r);try{for(p.s();!(c=p.n()).done;){var v=c.value,g=jd.key(i.userId,v.key.path,u);d=d.add(v.key.path.popLast()),f.push(a.put(h)),f.push(o.put(g,jd.PLACEHOLDER))}}catch(m){p.e(m)}finally{p.f()}return d.forEach(function(t){f.push(i.Jt.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(function(){i.Yt[u]=l.keys()}),tp.waitFor(f).next(function(){return l})})}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return jp(e).get(t).next(function(e){return e?(il(e.userId===n.userId),xp(n.k,e)):null})}},{key:"Zt",value:function(e,t){var n=this;return this.Yt[t]?tp.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(function(e){if(e){var r=e.keys();return n.Yt[t]=r,r}return null})}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return jp(e).jt({index:Vd.userMutationsIndex,range:i},function(e,t,i){t.userId===n.userId&&(il(t.batchId>=r),o=xp(n.k,t)),i.done()}).next(function(){return o})}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jp(e).jt({index:Vd.userMutationsIndex,range:t,reverse:!0},function(e,t,r){n=t.batchId,r.done()}).next(function(){return n})}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jp(e).Bt(Vd.userMutationsIndex,n).next(function(e){return e.map(function(e){return xp(t.k,e)})})}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,n){var r=this,i=jd.prefixForPath(this.userId,n.path),o=IDBKeyRange.lowerBound(i),a=[];return qp(e).jt({range:o},function(i,o,u){var s=t(i,3),c=s[0],l=s[1],h=s[2],f=Ld(l);if(c===r.userId&&n.path.isEqual(f))return jp(e).get(h).next(function(e){if(!e)throw rl();il(e.userId===r.userId),a.push(xp(r.k,e))});u.done()}).next(function(){return a})}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,n){var r=this,i=new Of(_l),o=[];return n.forEach(function(n){var a=jd.prefixForPath(r.userId,n.path),u=IDBKeyRange.lowerBound(a),s=qp(e).jt({range:u},function(e,o,a){var u=t(e,3),s=u[0],c=u[1],l=u[2],h=Ld(c);s===r.userId&&n.path.isEqual(h)?i=i.add(l):a.done()});o.push(s)}),tp.waitFor(o).next(function(){return r.te(e,i)})}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,n){var r=this,i=n.path,o=i.length+1,a=jd.prefixForPath(this.userId,i),u=IDBKeyRange.lowerBound(a),s=new Of(_l);return qp(e).jt({range:u},function(e,n,a){var u=t(e,3),c=u[0],l=u[1],h=u[2],f=Ld(l);c===r.userId&&i.isPrefixOf(f)?f.length===o&&(s=s.add(h)):a.done()}).next(function(){return r.te(e,s)})}},{key:"te",value:function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(jp(e).get(t).next(function(e){if(null===e)throw rl();il(e.userId===n.userId),r.push(xp(n.k,e))}))}),tp.waitFor(i).next(function(){return r})}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Mp(e.Wt,this.userId,t).next(function(r){return e.addOnCommittedListener(function(){n.ee(t.batchId)}),tp.forEach(r,function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)})})}},{key:"ee",value:function(e){delete this.Yt[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next(function(n){if(!n)return tp.resolve();var r=IDBKeyRange.lowerBound(jd.prefixForUser(t.userId)),i=[];return qp(e).jt({range:r},function(e,n,r){if(e[0]===t.userId){var o=Ld(e[1]);i.push(o)}else r.done()}).next(function(){il(0===i.length)})})}},{key:"containsKey",value:function(e,t){return Vp(e,this.userId,t)}},{key:"ne",value:function(e){var t=this;return Bp(e).get(this.userId).next(function(e){return e||new Ud(t.userId,-1,"")})}}],[{key:"Xt",value:function(t,n,r,i){return il(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Vp(e,n,r){var i=jd.prefixForPath(n,r.path),o=i[1],a=IDBKeyRange.lowerBound(i),u=!1;return qp(e).jt({range:a,Kt:!0},function(e,r,i){var a=t(e,3),s=a[0],c=a[1];a[2];s===n&&c===o&&(u=!0),i.done()}).next(function(){return u})}function jp(e){return fp(e,Vd.store)}function qp(e){return fp(e,jd.store)}function Bp(e){return fp(e,Ud.store)}var zp=function(){function e(t){d(this,e),this.se=t}return f(e,[{key:"next",value:function(){return this.se+=2,this.se}}],[{key:"ie",value:function(){return new e(0)}},{key:"re",value:function(){return new e(-1)}}]),e}(),Zp=function(){function e(t,n){d(this,e),this.referenceDelegate=t,this.k=n}return f(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.oe(e).next(function(n){var r=new zp(n.highestTargetId);return n.highestTargetId=r.next(),t.ae(e,n).next(function(){return n.highestTargetId})})}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.oe(e).next(function(e){return Il.fromTimestamp(new xl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))})}},{key:"getHighestSequenceNumber",value:function(e){return this.oe(e).next(function(e){return e.highestListenSequenceNumber})}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.oe(e).next(function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.ae(e,i)})}},{key:"addTargetData",value:function(e,t){var n=this;return this.ce(e,t).next(function(){return n.oe(e).next(function(r){return r.targetCount+=1,n.ue(t,r),n.ae(e,r)})})}},{key:"updateTargetData",value:function(e,t){return this.ce(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next(function(){return Hp(e).delete(t.targetId)}).next(function(){return n.oe(e)}).next(function(t){return il(t.targetCount>0),t.targetCount-=1,n.ae(e,t)})}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return Hp(e).jt(function(a,u){var s=Ip(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,o.push(r.removeTargetData(e,s)))}).next(function(){return tp.waitFor(o)}).next(function(){return i})}},{key:"forEachTarget",value:function(e,t){return Hp(e).jt(function(e,n){var r=Ip(n);t(r)})}},{key:"oe",value:function(e){return Gp(e).get(Wd.key).next(function(e){return il(null!==e),e})}},{key:"ae",value:function(e,t){return Gp(e).put(Wd.key,t)}},{key:"ce",value:function(e,t){return Hp(e).put(Tp(this.k,t))}},{key:"ue",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.oe(e).next(function(e){return e.targetCount})}},{key:"getTargetData",value:function(e,t){var n=lh(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Hp(e).jt({range:r,index:Hd.queryTargetsIndexName},function(e,n,r){var o=Ip(n);hh(t,o.target)&&(i=o,r.done())}).next(function(){return i})}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],o=Wp(e);return t.forEach(function(t){var a=Od(t.path);i.push(o.put(new Gd(n,a))),i.push(r.referenceDelegate.addReference(e,n,t))}),tp.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Wp(e);return tp.forEach(t,function(t){var o=Od(t.path);return tp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(e,n,t)])})}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Wp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Wp(e),i=qf();return r.jt({range:n,Kt:!0},function(e,t,n){var r=Ld(e[1]),o=new Zl(r);i=i.add(o)}).next(function(){return i})}},{key:"containsKey",value:function(e,n){var r=Od(n.path),i=IDBKeyRange.bound([r],[bl(r)],!1,!0),o=0;return Wp(e).jt({index:Gd.documentTargetsIndex,Kt:!0,range:i},function(e,n,r){var i=t(e,2),a=i[0];i[1];0!==a&&(o++,r.done())}).next(function(){return o>0})}},{key:"Et",value:function(e,t){return Hp(e).get(t).next(function(e){return e?Ip(e):null})}}]),e}();function Hp(e){return fp(e,Hd.store)}function Gp(e){return fp(e,Wd.store)}function Wp(e){return fp(e,Gd.store)}function Kp(e){return Yp.apply(this,arguments)}function Yp(){return(Yp=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===al.FAILED_PRECONDITION&&t.message===Xd){e.next=2;break}throw t;case 2:Xc("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Qp(e,n){var r=t(e,2),i=r[0],o=r[1],a=t(n,2),u=a[0],s=a[1],c=_l(i,u);return 0===c?_l(o,s):c}var Jp=function(){function e(t){d(this,e),this.he=t,this.buffer=new Of(Qp),this.le=0}return f(e,[{key:"fe",value:function(){return++this.le}},{key:"de",value:function(e){var t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Qp(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),$p=function(){function e(t,n){d(this,e),this.garbageCollector=t,this.asyncQueue=n,this.we=!1,this._e=null}return f(e,[{key:"start",value:function(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}},{key:"stop",value:function(){this._e&&(this._e.cancel(),this._e=null)}},{key:"started",get:function(){return null!==this._e}},{key:"me",value:function(e){var t=this,n=this.we?3e5:6e4;Xc("LruGarbageCollector","Garbage collection scheduled in ".concat(n,"ms")),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Hi.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t._e=null,t.we=!0,n.prev=1,n.next=4,e.collectGarbage(t.garbageCollector);case 4:n.next=14;break;case 6:if(n.prev=6,n.t0=n.catch(1),!ap(n.t0)){n.next=12;break}Xc("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n.t0),n.next=14;break;case 12:return n.next=14,Kp(n.t0);case 14:return n.next=16,t.me(e);case 16:case"end":return n.stop()}},n,null,[[1,6]])})))}}]),e}(),Xp=function(){function e(t,n){d(this,e),this.ge=t,this.params=n}return f(e,[{key:"calculateTargetCount",value:function(e,t){return this.ge.ye(e).next(function(e){return Math.floor(t/100*e)})}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return tp.resolve(ml.I);var r=new Jp(t);return this.ge.forEachTarget(e,function(e){return r.de(e.sequenceNumber)}).next(function(){return n.ge.pe(e,function(e){return r.de(e)})}).next(function(){return r.maxValue})}},{key:"removeTargets",value:function(e,t,n){return this.ge.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.ge.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Xc("LruGarbageCollector","Garbage collection skipped; disabled"),tp.resolve(Dp)):this.getCacheSize(e).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(Xc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Dp):n.Te(e,t)})}},{key:"getCacheSize",value:function(e){return this.ge.getCacheSize(e)}},{key:"Te",value:function(e,t){var n,r,i,o,a,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(function(t){return t>c.params.maximumSequenceNumbersToCollect?(Xc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),c.nthSequenceNumber(e,r)}).next(function(r){return n=r,a=Date.now(),c.removeTargets(e,n,t)}).next(function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)}).next(function(e){return s=Date.now(),$c()<=Yi.in.DEBUG&&Xc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(o-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-o)+"ms\n\tRemoved ".concat(i," targets in ")+(u-a)+"ms\n\tRemoved ".concat(e," documents in ")+(s-u)+"ms\nTotal Duration: ".concat(s-l,"ms")),tp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})})}}]),e}(),ev=function(){function e(t,n){d(this,e),this.db=t,this.garbageCollector=new Xp(this,n)}return f(e,[{key:"ye",value:function(e){var t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(function(e){return t.next(function(t){return e+t})})}},{key:"Ee",value:function(e){var t=0;return this.pe(e,function(e){t++}).next(function(){return t})}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"pe",value:function(e,t){return this.Ie(e,function(e,n){return t(n)})}},{key:"addReference",value:function(e,t,n){return tv(e,n)}},{key:"removeReference",value:function(e,t,n){return tv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return tv(e,t)}},{key:"Ae",value:function(e,t){return r=t,i=!1,Bp(n=e).Qt(function(e){return Vp(n,e,r).next(function(e){return e&&(i=!0),tp.resolve(!e)})}).next(function(){return i});var n,r,i}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.Ie(e,function(a,u){if(u<=t){var s=n.Ae(e,a).next(function(t){if(!t)return o++,r.getEntry(e,a).next(function(){return r.removeEntry(a),Wp(e).delete([0,Od(a.path)])})});i.push(s)}}).next(function(){return tp.waitFor(i)}).next(function(){return r.apply(e)}).next(function(){return o})}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return tv(e,t)}},{key:"Ie",value:function(e,n){var r,i=Wp(e),o=ml.I;return i.jt({index:Gd.documentTargetsIndex},function(e,i){var a=t(e,2),u=a[0],s=(a[1],i.path),c=i.sequenceNumber;0===u?(o!==ml.I&&n(new Zl(Ld(r)),o),o=c,r=s):o=ml.I}).next(function(){o!==ml.I&&n(new Zl(Ld(r)),o)})}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function tv(e,t){return Wp(e).put((n=e.currentSequenceNumber,new Gd(0,Od(t.path),n)));var n}var nv=function(){function e(t,n){d(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={}}return f(e,[{key:"get",value:function(e){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){var i,o=s(r);try{for(o.s();!(i=o.n()).done;){var a=t(i.value,2),u=a[0],c=a[1];if(this.equalsFn(u,e))return c}}catch(l){o.e(l)}finally{o.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}},{key:"forEach",value:function(e){Cl(this.inner,function(n,r){var i,o=s(r);try{for(o.s();!(i=o.n()).done;){var a=t(i.value,2),u=a[0],c=a[1];e(u,c)}}catch(l){o.e(l)}finally{o.f()}})}},{key:"isEmpty",value:function(){return El(this.inner)}}]),e}(),rv=function(){function e(){d(this,e),this.changes=new nv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),this.changesApplied=!1}return f(e,[{key:"getReadTime",value:function(e){var t=this.changes.get(e);return t?t.readTime:Il.min()}},{key:"addEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}},{key:"removeEntry",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.assertNotApplied(),this.changes.set(e,{document:uh.newInvalidDocument(e),readTime:t})}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?tp.resolve(n.document):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),iv=function(){function e(t,n){d(this,e),this.k=t,this.Jt=n}return f(e,[{key:"addEntry",value:function(e,t,n){return uv(e).put(sv(t),n)}},{key:"removeEntry",value:function(e,t){var n=uv(e),r=sv(t);return n.delete(r)}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next(function(r){return r.byteSize+=t,n.Re(e,r)})}},{key:"getEntry",value:function(e,t){var n=this;return uv(e).get(sv(t)).next(function(e){return n.Pe(t,e)})}},{key:"be",value:function(e,t){var n=this;return uv(e).get(sv(t)).next(function(e){return{document:n.Pe(t,e),size:Fp(e)}})}},{key:"getEntries",value:function(e,t){var n=this,r=Lf();return this.ve(e,t,function(e,t){var i=n.Pe(e,t);r=r.insert(e,i)}).next(function(){return r})}},{key:"Ve",value:function(e,t){var n=this,r=Lf(),i=new Rf(Zl.comparator);return this.ve(e,t,function(e,t){var o=n.Pe(e,t);r=r.insert(e,o),i=i.insert(e,Fp(t))}).next(function(){return{documents:r,Se:i}})}},{key:"ve",value:function(e,t,n){if(t.isEmpty())return tp.resolve();var r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator(),o=i.getNext();return uv(e).jt({range:r},function(e,t,r){for(var a=Zl.fromSegments(e);o&&Zl.comparator(o,a)<0;)n(o,null),o=i.getNext();o&&o.isEqual(a)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.Lt(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){var r=this,i=Lf(),o=t.path.length+1,a={};if(n.isEqual(Il.min())){var u=t.path.toArray();a.range=IDBKeyRange.lowerBound(u)}else{var s=t.path.toArray(),c=kp(n);a.range=IDBKeyRange.lowerBound([s,c],!0),a.index=zd.collectionReadTimeIndex}return uv(e).jt(a,function(e,n,a){if(e.length===o){var u=mp(r.k,n);t.path.isPrefixOf(u.key.path)?Bh(t,u)&&(i=i.insert(u.key,u)):a.done()}}).next(function(){return i})}},{key:"newChangeBuffer",value:function(e){return new ov(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next(function(e){return e.byteSize})}},{key:"getMetadata",value:function(e){return av(e).get(Zd.key).next(function(e){return il(!!e),e})}},{key:"Re",value:function(e,t){return av(e).put(Zd.key,t)}},{key:"Pe",value:function(e,t){if(t){var n=mp(this.k,t);if(!n.isNoDocument()||!n.version.isEqual(Il.min()))return n}return uh.newInvalidDocument(e)}}]),e}(),ov=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).De=e,i.trackRemovals=r,i.Ce=new nv(function(e){return e.toString()},function(e,t){return e.isEqual(t)}),i}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Of(function(e,t){return _l(e.canonicalString(),t.canonicalString())});return this.changes.forEach(function(o,a){var u=t.Ce.get(o);if(a.document.isValidDocument()){var s=yp(t.De.k,a.document,t.getReadTime(o));i=i.add(o.path.popLast()),r+=Fp(s)-u,n.push(t.De.addEntry(e,o,s))}else if(r-=u,t.trackRemovals){var c=yp(t.De.k,uh.newNoDocument(o,Il.min()),t.getReadTime(o));n.push(t.De.addEntry(e,o,c))}else n.push(t.De.removeEntry(e,o))}),i.forEach(function(r){n.push(t.De.Jt.addToCollectionParentIndex(e,r))}),n.push(this.De.updateMetadata(e,r)),tp.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.De.be(e,t).next(function(e){return n.Ce.set(t,e.size),e.document})}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.De.Ve(e,t).next(function(e){var t=e.documents;return e.Se.forEach(function(e,t){n.Ce.set(e,t)}),t})}}]),n}(rv);function av(e){return fp(e,Zd.store)}function uv(e){return fp(e,zd.store)}function sv(e){return e.path.toArray()}var cv=function(){function e(t){d(this,e),this.k=t}return f(e,[{key:"Nt",value:function(e,t,n,r){var i=this;il(n<r&&n>=0&&r<=11);var o,a=new np("createOrUpgrade",t);n<1&&r>=1&&(e.createObjectStore(Fd.store),(o=e).createObjectStore(Ud.store,{keyPath:Ud.keyPath}),o.createObjectStore(Vd.store,{keyPath:Vd.keyPath,autoIncrement:!0}).createIndex(Vd.userMutationsIndex,Vd.userMutationsKeyPath,{unique:!0}),o.createObjectStore(jd.store),lv(e),function(e){e.createObjectStore(zd.store)}(e));var u=tp.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Gd.store),e.deleteObjectStore(Hd.store),e.deleteObjectStore(Wd.store)}(e),lv(e)),u=u.next(function(){return function(e){var t=e.store(Wd.store),n=new Wd(0,0,Il.min().toTimestamp(),0);return t.put(Wd.key,n)}(a)})),n<4&&r>=4&&(0!==n&&(u=u.next(function(){return function(e,t){return t.store(Vd.store).Bt().next(function(n){e.deleteObjectStore(Vd.store),e.createObjectStore(Vd.store,{keyPath:Vd.keyPath,autoIncrement:!0}).createIndex(Vd.userMutationsIndex,Vd.userMutationsKeyPath,{unique:!0});var r=t.store(Vd.store),i=n.map(function(e){return r.put(e)});return tp.waitFor(i)})}(e,a)})),u=u.next(function(){!function(e){e.createObjectStore(Yd.store,{keyPath:Yd.keyPath})}(e)})),n<5&&r>=5&&(u=u.next(function(){return i.Ne(a)})),n<6&&r>=6&&(u=u.next(function(){return function(e){e.createObjectStore(Zd.store)}(e),i.ke(a)})),n<7&&r>=7&&(u=u.next(function(){return i.xe(a)})),n<8&&r>=8&&(u=u.next(function(){return i.$e(e,a)})),n<9&&r>=9&&(u=u.next(function(){(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){var t=e.objectStore(zd.store);t.createIndex(zd.readTimeIndex,zd.readTimeIndexPath,{unique:!1}),t.createIndex(zd.collectionReadTimeIndex,zd.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(u=u.next(function(){return i.Fe(a)})),n<11&&r>=11&&(u=u.next(function(){(function(e){e.createObjectStore(Qd.store,{keyPath:Qd.keyPath})})(e),function(e){e.createObjectStore(Jd.store,{keyPath:Jd.keyPath})}(e)})),u}},{key:"ke",value:function(e){var t=0;return e.store(zd.store).jt(function(e,n){t+=Fp(n)}).next(function(){var n=new Zd(t);return e.store(Zd.store).put(Zd.key,n)})}},{key:"Ne",value:function(e){var t=this,n=e.store(Ud.store),r=e.store(Vd.store);return n.Bt().next(function(n){return tp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Bt(Vd.userMutationsIndex,i).next(function(r){return tp.forEach(r,function(r){il(r.userId===n.userId);var i=xp(t.k,r);return Mp(e,n.userId,i).next(function(){})})})})})}},{key:"xe",value:function(e){var t=e.store(Gd.store),n=e.store(zd.store);return e.store(Wd.store).get(Wd.key).next(function(e){var r=[];return n.jt(function(n,i){var o=new Rl(n),a=[0,Od(o)];r.push(t.get(a).next(function(n){return n?tp.resolve():t.put(new Gd(0,Od(o),e.highestListenSequenceNumber))}))}).next(function(){return tp.waitFor(r)})})}},{key:"$e",value:function(e,n){e.createObjectStore(Kd.store,{keyPath:Kd.keyPath});var r=n.store(Kd.store),i=new Np,o=function(e){if(i.add(e)){var t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:Od(n)})}};return n.store(zd.store).jt({Kt:!0},function(e,t){var n=new Rl(e);return o(n.popLast())}).next(function(){return n.store(jd.store).jt({Kt:!0},function(e,n){var r=t(e,3),i=(r[0],r[1]),a=(r[2],Ld(i));return o(a.popLast())})})}},{key:"Fe",value:function(e){var t=this,n=e.store(Hd.store);return n.jt(function(e,r){var i=Ip(r),o=Tp(t.k,i);return n.put(o)})}}]),e}();function lv(e){e.createObjectStore(Gd.store,{keyPath:Gd.keyPath}).createIndex(Gd.documentTargetsIndex,Gd.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Hd.store,{keyPath:Hd.keyPath}).createIndex(Hd.queryTargetsIndexName,Hd.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Wd.store)}var hv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",fv=function(){function e(t,n,r,i,o,a,u,s,c,l){if(d(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Oe=o,this.window=a,this.document=u,this.Me=c,this.Le=l,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=function(e){return Promise.resolve()},!e.bt())throw new ul(al.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,i),this.Ge=n+"main",this.k=new gp(s),this.ze=new rp(this.Ge,11,new cv(this.k)),this.He=new Zp(this.referenceDelegate,this.k),this.Jt=new Op,this.Je=new iv(this.k,this.Jt),this.Ye=new Ep,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===l&&el("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return f(e,[{key:"start",value:function(){var e=this;return this.Ze().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ul(al.FAILED_PRECONDITION,hv);return e.tn(),e.en(),e.nn(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.He.getHighestSequenceNumber(t)})}).then(function(t){e.Be=new ml(t,e.Me)}).then(function(){e.Ue=!0}).catch(function(t){return e.ze&&e.ze.close(),Promise.reject(t)})}},{key:"sn",value:function(e){var t,n=this;return this.We=(t=(0,Hi.Z)(regeneratorRuntime.mark(function t(r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.started){t.next=2;break}return t.abrupt("return",e(r));case 2:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){var t;this.ze.xt((t=(0,Hi.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}},t)})),function(e){return t.apply(this,arguments)}))}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ze();case 4:case"end":return e.stop()}},e)}))))}},{key:"Ze",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(t){return pv(t).put(new Yd(e.clientId,Date.now(),e.networkEnabled,e.inForeground)).next(function(){if(e.isPrimary)return e.rn(t).next(function(t){t||(e.isPrimary=!1,e.Oe.enqueueRetryable(function(){return e.We(!1)}))})}).next(function(){return e.on(t)}).next(function(n){return e.isPrimary&&!n?e.an(t).next(function(){return!1}):!!n&&e.cn(t).next(function(){return!0})})}).catch(function(t){if(ap(t))return Xc("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Xc("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){e.isPrimary!==t&&e.Oe.enqueueRetryable(function(){return e.We(t)}),e.isPrimary=t})}},{key:"rn",value:function(e){var t=this;return dv(e).get(Fd.key).next(function(e){return tp.resolve(t.un(e))})}},{key:"hn",value:function(e){return pv(e).delete(this.clientId)}},{key:"ln",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isPrimary||e.fn(e.Qe,18e5)){t.next=6;break}return e.Qe=Date.now(),t.next=4,e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var n=fp(t,Yd.store);return n.Bt().next(function(t){var r=e.dn(t,18e5),i=t.filter(function(e){return-1===r.indexOf(e)});return tp.forEach(i,function(e){return n.delete(e.clientId)}).next(function(){return i})})}).catch(function(){return[]});case 4:if(n=t.sent,e.Xe){r=s(n);try{for(r.s();!(i=r.n()).done;)o=i.value,e.Xe.removeItem(e.wn(o.clientId))}catch(a){r.e(a)}finally{r.f()}}case 6:case"end":return t.stop()}},t)}))()}},{key:"nn",value:function(){var e=this;this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return e.Ze().then(function(){return e.ln()}).then(function(){return e.nn()})})}},{key:"un",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"on",value:function(e){var t=this;return this.Le?tp.resolve(!0):dv(e).get(Fd.key).next(function(n){if(null!==n&&t.fn(n.leaseTimestampMs,5e3)&&!t._n(n.ownerId)){if(t.un(n)&&t.networkEnabled)return!0;if(!t.un(n)){if(!n.allowTabSynchronization)throw new ul(al.FAILED_PRECONDITION,hv);return!1}}return!(!t.networkEnabled||!t.inForeground)||pv(e).Bt().next(function(e){return void 0===t.dn(e,5e3).find(function(e){if(t.clientId!==e.clientId){var n=!t.inForeground&&e.inForeground,r=t.networkEnabled===e.networkEnabled;if(!t.networkEnabled&&e.networkEnabled||n&&r)return!0}return!1})})}).next(function(e){return t.isPrimary!==e&&Xc("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e})}},{key:"shutdown",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),t.next=7,e.ze.runTransaction("shutdown","readwrite",[Fd.store,Yd.store],function(t){var n=new hp(t,ml.I);return e.an(n).next(function(){return e.hn(n)})});case 7:e.ze.close(),e.pn();case 9:case"end":return t.stop()}},t)}))()}},{key:"dn",value:function(e,t){var n=this;return e.filter(function(e){return n.fn(e.updateTimeMs,t)&&!n._n(e.clientId)})}},{key:"Tn",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return pv(t).Bt().next(function(t){return e.dn(t,18e5).map(function(e){return e.clientId})})})}},{key:"started",get:function(){return this.Ue}},{key:"getMutationQueue",value:function(e){return Up.Xt(e,this.k,this.Jt,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r,i=this;return Xc("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",$d,function(o){return r=new hp(o,i.Be?i.Be.next():ml.I),"readwrite-primary"===t?i.rn(r).next(function(e){return!!e||i.on(r)}).next(function(t){if(!t)throw el("Failed to obtain primary lease for action '".concat(e,"'.")),i.isPrimary=!1,i.Oe.enqueueRetryable(function(){return i.We(!1)}),new ul(al.FAILED_PRECONDITION,Xd);return n(r)}).next(function(e){return i.cn(r).next(function(){return e})}):i.En(r).next(function(){return n(r)})}).then(function(e){return r.raiseOnCommittedEvent(),e})}},{key:"En",value:function(e){var t=this;return dv(e).get(Fd.key).next(function(e){if(null!==e&&t.fn(e.leaseTimestampMs,5e3)&&!t._n(e.ownerId)&&!t.un(e)&&!(t.Le||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ul(al.FAILED_PRECONDITION,hv)})}},{key:"cn",value:function(e){var t=new Fd(this.clientId,this.allowTabSynchronization,Date.now());return dv(e).put(Fd.key,t)}},{key:"an",value:function(e){var t=this,n=dv(e);return n.get(Fd.key).next(function(e){return t.un(e)?(Xc("IndexedDbPersistence","Releasing primary lease."),n.delete(Fd.key)):tp.resolve()})}},{key:"fn",value:function(e,t){var n=Date.now();return!(e<n-t||e>n&&(el("Detected an update time that is in the future: ".concat(e," > ").concat(n)),1))}},{key:"tn",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=function(){e.Oe.enqueueAndForget(function(){return e.inForeground="visible"===e.document.visibilityState,e.Ze()})},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}},{key:"gn",value:function(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}},{key:"en",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=function(){t.mn(),(0,Ki.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&t.Oe.enterRestrictedMode(!0),t.Oe.enqueueAndForget(function(){return t.shutdown()})},this.window.addEventListener("pagehide",this.qe))}},{key:"yn",value:function(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}},{key:"_n",value:function(e){var t;try{var n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Xc("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(n){return el("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}},{key:"mn",value:function(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){el("Failed to set zombie client id.",e)}}},{key:"pn",value:function(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}},{key:"wn",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"bt",value:function(){return rp.bt()}}]),e}();function dv(e){return fp(e,Fd.store)}function pv(e){return fp(e,Yd.store)}function vv(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var gv=function e(t,n){d(this,e),this.progress=t,this.In=n},mv=function(){function e(t,n,r){d(this,e),this.Je=t,this.An=n,this.Jt=r}return f(e,[{key:"Rn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(function(r){return n.Pn(e,t,r)})}},{key:"Pn",value:function(e,t,n){return this.Je.getEntry(e,t).next(function(e){var t,r=s(n);try{for(r.s();!(t=r.n()).done;){t.value.applyToLocalView(e)}}catch(i){r.e(i)}finally{r.f()}return e})}},{key:"bn",value:function(e,t){e.forEach(function(e,n){var r,i=s(t);try{for(i.s();!(r=i.n()).done;){r.value.applyToLocalView(n)}}catch(o){i.e(o)}finally{i.f()}})}},{key:"vn",value:function(e,t){var n=this;return this.Je.getEntries(e,t).next(function(t){return n.Vn(e,t).next(function(){return t})})}},{key:"Vn",value:function(e,t){var n=this;return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(function(e){return n.bn(t,e)})}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return Zl.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Sn(e,t.path):Lh(t)?this.Dn(e,t,n):this.Cn(e,t,n);var r}},{key:"Sn",value:function(e,t){return this.Rn(e,new Zl(t)).next(function(e){var t=Ff();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}},{key:"Dn",value:function(e,t,n){var r=this,i=t.collectionGroup,o=Ff();return this.Jt.getCollectionParents(e,i).next(function(a){return tp.forEach(a,function(a){var u,s,c=(u=t,s=a.child(i),new Sh(s,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));return r.Cn(e,c,n).next(function(e){e.forEach(function(e,t){o=o.insert(e,t)})})}).next(function(){return o})})}},{key:"Cn",value:function(e,t,n){var r,i,o=this;return this.Je.getDocumentsMatchingQuery(e,t,n).next(function(n){return r=n,o.An.getAllMutationBatchesAffectingQuery(e,t)}).next(function(t){return i=t,o.Nn(e,i,r).next(function(e){r=e;var t,n=s(i);try{for(n.s();!(t=n.n()).done;){var o,a=t.value,u=s(a.mutations);try{for(u.s();!(o=u.n()).done;){var c=o.value,l=c.key,h=r.get(l);null==h&&(h=uh.newInvalidDocument(l),r=r.insert(l,h)),df(c,h,a.localWriteTime),h.isFoundDocument()||(r=r.remove(l))}}catch(f){u.e(f)}finally{u.f()}}}catch(f){n.e(f)}finally{n.f()}})}).next(function(){return r.forEach(function(e,n){Bh(t,n)||(r=r.remove(e))}),r})}},{key:"Nn",value:function(e,t,n){var r,i=qf(),o=s(t);try{for(o.s();!(r=o.n()).done;){var a,u=s(r.value.mutations);try{for(u.s();!(a=u.n()).done;){var c=a.value;c instanceof yf&&null===n.get(c.key)&&(i=i.add(c.key))}}catch(h){u.e(h)}finally{u.f()}}}catch(h){o.e(h)}finally{o.f()}var l=n;return this.Je.getEntries(e,i).next(function(e){return e.forEach(function(e,t){t.isFoundDocument()&&(l=l.insert(e,t))}),l})}}]),e}(),yv=function(){function e(t,n,r,i){d(this,e),this.targetId=t,this.fromCache=n,this.kn=r,this.xn=i}return f(e,null,[{key:"$n",value:function(t,n){var r,i=qf(),o=qf(),a=s(n.docChanges);try{for(a.s();!(r=a.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}}}catch(c){a.e(c)}finally{a.f()}return new e(t,n.fromCache,i,o)}}]),e}(),kv=function(){function e(){d(this,e)}return f(e,[{key:"Fn",value:function(e){this.On=e}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i,o=this;return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(Il.min())?this.Mn(e,t):this.On.vn(e,r).next(function(i){var a=o.Ln(t,i);return(Nh(t)||Oh(t))&&o.Bn(t.limitType,a,r,n)?o.Mn(e,t):($c()<=Yi.in.DEBUG&&Xc("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),qh(t)),o.On.getDocumentsMatchingQuery(e,t,n).next(function(e){return a.forEach(function(t){e=e.insert(t.key,t)}),e}))})}},{key:"Ln",value:function(e,t){var n=new Of(zh(e));return t.forEach(function(t,r){Bh(e,r)&&(n=n.add(r))}),n}},{key:"Bn",value:function(e,t,n,r){if(n.size!==t.size)return!0;var i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Mn",value:function(e,t){return $c()<=Yi.in.DEBUG&&Xc("QueryEngine","Using full collection scan to execute query:",qh(t)),this.On.getDocumentsMatchingQuery(e,t,Il.min())}}]),e}(),_v=function(){function e(t,n,r,i){d(this,e),this.persistence=t,this.Un=n,this.k=i,this.qn=new Rf(_l),this.Kn=new nv(function(e){return lh(e)},hh),this.jn=Il.min(),this.An=t.getMutationQueue(r),this.Qn=t.getRemoteDocumentCache(),this.He=t.getTargetCache(),this.Wn=new mv(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=t.getBundleCache(),this.Un.Fn(this.Wn)}return f(e,[{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return e.collect(n,t.qn)})}}]),e}();function wv(e,t,n,r){return new _v(e,t,n,r)}function bv(e,t){return xv.apply(this,arguments)}function xv(){return(xv=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),i=r.An,o=r.Wn,e.next=4,r.persistence.runTransaction("Handle user change","readonly",function(e){var t;return r.An.getAllMutationBatches(e).next(function(a){return t=a,i=r.persistence.getMutationQueue(n),o=new mv(r.Qn,i,r.persistence.getIndexManager()),i.getAllMutationBatches(e)}).next(function(n){var r,i=[],a=[],u=qf(),c=s(t);try{for(c.s();!(r=c.n()).done;){var l=r.value;i.push(l.batchId);var h,f=s(l.mutations);try{for(f.s();!(h=f.n()).done;){var d=h.value;u=u.add(d.key)}}catch(_){f.e(_)}finally{f.f()}}}catch(_){c.e(_)}finally{c.f()}var p,v=s(n);try{for(v.s();!(p=v.n()).done;){var g=p.value;a.push(g.batchId);var m,y=s(g.mutations);try{for(y.s();!(m=y.n()).done;){var k=m.value;u=u.add(k.key)}}catch(_){y.e(_)}finally{y.f()}}}catch(_){v.e(_)}finally{v.f()}return o.vn(e,u).next(function(e){return{Gn:e,removedBatchIds:i,addedBatchIds:a}})})});case 4:return a=e.sent,e.abrupt("return",(r.An=i,r.Wn=o,r.Un.Fn(r.Wn),a));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Iv(e,t){var n=ol(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(e){var r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,o=i.keys(),a=tp.resolve();return o.forEach(function(e){a=a.next(function(){return r.getEntry(t,e)}).next(function(t){var o=n.docVersions.get(e);il(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),a.next(function(){return e.An.removeMutationBatch(t,i)})}(n,e,t,i).next(function(){return i.apply(e)}).next(function(){return n.An.performConsistencyCheck(e)}).next(function(){return n.Wn.vn(e,r)})})}function Tv(e){var t=ol(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",function(e){return t.He.getLastRemoteSnapshotVersion(e)})}function Cv(e,t){var n=ol(e),r=t.snapshotVersion,i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(e){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;var a=[];t.targetChanges.forEach(function(t,o){var u=i.get(o);if(u){a.push(n.He.removeMatchingKeys(e,t.removedDocuments,o).next(function(){return n.He.addMatchingKeys(e,t.addedDocuments,o)}));var s,c,l,h=t.resumeToken;if(h.approximateByteSize()>0){var f=u.withResumeToken(h,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(o,f),s=u,l=t,il((c=f).resumeToken.approximateByteSize()>0),(0===s.resumeToken.approximateByteSize()||c.snapshotVersion.toMicroseconds()-s.snapshotVersion.toMicroseconds()>=3e8||l.addedDocuments.size+l.modifiedDocuments.size+l.removedDocuments.size>0)&&a.push(n.He.updateTargetData(e,f))}}});var u=Lf();if(t.documentUpdates.forEach(function(r,i){t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Ev(e,o,t.documentUpdates,r,void 0).next(function(e){u=e})),!r.isEqual(Il.min())){var s=n.He.getLastRemoteSnapshotVersion(e).next(function(t){return n.He.setTargetsMetadata(e,e.currentSequenceNumber,r)});a.push(s)}return tp.waitFor(a).next(function(){return o.apply(e)}).next(function(){return n.Wn.Vn(e,u)}).next(function(){return u})}).then(function(e){return n.qn=i,e})}function Ev(e,t,n,r,i){var o=qf();return n.forEach(function(e){return o=o.add(e)}),t.getEntries(e,o).next(function(e){var o=Lf();return n.forEach(function(n,a){var u=e.get(n),s=(null==i?void 0:i.get(n))||r;a.isNoDocument()&&a.version.isEqual(Il.min())?(t.removeEntry(n,s),o=o.insert(n,a)):!u.isValidDocument()||a.version.compareTo(u.version)>0||0===a.version.compareTo(u.version)&&u.hasPendingWrites?(t.addEntry(a,s),o=o.insert(n,a)):Xc("LocalStore","Ignoring outdated watch update for ",n,". Current version:",u.version," Watch version:",a.version)}),o})}function Sv(e,t){var n=ol(e);return n.persistence.runTransaction("Get next mutation batch","readonly",function(e){return void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)})}function Rv(e,t){var n=ol(e);return n.persistence.runTransaction("Allocate target","readwrite",function(e){var r;return n.He.getTargetData(e,t).next(function(i){return i?(r=i,tp.resolve(r)):n.He.allocateTargetId(e).next(function(i){return r=new vp(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next(function(){return r})})})}).then(function(e){var r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e})}function Av(e,t,n){return Nv.apply(this,arguments)}function Nv(){return(Nv=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ol(t),o=i.qn.get(n),a=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",a,function(e){return i.persistence.referenceDelegate.removeTarget(e,o)});case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),ap(e.t1)){e.next=12;break}throw e.t1;case 12:Xc("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.qn=i.qn.remove(n),i.Kn.delete(o.target);case 14:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}function Ov(e,t,n){var r=ol(e),i=Il.min(),o=qf();return r.persistence.runTransaction("Execute query","readonly",function(e){return function(e,t,n){var r=ol(e),i=r.Kn.get(n);return void 0!==i?tp.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Fh(t)).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next(function(e){o=e})}).next(function(){return r.Un.getDocumentsMatchingQuery(e,t,n?i:Il.min(),n?o:qf())}).next(function(e){return{documents:e,zn:o}})})}function Pv(e,t){var n=ol(e),r=ol(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(e){return r.Et(e,t).next(function(e){return e?e.target:null})})}function Dv(e){var t=ol(e);return t.persistence.runTransaction("Get new document changes","readonly",function(e){return function(e,t,n){var r=ol(e),i=Lf(),o=kp(n),a=uv(t),u=IDBKeyRange.lowerBound(o,!0);return a.jt({index:zd.readTimeIndex,range:u},function(e,t){var n=mp(r.k,t);i=i.insert(n.key,n),o=t.readTime}).next(function(){return{In:i,readTime:_p(o)}})}(t.Qn,e,t.jn)}).then(function(e){var n=e.In,r=e.readTime;return t.jn=r,n})}function Lv(){return(Lv=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ol(t),e.abrupt("return",n.persistence.runTransaction("Synchronize last document change read time","readonly",function(e){return t=uv(e),n=Il.min(),t.jt({index:zd.readTimeIndex,reverse:!0},function(e,t,r){t.readTime&&(n=_p(t.readTime)),r.done()}).next(function(){return n});var t,n}).then(function(e){n.jn=e}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mv(){return(Mv=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,u,c,l,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:o=ol(t),a=qf(),u=Lf(),c=Vf(),l=s(r);try{for(l.s();!(h=l.n()).done;)f=h.value,d=n.Hn(f.metadata.name),f.document&&(a=a.add(d)),u=u.insert(d,n.Jn(f)),c=c.insert(d,n.Yn(f.metadata.readTime))}catch(m){l.e(m)}finally{l.f()}return p=o.Qn.newChangeBuffer({trackRemovals:!0}),e.next=7,Rv(o,(g=i,Fh(Ah(Rl.fromString("__bundle__/docs/".concat(g))))));case 7:return v=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",function(e){return Ev(e,p,u,Il.min(),c).next(function(t){return p.apply(e),t}).next(function(t){return o.He.removeMatchingKeysForTargetId(e,v.targetId).next(function(){return o.He.addMatchingKeys(e,a,v.targetId)}).next(function(){return o.Wn.Vn(e,t)}).next(function(){return t})})}));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Fv(e,t){return Uv.apply(this,arguments)}function Uv(){return(Uv=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:qf(),e.next=3,Rv(t,Fh(Cp(n.bundledQuery)));case 3:return i=e.sent,o=ol(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",function(e){var t=od(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ye.saveNamedQuery(e,n);var a=i.withResumeToken(Pl.EMPTY_BYTE_STRING,t);return o.qn=o.qn.insert(a.targetId,a),o.He.updateTargetData(e,a).next(function(){return o.He.removeMatchingKeysForTargetId(e,i.targetId)}).next(function(){return o.He.addMatchingKeys(e,r,i.targetId)}).next(function(){return o.Ye.saveNamedQuery(e,n)})}));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Vv=function(){function e(t){d(this,e),this.k=t,this.Xn=new Map,this.Zn=new Map}return f(e,[{key:"getBundleMetadata",value:function(e,t){return tp.resolve(this.Xn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:od(n.createTime)}),tp.resolve()}},{key:"getNamedQuery",value:function(e,t){return tp.resolve(this.Zn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Zn.set(t.name,{name:(n=t).name,query:Cp(n.bundledQuery),readTime:od(n.readTime)}),tp.resolve();var n}}]),e}(),jv=function(){function e(){d(this,e),this.ts=new Of(qv.es),this.ns=new Of(qv.ss)}return f(e,[{key:"isEmpty",value:function(){return this.ts.isEmpty()}},{key:"addReference",value:function(e,t){var n=new qv(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}},{key:"rs",value:function(e,t){var n=this;e.forEach(function(e){return n.addReference(e,t)})}},{key:"removeReference",value:function(e,t){this.os(new qv(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach(function(e){return n.removeReference(e,t)})}},{key:"us",value:function(e){var t=this,n=new Zl(new Rl([])),r=new qv(n,e),i=new qv(n,e+1),o=[];return this.ns.forEachInRange([r,i],function(e){t.os(e),o.push(e.key)}),o}},{key:"hs",value:function(){var e=this;this.ts.forEach(function(t){return e.os(t)})}},{key:"os",value:function(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}},{key:"ls",value:function(e){var t=new Zl(new Rl([])),n=new qv(t,e),r=new qv(t,e+1),i=qf();return this.ns.forEachInRange([n,r],function(e){i=i.add(e.key)}),i}},{key:"containsKey",value:function(e){var t=new qv(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),qv=function(){function e(t,n){d(this,e),this.key=t,this.fs=n}return f(e,null,[{key:"es",value:function(e,t){return Zl.comparator(e.key,t.key)||_l(e.fs,t.fs)}},{key:"ss",value:function(e,t){return _l(e.fs,t.fs)||Zl.comparator(e.key,t.key)}}]),e}(),Bv=function(){function e(t,n){d(this,e),this.Jt=t,this.referenceDelegate=n,this.An=[],this.ds=1,this.ws=new Of(qv.es)}return f(e,[{key:"checkEmpty",value:function(e){return tp.resolve(0===this.An.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ds;this.ds++;var o=new dp(i,t,n,r);this.An.push(o);var a,u=s(r);try{for(u.s();!(a=u.n()).done;){var c=a.value;this.ws=this.ws.add(new qv(c.key,i)),this.Jt.addToCollectionParentIndex(e,c.key.path.popLast())}}catch(l){u.e(l)}finally{u.f()}return tp.resolve(o)}},{key:"lookupMutationBatch",value:function(e,t){return tp.resolve(this._s(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this.gs(t+1),r=n<0?0:n;return tp.resolve(this.An.length>r?this.An[r]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return tp.resolve(0===this.An.length?-1:this.ds-1)}},{key:"getAllMutationBatches",value:function(e){return tp.resolve(this.An.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new qv(t,0),i=new qv(t,Number.POSITIVE_INFINITY),o=[];return this.ws.forEachInRange([r,i],function(e){var t=n._s(e.fs);o.push(t)}),tp.resolve(o)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Of(_l);return t.forEach(function(e){var t=new qv(e,0),i=new qv(e,Number.POSITIVE_INFINITY);n.ws.forEachInRange([t,i],function(e){r=r.add(e.fs)})}),tp.resolve(this.ys(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Zl.isDocumentKey(i)||(i=i.child(""));var o=new qv(new Zl(i),0),a=new Of(_l);return this.ws.forEachWhile(function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.fs)),!0)},o),tp.resolve(this.ys(a))}},{key:"ys",value:function(e){var t=this,n=[];return e.forEach(function(e){var r=t._s(e);null!==r&&n.push(r)}),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;il(0===this.ps(t.batchId,"removed")),this.An.shift();var r=this.ws;return tp.forEach(t.mutations,function(i){var o=new qv(i.key,t.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(function(){n.ws=r})}},{key:"ee",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new qv(t,0),r=this.ws.firstAfterOrEqual(n);return tp.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return tp.resolve()}},{key:"ps",value:function(e,t){return this.gs(e)}},{key:"gs",value:function(e){return 0===this.An.length?0:e-this.An[0].batchId}},{key:"_s",value:function(e){var t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}]),e}(),zv=function(){function e(t,n){d(this,e),this.Jt=t,this.Ts=n,this.docs=new Rf(Zl.comparator),this.size=0}return f(e,[{key:"addEntry",value:function(e,t,n){var r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:a,readTime:n}),this.size+=a-o,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return tp.resolve(n?n.document.clone():uh.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Lf();return t.forEach(function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.clone():uh.newInvalidDocument(e))}),tp.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){for(var r=Lf(),i=new Zl(t.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var a=o.getNext(),u=a.key,s=a.value,c=s.document,l=s.readTime;if(!t.path.isPrefixOf(u.path))break;l.compareTo(n)<=0||Bh(t,c)&&(r=r.insert(c.key,c.clone()))}return tp.resolve(r)}},{key:"Es",value:function(e,t){return tp.forEach(this.docs,function(e){return t(e)})}},{key:"newChangeBuffer",value:function(e){return new Zv(this)}},{key:"getSize",value:function(e){return tp.resolve(this.size)}}]),e}(),Zv=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).De=e,r}return f(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(t.De.addEntry(e,i.document,t.getReadTime(r))):t.De.removeEntry(r)}),tp.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.De.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.De.getEntries(e,t)}}]),n}(rv),Hv=function(){function e(t){d(this,e),this.persistence=t,this.Is=new nv(function(e){return lh(e)},hh),this.lastRemoteSnapshotVersion=Il.min(),this.highestTargetId=0,this.As=0,this.Rs=new jv,this.targetCount=0,this.Ps=zp.ie()}return f(e,[{key:"forEachTarget",value:function(e,t){return this.Is.forEach(function(e,n){return t(n)}),tp.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return tp.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return tp.resolve(this.As)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Ps.next(),tp.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),tp.resolve()}},{key:"ce",value:function(e){this.Is.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Ps=new zp(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.ce(t),this.targetCount+=1,tp.resolve()}},{key:"updateTargetData",value:function(e,t){return this.ce(t),tp.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,tp.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,o=[];return this.Is.forEach(function(a,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Is.delete(a),o.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),tp.waitFor(o).next(function(){return i})}},{key:"getTargetCount",value:function(e){return tp.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Is.get(t)||null;return tp.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Rs.rs(t,n),tp.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Rs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(function(t){i.push(r.markPotentiallyOrphaned(e,t))}),tp.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Rs.us(t),tp.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Rs.ls(t);return tp.resolve(n)}},{key:"containsKey",value:function(e,t){return tp.resolve(this.Rs.containsKey(t))}}]),e}(),Gv=function(){function e(t,n){var r=this;d(this,e),this.bs={},this.Be=new ml(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=t(this),this.He=new Hv(this),this.Jt=new Ap,this.Je=new zv(this.Jt,function(e){return r.referenceDelegate.vs(e)}),this.k=new gp(n),this.Ye=new Vv(this.k)}return f(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ue=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ue}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(){return this.Jt}},{key:"getMutationQueue",value:function(e){var t=this.bs[e.toKey()];return t||(t=new Bv(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}},{key:"getTargetCache",value:function(){return this.He}},{key:"getRemoteDocumentCache",value:function(){return this.Je}},{key:"getBundleCache",value:function(){return this.Ye}},{key:"runTransaction",value:function(e,t,n){var r=this;Xc("MemoryPersistence","Starting transaction:",e);var i=new Wv(this.Be.next());return this.referenceDelegate.Vs(),n(i).next(function(e){return r.referenceDelegate.Ss(i).next(function(){return e})}).toPromise().then(function(e){return i.raiseOnCommittedEvent(),e})}},{key:"Ds",value:function(e,t){return tp.or(Object.values(this.bs).map(function(n){return function(){return n.containsKey(e,t)}}))}}]),e}(),Wv=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return n}(ep),Kv=function(){function e(t){d(this,e),this.persistence=t,this.Cs=new jv,this.Ns=null}return f(e,[{key:"xs",get:function(){if(this.Ns)return this.Ns;throw rl()}},{key:"addReference",value:function(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),tp.resolve()}},{key:"removeReference",value:function(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),tp.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.xs.add(t.toString()),tp.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.Cs.us(t.targetId).forEach(function(e){return n.xs.add(e.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(function(e){e.forEach(function(e){return n.xs.add(e.toString())})}).next(function(){return r.removeTargetData(e,t)})}},{key:"Vs",value:function(){this.Ns=new Set}},{key:"Ss",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return tp.forEach(this.xs,function(r){var i=Zl.fromPath(r);return t.$s(e,i).next(function(e){e||n.removeEntry(i)})}).next(function(){return t.Ns=null,n.apply(e)})}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.$s(e,t).next(function(e){e?n.xs.delete(t.toString()):n.xs.add(t.toString())})}},{key:"vs",value:function(e){return 0}},{key:"$s",value:function(e,t){var n=this;return tp.or([function(){return tp.resolve(n.Cs.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Ds(e,t)}])}}],[{key:"ks",value:function(t){return new e(t)}}]),e}();function Yv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Qv(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Jv(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var $v=function(){function e(t,n,r,i){d(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return f(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n,r){var i,o=JSON.parse(r),a="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return a&&o.error&&((a="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new ul(o.error.code,o.error.message))),a?new e(t,n,o.state,i):(el("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Xv=function(){function e(t,n,r){d(this,e),this.targetId=t,this.state=n,this.error=r}return f(e,[{key:"Os",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Fs",value:function(t,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&((o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ul(i.error.code,i.error.message))),o?new e(t,i.state,r):(el("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),eg=function(){function e(t,n){d(this,e),this.clientId=t,this.activeTargetIds=n}return f(e,null,[{key:"Fs",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=zf(),a=0;i&&a<r.activeTargetIds.length;++a)i=zl(r.activeTargetIds[a]),o=o.add(r.activeTargetIds[a]);return i?new e(t,o):(el("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),tg=function(){function e(t,n){d(this,e),this.clientId=t,this.onlineState=n}return f(e,null,[{key:"Fs",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(el("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),ng=function(){function e(){d(this,e),this.activeTargetIds=zf()}return f(e,[{key:"Ms",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Ls",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Os",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),rg=function(){function e(t,n,r,i,o){d(this,e),this.window=t,this.Oe=n,this.persistenceKey=r,this.Bs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new Rf(_l),this.started=!1,this.js=[];var a,u=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.Qs=Yv(this.persistenceKey,this.Bs),this.Ws="firestore_sequence_number_".concat(this.persistenceKey),this.Ks=this.Ks.insert(this.Bs,new ng),this.Gs=new RegExp("^firestore_clients_".concat(u,"_([^_]*)$")),this.zs=new RegExp("^firestore_mutations_".concat(u,"_(\\d+)(?:_(.*))?$")),this.Hs=new RegExp("^firestore_targets_".concat(u,"_(\\d+)$")),this.Js="firestore_online_state_".concat(this.persistenceKey),this.Ys=(a=this.persistenceKey,"firestore_bundle_loaded_".concat(a)),this.window.addEventListener("storage",this.Us)}return f(e,[{key:"start",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r,i,o,a,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.syncEngine.Tn();case 2:n=t.sent,r=s(n),t.prev=4,r.s();case 6:if((i=r.n()).done){t.next=14;break}if((o=i.value)!==e.Bs){t.next=10;break}return t.abrupt("continue",12);case 10:(a=e.getItem(Yv(e.persistenceKey,o)))&&(u=eg.Fs(o,a))&&(e.Ks=e.Ks.insert(u.clientId,u));case 12:t.next=6;break;case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(4),r.e(t.t0);case 19:return t.prev=19,r.f(),t.finish(19);case 22:e.Xs(),(c=e.storage.getItem(e.Js))&&(l=e.Zs(c))&&e.ti(l),h=s(e.js);try{for(h.s();!(f=h.n()).done;)d=f.value,e.qs(d)}catch(p){h.e(p)}finally{h.f()}e.js=[],e.window.addEventListener("pagehide",function(){return e.shutdown()}),e.started=!0;case 28:case"end":return t.stop()}},t,null,[[4,16,19,22]])}))()}},{key:"writeSequenceNumber",value:function(e){this.setItem(this.Ws,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.ei(this.Ks)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.Ks.forEach(function(n,r){r.activeTargetIds.has(e)&&(t=!0)}),t}},{key:"addPendingMutation",value:function(e){this.ni(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.ni(e,t,n),this.si(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Jv(this.persistenceKey,e));if(n){var r=Xv.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.ii.Ls(e),this.Xs()}},{key:"isLocalQueryTarget",value:function(e){return this.ii.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Jv(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.ri(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach(function(e){r.si(e)}),this.currentUser=e,n.forEach(function(e){r.addPendingMutation(e)})}},{key:"setOnlineState",value:function(e){this.oi(e)}},{key:"notifyBundleLoaded",value:function(){this.ai()}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Xc("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Xc("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Xc("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"qs",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Xc("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void el("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Hi.Z)(regeneratorRuntime.mark(function e(){var r,i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=41;break}if(null===n.key){e.next=39;break}if(!t.Gs.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.ci(n.key),e.abrupt("return",t.ui(r,null));case 6:if(!(i=t.hi(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.ui(i.clientId,i));case 9:e.next=39;break;case 11:if(!t.zs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.li(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.fi(o));case 16:e.next=39;break;case 18:if(!t.Hs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(a=t.di(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.wi(a));case 23:e.next=39;break;case 25:if(n.key!==t.Js){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.Zs(n.newValue))){e.next=30;break}return e.abrupt("return",t.ti(u));case 30:e.next=39;break;case 32:if(n.key!==t.Ws){e.next=37;break}(s=function(e){var t=ml.I;if(null!=e)try{var n=JSON.parse(e);il("number"==typeof n),t=n}catch(n){el("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(n.newValue))!==ml.I&&t.sequenceNumberHandler(s),e.next=39;break;case 37:if(n.key!==t.Ys){e.next=39;break}return e.abrupt("return",t.syncEngine._i());case 39:e.next=42;break;case 41:t.js.push(n);case 42:case"end":return e.stop()}},e)})))}}},{key:"ii",get:function(){return this.Ks.get(this.Bs)}},{key:"Xs",value:function(){this.setItem(this.Qs,this.ii.Os())}},{key:"ni",value:function(e,t,n){var r=new $v(this.currentUser,e,t,n),i=Qv(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}},{key:"si",value:function(e){var t=Qv(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"oi",value:function(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}},{key:"ri",value:function(e,t,n){var r=Jv(this.persistenceKey,e),i=new Xv(e,t,n);this.setItem(r,i.Os())}},{key:"ai",value:function(){this.setItem(this.Ys,"value-not-used")}},{key:"ci",value:function(e){var t=this.Gs.exec(e);return t?t[1]:null}},{key:"hi",value:function(e,t){var n=this.ci(e);return eg.Fs(n,t)}},{key:"li",value:function(e,t){var n=this.zs.exec(e),r=Number(n[1]);return $v.Fs(new Yc(void 0!==n[2]?n[2]:null),r,t)}},{key:"di",value:function(e,t){var n=this.Hs.exec(e),r=Number(n[1]);return Xv.Fs(r,t)}},{key:"Zs",value:function(e){return tg.Fs(e)}},{key:"fi",value:function(e){var t=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.user.uid!==t.currentUser.uid){n.next=2;break}return n.abrupt("return",t.syncEngine.mi(e.batchId,e.state,e.error));case 2:Xc("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid));case 3:case"end":return n.stop()}},n)}))()}},{key:"wi",value:function(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}},{key:"ui",value:function(e,t){var n=this,r=t?this.Ks.insert(e,t):this.Ks.remove(e),i=this.ei(this.Ks),o=this.ei(r),a=[],u=[];return o.forEach(function(e){i.has(e)||a.push(e)}),i.forEach(function(e){o.has(e)||u.push(e)}),this.syncEngine.yi(a,u).then(function(){n.Ks=r})}},{key:"ti",value:function(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"ei",value:function(e){var t=zf();return e.forEach(function(e,n){t=t.unionWith(n.activeTargetIds)}),t}}],[{key:"bt",value:function(e){return!(!e||!e.localStorage)}}]),e}(),ig=function(){function e(){d(this,e),this.pi=new ng,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return f(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Ti[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.pi.Ls(e)}},{key:"isLocalQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Ti[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.pi.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.pi.activeTargetIds.has(e)}},{key:"start",value:function(){return this.pi=new ng,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(){}}]),e}(),og=function(){function e(){d(this,e)}return f(e,[{key:"Ei",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),ag=function(){function e(){var t=this;d(this,e),this.Ii=function(){return t.Ai()},this.Ri=function(){return t.Pi()},this.bi=[],this.vi()}return f(e,[{key:"Ei",value:function(e){this.bi.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}},{key:"vi",value:function(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}},{key:"Ai",value:function(){Xc("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=s(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Pi",value:function(){Xc("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=s(this.bi);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"bt",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),ug={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},sg=function(){function e(t){d(this,e),this.Vi=t.Vi,this.Si=t.Si}return f(e,[{key:"Di",value:function(e){this.Ci=e}},{key:"Ni",value:function(e){this.ki=e}},{key:"onMessage",value:function(e){this.xi=e}},{key:"close",value:function(){this.Si()}},{key:"send",value:function(e){this.Vi(e)}},{key:"$i",value:function(){this.Ci()}},{key:"Fi",value:function(e){this.ki(e)}},{key:"Oi",value:function(e){this.xi(e)}}]),e}(),cg=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return f(n,[{key:"Ki",value:function(e,t,n,r){return new Promise(function(i,o){var a=new Wc;a.listenOnce(Bc.COMPLETE,function(){try{switch(a.getLastErrorCode()){case qc.NO_ERROR:var t=a.getResponseJson();Xc("Connection","XHR received:",JSON.stringify(t)),i(t);break;case qc.TIMEOUT:Xc("Connection",'RPC "'+e+'" timed out'),o(new ul(al.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:var n=a.getStatus();if(Xc("Connection",'RPC "'+e+'" failed with status:',n,"response text:",a.getResponseText()),n>0){var r=a.getResponseJson().error;if(r&&r.status&&r.message){var u=(s=r.status,c=s.toLowerCase().replace(/_/g,"-"),Object.values(al).indexOf(c)>=0?c:al.UNKNOWN);o(new ul(u,r.message))}else o(new ul(al.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new ul(al.UNAVAILABLE,"Connection failed."));break;default:rl()}}finally{Xc("Connection",'RPC "'+e+'" completed.')}var s,c});var u=JSON.stringify(r);a.send(t,"POST",u,n,15)})}},{key:"Qi",value:function(e,t,n){var r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Vc(),o=jc(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(a.xmlHttpFactory=new Hc({})),this.qi(a.initMessageHeaders,t,n),(0,Ki.uI)()||(0,Ki.b$)()||(0,Ki.d)()||(0,Ki.w1)()||(0,Ki.Mn)()||(0,Ki.ru)()||(a.httpHeadersOverwriteParam="$httpHeaders");var u=r.join("");Xc("Connection","Creating WebChannel: "+u,a);var s=i.createWebChannel(u,a),c=!1,l=!1,h=new sg({Vi:function(e){l?Xc("Connection","Not sending because WebChannel is closed:",e):(c||(Xc("Connection","Opening WebChannel transport."),s.open(),c=!0),Xc("Connection","WebChannel sending:",e),s.send(e))},Si:function(){return s.close()}}),f=function(e,t,n){e.listen(t,function(e){try{n(e)}catch(t){setTimeout(function(){throw t},0)}})};return f(s,Gc.EventType.OPEN,function(){l||Xc("Connection","WebChannel transport opened.")}),f(s,Gc.EventType.CLOSE,function(){l||(l=!0,Xc("Connection","WebChannel transport closed"),h.Fi())}),f(s,Gc.EventType.ERROR,function(e){l||(l=!0,tl("Connection","WebChannel transport errored:",e),h.Fi(new ul(al.UNAVAILABLE,"The operation could not be completed")))}),f(s,Gc.EventType.MESSAGE,function(e){var t;if(!l){var n=e.data[0];il(!!n);var r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Xc("Connection","WebChannel received error:",i);var o=i.status,a=function(e){var t=bf[e];if(void 0!==t)return Sf(t)}(o),u=i.message;void 0===a&&(a=al.INTERNAL,u="Unknown error status: "+o+" with message "+i.message),l=!0,h.Fi(new ul(a,u)),s.close()}else Xc("Connection","WebChannel received:",n),h.Oi(n)}}),f(o,zc.STAT_EVENT,function(e){e.stat===Zc.PROXY?Xc("Connection","Detected buffering proxy"):e.stat===Zc.NOPROXY&&Xc("Connection","Detected no buffering proxy")}),setTimeout(function(){h.$i()},0),h}}]),n}(function(){function e(t){d(this,e),this.databaseInfo=t,this.databaseId=t.databaseId,this.Mi=(t.ssl?"https":"http")+"://"+t.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return f(e,[{key:"Bi",value:function(e,t,n,r,i){var o=this.Ui(e,t);Xc("RestConnection","Sending: ",o,n);var a={};return this.qi(a,r,i),this.Ki(e,o,a,n).then(function(e){return Xc("RestConnection","Received: ",e),e},function(t){throw tl("RestConnection","".concat(e," failed with error: "),t,"url: ",o,"request:",n),t})}},{key:"ji",value:function(e,t,n,r,i){return this.Bi(e,t,n,r,i)}},{key:"qi",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Qc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(function(t,n){return e[n]=t}),n&&n.headers.forEach(function(t,n){return e[n]=t})}},{key:"Ui",value:function(e,t){return"".concat(this.Mi,"/v1/").concat(t,":").concat(ug[e])}}]),e}());function lg(){return"undefined"!=typeof window?window:null}function hg(){return"undefined"!=typeof document?document:null}function fg(e){return new td(e,!0)}var dg=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;d(this,e),this.Oe=t,this.timerId=n,this.Wi=r,this.Gi=i,this.zi=o,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}return f(e,[{key:"reset",value:function(){this.Hi=0}},{key:"Xi",value:function(){this.Hi=this.zi}},{key:"Zi",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Hi+this.tr()),r=Math.max(0,Date.now()-this.Yi),i=Math.max(0,n-r);i>0&&Xc("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Hi," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,i,function(){return t.Yi=Date.now(),e()}),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}},{key:"er",value:function(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}},{key:"cancel",value:function(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}},{key:"tr",value:function(){return(Math.random()-.5)*this.Hi}}]),e}(),pg=function(){function e(t,n,r,i,o,a,u,s){d(this,e),this.Oe=t,this.nr=r,this.sr=i,this.ir=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new dg(t,n)}return f(e,[{key:"hr",value:function(){return 1===this.state||5===this.state||this.lr()}},{key:"lr",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.dr()}},{key:"stop",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.hr(),!t.t0){t.next=4;break}return t.next=4,e.close(0);case 4:case"end":return t.stop()}},t)}))()}},{key:"wr",value:function(){this.state=0,this.ur.reset()}},{key:"_r",value:function(){var e=this;this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,function(){return e.mr()}))}},{key:"gr",value:function(e){this.yr(),this.stream.send(e)}},{key:"mr",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.lr()){t.next=2;break}return t.abrupt("return",e.close(0));case 2:case"end":return t.stop()}},t)}))()}},{key:"yr",value:function(){this.ar&&(this.ar.cancel(),this.ar=null)}},{key:"pr",value:function(){this.cr&&(this.cr.cancel(),this.cr=null)}},{key:"close",value:function(e,t){var n=this;return(0,Hi.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return n.yr(),n.pr(),n.ur.cancel(),n.rr++,4!==e?n.ur.reset():t&&t.code===al.RESOURCE_EXHAUSTED?(el(t.toString()),el("Using maximum backoff delay to prevent overloading the backend."),n.ur.Xi()):t&&t.code===al.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Tr(),n.stream.close(),n.stream=null),n.state=e,r.next=9,n.listener.Ni(t);case 9:case"end":return r.stop()}},r)}))()}},{key:"Tr",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var n=this.Er(this.rr),r=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(function(n){var i=t(n,2),o=i[0],a=i[1];e.rr===r&&e.Ir(o,a)},function(t){n(function(){var n=new ul(al.UNKNOWN,"Fetching auth token failed: "+t.message);return e.Ar(n)})})}},{key:"Ir",value:function(e,t){var n=this,r=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(function(){r(function(){return n.state=2,n.cr=n.Oe.enqueueAfterDelay(n.sr,1e4,function(){return n.lr()&&(n.state=3),Promise.resolve()}),n.listener.Di()})}),this.stream.Ni(function(e){r(function(){return n.Ar(e)})}),this.stream.onMessage(function(e){r(function(){return n.onMessage(e)})})}},{key:"dr",value:function(){var e=this;this.state=5,this.ur.Zi((0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}},t)})))}},{key:"Ar",value:function(e){return Xc("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Er",value:function(e){var t=this;return function(n){t.Oe.enqueueAndForget(function(){return t.rr===e?n():(Xc("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}}}]),e}(),vg=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a,u){var s;return d(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,o,u)).k=a,s}return f(n,[{key:"Rr",value:function(e,t){return this.ir.Qi("Listen",e,t)}},{key:"onMessage",value:function(e){this.ur.reset();var t=function(e,t){var n,r;if("targetChange"in t){var i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:rl(),o=t.targetChange.targetIds||[],a=function(e,t){return e.C?(il(void 0===t||"string"==typeof t),Pl.fromBase64String(t||"")):(il(void 0===t||t instanceof Uint8Array),Pl.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),u=t.targetChange.cause,s=u&&function(e){var t=void 0===e.code?al.UNKNOWN:Sf(e.code);return new ul(t,e.message||"")}(u);n=new Kf(i,o,a,s||null)}else if("documentChange"in t){var c=t.documentChange,l=cd(e,c.document.name),h=od(c.document.updateTime),f=new oh({mapValue:{fields:c.document.fields}}),d=uh.newFoundDocument(l,h,f);n=new Gf(c.targetIds||[],c.removedTargetIds||[],d.key,d)}else if("documentDelete"in t){var p=t.documentDelete,v=cd(e,p.document),g=p.readTime?od(p.readTime):Il.min(),m=uh.newNoDocument(v,g);n=new Gf([],p.removedTargetIds||[],m.key,m)}else if("documentRemove"in t){var y=t.documentRemove,k=cd(e,y.document);n=new Gf([],y.removedTargetIds||[],k,null)}else{if(!("filter"in t))return rl();var _=t.filter,w=new Cf(_.count||0);n=new Wf(_.targetId,w)}return n}(this.k,e),n=function(e){if(!("targetChange"in e))return Il.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Il.min():t.readTime?od(t.readTime):Il.min()}(e);return this.listener.Pr(t,n)}},{key:"br",value:function(e){var t,n,r,i,o={};o.database=fd(this.k),o.addTarget=(t=this.k,i=(n=e).target,(r=fh(i)?{documents:yd(t,i)}:{query:kd(t,i)}).targetId=n.targetId,n.resumeToken.approximateByteSize()>0?r.resumeToken=rd(t,n.resumeToken):n.snapshotVersion.compareTo(Il.min())>0&&(r.readTime=nd(t,n.snapshotVersion.toTimestamp())),r);var a=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return rl()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);a&&(o.labels=a),this.gr(o)}},{key:"vr",value:function(e){var t={};t.database=fd(this.k),t.removeTarget=e,this.gr(t)}}]),n}(pg),gg=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a,u){var s;return d(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,o,u)).k=a,s.Vr=!1,s}return f(n,[{key:"Sr",get:function(){return this.Vr}},{key:"start",value:function(){this.Vr=!1,this.lastStreamToken=void 0,i(b(n.prototype),"start",this).call(this)}},{key:"Tr",value:function(){this.Vr&&this.Dr([])}},{key:"Rr",value:function(e,t){return this.ir.Qi("Write",e,t)}},{key:"onMessage",value:function(e){if(il(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();var t=function(e,t){return e&&e.length>0?(il(void 0!==t),e.map(function(e){return function(e,t){var n=od(e.updateTime?e.updateTime:t);return n.isEqual(Il.min())&&(n=od(t)),new sf(n,e.transformResults||[])}(e,t)})):[]}(e.writeResults,e.commitTime),n=od(e.commitTime);return this.listener.Cr(n,t)}return il(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}},{key:"kr",value:function(){var e={};e.database=fd(this.k),this.gr(e)}},{key:"Dr",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map(function(e){return gd(t.k,e)})};this.gr(n)}}]),n}(pg),mg=function(e){p(r,e);var n=v(r);function r(e,t,i,o){var a;return d(this,r),(a=n.call(this)).authCredentials=e,a.appCheckCredentials=t,a.ir=i,a.k=o,a.$r=!1,a}return f(r,[{key:"Fr",value:function(){if(this.$r)throw new ul(al.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"Bi",value:function(e,n,r){var i=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(o){var a=t(o,2),u=a[0],s=a[1];return i.ir.Bi(e,n,r,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===al.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ul(al.UNKNOWN,e.toString())})}},{key:"ji",value:function(e,n,r){var i=this;return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(function(o){var a=t(o,2),u=a[0],s=a[1];return i.ir.ji(e,n,r,u,s)}).catch(function(e){throw"FirebaseError"===e.name?(e.code===al.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ul(al.UNKNOWN,e.toString())})}},{key:"terminate",value:function(){this.$r=!0}}]),r}(function(){return function e(){d(this,e)}}()),yg=function(){function e(t,n){d(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}return f(e,[{key:"Br",value:function(){var e=this;0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return e.Mr=null,e.qr("Backend didn't respond within 10 seconds."),e.Ur("Offline"),Promise.resolve()}))}},{key:"Kr",value:function(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.Ur("Offline")))}},{key:"set",value:function(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}},{key:"Ur",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"qr",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.Lr?(el(t),this.Lr=!1):Xc("OnlineStateTracker",t)}},{key:"jr",value:function(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}]),e}(),kg=function e(t,n,r,i,o){d(this,e);var a=this;this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=o,this.Hr.Ei(function(e){r.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Ag(a),!e.t0){e.next=5;break}return Xc("RemoteStore","Restarting streams for network reachability change."),e.next=5,(t=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ol(t)).Gr.add(4),e.next=4,bg(n);case 4:return n.Jr.set("Unknown"),n.Gr.delete(4),e.next=8,_g(n);case 8:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)})(a);case 5:case"end":return e.stop()}},e)})))}),this.Jr=new yg(r,i)};function _g(e){return wg.apply(this,arguments)}function wg(){return(wg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ag(t)){e.next=18;break}n=s(t.zr),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}},e,null,[[2,12,15,18]])}))).apply(this,arguments)}function bg(e){return xg.apply(this,arguments)}function xg(){return(xg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n,r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=s(t.zr),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[1,11,14,17]])}))).apply(this,arguments)}function Ig(e,t){var n=ol(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),Rg(n)?Sg(n):rm(n).lr()&&Cg(n,t))}function Tg(e,t){var n=ol(e),r=rm(n);n.Wr.delete(t),r.lr()&&Eg(n,t),0===n.Wr.size&&(r.lr()?r._r():Ag(n)&&n.Jr.set("Unknown"))}function Cg(e,t){e.Yr.X(t.targetId),rm(e).br(t)}function Eg(e,t){e.Yr.X(t),rm(e).vr(t)}function Sg(e){e.Yr=new Qf({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},Et:function(t){return e.Wr.get(t)||null}}),rm(e).start(),e.Jr.Br()}function Rg(e){return Ag(e)&&!rm(e).hr()&&e.Wr.size>0}function Ag(e){return 0===ol(e).Gr.size}function Ng(e){e.Yr=void 0}function Og(e){return Pg.apply(this,arguments)}function Pg(){return(Pg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.Wr.forEach(function(e,n){Cg(t,e)});case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dg(e,t){return Lg.apply(this,arguments)}function Lg(){return(Lg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ng(t),Rg(t)?(t.Jr.Kr(n),Sg(t)):t.Jr.set("Unknown");case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mg(e,t,n){return Fg.apply(this,arguments)}function Fg(){return(Fg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.Jr.set("Online"),!(n instanceof Kf&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,(o=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=s(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(a=o.value,e.t0=t.Wr.has(a),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(a,r);case 10:t.Wr.delete(a),t.Yr.removeTarget(a);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}},e,null,[[2,16,19,22]])})),function(e,t){return o.apply(this,arguments)})(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Xc("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ug(t,e.t0);case 11:e.next=29;break;case 13:if(n instanceof Gf?t.Yr.ot(n):n instanceof Wf?t.Yr.dt(n):t.Yr.ut(n),r.isEqual(Il.min())){e.next=29;break}return e.prev=14,e.next=17,Tv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.Yr.gt(t);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(function(t){var n=e.Wr.get(t);if(n){e.Wr.set(t,n.withResumeToken(Pl.EMPTY_BYTE_STRING,n.snapshotVersion)),Eg(e,t);var r=new vp(n.target,t,1,n.sequenceNumber);Cg(e,r)}}),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 22:e.next=29;break;case 24:return e.prev=24,e.t2=e.catch(14),Xc("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ug(t,e.t2);case 29:case"end":return e.stop()}},e,null,[[1,6],[14,24]])}))).apply(this,arguments)}function Ug(e,t,n){return Vg.apply(this,arguments)}function Vg(){return(Vg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(ap(n)){e.next=2;break}throw n;case 2:return t.Gr.add(1),e.next=5,bg(t);case 5:t.Jr.set("Offline"),r||(r=function(){return Tv(t.localStore)}),t.asyncQueue.enqueueRetryable((0,Hi.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Xc("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.Gr.delete(1),e.next=6,_g(t);case 6:case"end":return e.stop()}},e)})));case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jg(e,t){return t().catch(function(n){return Ug(e,n,t)})}function qg(e){return Bg.apply(this,arguments)}function Bg(){return(Bg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=ol(t),r=im(n),i=n.Qr.length>0?n.Qr[n.Qr.length-1].batchId:-1;case 2:if(!zg(n)){e.next=19;break}return e.prev=3,e.next=6,Sv(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.Qr.length&&r._r(),e.abrupt("break",19);case 10:i=o.batchId,Zg(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ug(n,e.t0);case 17:e.next=2;break;case 19:Hg(n)&&Gg(n);case 20:case"end":return e.stop()}},e,null,[[3,13]])}))).apply(this,arguments)}function zg(e){return Ag(e)&&e.Qr.length<10}function Zg(e,t){e.Qr.push(t);var n=im(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Hg(e){return Ag(e)&&!im(e).hr()&&e.Qr.length>0}function Gg(e){im(e).start()}function Wg(e){return Kg.apply(this,arguments)}function Kg(){return(Kg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:im(t).kr();case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Yg(e){return Qg.apply(this,arguments)}function Qg(){return(Qg=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=im(t),r=s(t.Qr);try{for(r.s();!(i=r.n()).done;)o=i.value,n.Dr(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Jg(e,t,n){return $g.apply(this,arguments)}function $g(){return($g=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.Qr.shift(),o=pp.from(i,n,r),e.next=3,jg(t,function(){return t.remoteSyncer.applySuccessfulWrite(o)});case 3:return e.next=5,qg(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Xg(e,t){return em.apply(this,arguments)}function em(){return(em=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&im(t).Sr,!e.t0){e.next=4;break}return e.next=4,(r=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ef(i=n.code)||i===al.ABORTED){e.next=7;break}return r=t.Qr.shift(),im(t).wr(),e.next=5,jg(t,function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)});case 5:return e.next=7,qg(t);case 7:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(t,n);case 4:Hg(t)&&Gg(t);case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function tm(e,t){return nm.apply(this,arguments)}function nm(){return(nm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ol(t),!n){e.next=7;break}return r.Gr.delete(2),e.next=5,_g(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.Gr.add(2),e.next=12,bg(r);case 12:r.Jr.set("Unknown");case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function rm(e){return e.Xr||(e.Xr=(t=e.datastore,n=e.asyncQueue,r={Di:Og.bind(null,e),Ni:Dg.bind(null,e),Pr:Mg.bind(null,e)},(i=ol(t)).Fr(),new vg(n,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)),e.zr.push(function(){var t=(0,Hi.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.Xr.wr(),Rg(e)?Sg(e):e.Jr.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.Xr.stop();case 6:Ng(e);case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Xr;var t,n,r,i}function im(e){return e.Zr||(e.Zr=(t=e.datastore,n=e.asyncQueue,r={Di:Wg.bind(null,e),Ni:Xg.bind(null,e),Nr:Yg.bind(null,e),Cr:Jg.bind(null,e)},(i=ol(t)).Fr(),new gg(n,i.ir,i.authCredentials,i.appCheckCredentials,i.k,r)),e.zr.push(function(){var t=(0,Hi.Z)(regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.Zr.wr(),t.next=4,qg(e);case 4:t.next=9;break;case 6:return t.next=8,e.Zr.stop();case 8:e.Qr.length>0&&(Xc("RemoteStore","Stopping write stream with ".concat(e.Qr.length," pending writes")),e.Qr=[]);case 9:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}())),e.Zr;var t,n,r,i}var om=function(){function e(t,n,r,i,o){d(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sl,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(e){})}return f(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout(function(){return t.handleDelayElapsed()},e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ul(al.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget(function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then(function(t){return e.deferred.resolve(t)})):Promise.resolve()})}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)})}],[{key:"createAndSchedule",value:function(t,n,r,i,o){var a=new e(t,n,Date.now()+r,i,o);return a.start(r),a}}]),e}();function am(e,t){if(el("AsyncQueue","".concat(t,": ").concat(e)),ap(e))return new ul(al.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var um=function(){function e(t){d(this,e),this.comparator=t?function(e,n){return t(e,n)||Zl.comparator(e.key,n.key)}:function(e,t){return Zl.comparator(e.key,t.key)},this.keyedMap=Ff(),this.sortedSet=new Rf(this.comparator)}return f(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal(function(t,n){return e(t),!1})}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e)||this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),sm=function(){function e(){d(this,e),this.eo=new Rf(Zl.comparator)}return f(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):rl():this.eo=this.eo.insert(t,e)}},{key:"no",value:function(){var e=[];return this.eo.inorderTraversal(function(t,n){e.push(n)}),e}}]),e}(),cm=function(){function e(t,n,r,i,o,a,u,s){d(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=u,this.excludesMetadataChanges=s}return f(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Vh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i){var o=[];return n.forEach(function(e){o.push({type:0,doc:e})}),new e(t,n,um.emptySet(n),o,r,i,!0,!1)}}]),e}(),lm=function e(){d(this,e),this.so=void 0,this.listeners=[]},hm=function e(){d(this,e),this.queries=new nv(function(e){return jh(e)},Vh),this.onlineState="Unknown",this.io=new Set};function fm(e,t){return dm.apply(this,arguments)}function dm(){return(dm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ol(t),i=n.query,o=!1,(a=r.queries.get(i))||(o=!0,a=new lm),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:a.so=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=am(e.t0,"Initialization of query '".concat(qh(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,a),a.listeners.push(n),n.ro(r.onlineState),a.so&&n.oo(a.so)&&ym(r);case 14:case"end":return e.stop()}},e,null,[[3,9]])}))).apply(this,arguments)}function pm(e,t){return vm.apply(this,arguments)}function vm(){return(vm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ol(t),i=n.query,o=!1,(a=r.queries.get(i))&&(u=a.listeners.indexOf(n))>=0&&(a.listeners.splice(u,1),o=0===a.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function gm(e,t){var n,r=ol(e),i=!1,o=s(t);try{for(o.s();!(n=o.n()).done;){var a=n.value,u=r.queries.get(a.query);if(u){var c,l=s(u.listeners);try{for(l.s();!(c=l.n()).done;){c.value.oo(a)&&(i=!0)}}catch(h){l.e(h)}finally{l.f()}u.so=a}}}catch(h){o.e(h)}finally{o.f()}i&&ym(r)}function mm(e,t,n){var r=ol(e),i=r.queries.get(t);if(i){var o,a=s(i.listeners);try{for(a.s();!(o=a.n()).done;){o.value.onError(n)}}catch(u){a.e(u)}finally{a.f()}}r.queries.delete(t)}function ym(e){e.io.forEach(function(e){e.next()})}var km=function(){function e(t,n,r){d(this,e),this.query=t,this.ao=n,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=r||{}}return f(e,[{key:"oo",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=s(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(a){r.e(a)}finally{r.f()}e=new cm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}var o=!1;return this.co?this.ho(e)&&(this.ao.next(e),o=!0):this.lo(e,this.onlineState)&&(this.fo(e),o=!0),this.uo=e,o}},{key:"onError",value:function(e){this.ao.error(e)}},{key:"ro",value:function(e){this.onlineState=e;var t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}},{key:"lo",value:function(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}},{key:"ho",value:function(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}},{key:"fo",value:function(e){e=cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}]),e}(),_m=function(){function e(t,n){d(this,e),this.payload=t,this.byteLength=n}return f(e,[{key:"_o",value:function(){return"metadata"in this.payload}}]),e}(),wm=function(){function e(t){d(this,e),this.k=t}return f(e,[{key:"Hn",value:function(e){return cd(this.k,e)}},{key:"Jn",value:function(e){return e.metadata.exists?vd(this.k,e.document,!1):uh.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}},{key:"Yn",value:function(e){return od(e)}}]),e}(),bm=function(){function e(t,n,r){d(this,e),this.mo=t,this.localStore=n,this.k=r,this.queries=[],this.documents=[],this.progress=xm(t)}return f(e,[{key:"yo",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"po",value:function(e){var t,n=new Map,r=new wm(this.k),i=s(e);try{for(i.s();!(t=i.n()).done;){var o=t.value;if(o.metadata.queries){var a,u=r.Hn(o.metadata.name),c=s(o.metadata.queries);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=(n.get(l)||qf()).add(u);n.set(l,h)}}catch(f){c.e(f)}finally{c.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,function(e,t,n,r){return Mv.apply(this,arguments)}(e.localStore,new wm(e.k),e.documents,e.mo.id);case 2:n=t.sent,r=e.po(e.documents),i=s(e.queries),t.prev=5,i.s();case 7:if((o=i.n()).done){t.next=13;break}return a=o.value,t.next=11,Fv(e.localStore,a,r.get(a.name));case 11:t.next=7;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(5),i.e(t.t0);case 18:return t.prev=18,i.f(),t.finish(18);case 21:return t.abrupt("return",(e.progress.taskState="Success",new gv(Object.assign({},e.progress),n)));case 22:case"end":return t.stop()}},t,null,[[5,15,18,21]])}))()}}]),e}();function xm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Im=function e(t){d(this,e),this.key=t},Tm=function e(t){d(this,e),this.key=t},Cm=function(){function e(t,n){d(this,e),this.query=t,this.To=n,this.Eo=null,this.current=!1,this.Io=qf(),this.mutatedKeys=qf(),this.Ao=zh(t),this.Ro=new um(this.Ao)}return f(e,[{key:"Po",get:function(){return this.To}},{key:"bo",value:function(e,t){var n=this,r=t?t.vo:new sm,i=t?t.Ro:this.Ro,o=t?t.mutatedKeys:this.mutatedKeys,a=i,u=!1,s=Nh(this.query)&&i.size===this.query.limit?i.last():null,c=Oh(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(function(e,t){var l=i.get(e),h=Bh(n.query,t)?t:null,f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Vo(l,h)||(r.track({type:2,doc:h}),p=!0,(s&&n.Ao(h,s)>0||c&&n.Ao(h,c)<0)&&(u=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(h?(a=a.add(h),o=d?o.add(e):o.delete(e)):(a=a.delete(e),o=o.delete(e)))}),Nh(this.query)||Oh(this.query))for(;a.size>this.query.limit;){var l=Nh(this.query)?a.last():a.first();a=a.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Ro:a,vo:r,Bn:u,mutatedKeys:o}}},{key:"Vo",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;var o=e.vo.no();o.sort(function(e,t){return n=e.type,i=t.type,(o=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return rl()}})(n)-o(i)||r.Ao(e.doc,t.doc);var n,i,o}),this.So(n);var a=t?this.Do():[],u=0===this.Io.size&&this.current?1:0,s=u!==this.Eo;return this.Eo=u,0!==o.length||s?{snapshot:new cm(this.query,e.Ro,i,o,e.mutatedKeys,0===u,s,!1),Co:a}:{Co:a}}},{key:"ro",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new sm,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}},{key:"No",value:function(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}},{key:"So",value:function(e){var t=this;e&&(e.addedDocuments.forEach(function(e){return t.To=t.To.add(e)}),e.modifiedDocuments.forEach(function(e){}),e.removedDocuments.forEach(function(e){return t.To=t.To.delete(e)}),this.current=e.current)}},{key:"Do",value:function(){var e=this;if(!this.current)return[];var t=this.Io;this.Io=qf(),this.Ro.forEach(function(t){e.No(t.key)&&(e.Io=e.Io.add(t.key))});var n=[];return t.forEach(function(t){e.Io.has(t)||n.push(new Tm(t))}),this.Io.forEach(function(e){t.has(e)||n.push(new Im(e))}),n}},{key:"ko",value:function(e){this.To=e.zn,this.Io=qf();var t=this.bo(e.documents);return this.applyChanges(t,!0)}},{key:"xo",value:function(){return cm.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}]),e}(),Em=function e(t,n,r){d(this,e),this.query=t,this.targetId=n,this.view=r},Sm=function e(t){d(this,e),this.key=t,this.$o=!1},Rm=function(){function e(t,n,r,i,o,a){d(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Fo={},this.Oo=new nv(function(e){return jh(e)},Vh),this.Mo=new Map,this.Lo=new Set,this.Bo=new Rf(Zl.comparator),this.Uo=new Map,this.qo=new jv,this.Ko={},this.jo=new Map,this.Qo=zp.re(),this.onlineState="Unknown",this.Wo=void 0}return f(e,[{key:"isPrimaryClient",get:function(){return!0===this.Wo}}]),e}();function Am(e,t){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=_y(t),!(a=r.Oo.get(n))){e.next=6;break}i=a.targetId,r.sharedClientState.addLocalQueryTarget(i),o=a.view.xo(),e.next=15;break;case 6:return e.next=8,Rv(r.localStore,Fh(n));case 8:return u=e.sent,s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=13,Om(r,n,i,"current"===s);case 13:o=e.sent,r.isPrimaryClient&&Ig(r.remoteStore,u);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Om(e,t,n,r){return Pm.apply(this,arguments)}function Pm(){return(Pm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,u,s,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.Go=function(e,n,r){return(i=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.bo(r),e.t0=o.Bn,!e.t0){e.next=6;break}return e.next=5,Ov(t.localStore,n.query,!1).then(function(e){var t=e.documents;return n.view.bo(t,o)});case 5:o=e.sent;case 6:return a=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(o,t.isPrimaryClient,a),e.abrupt("return",(Jm(t,n.targetId,u.Co),u.snapshot));case 8:case"end":return e.stop()}},e)})),function(e,t,n,r){return i.apply(this,arguments)})(t,e,n,r);var i},e.next=3,Ov(t.localStore,n,!0);case 3:return o=e.sent,a=new Cm(n,o.zn),u=a.bo(o.documents),s=Hf.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState),c=a.applyChanges(u,t.isPrimaryClient,s),Jm(t,r,c.Co),l=new Em(n,r,a),e.abrupt("return",(t.Oo.set(n,l),t.Mo.has(r)?t.Mo.get(r).push(n):t.Mo.set(r,[n]),c.snapshot));case 11:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dm(e,t){return Lm.apply(this,arguments)}function Lm(){return(Lm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ol(t),i=r.Oo.get(n),!((o=r.Mo.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.Mo.set(i.targetId,o.filter(function(e){return!Vh(e,n)})),void r.Oo.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Av(r.localStore,i.targetId,!1).then(function(){r.sharedClientState.clearQueryState(i.targetId),Tg(r.remoteStore,i.targetId),Ym(r,i.targetId)}).catch(Kp);case 9:e.next=14;break;case 11:return Ym(r,i.targetId),e.next=14,Av(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Mm(){return(Mm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=wy(t),e.prev=1,e.next=4,function(e,t){var n,r=ol(e),i=xl.now(),o=t.reduce(function(e,t){return e.add(t.key)},qf());return r.persistence.runTransaction("Locally write mutations","readwrite",function(e){return r.Wn.vn(e,o).next(function(o){n=o;var a,u=[],c=s(t);try{for(c.s();!(a=c.n()).done;){var l=a.value,h=pf(l,n.get(l.key));null!=h&&u.push(new yf(l.key,h,ah(h.value.mapValue),cf.exists(!0)))}}catch(f){c.e(f)}finally{c.f()}return r.An.addMutationBatch(e,i,u,t)})}).then(function(e){return e.applyToLocalDocumentSet(n),{batchId:e.batchId,changes:n}})}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.Ko[e.currentUser.toKey()];r||(r=new Rf(_l)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,ey(i,o.changes);case 9:return e.next=11,qg(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),a=am(e.t0,"Failed to persist write"),r.reject(a);case 17:case"end":return e.stop()}},e,null,[[1,13]])}))).apply(this,arguments)}function Fm(e,t){return Um.apply(this,arguments)}function Um(){return(Um=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),e.prev=1,e.next=4,Cv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach(function(e,t){var n=r.Uo.get(t);n&&(il(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.$o=!0:e.modifiedDocuments.size>0?il(n.$o):e.removedDocuments.size>0&&(il(n.$o),n.$o=!1))}),e.next=8,ey(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Kp(e.t0);case 14:case"end":return e.stop()}},e,null,[[1,10]])}))).apply(this,arguments)}function Vm(e,t,n){var r=ol(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Oo.forEach(function(e,n){var r=n.view.ro(t);r.snapshot&&i.push(r.snapshot)}),function(e,t){var n=ol(e);n.onlineState=t;var r=!1;n.queries.forEach(function(e,n){var i,o=s(n.listeners);try{for(o.s();!(i=o.n()).done;){i.value.ro(t)&&(r=!0)}}catch(a){o.e(a)}finally{o.f()}}),r&&ym(n)}(r.eventManager,t),i.length&&r.Fo.Pr(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function jm(e,t,n){return qm.apply(this,arguments)}function qm(){return(qm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ol(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.Uo.get(n),!(a=o&&o.key)){e.next=14;break}return u=(u=new Rf(Zl.comparator)).insert(a,uh.newNoDocument(a,Il.min())),s=qf().add(a),c=new Zf(Il.min(),new Map,new Of(_l),u,s),e.next=9,Fm(i,c);case 9:i.Bo=i.Bo.remove(a),i.Uo.delete(n),Xm(i),e.next=16;break;case 14:return e.next=16,Av(i.localStore,n,!1).then(function(){return Ym(i,n,r)}).catch(Kp);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Bm(e,t){return zm.apply(this,arguments)}function zm(){return(zm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),i=n.batch.batchId,e.prev=1,e.next=4,Iv(r.localStore,n);case 4:return o=e.sent,Km(r,i,null),Wm(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,ey(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kp(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Zm(e,t,n){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=ol(t),e.prev=1,e.next=4,function(e,t){var n=ol(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(e){var r;return n.An.lookupMutationBatch(e,t).next(function(t){return il(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t)}).next(function(){return n.An.performConsistencyCheck(e)}).next(function(){return n.Wn.vn(e,r)})})}(i.localStore,n);case 4:return o=e.sent,Km(i,n,r),Wm(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,ey(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Kp(e.t0);case 16:case"end":return e.stop()}},e,null,[[1,12]])}))).apply(this,arguments)}function Gm(){return(Gm=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Ag((r=ol(t)).remoteStore)||Xc("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ol(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(e){return t.An.getHighestUnacknowledgedBatchId(e)})}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.jo.get(i)||[]).push(n),r.jo.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),a=am(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(a);case 16:case"end":return e.stop()}},e,null,[[2,12]])}))).apply(this,arguments)}function Wm(e,t){(e.jo.get(t)||[]).forEach(function(e){e.resolve()}),e.jo.delete(t)}function Km(e,t,n){var r=ol(e),i=r.Ko[r.currentUser.toKey()];if(i){var o=i.get(t);o&&(n?o.reject(n):o.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Ym(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=s(e.Mo.get(t));try{for(i.s();!(r=i.n()).done;){var o=r.value;e.Oo.delete(o),n&&e.Fo.zo(o,n)}}catch(a){i.e(a)}finally{i.f()}e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(function(t){e.qo.containsKey(t)||Qm(e,t)})}function Qm(e,t){e.Lo.delete(t.path.canonicalString());var n=e.Bo.get(t);null!==n&&(Tg(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),Xm(e))}function Jm(e,t,n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;o instanceof Im?(e.qo.addReference(o.key,t),$m(e,o)):o instanceof Tm?(Xc("SyncEngine","Document no longer in limbo: "+o.key),e.qo.removeReference(o.key,t),e.qo.containsKey(o.key)||Qm(e,o.key)):rl()}}catch(a){i.e(a)}finally{i.f()}}function $m(e,t){var n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Xc("SyncEngine","New document in limbo: "+n),e.Lo.add(r),Xm(e))}function Xm(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){var t=e.Lo.values().next().value;e.Lo.delete(t);var n=new Zl(Rl.fromString(t)),r=e.Qo.next();e.Uo.set(r,new Sm(n)),e.Bo=e.Bo.insert(n,r),Ig(e.remoteStore,new vp(Fh(Ah(n.path)),r,2,ml.I))}}function ey(e,t,n){return ty.apply(this,arguments)}function ty(){return(ty=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ol(t),o=[],a=[],u=[],e.t0=i.Oo.isEmpty(),e.t0){e.next=9;break}return i.Oo.forEach(function(e,t){u.push(i.Go(t,n,r).then(function(e){if(e){i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,e.fromCache?"not-current":"current"),o.push(e);var n=yv.$n(t.targetId,e);a.push(n)}}))}),e.next=6,Promise.all(u);case 6:return i.Fo.Pr(o),e.next=9,(c=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,c,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(e){return tp.forEach(n,function(t){return tp.forEach(t.kn,function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)}).next(function(){return tp.forEach(t.xn,function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)})})})});case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),ap(e.t0)){e.next=10;break}throw e.t0;case 10:Xc("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=s(n);try{for(i.s();!(o=i.n()).done;)a=o.value,u=a.targetId,a.fromCache||(c=r.qn.get(u),l=c.withLastLimboFreeSnapshotVersion(c.snapshotVersion),r.qn=r.qn.insert(u,l))}catch(h){i.e(h)}finally{i.f()}case 13:case"end":return e.stop()}},e,null,[[1,6]])})),function(e,t){return c.apply(this,arguments)})(i.localStore,a);case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ny(e,t){return ry.apply(this,arguments)}function ry(){return(ry=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ol(t)).currentUser.isEqual(n)){e.next=12;break}return Xc("SyncEngine","User change. New user:",n.toKey()),e.next=5,bv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,(o=r).jo.forEach(function(e){e.forEach(function(e){e.reject(new ul(al.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.jo.clear(),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=12,ey(r,i.Gn);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function iy(e,t){var n=ol(e),r=n.Uo.get(t);if(r&&r.$o)return qf().add(r.key);var i=qf(),o=n.Mo.get(t);if(!o)return i;var a,u=s(o);try{for(u.s();!(a=u.n()).done;){var c=a.value,l=n.Oo.get(c);i=i.unionWith(l.view.Po)}}catch(h){u.e(h)}finally{u.f()}return i}function oy(e,t){return ay.apply(this,arguments)}function ay(){return(ay=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),e.next=3,Ov(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.ko(i),e.abrupt("return",(r.isPrimaryClient&&Jm(r,n.targetId,o.Co),o));case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function uy(e){return sy.apply(this,arguments)}function sy(){return(sy=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ol(t),e.abrupt("return",Dv(n.localStore).then(function(e){return ey(n,e)}));case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}function cy(e,t,n,r){return ly.apply(this,arguments)}function ly(){return(ly=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=ol(t),e.next=3,function(e,t){var n=ol(e),r=ol(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return r.Zt(e,t).next(function(t){return t?n.Wn.vn(e,t):tp.resolve(null)})})}(o.localStore,n);case 3:if(null===(a=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,qg(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(Km(o,n,i||null),Wm(o,n),u=n,ol(ol(o.localStore).An).ee(u)):rl();case 11:return e.next=13,ey(o,a);case 13:e.next=16;break;case 15:Xc("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function hy(){return(hy=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,c,l,h;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_y(r=ol(t)),wy(r),!0!==n||!0===r.Wo){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,fy(r,i.toArray());case 5:return o=e.sent,r.Wo=!0,e.next=9,tm(r.remoteStore,!0);case 9:a=s(o);try{for(a.s();!(u=a.n()).done;)c=u.value,Ig(r.remoteStore,c)}catch(f){a.e(f)}finally{a.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Wo){e.next=25;break}return l=[],h=Promise.resolve(),r.Mo.forEach(function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):h=h.then(function(){return Ym(r,t),Av(r.localStore,t,!0)}),Tg(r.remoteStore,t)}),e.next=19,h;case 19:return e.next=21,fy(r,l);case 21:return function(e){var t=ol(e);t.Uo.forEach(function(e,n){Tg(t.remoteStore,n)}),t.qo.hs(),t.Uo=new Map,t.Bo=new Rf(Zl.comparator)}(r),r.Wo=!1,e.next=25,tm(r.remoteStore,!1);case 25:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fy(e,t,n){return dy.apply(this,arguments)}function dy(){return(dy=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,c,l,h,f,d,p,v,g,m,y;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:i=ol(t),o=[],a=[],u=s(n),e.prev=2,u.s();case 4:if((c=u.n()).done){e.next=45;break}if(l=c.value,h=void 0,!(f=i.Mo.get(l))||0===f.length){e.next=34;break}return e.next=11,Rv(i.localStore,Fh(f[0]));case 11:h=e.sent,d=s(f),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,g=i.Oo.get(v),e.next=20,oy(i,g);case 20:(m=e.sent).snapshot&&a.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Pv(i.localStore,l);case 36:return y=e.sent,e.next=39,Rv(i.localStore,y);case 39:return h=e.sent,e.next=42,Om(i,py(y),l,!1);case 42:o.push(h);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.Fo.Pr(a),o));case 54:case"end":return e.stop()}},e,null,[[2,47,50,53],[13,26,29,32]])}))).apply(this,arguments)}function py(e){return Rh(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function vy(e){var t=ol(e);return ol(ol(t.localStore).persistence).Tn()}function gy(e,t,n,r){return my.apply(this,arguments)}function my(){return(my=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r,i){var o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=ol(t)).Wo){e.next=5;break}Xc("SyncEngine","Ignoring unexpected query state notification."),e.next=21;break;case 5:if(!o.Mo.has(n)){e.next=21;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?9:"rejected"===e.t0?16:20;break;case 9:return e.next=11,Dv(o.localStore);case 11:return a=e.sent,u=Zf.createSynthesizedRemoteEventForCurrentChange(n,"current"===r),e.next=15,ey(o,a,u);case 15:return e.abrupt("break",21);case 16:return e.next=18,Av(o.localStore,n,!0);case 18:return Ym(o,n,i),e.abrupt("break",21);case 20:rl();case 21:case"end":return e.stop()}},e)}))).apply(this,arguments)}function yy(e,t,n){return ky.apply(this,arguments)}function ky(){return(ky=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,c,l,h,f,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=_y(t)).Wo){e.next=45;break}o=s(n),e.prev=3,o.s();case 5:if((a=o.n()).done){e.next=21;break}if(u=a.value,!i.Mo.has(u)){e.next=10;break}return Xc("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Pv(i.localStore,u);case 12:return c=e.sent,e.next=15,Rv(i.localStore,c);case 15:return l=e.sent,e.next=18,Om(i,py(c),l.targetId,!1);case 18:Ig(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:h=s(r),e.prev=30,d=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.Mo.has(t),!e.t0){e.next=5;break}return e.next=5,Av(i.localStore,t,!1).then(function(){Tg(i.remoteStore,t),Ym(i,t)}).catch(Kp);case 5:case"end":return e.stop()}},e)}),h.s();case 33:if((f=h.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),h.e(e.t2);case 42:return e.prev=42,h.f(),e.finish(42);case 45:case"end":return e.stop()}},e,null,[[3,23,26,29],[30,39,42,45]])}))).apply(this,arguments)}function _y(e){var t=ol(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Fm.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=iy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jm.bind(null,t),t.Fo.Pr=gm.bind(null,t.eventManager),t.Fo.zo=mm.bind(null,t.eventManager),t}function wy(e){var t=ol(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Bm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Zm.bind(null,t),t}var by=function(){function e(){d(this,e),this.synchronizeTabs=!1}return f(e,[{key:"initialize",value:function(e){var t=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t.k=fg(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),n.next=5,t.persistence.start();case 5:t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e);case 7:case"end":return n.stop()}},n)}))()}},{key:"Xo",value:function(e){return null}},{key:"Zo",value:function(e){return wv(this.persistence,new kv,e.initialUser,this.k)}},{key:"Yo",value:function(e){return new Gv(Kv.ks,this.k)}},{key:"Jo",value:function(e){return new ig}},{key:"terminate",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.gcScheduler&&e.gcScheduler.stop(),t.next=3,e.sharedClientState.shutdown();case 3:return t.next=5,e.persistence.shutdown();case 5:case"end":return t.stop()}},t)}))()}}]),e}(),xy=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).ta=e,o.cacheSizeBytes=r,o.forceOwnership=i,o.synchronizeTabs=!1,o}return f(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,Hi.Z)(regeneratorRuntime.mark(function o(){return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i(b(n.prototype),"initialize",t).call(r,e);case 2:return o.next=4,function(e){return Lv.apply(this,arguments)}(r.localStore);case 4:return o.next=6,r.ta.initialize(r,e);case 6:return o.next=8,wy(r.ta.syncEngine);case 8:return o.next=10,qg(r.ta.remoteStore);case 10:return o.next=12,r.persistence.sn(function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()});case 12:case"end":return o.stop()}},o)}))()}},{key:"Zo",value:function(e){return wv(this.persistence,new kv,e.initialUser,this.k)}},{key:"Xo",value:function(e){return new $p(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}},{key:"Yo",value:function(e){var t=vv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Lp.withCacheSize(this.cacheSizeBytes):Lp.DEFAULT;return new fv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,lg(),hg(),this.k,this.sharedClientState,!!this.forceOwnership)}},{key:"Jo",value:function(e){return new ig}}]),n}(by),Iy=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r,!1)).ta=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return f(n,[{key:"initialize",value:function(e){var t=this,r=this;return(0,Hi.Z)(regeneratorRuntime.mark(function o(){var a;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,i(b(n.prototype),"initialize",t).call(r,e);case 2:if(a=r.ta.syncEngine,o.t0=r.sharedClientState instanceof rg,!o.t0){o.next=8;break}return r.sharedClientState.syncEngine={mi:cy.bind(null,a),gi:gy.bind(null,a),yi:yy.bind(null,a),Tn:vy.bind(null,a),_i:uy.bind(null,a)},o.next=8,r.sharedClientState.start();case 8:return o.next=10,r.persistence.sn(function(){var e=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,function(e,t){return hy.apply(this,arguments)}(r.ta.syncEngine,t);case 2:r.gcScheduler&&(t&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):t||r.gcScheduler.stop());case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return o.stop()}},o)}))()}},{key:"Jo",value:function(e){var t=lg();if(!rg.bt(t))throw new ul(al.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=vv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new rg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(xy),Ty=function(){function e(){d(this,e)}return f(e,[{key:"initialize",value:function(e,t){var n=this;return(0,Hi.Z)(regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(r.t0=n.localStore,r.t0){r.next=12;break}return n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=function(e){return Vm(n.syncEngine,e,1)},n.remoteStore.remoteSyncer.handleCredentialChange=ny.bind(null,n.syncEngine),r.next=12,tm(n.remoteStore,n.syncEngine.isPrimaryClient);case 12:case"end":return r.stop()}},r)}))()}},{key:"createEventManager",value:function(e){return new hm}},{key:"createDatastore",value:function(e){var t=fg(e.databaseInfo.databaseId),n=new cg(e.databaseInfo);return new mg(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,o,a=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Vm(a.syncEngine,e,0)},o=ag.bt()?new ag:new og,new kg(t,n,r,i,o)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,o,a){var u=new Rm(e,t,n,r,i,o);return a&&(u.Wo=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return(e=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ol(t),Xc("RemoteStore","RemoteStore shutting down."),n.Gr.add(5),e.next=5,bg(n);case 5:n.Hr.shutdown(),n.Jr.set("Unknown");case 7:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}]),e}();function Cy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return(0,Hi.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}},r)}))()},cancel:function(){return(0,Hi.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}))()},releaseLock:function(){},closed:Promise.reject("unimplemented")}}var Ey=function(){function e(t){d(this,e),this.observer=t,this.muted=!1}return f(e,[{key:"next",value:function(e){this.observer.next&&this.ea(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}},{key:"na",value:function(){this.muted=!0}},{key:"ea",value:function(e,t){var n=this;this.muted||setTimeout(function(){n.muted||e(t)},0)}}]),e}(),Sy=function(){function e(t,n){var r=this;d(this,e),this.sa=t,this.k=n,this.metadata=new sl,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(function(e){e&&e._o()?r.metadata.resolve(e.payload.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.payload))))},function(e){return r.metadata.reject(e)})}return f(e,[{key:"close",value:function(){return this.sa.cancel()}},{key:"getMetadata",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.metadata.promise);case 1:case"end":return t.stop()}},t)}))()}},{key:"Ho",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getMetadata();case 2:return t.abrupt("return",e.ra());case 3:case"end":return t.stop()}},t)}))()}},{key:"ra",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.oa();case 2:if(null!==(n=t.sent)){t.next=5;break}return t.abrupt("return",null);case 5:return r=e.ia.decode(n),i=Number(r),isNaN(i)&&e.aa("length string (".concat(r,") is not valid number")),t.next=9,e.ca(i);case 9:return o=t.sent,t.abrupt("return",new _m(JSON.parse(o),n.length+i));case 11:case"end":return t.stop()}},t)}))()}},{key:"ua",value:function(){return this.buffer.findIndex(function(e){return e==="{".charCodeAt(0)})}},{key:"oa",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.ua()<0,!t.t0){t.next=5;break}return t.next=4,e.ha();case 4:t.t0=!t.sent;case 5:if(!t.t0){t.next=9;break}case 7:t.next=0;break;case 9:if(0!==e.buffer.length){t.next=11;break}return t.abrupt("return",null);case 11:return(n=e.ua())<0&&e.aa("Reached the end of bundle when a length string is expected."),r=e.buffer.slice(0,n),t.abrupt("return",(e.buffer=e.buffer.slice(n),r));case 15:case"end":return t.stop()}},t)}))()}},{key:"ca",value:function(e){var t=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!(t.buffer.length<e)){n.next=8;break}return n.next=3,t.ha();case 3:if(n.t0=n.sent,!n.t0){n.next=6;break}t.aa("Reached the end of bundle when more is expected.");case 6:n.next=0;break;case 8:return r=t.ia.decode(t.buffer.slice(0,e)),n.abrupt("return",(t.buffer=t.buffer.slice(e),r));case 10:case"end":return n.stop()}},n)}))()}},{key:"aa",value:function(e){throw this.sa.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"ha",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.sa.read();case 2:return(n=t.sent).done||((r=new Uint8Array(e.buffer.length+n.value.length)).set(e.buffer),r.set(n.value,e.buffer.length),e.buffer=r),t.abrupt("return",n.done);case 5:case"end":return t.stop()}},t)}))()}}]),e}(),Ry=function(){function e(t){d(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return f(e,[{key:"lookup",value:function(e){var t=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){var r,i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(t.ensureCommitNotCalled(),!(t.mutations.length>0)){n.next=2;break}throw new ul(al.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return n.next=4,(i=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),i=fd(r.k)+"/documents",o={documents:n.map(function(e){return sd(r.k,e)})},e.next=5,r.ji("BatchGetDocuments",i,o);case 5:return a=e.sent,u=new Map,a.forEach(function(e){var t=function(e,t){return"found"in t?function(e,t){il(!!t.found);var n=cd(e,t.found.name),r=od(t.found.updateTime),i=new oh({mapValue:{fields:t.found.fields}});return uh.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){il(!!t.missing),il(!!t.readTime);var n=cd(e,t.missing),r=od(t.readTime);return uh.newNoDocument(n,r)}(e,t):rl()}(r.k,e);u.set(t.key.toString(),t)}),s=[],e.abrupt("return",(n.forEach(function(e){var t=u.get(e.toString());il(!!t),s.push(t)}),s));case 10:case"end":return e.stop()}},e)})),function(e,t){return i.apply(this,arguments)})(t.datastore,e);case 4:return r=n.sent,n.abrupt("return",(r.forEach(function(e){return t.recordVersion(e)}),r));case 6:case"end":return n.stop()}},n)}))()}},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new If(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.ensureCommitNotCalled(),!e.lastWriteError){t.next=2;break}throw e.lastWriteError;case 2:return n=e.readVersions,e.mutations.forEach(function(e){n.delete(e.key.toString())}),n.forEach(function(t,n){var r=Zl.fromPath(n);e.mutations.push(new Tf(r,e.precondition(r)))}),t.next=7,(r=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=ol(t),i=fd(r.k)+"/documents",o={writes:n.map(function(e){return gd(r.k,e)})},e.next=3,r.Bi("Commit",i,o);case 3:case"end":return e.stop()}},e)})),function(e,t){return r.apply(this,arguments)})(e.datastore,e.mutations);case 7:e.committed=!0;case 8:case"end":return t.stop()}},t)}))()}},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw rl();t=Il.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ul(al.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?cf.updateTime(t):cf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Il.min()))throw new ul(al.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return cf.updateTime(t)}return cf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ay=function(){function e(t,n,r,i){d(this,e),this.asyncQueue=t,this.datastore=n,this.updateFunction=r,this.deferred=i,this.la=5,this.ur=new dg(this.asyncQueue,"transaction_retry")}return f(e,[{key:"run",value:function(){this.la-=1,this.fa()}},{key:"fa",value:function(){var e=this;this.ur.Zi((0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ry(e.datastore),(r=e.da(n))&&r.then(function(t){e.asyncQueue.enqueueAndForget(function(){return n.commit().then(function(){e.deferred.resolve(t)}).catch(function(t){e.wa(t)})})}).catch(function(t){e.wa(t)});case 2:case"end":return t.stop()}},t)})))}},{key:"da",value:function(e){try{var t=this.updateFunction(e);return!ql(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}},{key:"wa",value:function(e){var t=this;this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(function(){return t.fa(),Promise.resolve()})):this.deferred.reject(e)}},{key:"_a",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||!Ef(t)}return!1}}]),e}(),Ny=function(){function e(t,n,r,i){d(this,e);var o,a=this;this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Yc.UNAUTHENTICATED,this.clientId=kl.A(),this.authCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,(o=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return Xc("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}},e)})),function(e){return o.apply(this,arguments)})),this.appCheckCredentials.start(r,function(){return Promise.resolve()})}return f(e,[{key:"getConfiguration",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100});case 1:case"end":return t.stop()}},t)}))()}},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ul(al.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new sl;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Hi.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e.onlineComponents,!n.t0){n.next=5;break}return n.next=5,e.onlineComponents.terminate();case 5:if(n.t1=e.offlineComponents,!n.t1){n.next=9;break}return n.next=9,e.offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=am(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}},n,null,[[0,14]])}))),t.promise}}]),e}();function Oy(e,t){return Py.apply(this,arguments)}function Py(){return(Py=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Xc("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,bv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=n;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Dy(e,t){return Ly.apply(this,arguments)}function Ly(){return(Ly=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,My(t);case 3:return r=e.sent,Xc("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener(function(e){return(t=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ol(t)).asyncQueue.verifyOperationInProgress(),Xc("RemoteStore","RemoteStore received new credentials"),i=Ag(r),r.Gr.add(3),e.next=6,bg(r);case 6:return i&&r.Jr.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.Gr.delete(3),e.next=12,_g(r);case 12:case"end":return e.stop()}},e)})),function(e,n){return t.apply(this,arguments)})(n.remoteStore,e);var t}),t.onlineComponents=n;case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function My(e){return Fy.apply(this,arguments)}function Fy(){return(Fy=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.offlineComponents,e.t0){e.next=5;break}return Xc("FirestoreClient","Using default OfflineComponentProvider"),e.next=5,Oy(t,new by);case 5:return e.abrupt("return",t.offlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Uy(e){return Vy.apply(this,arguments)}function Vy(){return(Vy=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.onlineComponents,e.t0){e.next=5;break}return Xc("FirestoreClient","Using default OnlineComponentProvider"),e.next=5,Dy(t,new Ty);case 5:return e.abrupt("return",t.onlineComponents);case 6:case"end":return e.stop()}},e)}))).apply(this,arguments)}function jy(e){return My(e).then(function(e){return e.persistence})}function qy(e){return My(e).then(function(e){return e.localStore})}function By(e){return Uy(e).then(function(e){return e.remoteStore})}function zy(e){return Uy(e).then(function(e){return e.syncEngine})}function Zy(e){return Hy.apply(this,arguments)}function Hy(){return(Hy=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Uy(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Am.bind(null,n.syncEngine),r.onUnlisten=Dm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Gy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new sl;return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new Ey({next:function(o){t.enqueueAndForget(function(){return pm(e,a)});var u=o.docs.has(n);!u&&o.fromCache?i.reject(new ul(al.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&o.fromCache&&r&&"server"===r.source?i.reject(new ul(al.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(e){return i.reject(e)}}),a=new km(Ah(n.path),o,{includeMetadataChanges:!0,wo:!0});return fm(e,a)},i.next=3,Zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}function Wy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new sl;return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function i(){return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var o=new Ey({next:function(n){t.enqueueAndForget(function(){return pm(e,a)}),n.fromCache&&"server"===r.source?i.reject(new ul(al.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),a=new km(n,o,{includeMetadataChanges:!0,wo:!0});return fm(e,a)},i.next=3,Zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}},i)}))),r.promise}var Ky=function e(t,n,r,i,o,a,u,s){d(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.useFetchStreams=s},Yy=function(){function e(t,n){d(this,e),this.projectId=t,this.database=n||"(default)"}return f(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}]),e}(),Qy=new Map;function Jy(e,t,n){if(!n)throw new ul(al.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function $y(e,t,n,r){if(!0===t&&!0===r)throw new ul(al.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Xy(e){if(!Zl.isDocumentKey(e))throw new ul(al.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function ek(e){if(Zl.isDocumentKey(e))throw new ul(al.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function tk(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=(n=e).constructor?n.constructor.name:null;return t?"a custom ".concat(t," object"):"an object"}var n;return"function"==typeof e?"a function":rl()}function nk(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ul(al.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=tk(e);throw new ul(al.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function rk(e,t){if(t<=0)throw new ul(al.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var ik=function(){function e(t){var n;if(d(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ul(al.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ul(al.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,$y("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return f(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),ok=function(){function e(t,n,r){d(this,e),this._authCredentials=n,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ik({}),this._settingsFrozen=!1,t instanceof Yy?this._databaseId=t:(this._app=t,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ul(al.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Yy(e.options.projectId)}(t))}return f(e,[{key:"app",get:function(){if(!this._app)throw new ul(al.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ul(al.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ik(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ll;switch(e.type){case"gapi":var t=e.client;return il(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new pl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new ul(al.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return e=this,(t=Qy.get(e))&&(Xc("ComponentProvider","Removing Datastore"),Qy.delete(e),t.terminate()),Promise.resolve();var e,t}}]),e}(),ak=function(){function e(t,n,r){d(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return f(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new sk(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),uk=function(){function e(t,n,r){d(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return f(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),sk=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r,Ah(i)))._path=i,o.type="collection",o}return f(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new ak(this.firestore,null,new Zl(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(uk);function ck(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Ki.m9)(e),Jy("collection","path",t),e instanceof ok){var o=Rl.fromString.apply(Rl,[t].concat(r));return ek(o),new sk(e,null,o)}if(!(e instanceof ak||e instanceof sk))throw new ul(al.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Rl.fromString.apply(Rl,[t].concat(r)));return ek(a),new sk(e.firestore,null,a)}function lk(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,Ki.m9)(e),1===arguments.length&&(t=kl.A()),Jy("doc","path",t),e instanceof ok){var o=Rl.fromString.apply(Rl,[t].concat(r));return Xy(o),new ak(e,null,new Zl(o))}if(!(e instanceof ak||e instanceof sk))throw new ul(al.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var a=e._path.child(Rl.fromString.apply(Rl,[t].concat(r)));return Xy(a),new ak(e.firestore,e instanceof sk?e.converter:null,new Zl(a))}function hk(e,t){return e=(0,Ki.m9)(e),t=(0,Ki.m9)(t),(e instanceof ak||e instanceof sk)&&(t instanceof ak||t instanceof sk)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function fk(e,t){return e=(0,Ki.m9)(e),t=(0,Ki.m9)(t),e instanceof uk&&t instanceof uk&&e.firestore===t.firestore&&Vh(e._query,t._query)&&e.converter===t.converter}var dk=function(){function e(){var t=this;d(this,e),this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new dg(this,"async_queue_retry"),this.Ra=function(){var e=hg();e&&Xc("AsyncQueue","Visibility state changed to "+e.visibilityState),t.ur.er()};var n=hg();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.Ra)}return f(e,[{key:"isShuttingDown",get:function(){return this.ya}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Pa(),this.ba(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;var t=hg();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}},{key:"enqueue",value:function(e){var t=this;if(this.Pa(),this.ya)return new Promise(function(){});var n=new sl;return this.ba(function(){return t.ya&&t.Ia?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)}).then(function(){return n.promise})}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget(function(){return t.ga.push(e),t.va()})}},{key:"va",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0===e.ga.length){t.next=14;break}return t.prev=1,t.next=4,e.ga[0]();case 4:e.ga.shift(),e.ur.reset(),t.next=13;break;case 8:if(t.prev=8,t.t0=t.catch(1),ap(t.t0)){t.next=12;break}throw t.t0;case 12:Xc("AsyncQueue","Operation failed with retryable error: "+t.t0);case 13:e.ga.length>0&&e.ur.Zi(function(){return e.va()});case 14:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"ba",value:function(e){var t=this,n=this.ma.then(function(){return t.Ea=!0,e().catch(function(e){throw t.Ta=e,t.Ea=!1,el("INTERNAL UNHANDLED ERROR: ",(r=(n=e).message||"",n.stack&&(r=n.stack.includes(n.message)?n.stack:n.message+"\n"+n.stack),r)),e;var n,r}).then(function(e){return t.Ea=!1,e})});return this.ma=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);var i=om.createAndSchedule(this,e,t,n,function(e){return r.Va(e)});return this.pa.push(i),i}},{key:"Pa",value:function(){this.Ta&&rl()}},{key:"verifyOperationInProgress",value:function(){}},{key:"Sa",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.ma,t.next=3,n;case 3:if(n!==e.ma){t.next=0;break}case 4:case"end":return t.stop()}},t)}))()}},{key:"Da",value:function(e){var t,n=s(this.pa);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Ca",value:function(e){var t=this;return this.Sa().then(function(){t.pa.sort(function(e,t){return e.targetTimeMs-t.targetTimeMs});var n,r=s(t.pa);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(o){r.e(o)}finally{r.f()}return t.Sa()})}},{key:"Na",value:function(e){this.Aa.push(e)}},{key:"Va",value:function(e){var t=this.pa.indexOf(e);this.pa.splice(t,1)}}]),e}();function pk(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var vk=function(){function e(){d(this,e),this._progressObserver={},this._taskCompletionResolver=new sl,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return f(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),gk=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r,i)).type="firestore",o._queue=new dk,o._persistenceKey="name"in e?e.name:"[DEFAULT]",o}return f(n,[{key:"_terminate",value:function(){return this._firestoreClient||yk(this),this._firestoreClient.terminate()}}]),n}(ok);function mk(e){return e._firestoreClient||yk(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yk(e){var t,n,r,i=e._freezeSettings(),o=(n=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new Ky(e._databaseId,n,e._persistenceKey,(r=i).host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams));e._firestoreClient=new Ny(e._authCredentials,e._appCheckCredentials,e._queue,o)}function kk(e,t,n){var r=new sl;return e.asyncQueue.enqueue((0,Hi.Z)(regeneratorRuntime.mark(function i(){var o;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Oy(e,n);case 3:return i.next=5,Dy(e,t);case 5:r.resolve(),i.next=13;break;case 8:if(i.prev=8,i.t0=i.catch(0),"FirebaseError"===(o=i.t0).name?o.code===al.FAILED_PRECONDITION||o.code===al.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&o instanceof DOMException)||22===o.code||20===o.code||11===o.code){i.next=12;break}throw i.t0;case 12:console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i.t0),r.reject(i.t0);case 13:case"end":return i.stop()}},i,null,[[0,8]])}))).then(function(){return r.promise})}function _k(e){if(e._initialized||e._terminated)throw new ul(al.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wk=function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ul(al.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nl(n)}return f(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}(),bk=function(){function e(t){d(this,e),this._byteString=t}return f(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Pl.fromBase64String(t))}catch(n){throw new ul(al.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}},{key:"fromUint8Array",value:function(t){return new e(Pl.fromUint8Array(t))}}]),e}(),xk=function e(t){d(this,e),this._methodName=t},Ik=function(){function e(t,n){if(d(this,e),!isFinite(t)||t<-90||t>90)throw new ul(al.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ul(al.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return f(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return _l(this._lat,e._lat)||_l(this._long,e._long)}}]),e}(),Tk=/^__.*__$/,Ck=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new yf(e,this.data,this.fieldMask,t,this.fieldTransforms):new mf(e,this.data,t,this.fieldTransforms)}}]),e}(),Ek=function(){function e(t,n,r){d(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return f(e,[{key:"toMutation",value:function(e,t){return new yf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Sk(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw rl()}}var Rk=function(){function e(t,n,r,i,o,a){d(this,e),this.settings=t,this.databaseId=n,this.k=r,this.ignoreUndefinedProperties=i,void 0===o&&this.ka(),this.fieldTransforms=o||[],this.fieldMask=a||[]}return f(e,[{key:"path",get:function(){return this.settings.path}},{key:"xa",get:function(){return this.settings.xa}},{key:"$a",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Fa",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}},{key:"La",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}},{key:"Ba",value:function(e){return this.$a({path:void 0,Oa:!0})}},{key:"Ua",value:function(e){return Yk(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find(function(t){return e.isPrefixOf(t)})||void 0!==this.fieldTransforms.find(function(t){return e.isPrefixOf(t.field)})}},{key:"ka",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}},{key:"Ma",value:function(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Sk(this.xa)&&Tk.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}]),e}(),Ak=function(){function e(t,n,r){d(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.k=r||fg(t)}return f(e,[{key:"ja",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Rk({xa:e,methodName:t,Ka:n,path:Nl.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}]),e}();function Nk(e){var t=e._freezeSettings(),n=fg(e._databaseId);return new Ak(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ok(e,t,n,r,i){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=e.ja(o.merge||o.mergeFields?2:0,t,n,i);Hk("Data must be an object, but it was:",a,r);var u,c,l=zk(r,a);if(o.merge)u=new Ol(a.fieldMask),c=a.fieldTransforms;else if(o.mergeFields){var h,f=[],d=s(o.mergeFields);try{for(d.s();!(h=d.n()).done;){var p=h.value,v=Gk(t,p,n);if(!a.contains(v))throw new ul(al.INVALID_ARGUMENT,"Field '".concat(v,"' is specified in your field mask but missing from your input data."));Qk(f,v)||f.push(v)}}catch(g){d.e(g)}finally{d.f()}u=new Ol(f),c=a.fieldTransforms.filter(function(e){return u.covers(e.field)})}else u=null,c=a.fieldTransforms;return new Ck(new oh(l),u,c)}var Pk=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.xa)throw e.Ua(1===e.xa?"".concat(this._methodName,"() can only appear at the top level of your update data"):"".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(xk);function Dk(e,t,n){return new Rk({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}var Lk=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"_toFieldTransform",value:function(e){return new uf(e.path,new $h)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(xk),Mk=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Qa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=Dk(this,e,!0),n=this.Qa.map(function(e){return Bk(e,t)}),r=new Xh(n);return new uf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(xk),Fk=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Qa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=Dk(this,e,!0),n=this.Qa.map(function(e){return Bk(e,t)}),r=new tf(n);return new uf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(xk),Uk=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e)).Wa=r,i}return f(n,[{key:"_toFieldTransform",value:function(e){var t=new rf(e.k,Wh(e.k,this.Wa));return new uf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(xk);function Vk(e,t,n,r){var i=e.ja(1,t,n);Hk("Data must be an object, but it was:",i,r);var o=[],a=oh.empty();Cl(r,function(e,r){var u=Kk(t,e,n);r=(0,Ki.m9)(r);var s=i.La(u);if(r instanceof Pk)o.push(u);else{var c=Bk(r,s);null!=c&&(o.push(u),a.set(u,c))}});var u=new Ol(o);return new Ek(a,u,i.fieldTransforms)}function jk(e,t,n,r,i,o){var a=e.ja(1,t,n),u=[Gk(t,r,n)],s=[i];if(o.length%2!=0)throw new ul(al.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<o.length;c+=2)u.push(Gk(t,o[c])),s.push(o[c+1]);for(var l=[],h=oh.empty(),f=u.length-1;f>=0;--f)if(!Qk(l,u[f])){var d=u[f],p=s[f];p=(0,Ki.m9)(p);var v=a.La(d);if(p instanceof Pk)l.push(d);else{var g=Bk(p,v);null!=g&&(l.push(d),h.set(d,g))}}var m=new Ol(l);return new Ek(h,m,a.fieldTransforms)}function qk(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Bk(n,e.ja(r?4:3,t))}function Bk(e,t){if(Zk(e=(0,Ki.m9)(e)))return Hk("Unsupported field value:",t,e),zk(e,t);if(e instanceof xk)return function(e,t){if(!Sk(t.xa))throw t.Ua("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Ua("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,o=s(e);try{for(o.s();!(n=o.n()).done;){var a=Bk(n.value,t.Ba(i));null==a&&(a={nullValue:"NULL_VALUE"}),r.push(a),i++}}catch(u){o.e(u)}finally{o.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=(0,Ki.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Wh(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=xl.fromDate(e);return{timestampValue:nd(t.k,n)}}if(e instanceof xl){var r=new xl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:nd(t.k,r)}}if(e instanceof Ik)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof bk)return{bytesValue:rd(t.k,e._byteString)};if(e instanceof ak){var i=t.databaseId,o=e.firestore._databaseId;if(!o.isEqual(i))throw t.Ua("Document reference is for database ".concat(o.projectId,"/").concat(o.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:ad(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua("Unsupported field value: ".concat(tk(e)))}(e,t)}function zk(e,t){var n={};return El(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Cl(e,function(e,r){var i=Bk(r,t.Fa(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Zk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof xl||e instanceof Ik||e instanceof bk||e instanceof ak||e instanceof xk)}function Hk(e,t,n){if(!Zk(n)||"object"!=typeof(i=n)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){var r=tk(n);throw t.Ua("an object"===r?e+" a custom object":e+" "+r)}var i}function Gk(e,t,n){if((t=(0,Ki.m9)(t))instanceof wk)return t._internalPath;if("string"==typeof t)return Kk(e,t);throw Yk("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}var Wk=new RegExp("[~\\*/\\[\\]]");function Kk(e,t,n){if(t.search(Wk)>=0)throw Yk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return k(wk,a(t.split(".")))._internalPath}catch(r){throw Yk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Yk(e,t,n,r,i){var o=r&&!r.isEmpty(),a=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(o||a)&&(s+=" (found",o&&(s+=" in field ".concat(r)),a&&(s+=" in document ".concat(i)),s+=")"),new ul(al.INVALID_ARGUMENT,u+e+s)}function Qk(e,t){return e.some(function(e){return e.isEqual(t)})}var Jk=function(){function e(t,n,r,i,o){d(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}return f(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new ak(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new $k(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(Xk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),$k=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){return i(b(n.prototype),"data",this).call(this)}}]),n}(Jk);function Xk(e,t){return"string"==typeof t?Kk(e,t):t instanceof wk?t._internalPath:t._delegate._internalPath}var e_=function(){function e(t,n){d(this,e),this.hasPendingWrites=t,this.fromCache=n}return f(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),t_=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a,u){var s;return d(this,n),(s=t.call(this,e,r,i,o,u))._firestore=e,s._firestoreImpl=e,s.metadata=a,s}return f(n,[{key:"exists",value:function(){return i(b(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new n_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(Xk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(Jk),n_=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i(b(n.prototype),"data",this).call(this,e)}}]),n}(t_),r_=function(){function e(t,n,r,i){d(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new e_(i.hasPendingWrites,i.fromCache),this.query=r}return f(e,[{key:"docs",get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach(function(r){e.call(t,new n_(n._firestore,n._userDataWriter,r.key,r,new e_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})}},{key:"docChanges",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ul(al.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map(function(t){return{type:"added",doc:new n_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new e_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:n++}})}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(function(e){return t||3!==e.type}).map(function(t){var n=new n_(e._firestore,e._userDataWriter,t.doc.key,t.doc,new e_(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,o=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(o=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:i_(t.type),doc:n,oldIndex:i,newIndex:o}})}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}]),e}();function i_(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return rl()}}function o_(e,t){return e instanceof t_&&t instanceof t_?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof r_&&t instanceof r_&&e._firestore===t._firestore&&fk(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function a_(e){if(Oh(e)&&0===e.explicitOrderBy.length)throw new ul(al.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var u_=function e(){d(this,e)};function s_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(var i=0,o=n;i<o.length;i++){var a=o[i];e=a._apply(e)}return e}var c_=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).Ga=e,o.za=r,o.Ha=i,o.type="where",o}return f(n,[{key:"_apply",value:function(e){var t,n,r,i=Nk(e.firestore),o=function(e,t,n,r,i,o,a){var u;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new ul(al.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(o,"' queries on FieldPath.documentId()."));if("in"===o||"not-in"===o){g_(a,o);var c,l=[],h=s(a);try{for(h.s();!(c=h.n()).done;){var f=c.value;l.push(v_(r,e,f))}}catch(p){h.e(p)}finally{h.f()}u={arrayValue:{values:l}}}else u=v_(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||g_(a,o),u=qk(n,"where",a,"in"===o||"not-in"===o);var d=dh.create(i,o,u);return function(e,t){if(t.V()){var n=Dh(e);if(null!==n&&!n.isEqual(t.field))throw new ul(al.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(t.field.toString(),"'"));var r=Ph(e);null!==r&&m_(0,t.field,r)}var i=function(e,t){var n,r=s(e.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(t.indexOf(i.op)>=0)return i.op}}catch(p){r.e(p)}finally{r.f()}return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==i)throw new ul(al.INVALID_ARGUMENT,i===t.op?"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter."):"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(i.toString(),"' filters."))}(e,d),d}(e._query,0,i,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new uk(e.firestore,e.converter,(t=e._query,n=o,r=t.filters.concat([n]),new Sh(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(u_),l_=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).Ga=e,i.Ja=r,i.type="orderBy",i}return f(n,[{key:"_apply",value:function(e){var t,n,r,i=function(e,t,n){if(null!==e.startAt)throw new ul(al.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ul(al.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ih(t,n);return function(e,t){if(null===Ph(e)){var n=Dh(e);null!==n&&m_(0,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new uk(e.firestore,e.converter,(t=e._query,n=i,r=t.explicitOrderBy.concat([n]),new Sh(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}]),n}(u_),h_=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).type=e,o.Ya=r,o.Xa=i,o}return f(n,[{key:"_apply",value:function(e){return new uk(e.firestore,e.converter,Uh(e._query,this.Ya,this.Xa))}}]),n}(u_),f_=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).type=e,o.Za=r,o.tc=i,o}return f(n,[{key:"_apply",value:function(e){var t,n,r=p_(e,this.type,this.Za,this.tc);return new uk(e.firestore,e.converter,(n=r,new Sh((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,n,t.endAt)))}}]),n}(u_),d_=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).type=e,o.Za=r,o.tc=i,o}return f(n,[{key:"_apply",value:function(e){var t,n,r=p_(e,this.type,this.Za,this.tc);return new uk(e.firestore,e.converter,(n=r,new Sh((t=e._query).path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,n)))}}]),n}(u_);function p_(e,t,n,r){if(n[0]=(0,Ki.m9)(n[0]),n[0]instanceof Jk)return function(e,t,n,r,i){if(!r)throw new ul(al.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var o,a=[],u=s(Mh(e));try{for(u.s();!(o=u.n()).done;){var c=o.value;if(c.field.isKeyField())a.push($l(t,r.key));else{var l=r.data.field(c.field);if(Ul(l))throw new ul(al.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+c.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===l){var h=c.field.canonicalString();throw new ul(al.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(h,"' (used as the orderBy) does not exist."))}a.push(l)}}}catch(f){u.e(f)}finally{u.f()}return new bh(a,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Nk(e.firestore);return function(e,t,n,r,i,o){var a=e.explicitOrderBy;if(i.length>a.length)throw new ul(al.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(a[s].field.isKeyField()){if("string"!=typeof c)throw new ul(al.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Lh(e)&&-1!==c.indexOf("/"))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Rl.fromString(c));if(!Zl.isDocumentKey(l))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var h=new Zl(l);u.push($l(t,h))}else{var f=qk(n,r,c);u.push(f)}}return new bh(u,o)}(e._query,e.firestore._databaseId,i,t,n,r)}function v_(e,t,n){if("string"==typeof(n=(0,Ki.m9)(n))){if(""===n)throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Lh(t)&&-1!==n.indexOf("/"))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Rl.fromString(n));if(!Zl.isDocumentKey(r))throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return $l(e,new Zl(r))}if(n instanceof ak)return $l(e,n._key);throw new ul(al.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(tk(n),"."))}function g_(e,t){if(!Array.isArray(e)||0===e.length)throw new ul(al.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."));if(e.length>10)throw new ul(al.INVALID_ARGUMENT,"Invalid Query. '".concat(t.toString(),"' filters support a maximum of 10 elements in the value array."))}function m_(e,t,n){if(!n.isEqual(t))throw new ul(al.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var y_=function(){function e(){d(this,e)}return f(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ml(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw rl()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return Cl(e.fields,function(e,i){r[e]=n.convertValue(i,t)}),r}},{key:"convertGeoPoint",value:function(e){return new Ik(Ml(e.latitude),Ml(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map(function(e){return n.convertValue(e,t)})}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Vl(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(jl(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ll(e);return new xl(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Rl.fromString(e);il(Nd(n));var r=new Yy(n.get(1),n.get(3)),i=new Zl(n.popFirst(5));return r.isEqual(t)||el("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function k_(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var __=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new bk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ak(this.firestore,null,t)}}]),n}(y_),w_=function(){function e(t,n){d(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Nk(t)}return f(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=b_(e,this._firestore),i=k_(r.converter,t,n),o=Ok(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,cf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=b_(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return r="string"==typeof(t=(0,Ki.m9)(t))||t instanceof wk?jk(this._dataReader,"WriteBatch.update",i._key,t,n,a):Vk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,cf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=b_(e,this._firestore);return this._mutations=this._mutations.concat(new If(t._key,cf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ul(al.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function b_(e,t){if((e=(0,Ki.m9)(e)).firestore!==t)throw new ul(al.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var x_=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new bk(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new ak(this.firestore,null,t)}}]),n}(y_);function I_(e,t,n){e=nk(e,ak);var r=nk(e.firestore,gk),i=k_(e.converter,t,n);return E_(r,[Ok(Nk(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,cf.none())])}function T_(e,t,n){e=nk(e,ak);for(var r=nk(e.firestore,gk),i=Nk(r),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return E_(r,[("string"==typeof(t=(0,Ki.m9)(t))||t instanceof wk?jk(i,"updateDoc",e._key,t,n,a):Vk(i,"updateDoc",e._key,t)).toMutation(e._key,cf.exists(!0))])}function C_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,a;e=(0,Ki.m9)(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||pk(n[s])||(u=n[s],s++);var c,l,h,f={includeMetadataChanges:u.includeMetadataChanges};if(pk(n[s])){var d=n[s];n[s]=null===(i=d.next)||void 0===i?void 0:i.bind(d),n[s+1]=null===(o=d.error)||void 0===o?void 0:o.bind(d),n[s+2]=null===(a=d.complete)||void 0===a?void 0:a.bind(d)}if(e instanceof ak)l=nk(e.firestore,gk),h=Ah(e._key.path),c={next:function(t){n[s]&&n[s](S_(l,e,t))},error:n[s+1],complete:n[s+2]};else{var p=nk(e,uk);l=nk(p.firestore,gk),h=p._query;var v=new x_(l);c={next:function(e){n[s]&&n[s](new r_(l,v,p,e))},error:n[s+1],complete:n[s+2]},a_(e._query)}return function(e,t,n,r){var i=new Ey(r),o=new km(t,i,n);return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fm,t.next=3,Zy(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)}))),function(){i.na(),e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=pm,t.next=3,Zy(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}},t)})))}}(mk(l),h,f,c)}function E_(e,t){return n=mk(e),r=t,i=new sl,n.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t,n){return Mm.apply(this,arguments)},e.next=3,zy(n);case 3:return e.t1=e.sent,e.t2=r,e.t3=i,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}},e)}))),i.promise;var n,r,i}function S_(e,t,n){var r=n.docs.get(t._key),i=new x_(e);return new t_(e,i,t._key,r,new e_(n.hasPendingWrites,n.fromCache),t.converter)}var R_=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r))._firestore=e,i}return f(n,[{key:"get",value:function(e){var t=this,r=b_(e,this._firestore),o=new x_(this._firestore);return i(b(n.prototype),"get",this).call(this,e).then(function(e){return new t_(t._firestore,o,r._key,e._document,new e_(!1,!1),r.converter)})}}]),n}(function(){function e(t,n){d(this,e),this._firestore=t,this._transaction=n,this._dataReader=Nk(t)}return f(e,[{key:"get",value:function(e){var t=this,n=b_(e,this._firestore),r=new __(this._firestore);return this._transaction.lookup([n._key]).then(function(e){if(!e||1!==e.length)return rl();var i=e[0];if(i.isFoundDocument())return new Jk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Jk(t._firestore,r,n._key,null,n.converter);throw rl()})}},{key:"set",value:function(e,t,n){var r=b_(e,this._firestore),i=k_(r.converter,t,n),o=Ok(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}},{key:"update",value:function(e,t,n){for(var r,i=b_(e,this._firestore),o=arguments.length,a=new Array(o>3?o-3:0),u=3;u<o;u++)a[u-3]=arguments[u];return r="string"==typeof(t=(0,Ki.m9)(t))||t instanceof wk?jk(this._dataReader,"Transaction.update",i._key,t,n,a):Vk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=b_(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];Qc=Gi.SDK_VERSION,(0,Gi._registerComponent)(new Wi.wA("firestore",function(e,n){var r=n.options,i=e.getProvider("app").getImmediate(),o=new gk(i,new fl(e.getProvider("auth-internal")),new gl(e.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC")),(0,Gi.registerVersion)(Kc,"3.4.1",e),(0,Gi.registerVersion)(Kc,"3.4.1","esm2017")}();var A_={includeMetadataChanges:!1};var N_=function e(t){return d(this,e),t},O_="firestore",P_=new u.OlP("angularfire2.firestore-instances");function D_(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new N_(r)}}var L_={provide:function e(){return d(this,e),(0,Di.vb)(O_)},deps:[[new u.FiY,P_]]},M_={provide:N_,useFactory:function(e,t){var n=(0,Di.JM)(O_,e,t);return n&&new N_(n)},deps:[[new u.FiY,P_],Mi]},F_=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"fst")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[M_,L_]}),e}();function U_(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:F_,providers:[{provide:P_,useFactory:D_(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi,[new u.FiY,Oo],[new u.FiY,Ro]].concat(n)}]}}var V_=(0,Di.u3)(function(e,t){return void 0===t&&(t={}),function(e){return function(e,t){return void 0===t&&(t=A_),new qe.y(function(n){return{unsubscribe:C_(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}(e,{includeMetadataChanges:!0}).pipe((0,Xe.U)(function(e){return e.docs}))}(e).pipe((0,Xe.U)(function(e){return e.map(function(e){return function(e,t){void 0===t&&(t={});var n=e.data();return!e.exists()||"object"!=typeof n||null===n||t.idField&&(n[t.idField]=e.id),n}(e,t)})}))},!0),j_=(0,Di.u3)(ck,!0),q_=(0,Di.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Gi.getApp)();return(0,Gi._getProvider)(e,"firestore").getImmediate()},!0),B_=function(){var e=function(){function e(t,n){d(this,e),this.firestore=t,this._router=n}return f(e,[{key:"ngOnInit",value:function(){var e=this;this.currentUser=localStorage.getItem("currentUser")?JSON.parse(""+localStorage.getItem("currentUser")):"";var t=j_(this.firestore,"users_credentials");V_(t).subscribe(function(t){e.credentials=t,e.credentials.map(function(t){t.user_id==e.currentUser.uid&&(e.currentUserCredentials=t)}),console.log({credentials:e.currentUserCredentials})})}},{key:"logout",value:function(){localStorage.removeItem("currentUser"),this._router.navigate(["/login"])}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(N_),u.Y36(di))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-profile"]],decls:40,vars:4,consts:[[1,"profile"],["src","../../../assets/images.png","alt","",1,"photo"],[1,"name"],[1,"details"],[1,"d-flex","align-items-center","w-100"],[1,"buttons"],[1,"button","follow",3,"click"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","version","1.1","id","Capa_1","x","0px","y","0px","viewBox","0 0 384.971 384.971",0,"xml","space","preserve",2,"enable-background","new 0 0 384.971 384.971"],["id","Sign_Out"],["d","M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03    C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03    C192.485,366.299,187.095,360.91,180.455,360.91z"],["d","M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279    c-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179    c4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z"]],template:function(e,t){1&e&&(u.TgZ(0,"div",0),u._UZ(1,"img",1),u.TgZ(2,"span",2),u._uU(3),u.qZA(),u.TgZ(4,"span",3),u._uU(5),u.qZA(),u.TgZ(6,"div",4),u.TgZ(7,"span",3),u._uU(8),u.qZA(),u.TgZ(9,"span",3),u._uU(10),u.qZA(),u.qZA(),u.TgZ(11,"div",5),u.TgZ(12,"div",6),u.NdJ("click",function(){return t.logout()}),u.O4$(),u.TgZ(13,"svg",7),u.TgZ(14,"g"),u.TgZ(15,"g",8),u._UZ(16,"path",9),u._UZ(17,"path",10),u.qZA(),u._UZ(18,"g"),u._UZ(19,"g"),u._UZ(20,"g"),u._UZ(21,"g"),u._UZ(22,"g"),u._UZ(23,"g"),u.qZA(),u._UZ(24,"g"),u._UZ(25,"g"),u._UZ(26,"g"),u._UZ(27,"g"),u._UZ(28,"g"),u._UZ(29,"g"),u._UZ(30,"g"),u._UZ(31,"g"),u._UZ(32,"g"),u._UZ(33,"g"),u._UZ(34,"g"),u._UZ(35,"g"),u._UZ(36,"g"),u._UZ(37,"g"),u._UZ(38,"g"),u.qZA(),u._uU(39," Sign out "),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(3),u.Oqu(null==t.currentUserCredentials?null:t.currentUserCredentials.username),u.xp6(2),u.Oqu(t.currentUser.email),u.xp6(3),u.Oqu(null==t.currentUserCredentials?null:t.currentUserCredentials.address),u.xp6(2),u.Oqu(null==t.currentUserCredentials?null:t.currentUserCredentials.birth_date))},styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;border:none;text-decoration:none;box-sizing:border-box;-webkit-overflow-scrolling:touch;font-family:"Montserrat",sans-serif;line-height:1}body[_ngcontent-%COMP%]{background:#e7dcff;background:linear-gradient(120deg,#e7dcff 0%,rgba(255,234,203,.868785014) 59%,#f6f1ff 100%);display:flex;height:100vh;align-items:center;justify-content:center}.profile[_ngcontent-%COMP%]{margin:auto;background-color:#fff;border-radius:40px;width:480px;padding:50px;display:flex;flex-direction:column;align-items:center;justify-content:center}.profile[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:30px;border:15px solid rgba(246,242,255,.7);-o-object-fit:cover;object-fit:cover}.profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:24px;font-size:22px;font-weight:bold}.profile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:13px;font-weight:400;width:50%;margin-top:8px;line-height:1.3;text-align:center}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:50px}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#ffedd2}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .follow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fa3967 0%,#fa9639 100%)}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:186px;height:54px;border-radius:30px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:500;margin-left:12px;cursor:pointer}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:first{margin-left:0}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:22px;margin-right:4px}']}),e}(),z_=o(1555);function Z_(e,t){return new qe.y(function(n){var r=e.length;if(0!==r)for(var i=new Array(r),o=0,a=0,u=function(u){var s=(0,Ae.D)(e[u]),c=!1;n.add(s.subscribe({next:function(e){c||(c=!0,a++),i[u]=e},error:function(e){return n.error(e)},complete:function(){(++o===r||!c)&&(a===r&&n.next(t?t.reduce(function(e,t,n){return e[t]=i[n],e},{}):i),n.complete())}}))},s=0;s<r;s++)u(s);else n.complete()})}var H_=function(){var e=function(){function e(t,n){d(this,e),this._renderer=t,this._elementRef=n,this.onChange=function(e){},this.onTouched=function(){}}return f(e,[{key:"setProperty",value:function(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"registerOnChange",value:function(e){this.onChange=e}},{key:"setDisabledState",value:function(e){this.setProperty("disabled",e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.Qsj),u.Y36(u.SBq))},e.\u0275dir=u.lG2({type:e}),e}(),G_=function(){var e,t=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(H_);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,features:[u.qOj]}),t}(),W_=new u.OlP("NgValueAccessor"),K_={provide:W_,useExisting:(0,u.Gpc)(function(){return Q_}),multi:!0},Y_=new u.OlP("CompositionEventMode"),Q_=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e,r))._compositionMode=i,o._composing=!1,null==o._compositionMode&&(o._compositionMode=!function(){var e=l()?l().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}()),o}return f(n,[{key:"writeValue",value:function(e){this.setProperty("value",null==e?"":e)}},{key:"_handleInput",value:function(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}},{key:"_compositionStart",value:function(){this._composing=!0}},{key:"_compositionEnd",value:function(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}]),n}(H_);return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(Y_,8))},e.\u0275dir=u.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&u.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[u._Bn([K_]),u.qOj]}),e}();function J_(e){return null==e||0===e.length}function $_(e){return null!=e&&"number"==typeof e.length}var X_=new u.OlP("NgValidators"),ew=new u.OlP("NgAsyncValidators"),tw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,nw=function(){function e(){d(this,e)}return f(e,null,[{key:"min",value:function(e){return function(e){return function(t){if(J_(t.value)||J_(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}},{key:"max",value:function(e){return function(e){return function(t){if(J_(t.value)||J_(e))return null;var n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}},{key:"required",value:function(e){return function(e){return J_(e.value)?{required:!0}:null}(e)}},{key:"requiredTrue",value:function(e){return function(e){return!0===e.value?null:{required:!0}}(e)}},{key:"email",value:function(e){return function(e){return J_(e.value)||tw.test(e.value)?null:{email:!0}}(e)}},{key:"minLength",value:function(e){return function(e){return function(t){return J_(t.value)||!$_(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"maxLength",value:function(e){return function(e){return function(t){return $_(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}}(e)}},{key:"pattern",value:function(e){return function(e){return e?("string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),function(e){if(J_(e.value))return null;var r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}):rw;var t,n}(e)}},{key:"nullValidator",value:function(e){return null}},{key:"compose",value:function(e){return cw(e)}},{key:"composeAsync",value:function(e){return hw(e)}}]),e}();function rw(e){return null}function iw(e){return null!=e}function ow(e){var t=(0,u.QGY)(e)?(0,Ae.D)(e):e;return(0,u.CqO)(t),t}function aw(e){var t={};return e.forEach(function(e){t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function uw(e,t){return t.map(function(t){return t(e)})}function sw(e){return e.map(function(e){return function(e){return!e.validate}(e)?e:function(t){return e.validate(t)}})}function cw(e){if(!e)return null;var t=e.filter(iw);return 0==t.length?null:function(e){return aw(uw(e,t))}}function lw(e){return null!=e?cw(sw(e)):null}function hw(e){if(!e)return null;var t=e.filter(iw);return 0==t.length?null:function(e){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){var r=t[0];if((0,Me.k)(r))return Z_(r,null);if((0,z_.K)(r)&&Object.getPrototypeOf(r)===Object.prototype){var i=Object.keys(r);return Z_(i.map(function(e){return r[e]}),i)}}if("function"==typeof t[t.length-1]){var o=t.pop();return Z_(t=1===t.length&&(0,Me.k)(t[0])?t[0]:t,null).pipe((0,Xe.U)(function(e){return o.apply(void 0,a(e))}))}return Z_(t,null)}(uw(e,t).map(ow)).pipe((0,Xe.U)(aw))}}function fw(e){return null!=e?hw(sw(e)):null}function dw(e,t){return null===e?[t]:Array.isArray(e)?[].concat(a(e),[t]):[e,t]}function pw(e){return e._rawValidators}function vw(e){return e._rawAsyncValidators}function gw(e){return e?Array.isArray(e)?e:[e]:[]}function mw(e,t){return Array.isArray(e)?e.includes(t):e===t}function yw(e,t){var n=gw(t);return gw(e).forEach(function(e){mw(n,e)||n.push(e)}),n}function kw(e,t){return gw(t).filter(function(t){return!mw(e,t)})}var _w=function(){var e=function(){function e(){d(this,e),this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}return f(e,[{key:"value",get:function(){return this.control?this.control.value:null}},{key:"valid",get:function(){return this.control?this.control.valid:null}},{key:"invalid",get:function(){return this.control?this.control.invalid:null}},{key:"pending",get:function(){return this.control?this.control.pending:null}},{key:"disabled",get:function(){return this.control?this.control.disabled:null}},{key:"enabled",get:function(){return this.control?this.control.enabled:null}},{key:"errors",get:function(){return this.control?this.control.errors:null}},{key:"pristine",get:function(){return this.control?this.control.pristine:null}},{key:"dirty",get:function(){return this.control?this.control.dirty:null}},{key:"touched",get:function(){return this.control?this.control.touched:null}},{key:"status",get:function(){return this.control?this.control.status:null}},{key:"untouched",get:function(){return this.control?this.control.untouched:null}},{key:"statusChanges",get:function(){return this.control?this.control.statusChanges:null}},{key:"valueChanges",get:function(){return this.control?this.control.valueChanges:null}},{key:"path",get:function(){return null}},{key:"_setValidators",value:function(e){this._rawValidators=e||[],this._composedValidatorFn=lw(this._rawValidators)}},{key:"_setAsyncValidators",value:function(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fw(this._rawAsyncValidators)}},{key:"validator",get:function(){return this._composedValidatorFn||null}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn||null}},{key:"_registerOnDestroy",value:function(e){this._onDestroyCallbacks.push(e)}},{key:"_invokeOnDestroyCallbacks",value:function(){this._onDestroyCallbacks.forEach(function(e){return e()}),this._onDestroyCallbacks=[]}},{key:"reset",value:function(e){this.control&&this.control.reset(e)}},{key:"hasError",value:function(e,t){return!!this.control&&this.control.hasError(e,t)}},{key:"getError",value:function(e,t){return this.control?this.control.getError(e,t):null}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=u.lG2({type:e}),e}(),ww=function(){var e,t=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"formDirective",get:function(){return null}},{key:"path",get:function(){return null}}]),n}(_w);return t.\u0275fac=function(n){return(e||(e=u.n5z(t)))(n||t)},t.\u0275dir=u.lG2({type:t,features:[u.qOj]}),t}(),bw=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.apply(this,arguments))._parent=null,e.name=null,e.valueAccessor=null,e}return n}(_w),xw=function(){function e(t){d(this,e),this._cd=t}return f(e,[{key:"is",value:function(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}]),e}(),Iw=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return n}(xw);return e.\u0275fac=function(t){return new(t||e)(u.Y36(bw,2))},e.\u0275dir=u.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&u.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[u.qOj]}),e}(),Tw=function(){var e=function(e){p(n,e);var t=v(n);function n(e){return d(this,n),t.call(this,e)}return n}(xw);return e.\u0275fac=function(t){return new(t||e)(u.Y36(ww,10))},e.\u0275dir=u.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&u.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[u.qOj]}),e}();function Cw(e,t){Rw(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(function(n){e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Nw(e,t)})}(e,t),function(e,t){var n=function(e,n){t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(function(){e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(function(){e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Nw(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){var n=function(e){t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(function(){e._unregisterOnDisabledChange(n)})}}(e,t)}function Ew(e,t){var n=function(){};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Aw(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(function(){}))}function Sw(e,t){e.forEach(function(e){e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function Rw(e,t){var n=pw(e);null!==t.validator?e.setValidators(dw(n,t.validator)):"function"==typeof n&&e.setValidators([n]);var r=vw(e);null!==t.asyncValidator?e.setAsyncValidators(dw(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);var i=function(){return e.updateValueAndValidity()};Sw(t._rawValidators,i),Sw(t._rawAsyncValidators,i)}function Aw(e,t){var n=!1;if(null!==e){if(null!==t.validator){var r=pw(e);if(Array.isArray(r)&&r.length>0){var i=r.filter(function(e){return e!==t.validator});i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){var o=vw(e);if(Array.isArray(o)&&o.length>0){var a=o.filter(function(e){return e!==t.asyncValidator});a.length!==o.length&&(n=!0,e.setAsyncValidators(a))}}}var u=function(){};return Sw(t._rawValidators,u),Sw(t._rawAsyncValidators,u),n}function Nw(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Ow(e,t){Rw(e,t)}function Pw(e,t){e._syncPendingControls(),t.forEach(function(e){var t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Dw(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var Lw="VALID",Mw="INVALID",Fw="PENDING",Uw="DISABLED";function Vw(e){return(zw(e)?e.validators:e)||null}function jw(e){return Array.isArray(e)?lw(e):e||null}function qw(e,t){return(zw(t)?t.asyncValidators:e)||null}function Bw(e){return Array.isArray(e)?fw(e):e||null}function zw(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}var Zw=function(){function e(t,n){d(this,e),this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=function(){},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=n,this._composedValidatorFn=jw(this._rawValidators),this._composedAsyncValidatorFn=Bw(this._rawAsyncValidators)}return f(e,[{key:"validator",get:function(){return this._composedValidatorFn},set:function(e){this._rawValidators=this._composedValidatorFn=e}},{key:"asyncValidator",get:function(){return this._composedAsyncValidatorFn},set:function(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}},{key:"parent",get:function(){return this._parent}},{key:"valid",get:function(){return this.status===Lw}},{key:"invalid",get:function(){return this.status===Mw}},{key:"pending",get:function(){return this.status==Fw}},{key:"disabled",get:function(){return this.status===Uw}},{key:"enabled",get:function(){return this.status!==Uw}},{key:"dirty",get:function(){return!this.pristine}},{key:"untouched",get:function(){return!this.touched}},{key:"updateOn",get:function(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}},{key:"setValidators",value:function(e){this._rawValidators=e,this._composedValidatorFn=jw(e)}},{key:"setAsyncValidators",value:function(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Bw(e)}},{key:"addValidators",value:function(e){this.setValidators(yw(e,this._rawValidators))}},{key:"addAsyncValidators",value:function(e){this.setAsyncValidators(yw(e,this._rawAsyncValidators))}},{key:"removeValidators",value:function(e){this.setValidators(kw(e,this._rawValidators))}},{key:"removeAsyncValidators",value:function(e){this.setAsyncValidators(kw(e,this._rawAsyncValidators))}},{key:"hasValidator",value:function(e){return mw(this._rawValidators,e)}},{key:"hasAsyncValidator",value:function(e){return mw(this._rawAsyncValidators,e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"markAsTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}},{key:"markAllAsTouched",value:function(){this.markAsTouched({onlySelf:!0}),this._forEachChild(function(e){return e.markAllAsTouched()})}},{key:"markAsUntouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(e){e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"markAsDirty",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}},{key:"markAsPristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,this._forEachChild(function(e){e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"markAsPending",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.status=Fw,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}},{key:"disable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status=Uw,this.errors=null,this._forEachChild(function(t){t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!0)})}},{key:"enable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this._parentMarkedDirty(e.onlySelf);this.status=Lw,this._forEachChild(function(t){t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(function(e){return e(!1)})}},{key:"_updateAncestors",value:function(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}},{key:"setParent",value:function(e){this._parent=e}},{key:"updateValueAndValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Lw||this.status===Fw)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}},{key:"_updateTreeValidity",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{emitEvent:!0};this._forEachChild(function(t){return t._updateTreeValidity(e)}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}},{key:"_setInitialStatus",value:function(){this.status=this._allControlsDisabled()?Uw:Lw}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t=this;if(this.asyncValidator){this.status=Fw,this._hasOwnPendingAsyncValidator=!0;var n=ow(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(function(n){t._hasOwnPendingAsyncValidator=!1,t.setErrors(n,{emitEvent:e})})}}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}},{key:"setErrors",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}},{key:"get",value:function(e){return function(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;var r=e;return t.forEach(function(e){r=r instanceof Gw?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Ww&&r.at(e)||null}),r}(this,e)}},{key:"getError",value:function(e,t){var n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}},{key:"hasError",value:function(e,t){return!!this.getError(e,t)}},{key:"root",get:function(){for(var e=this;e._parent;)e=e._parent;return e}},{key:"_updateControlsErrors",value:function(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}},{key:"_initObservables",value:function(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?Uw:this.errors?Mw:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Fw)?Fw:this._anyControlsHaveStatus(Mw)?Mw:Lw}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(e){return e.dirty})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(e){return e.touched})}},{key:"_updatePristine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}},{key:"_updateTouched",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}},{key:"_isBoxedValue",value:function(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}},{key:"_registerOnCollectionChange",value:function(e){this._onCollectionChange=e}},{key:"_setUpdateStrategy",value:function(e){zw(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}},{key:"_parentMarkedDirty",value:function(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}]),e}(),Hw=function(e){p(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,o=arguments.length>2?arguments[2]:void 0;return d(this,n),(e=t.call(this,Vw(i),qw(o,i)))._onChange=[],e._applyFormState(r),e._setUpdateStrategy(i),e._initObservables(),e.updateValueAndValidity({onlySelf:!0,emitEvent:!!e.asyncValidator}),e}return f(n,[{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(function(e){return e(t.value,!1!==n.emitViewToModelChange)}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.setValue(e,t)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}},{key:"_updateValue",value:function(){}},{key:"_anyControls",value:function(e){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"registerOnChange",value:function(e){this._onChange.push(e)}},{key:"_unregisterOnChange",value:function(e){Dw(this._onChange,e)}},{key:"registerOnDisabledChange",value:function(e){this._onDisabledChange.push(e)}},{key:"_unregisterOnDisabledChange",value:function(e){Dw(this._onDisabledChange,e)}},{key:"_forEachChild",value:function(e){}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}},{key:"_applyFormState",value:function(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}]),n}(Zw),Gw=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,Vw(r),qw(i,r))).controls=e,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!o.asyncValidator}),o}return f(n,[{key:"registerControl",value:function(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}},{key:"addControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"removeControl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"contains",value:function(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(r){t._throwIfControlMissing(r),t.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(Object.keys(e).forEach(function(r){t.controls[r]&&t.controls[r].patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(e,t,n){return e[n]=t instanceof Hw?t.value:t.getRawValue(),e})}},{key:"_syncPendingControls",value:function(){var e=this._reduceChildren(!1,function(e,t){return!!t._syncPendingControls()||e});return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error("Cannot find form control with name: ".concat(e,"."))}},{key:"_forEachChild",value:function(e){var t=this;Object.keys(this.controls).forEach(function(n){var r=t.controls[n];r&&e(r,n)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_anyControls",value:function(e){for(var t=0,n=Object.keys(this.controls);t<n.length;t++){var r=n[t],i=this.controls[r];if(this.contains(r)&&e(i))return!0}return!1}},{key:"_reduceValue",value:function(){var e=this;return this._reduceChildren({},function(t,n,r){return(n.enabled||e.disabled)&&(t[r]=n.value),t})}},{key:"_reduceChildren",value:function(e,t){var n=e;return this._forEachChild(function(e,r){n=t(n,e,r)}),n}},{key:"_allControlsDisabled",value:function(){for(var e=0,t=Object.keys(this.controls);e<t.length;e++){var n=t[e];if(this.controls[n].enabled)return!1}return Object.keys(this.controls).length>0||this.disabled}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control with name: '".concat(n,"'."))})}}]),n}(Zw),Ww=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,Vw(r),qw(i,r))).controls=e,o._initObservables(),o._setUpdateStrategy(r),o._setUpControls(),o.updateValueAndValidity({onlySelf:!0,emitEvent:!!o.asyncValidator}),o}return f(n,[{key:"at",value:function(e){return this.controls[e]}},{key:"push",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}},{key:"insert",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}},{key:"removeAt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}},{key:"setControl",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.controls[e]&&this.controls[e]._registerOnCollectionChange(function(){}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}},{key:"length",get:function(){return this.controls.length}},{key:"setValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),e.forEach(function(e,r){t._throwIfControlMissing(r),t.at(r).setValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}},{key:"patchValue",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};null!=e&&(e.forEach(function(e,r){t.at(r)&&t.at(r).patchValue(e,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(n,r){n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}},{key:"getRawValue",value:function(){return this.controls.map(function(e){return e instanceof Hw?e.value:e.getRawValue()})}},{key:"clear",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.controls.length<1||(this._forEachChild(function(e){return e._registerOnCollectionChange(function(){})}),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}},{key:"_syncPendingControls",value:function(){var e=this.controls.reduce(function(e,t){return!!t._syncPendingControls()||e},!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}},{key:"_throwIfControlMissing",value:function(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error("Cannot find form control at index ".concat(e))}},{key:"_forEachChild",value:function(e){this.controls.forEach(function(t,n){e(t,n)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(e){return e.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(e){this._forEachChild(function(t,n){if(void 0===e[n])throw new Error("Must supply a value for form control at index: ".concat(n,"."))})}},{key:"_allControlsDisabled",value:function(){var e,t=s(this.controls);try{for(t.s();!(e=t.n()).done;){if(e.value.enabled)return!1}}catch(n){t.e(n)}finally{t.f()}return this.controls.length>0||this.disabled}},{key:"_registerControl",value:function(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}]),n}(Zw),Kw={provide:ww,useExisting:(0,u.Gpc)(function(){return Qw})},Yw=Promise.resolve(null),Qw=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).submitted=!1,i._directives=[],i.ngSubmit=new u.vpe,i.form=new Gw({},lw(e),fw(r)),i}return f(n,[{key:"ngAfterViewInit",value:function(){this._setUpdateStrategy()}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"controls",get:function(){return this.form.controls}},{key:"addControl",value:function(e){var t=this;Yw.then(function(){var n=t._findContainer(e.path);e.control=n.registerControl(e.name,e.control),Cw(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),t._directives.push(e)})}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){var t=this;Yw.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name),Dw(t._directives,e)})}},{key:"addFormGroup",value:function(e){var t=this;Yw.then(function(){var n=t._findContainer(e.path),r=new Gw({});Ow(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}},{key:"removeFormGroup",value:function(e){var t=this;Yw.then(function(){var n=t._findContainer(e.path);n&&n.removeControl(e.name)})}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){var n=this;Yw.then(function(){n.form.get(e.path).setValue(t)})}},{key:"setValue",value:function(e){this.control.setValue(e)}},{key:"onSubmit",value:function(e){return this.submitted=!0,Pw(this.form,this._directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_setUpdateStrategy",value:function(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}},{key:"_findContainer",value:function(e){return e.pop(),e.length?this.form.get(e):this.form}}]),n}(ww);return e.\u0275fac=function(t){return new(t||e)(u.Y36(X_,10),u.Y36(ew,10))},e.\u0275dir=u.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&u.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Kw]),u.qOj]}),e}(),Jw=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=u.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e}(),$w=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}(),Xw=new u.OlP("NgModelWithFormControlWarning"),eb={provide:ww,useExisting:(0,u.Gpc)(function(){return tb})},tb=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this)).validators=e,i.asyncValidators=r,i.submitted=!1,i._onCollectionChange=function(){return i._updateDomValue()},i.directives=[],i.form=null,i.ngSubmit=new u.vpe,i._setValidators(e),i._setAsyncValidators(r),i}return f(n,[{key:"ngOnChanges",value:function(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}},{key:"ngOnDestroy",value:function(){this.form&&(Aw(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(function(){}))}},{key:"formDirective",get:function(){return this}},{key:"control",get:function(){return this.form}},{key:"path",get:function(){return[]}},{key:"addControl",value:function(e){var t=this.form.get(e.path);return Cw(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}},{key:"getControl",value:function(e){return this.form.get(e.path)}},{key:"removeControl",value:function(e){Ew(e.control||null,e,!1),Dw(this.directives,e)}},{key:"addFormGroup",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormGroup",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormGroup",value:function(e){return this.form.get(e.path)}},{key:"addFormArray",value:function(e){this._setUpFormContainer(e)}},{key:"removeFormArray",value:function(e){this._cleanUpFormContainer(e)}},{key:"getFormArray",value:function(e){return this.form.get(e.path)}},{key:"updateModel",value:function(e,t){this.form.get(e.path).setValue(t)}},{key:"onSubmit",value:function(e){return this.submitted=!0,Pw(this.form,this.directives),this.ngSubmit.emit(e),!1}},{key:"onReset",value:function(){this.resetForm()}},{key:"resetForm",value:function(e){this.form.reset(e),this.submitted=!1}},{key:"_updateDomValue",value:function(){var e=this;this.directives.forEach(function(t){var n=t.control,r=e.form.get(t.path);n!==r&&(Ew(n||null,t),r instanceof Hw&&(Cw(r,t),t.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}},{key:"_setUpFormContainer",value:function(e){var t=this.form.get(e.path);Ow(t,e),t.updateValueAndValidity({emitEvent:!1})}},{key:"_cleanUpFormContainer",value:function(e){if(this.form){var t=this.form.get(e.path);t&&function(e,t){return Aw(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}},{key:"_updateRegistrations",value:function(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(function(){})}},{key:"_updateValidators",value:function(){Rw(this.form,this),this._oldForm&&Aw(this._oldForm,this)}},{key:"_checkFormPresent",value:function(){}}]),n}(ww);return e.\u0275fac=function(t){return new(t||e)(u.Y36(X_,10),u.Y36(ew,10))},e.\u0275dir=u.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&u.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([eb]),u.qOj,u.TTD]}),e}(),nb={provide:bw,useExisting:(0,u.Gpc)(function(){return rb})},rb=function(){var e=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a){var s;return d(this,n),(s=t.call(this))._ngModelWarningConfig=a,s._added=!1,s.update=new u.vpe,s._ngModelWarningSent=!1,s._parent=e,s._setValidators(r),s._setAsyncValidators(i),s.valueAccessor=function(e,t){return t?(Array.isArray(t),t.forEach(function(e){e.constructor===Q_?n=e:function(e){return Object.getPrototypeOf(e.constructor)===G_}(e)?r=e:i=e}),i||r||n||null):null;var n,r,i}(0,o),s}return f(n,[{key:"isDisabled",set:function(e){}},{key:"ngOnChanges",value:function(e){this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;var n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}},{key:"ngOnDestroy",value:function(){this.formDirective&&this.formDirective.removeControl(this)}},{key:"viewToModelUpdate",value:function(e){this.viewModel=e,this.update.emit(e)}},{key:"path",get:function(){return function(e,t){return[].concat(a(t.path),[e])}(null==this.name?this.name:this.name.toString(),this._parent)}},{key:"formDirective",get:function(){return this._parent?this._parent.formDirective:null}},{key:"_checkParentType",value:function(){}},{key:"_setUpControl",value:function(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}]),n}(bw);return e.\u0275fac=function(t){return new(t||e)(u.Y36(ww,13),u.Y36(X_,10),u.Y36(ew,10),u.Y36(W_,10),u.Y36(Xw,8))},e.\u0275dir=u.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[u._Bn([nb]),u.qOj,u.TTD]}),e._ngModelWarningSentOnce=!1,e}(),ib=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[$w]]}),e}(),ob=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[ib]}),e}(),ab=function(){var e=function(){function e(){d(this,e)}return f(e,null,[{key:"withConfig",value:function(t){return{ngModule:e,providers:[{provide:Xw,useValue:t.warnOnNgModelWithFormControl}]}}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[ib]}),e}(),ub=function(){var e=function(){function e(){d(this,e)}return f(e,[{key:"group",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this._reduceControls(e),i=null,o=null;return null!=n&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(n)?(i=null!=n.validators?n.validators:null,o=null!=n.asyncValidators?n.asyncValidators:null,t=null!=n.updateOn?n.updateOn:void 0):(i=null!=n.validator?n.validator:null,o=null!=n.asyncValidator?n.asyncValidator:null)),new Gw(r,{asyncValidators:o,updateOn:t,validators:i})}},{key:"control",value:function(e,t,n){return new Hw(e,t,n)}},{key:"array",value:function(e,t,n){var r=this,i=e.map(function(e){return r._createControl(e)});return new Ww(i,t,n)}},{key:"_reduceControls",value:function(e){var t=this,n={};return Object.keys(e).forEach(function(r){n[r]=t._createControl(e[r])}),n}},{key:"_createControl",value:function(e){return e instanceof Hw||e instanceof Gw||e instanceof Ww?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,u.Yz7)({factory:function(){return new e},token:e,providedIn:ab}),e}(),sb=o(3637);function cb(){return function(e){return e.lift(new lb)}}var lb=function(){function e(){d(this,e)}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new hb(e))}}]),e}(),hb=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).hasPrev=!1,r}return f(n,[{key:"_next",value:function(e){var t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}]),n}(Fe.L);function fb(e,t){return function(n){return n.lift(new db(e,t))}}var db=function(){function e(t,n){d(this,e),this.compare=t,this.keySelector=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new pb(e,this.compare,this.keySelector))}}]),e}(),pb=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,e)).keySelector=i,o.hasKey=!1,"function"==typeof r&&(o.compare=r),o}return f(n,[{key:"compare",value:function(e,t){return e===t}},{key:"_next",value:function(e){var t;try{var n=this.keySelector;t=n?n(e):e}catch(n){return this.destination.error(n)}var r=!1;if(this.hasKey)try{r=(0,this.compare)(this.key,t)}catch(n){return this.destination.error(n)}else this.hasKey=!0;r||(this.key=t,this.destination.next(e))}}]),n}(Fe.L),vb=o(8939),gb=(o(4828),o(3394));function mb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ul("invalid-argument","Invalid options passed to function ".concat(e,'(): You cannot specify both "merge" and "mergeFields".'));return t}function yb(){if("undefined"==typeof Uint8Array)throw new ul("unimplemented","Uint8Arrays are not available in this environment.")}function kb(){if("undefined"==typeof atob)throw new ul("unimplemented","Blobs are unavailable in Firestore in this environment.")}var _b=function(){function e(t){d(this,e),this._delegate=t}return f(e,[{key:"toBase64",value:function(){return kb(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return yb(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return kb(),new e(bk.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return yb(),new e(bk.fromUint8Array(t))}}]),e}();function wb(e){return function(e,t){if("object"!=typeof e||null===e)return!1;for(var n=e,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(e)}var bb=function(){function e(){d(this,e)}return f(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){_k(e=nk(e,gk));var n=mk(e),r=e._freezeSettings(),i=new Ty;return kk(n,i,new xy(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){_k(e=nk(e,gk));var t=mk(e),n=e._freezeSettings(),r=new Ty;return kk(t,r,new Iy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ul(al.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new sl;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Hi.Z)(regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,(r=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(rp.bt()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,rp.delete(n);case 5:case"end":return e.stop()}},e)})),function(e){return r.apply(this,arguments)})(vv(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}},n,null,[[0,6]])}))),t.promise}(e._delegate)}}]),e}(),xb=function(){function e(t,n,r){var i=this;d(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Yy||(this._appCompat=t)}return f(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=(e=nk(e,ok))._getSettings();if("firestore.googleapis.com"!==o.host&&o.host!==t&&tl("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},o),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var a,u;if("string"==typeof i.mockUserToken)a=i.mockUserToken,u=Yc.MOCK_USER;else{a=(0,Ki.Sg)(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new ul(al.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Yc(s)}e._authCredentials=new hl(new cl(a,u))}}(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jy(e);case 2:return n=t.sent,t.next=5,By(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),i=void 0,(i=ol(r)).Gr.delete(0),_g(i)));case 7:case"end":return t.stop()}var i},t)})))}(mk(e=nk(e,gk)))}(this._delegate)}},{key:"disableNetwork",value:function(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jy(e);case 2:return n=t.sent,t.next=5,By(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),(i=(0,Hi.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ol(t)).Gr.add(0),e.next=4,bg(n);case 4:n.Jr.set("Offline");case 5:case"end":return e.stop()}},e)})),function(e){return i.apply(this,arguments)})(r)));case 7:case"end":return t.stop()}},t)})))}(mk(e=nk(e,gk)))}(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&$y("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return t=mk(e=nk(e,gk)),n=new sl,t.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=function(e,t){return Gm.apply(this,arguments)},e.next=3,zy(t);case 3:return e.t1=e.sent,e.t2=n,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 6:case"end":return e.stop()}},e)}))),n.promise;var t,n}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return function(e,t){return function(e,t){var n=new Ey(t);return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zy(e);case 2:return r=t.sent,i=n,ol(r).io.add(i),t.abrupt("return",void i.next());case 6:case"end":return t.stop()}},t)}))),function(){n.na(),e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function t(){var r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Zy(e);case 2:return r=t.sent,i=n,t.abrupt("return",void ol(r).io.delete(i));case 5:case"end":return t.stop()}},t)})))}}(mk(e=nk(e,gk)),pk(t)?t:{next:t})}(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ul("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Fb(this,ck(this._delegate,e))}catch(t){throw Rb(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new Sb(this,lk(this._delegate,e))}catch(t){throw Rb(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Db(this,function(e,t){if(e=nk(e,ok),Jy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ul(al.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new uk(e,null,(n=t,new Sh(Rl.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw Rb(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t){return function(e,t){var n=new sl;return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Uy(e).then(function(e){return e.datastore});case 2:i=r.sent,new Ay(e.asyncQueue,i,t,n).run();case 4:case"end":return r.stop()}},r)}))),n.promise}(mk(e=nk(e,gk)),function(n){return t(new R_(e,n))})}(this._delegate,function(n){return e(new Tb(t,n))})}},{key:"batch",value:function(){var e=this;return mk(this._delegate),new Cb(new w_(this._delegate,function(t){return E_(e._delegate,t)}))}},{key:"loadBundle",value:function(e){return function(e,t){var n=mk(e=nk(e,gk)),r=new vk;return function(e,t,n,r){var i=function(e,t){var n;return n=function(e,t){if(e instanceof Uint8Array)return Cy(e,t);if(e instanceof ArrayBuffer)return Cy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),new Sy(n,t)}(n,fg(t));e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t,n){var r,i=ol(e);(r=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ol(e),r=od(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",function(e){return n.Ye.getBundleMetadata(e,t.id)}).then(function(e){return!!e&&e.createTime.compareTo(r)>=0})}(t.localStore,i);case 6:if(!e.sent){e.next=10;break}return e.next=9,n.close();case 9:return e.abrupt("return",void r._completeWith((c=i,{taskState:"Success",documentsLoaded:c.totalDocuments,bytesLoaded:c.totalBytes,totalDocuments:c.totalDocuments,totalBytes:c.totalBytes})));case 10:return r._updateProgress(xm(i)),o=new bm(i,t.localStore,n.k),e.next=14,n.Ho();case 14:a=e.sent;case 15:if(!a){e.next=25;break}return e.next=18,o.yo(a);case 18:return(u=e.sent)&&r._updateProgress(u),e.next=22,n.Ho();case 22:a=e.sent;case 23:e.next=15;break;case 25:return e.next=27,o.complete();case 27:return s=e.sent,e.next=30,ey(t,s.In,void 0);case 30:return e.next=32,function(e,t){var n=ol(e);return n.persistence.runTransaction("Save bundle","readwrite",function(e){return n.Ye.saveBundleMetadata(e,t)})}(t.localStore,i);case 32:r._completeWith(s.progress),e.next=38;break;case 35:e.prev=35,e.t0=e.catch(0),tl("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0);case 38:case"end":return e.stop()}},e,null,[[0,35]])})),function(e,t,n){return r.apply(this,arguments)})(i,t,n).then(function(){i.sharedClientState.notifyBundleLoaded()})},t.next=3,zy(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}},t)})))}(n,e._databaseId,t,r),r}(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Hi.Z)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ol(e);return n.persistence.runTransaction("Get named query","readonly",function(e){return n.Ye.getNamedQuery(e,t)})},n.next=3,qy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}},n)})))}(mk(e=nk(e,gk)),t).then(function(t){return t?new uk(e,null,t.query):null})}(this._delegate,e).then(function(e){return e?new Db(t,e):null})}}]),e}(),Ib=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).firestore=e,r}return f(n,[{key:"convertBytes",value:function(e){return new _b(new bk(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return Sb.forKey(t,this.firestore,null)}}]),n}(y_),Tb=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new Ib(t)}return f(e,[{key:"get",value:function(e){var t=this,n=Ub(e);return this._delegate.get(n).then(function(e){return new Ob(t._firestore,new t_(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))})}},{key:"set",value:function(e,t,n){var r=Ub(e);return n?(mb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var u=Ub(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(o)),this}},{key:"delete",value:function(e){var t=Ub(e);return this._delegate.delete(t),this}}]),e}(),Cb=function(){function e(t){d(this,e),this._delegate=t}return f(e,[{key:"set",value:function(e,t,n){var r=Ub(e);return n?(mb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r,i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];var u=Ub(e);return 2===arguments.length?this._delegate.update(u,t):(r=this._delegate).update.apply(r,[u,t,n].concat(o)),this}},{key:"delete",value:function(e){var t=Ub(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),Eb=function(){function e(t,n,r){d(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return f(e,[{key:"fromFirestore",value:function(e,t){var n=new n_(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Pb(this._firestore,n),null!=t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Ib(t),n),i.set(n,o)),o}}]),e}();Eb.INSTANCES=new WeakMap;var Sb=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ib(t)}return f(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Fb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Fb(this.firestore,ck(this._delegate,e))}catch(t){throw Rb(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=(0,Ki.m9)(e))instanceof ak&&hk(this._delegate,e)}},{key:"set",value:function(e,t){t=mb("DocumentReference.set",t);try{return t?I_(this._delegate,e,t):I_(this._delegate,e)}catch(n){throw Rb(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?T_(this._delegate,e):T_.apply(void 0,[this._delegate,e,t].concat(r))}catch(o){throw Rb(o,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return E_(nk(e.firestore,gk),[new If(e._key,cf.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ab(n),o=Nb(n,function(t){return new Ob(e.firestore,new t_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))});return C_(this._delegate,i,o)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=nk(e,ak);var t=nk(e.firestore,gk),n=mk(t),r=new x_(t);return function(e,t){var n=new sl;return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ol(e);return n.persistence.runTransaction("read document","readonly",function(e){return n.Wn.Rn(e,t)})}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ul(al.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=am(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}},e,null,[[0,7]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,qy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._key).then(function(n){return new t_(t,r,e._key,n,new e_(null!==n&&n.hasLocalMutations,!0),e.converter)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=nk(e,ak);var t=nk(e.firestore,gk);return Gy(mk(t),e._key,{source:"server"}).then(function(n){return S_(t,e,n)})}(this._delegate):function(e){e=nk(e,ak);var t=nk(e.firestore,gk);return Gy(mk(t),e._key).then(function(n){return S_(t,e,n)})}(this._delegate)).then(function(e){return new Ob(t.firestore,new t_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))})}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?Eb.getInstance(this.firestore,t):null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!=0)throw new ul("invalid-argument","Invalid document reference. Document references must have an even number of segments, but ".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new ak(n._delegate,r,new Zl(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new ak(n._delegate,r,t))}}]),e}();function Rb(e,t,n){return e.message=e.message.replace(t,n),e}function Ab(e){var t,n=s(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"==typeof r&&!wb(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Nb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=wb(e[0])?e[0]:wb(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Ob=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"ref",get:function(){return new Sb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return o_(this._delegate,e._delegate)}}]),e}(),Pb=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||rl()}(void 0!==t),t}}]),n}(Ob),Db=function(){function e(t,n){d(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new Ib(t)}return f(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,s_(this._delegate,function(e,t,n){var r=t,i=Xk("where",e);return new c_(i,r,n)}(t,n,r)))}catch(i){throw Rb(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,s_(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=t,r=Xk("orderBy",e);return new l_(r,n)}(t,n)))}catch(r){throw Rb(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,s_(this._delegate,function(e){return rk("limit",e),new h_("limit",e,"F")}(t)))}catch(n){throw Rb(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,s_(this._delegate,function(e){return rk("limitToLast",e),new h_("limitToLast",e,"L")}(t)))}catch(n){throw Rb(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,s_(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new f_("startAt",t,!0)}).apply(void 0,arguments)))}catch(t){throw Rb(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,s_(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new f_("startAfter",t,!1)}).apply(void 0,arguments)))}catch(t){throw Rb(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,s_(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new d_("endBefore",t,!0)}).apply(void 0,arguments)))}catch(t){throw Rb(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,s_(this._delegate,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new d_("endAt",t,!1)}).apply(void 0,arguments)))}catch(t){throw Rb(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return fk(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null==e?void 0:e.source)?function(e){e=nk(e,uk);var t=nk(e.firestore,gk),n=mk(t),r=new x_(t);return function(e,t){var n=new sl;return e.asyncQueue.enqueueAndForget((0,Hi.Z)(regeneratorRuntime.mark(function r(){var i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=(i=(0,Hi.Z)(regeneratorRuntime.mark(function e(t,n,r){var i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ov(t,n,!0);case 3:i=e.sent,o=new Cm(n,i.zn),a=o.bo(i.documents),u=o.applyChanges(a,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=am(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}},e,null,[[0,10]])})),function(e,t,n){return i.apply(this,arguments)}),r.next=3,qy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}},r)}))),n.promise}(n,e._query).then(function(n){return new r_(t,r,e,n)})}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=nk(e,uk);var t=nk(e.firestore,gk),n=mk(t),r=new x_(t);return Wy(n,e._query,{source:"server"}).then(function(n){return new r_(t,r,e,n)})}(this._delegate):function(e){e=nk(e,uk);var t=nk(e.firestore,gk),n=mk(t),r=new x_(t);return a_(e._query),Wy(n,e._query).then(function(n){return new r_(t,r,e,n)})}(this._delegate)).then(function(e){return new Mb(t.firestore,new r_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))})}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ab(n),o=Nb(n,function(t){return new Mb(e.firestore,new r_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))});return C_(this._delegate,i,o)}},{key:"withConverter",value:function(t){return new e(this.firestore,this._delegate.withConverter(t?Eb.getInstance(this.firestore,t):null))}}]),e}(),Lb=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Pb(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Mb=function(){function e(t,n){d(this,e),this._firestore=t,this._delegate=n}return f(e,[{key:"query",get:function(){return new Db(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map(function(t){return new Pb(e._firestore,t)})}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map(function(e){return new Lb(t._firestore,e)})}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach(function(r){e.call(t,new Pb(n._firestore,r))})}},{key:"isEqual",value:function(e){return o_(this._delegate,e._delegate)}}]),e}(),Fb=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return f(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new Sb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new Sb(this.firestore,void 0===e?lk(this._delegate):lk(this._delegate,e))}catch(t){throw Rb(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=nk(e.firestore,gk),r=lk(e),i=k_(e.converter,t);return E_(n,[Ok(Nk(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,cf.exists(!1))]).then(function(){return r})}(this._delegate,e).then(function(e){return new Sb(t.firestore,e)})}},{key:"isEqual",value:function(e){return hk(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,this._delegate.withConverter(e?Eb.getInstance(this.firestore,e):null))}}]),n}(Db);function Ub(e){return nk(e,ak)}var Vb={Firestore:xb,GeoPoint:Ik,Timestamp:xl,Blob:_b,Transaction:Tb,WriteBatch:Cb,DocumentReference:Sb,DocumentSnapshot:Ob,Query:Db,QueryDocumentSnapshot:Pb,QuerySnapshot:Mb,CollectionReference:Fb,FieldPath:function(){function e(){d(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=k(wk,n)}return f(e,[{key:"isEqual",value:function(e){return(e=(0,Ki.m9)(e))instanceof wk&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Nl.keyField().canonicalString())}}]),e}(),FieldValue:function(){function e(t){d(this,e),this._delegate=t}return f(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Lk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Pk("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Mk("arrayUnion",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Fk("arrayRemove",t)}).apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new Uk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),setLogLevel:function(e){!function(e){Jc.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){(function(e,t){e.INTERNAL.registerComponent(new Wi.wA("firestore-compat",function(e){return function(e,t){return new xb(e,t,new bb)}(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate())},"PUBLIC").setServiceProps(Object.assign({},Vb)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.10")}(gb.Z);var jb=o(6682),qb=o(9746),Bb=o(7771),zb=o(8858),Zb=function(e){p(n,e);var t=v(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.POSITIVE_INFINITY,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.POSITIVE_INFINITY,o=arguments.length>2?arguments[2]:void 0;return d(this,n),(e=t.call(this)).scheduler=o,e._events=[],e._infiniteTimeWindow=!1,e._bufferSize=r<1?1:r,e._windowTime=i<1?1:i,i===Number.POSITIVE_INFINITY?(e._infiniteTimeWindow=!0,e.next=e.nextInfiniteTimeWindow):e.next=e.nextTimeWindow,e}return f(n,[{key:"nextInfiniteTimeWindow",value:function(e){if(!this.isStopped){var t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}i(b(n.prototype),"next",this).call(this,e)}},{key:"nextTimeWindow",value:function(e){this.isStopped||(this._events.push(new Hb(this._getNow(),e)),this._trimBufferThenGetEvents()),i(b(n.prototype),"next",this).call(this,e)}},{key:"_subscribe",value:function(e){var t,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new Pe.N;if(this.isStopped||this.hasError?t=Dt.w.EMPTY:(this.observers.push(e),t=new zb.W(this,e)),i&&e.add(e=new qb.ht(e,i)),n)for(var a=0;a<o&&!e.closed;a++)e.next(r[a]);else for(var u=0;u<o&&!e.closed;u++)e.next(r[u].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t}},{key:"_getNow",value:function(){return(this.scheduler||Bb.c).now()}},{key:"_trimBufferThenGetEvents",value:function(){for(var e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(e-r[o].time<n);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&r.splice(0,o),r}}]),n}(Oe.xQ),Hb=function e(t,n){d(this,e),this.time=t,this.value=n};function Gb(e,t,n){var r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},function(e){return e.lift(function(e){var t,n,r=e.bufferSize,i=void 0===r?Number.POSITIVE_INFINITY:r,o=e.windowTime,a=void 0===o?Number.POSITIVE_INFINITY:o,u=e.refCount,s=e.scheduler,c=0,l=!1,h=!1;return function(e){var r;c++,!t||l?(l=!1,t=new Zb(i,a,s),r=t.subscribe(this),n=e.subscribe({next:function(e){t.next(e)},error:function(e){l=!0,t.error(e)},complete:function(){h=!0,n=void 0,t.complete()}}),h&&(n=void 0)):r=t.subscribe(this),this.add(function(){c--,r.unsubscribe(),r=void 0,n&&!h&&u&&0===c&&(n.unsubscribe(),n=void 0,t=void 0)})}}(r))}}function Wb(e,t){return t?tt(function(){return e},t):tt(function(){return e})}var Kb=o(2639);o(7841);var Yb=new u.OlP("angularfire2.auth.use-emulator"),Qb=new u.OlP("angularfire2.auth.settings"),Jb=new u.OlP("angularfire2.auth.tenant-id"),$b=new u.OlP("angularfire2.auth.langugage-code"),Xb=new u.OlP("angularfire2.auth.use-device-language"),ex=new u.OlP("angularfire.auth.persistence"),tx=function(e,n,r,i,o,u,s,c){return(0,vb.cc)("".concat(e.name,".auth"),"AngularFireAuth",e.name,function(){var l=n.runOutsideAngular(function(){return e.auth()});if(r&&l.useEmulator.apply(l,a(r)),i&&(l.tenantId=i),l.languageCode=o,u&&l.useDeviceLanguage(),s)for(var h=0,f=Object.entries(s);h<f.length;h++){var d=t(f[h],2),p=d[0],v=d[1];l.settings[p]=v}return c&&l.setPersistence(c),l},[r,i,o,u,s,c])},nx=function(){var e=function e(t,n,r,i,a,u,s,c,l,h,f,p){d(this,e);var v=new Oe.xQ,g=(0,Ne.of)(void 0).pipe((0,qb.QV)(a.outsideAngular),tt(function(){return i.runOutsideAngular(function(){return Promise.resolve().then(o.bind(o,4828))})}),(0,Xe.U)(function(){return(0,vb.on)(t,i,n)}),(0,Xe.U)(function(e){return tx(e,i,u,c,l,h,s,f)}),Gb({bufferSize:1,refCount:!1}));if(K(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Ne.of)(null);else{g.pipe(Nt()).subscribe();var m=g.pipe(tt(function(e){return e.getRedirectResult().then(function(e){return e},function(){return null})}),Di.iC,Gb({bufferSize:1,refCount:!1})),y=g.pipe(tt(function(e){return new qe.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onAuthStateChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})})),k=g.pipe(tt(function(e){return new qe.y(function(t){return{unsubscribe:i.runOutsideAngular(function(){return e.onIdTokenChanged(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})})}})}));this.authState=m.pipe(Wb(y),(0,Kb.R)(a.outsideAngular),(0,qb.QV)(a.insideAngular)),this.user=m.pipe(Wb(k),(0,Kb.R)(a.outsideAngular),(0,qb.QV)(a.insideAngular)),this.idToken=this.user.pipe(tt(function(e){return e?(0,Ae.D)(e.getIdToken()):(0,Ne.of)(null)})),this.idTokenResult=this.user.pipe(tt(function(e){return e?(0,Ae.D)(e.getIdTokenResult()):(0,Ne.of)(null)})),this.credential=(0,jb.T)(m,v,this.authState.pipe(ft(function(e){return!e}))).pipe((0,Xe.U)(function(e){return(null==e?void 0:e.user)?e:null}),(0,Kb.R)(a.outsideAngular),(0,qb.QV)(a.insideAngular))}return(0,vb.pX)(this,g,i,{spy:{apply:function(e,t,n){(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(function(e){return v.next(e)})}}})};return e.\u0275fac=function(t){return new(t||e)(u.LFG(vb.Dh),u.LFG(vb.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Di.HU),u.LFG(Yb,8),u.LFG(Qb,8),u.LFG(Jb,8),u.LFG($b,8),u.LFG(Xb,8),u.LFG(ex,8),u.LFG(Ro,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}();function rx(e,t){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:sb.z;return new qe.y(function(n){var r;return null!=t?t.schedule(function(){r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),function(){null!=r&&r()}})}(e,t)}function ix(e,t){return rx(e,t).pipe((0,Xe.U)(function(e){return{payload:e,type:"query"}}))}function ox(e,n){return ix(e,n).pipe(st(void 0),cb(),(0,Xe.U)(function(e){var n=t(e,2),r=n[0],i=n[1],o=i.payload.docChanges(),a=o.map(function(e){return{type:e.type,payload:e}});return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach(function(e,t){var n=o.find(function(t){return t.doc.ref.isEqual(e.ref)}),i=null==r?void 0:r.payload.docs.find(function(t){return t.ref.isEqual(e.ref)});n&&JSON.stringify(n.doc.metadata)===JSON.stringify(e.metadata)||!n&&i&&JSON.stringify(i.metadata)===JSON.stringify(e.metadata)||a.push({type:"modified",payload:{oldIndex:t,newIndex:t,type:"modified",doc:e}})}),a}))}function ax(e,t,n){return ox(e,n).pipe(ct(function(e,n){return function(e,t,n){return t.forEach(function(t){n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return ux(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){var n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return ux(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ux(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(function(e){return e.payload}),t)},[]),fb(),(0,Xe.U)(function(e){return e.map(function(e){return{type:e.type,payload:e}})}))}function ux(e,t,n){for(var r=e.slice(),i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return r.splice.apply(r,[t,n].concat(o)),r}function sx(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}var cx=function(){function n(e,t,r){d(this,n),this.ref=e,this.query=t,this.afs=r}return f(n,[{key:"stateChanges",value:function(e){var n=ox(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(n=n.pipe((0,Xe.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}))),n.pipe(st(void 0),cb(),ft(function(e){var n=t(e,2),r=n[0];return n[1].length>0||!r}),(0,Xe.U)(function(e){var n=t(e,2);n[0];return n[1]}),Di.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(ct(function(e,t){return[].concat(a(e),a(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=sx(e);return ax(this.query,t,this.afs.schedulers.outsideAngular).pipe(Di.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(Object.assign({},n.data()),e({},t.idField,n.id)):n.data()})}),Di.iC)}},{key:"get",value:function(e){return(0,Ae.D)(this.query.get(e)).pipe(Di.iC)}},{key:"add",value:function(e){return this.ref.add(e)}},{key:"doc",value:function(e){return new lx(this.ref.doc(e),this.afs)}}]),n}(),lx=function(){function n(e,t){d(this,n),this.ref=e,this.afs=t}return f(n,[{key:"set",value:function(e,t){return this.ref.set(e,t)}},{key:"update",value:function(e){return this.ref.update(e)}},{key:"delete",value:function(){return this.ref.delete()}},{key:"collection",value:function(e,t){var n=gx(this.ref.collection(e),t),r=n.ref,i=n.query;return new cx(r,i,this.afs)}},{key:"snapshotChanges",value:function(){return function(e,n){return rx(e,n).pipe(st(void 0),cb(),(0,Xe.U)(function(e){var n=t(e,2),r=n[0],i=n[1];return i.exists?(null==r?void 0:r.exists)?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Di.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.snapshotChanges().pipe((0,Xe.U)(function(n){var r=n.payload;return t.idField?Object.assign(Object.assign({},r.data()),e({},t.idField,r.id)):r.data()}))}},{key:"get",value:function(e){return(0,Ae.D)(this.ref.get(e)).pipe(Di.iC)}}]),n}(),hx=function(){function t(e,n){d(this,t),this.query=e,this.afs=n}return f(t,[{key:"stateChanges",value:function(e){return e&&0!==e.length?ox(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(function(t){return t.filter(function(t){return e.indexOf(t.type)>-1})}),ft(function(e){return e.length>0}),Di.iC):ox(this.query,this.afs.schedulers.outsideAngular).pipe(Di.iC)}},{key:"auditTrail",value:function(e){return this.stateChanges(e).pipe(ct(function(e,t){return[].concat(a(e),a(t))},[]))}},{key:"snapshotChanges",value:function(e){var t=sx(e);return ax(this.query,t,this.afs.schedulers.outsideAngular).pipe(Di.iC)}},{key:"valueChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ix(this.query,this.afs.schedulers.outsideAngular).pipe((0,Xe.U)(function(n){return n.payload.docs.map(function(n){return t.idField?Object.assign(e({},t.idField,n.id),n.data()):n.data()})}),Di.iC)}},{key:"get",value:function(e){return(0,Ae.D)(this.query.get(e)).pipe(Di.iC)}}]),t}(),fx=new u.OlP("angularfire2.enableFirestorePersistence"),dx=new u.OlP("angularfire2.firestore.persistenceSettings"),px=new u.OlP("angularfire2.firestore.settings"),vx=new u.OlP("angularfire2.firestore.use-emulator");function gx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e){return e};return{query:t(e),ref:e}}var mx=function(){var e=function(){function e(n,r,i,o,u,s,c,l,h,f,p,v,g,m,y,k,_){var w;d(this,e),this.schedulers=c;var b=(0,vb.on)(n,s,r),x=h;f&&tx(b,s,p,g,m,y,v,k),w=t((0,vb.cc)("".concat(b.name,".firestore"),"AngularFirestore",b.name,function(){var e=s.runOutsideAngular(function(){return b.firestore()});if(o&&e.settings(o),x&&e.useEmulator.apply(e,a(x)),i&&!K(u)){return[e,s.runOutsideAngular(function(){try{return(0,Ae.D)(e.enablePersistence(l||void 0).then(function(){return!0},function(){return!1}))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,Ne.of)(!1)}})]}return[e,(0,Ne.of)(!1)]},[o,x,i]),2),this.firestore=w[0],this.persistenceEnabled$=w[1]}return f(e,[{key:"collection",value:function(e,t){var n=gx("string"==typeof e?this.firestore.collection(e):e,t),r=n.ref,i=n.query,o=this.schedulers.ngZone.run(function(){return r});return new cx(o,i,this)}},{key:"collectionGroup",value:function(e,t){var n=t||function(e){return e},r=this.firestore.collectionGroup(e);return new hx(n(r),this)}},{key:"doc",value:function(e){var t;t="string"==typeof e?this.firestore.doc(e):e;var n=this.schedulers.ngZone.run(function(){return t});return new lx(n,this)}},{key:"createId",value:function(){return this.firestore.collection("_").doc().id}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(vb.Dh),u.LFG(vb.xv,8),u.LFG(fx,8),u.LFG(px,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Di.HU),u.LFG(dx,8),u.LFG(vx,8),u.LFG(nx,8),u.LFG(Yb,8),u.LFG(Qb,8),u.LFG(Jb,8),u.LFG($b,8),u.LFG(Xb,8),u.LFG(ex,8),u.LFG(Ro,8))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e}(),yx=function(){var e=function(){function e(t){d(this,e),this._angularFireAuthentication=t}return f(e,[{key:"login",value:function(e){var t=this;return new Promise(function(n,r){t._angularFireAuthentication.signInWithEmailAndPassword(e.email,e.password).then(function(e){return n(e)},function(e){return r(e)})})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(nx))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}();function kx(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Email is required"),u.qZA())}function _x(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Email needs to be a valid email"),u.qZA())}function wx(e,t){if(1&e&&(u.TgZ(0,"div",19),u.YNc(1,kx,2,0,"div",20),u.YNc(2,_x,2,0,"div",20),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Q6J("ngIf",n.f.email.errors.required),u.xp6(1),u.Q6J("ngIf",n.f.email.errors.email)}}function bx(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Password required"),u.qZA())}function xx(e,t){1&e&&(u.TgZ(0,"div"),u._uU(1,"Password needs to be at least 6 characters"),u.qZA())}function Ix(e,t){if(1&e&&(u.TgZ(0,"div",19),u.YNc(1,bx,2,0,"div",20),u.YNc(2,xx,2,0,"div",20),u.qZA()),2&e){var n=u.oxw();u.xp6(1),u.Q6J("ngIf",n.f.password.errors.required),u.xp6(1),u.Q6J("ngIf",n.f.password.errors.minLength)}}var Tx=function(e){return{"is-invalid":e}},Cx=[{path:"login",component:function(){var e=function(){function e(t,n,r,i){d(this,e),this._auth=n,this._formBuilder=r,this._router=i,this.type="",this.loginForm=Gw,this.isLoading=!1,this.submitted=!1}return f(e,[{key:"ngOnInit",value:function(){this.loginForm=this._formBuilder.group({email:["",[nw.required,nw.email]],password:["",[nw.required,nw.minLength(6)]]})}},{key:"f",get:function(){return this.loginForm.controls}},{key:"signIn",value:function(){var e=this;this.submitted=!0,!this.loginForm.invalid&&this._auth.login({email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value}).then(function(t){console.log({res:t}),localStorage.setItem("currentUser",JSON.stringify(t.user._delegate)),e._router.navigate(["/profile"])}).catch(function(t){console.log(t),e.loginForm.reset()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(mx),u.Y36(yx),u.Y36(ub),u.Y36(di))},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-signin"]],decls:36,vars:9,consts:[["rel","stylesheet","href","https://use.fontawesome.com/releases/v5.8.1/css/all.css","integrity","sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf","crossorigin","anonymous"],[1,"custom-auth-container"],["id","container",1,"container"],[1,"form-container","sign-up-container"],[1,"custom-auth-text"],["type","text","placeholder","Full Name"],["type","email","placeholder","Email"],["type","password","placeholder","Password"],[1,"form-container","sign-in-container"],[3,"formGroup","ngSubmit"],["type","email","placeholder","Email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","placeholder","Password","formControlName","password",1,"form-control","form-control-merge","login-form-input",3,"ngClass"],["type","submit",1,"signin-btn",3,"click"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-left"],["id","signIn",1,"ghost","cursor-pointer",3,"click"],[1,"overlay-panel","overlay-right"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(u._UZ(0,"link",0),u.TgZ(1,"div",1),u.TgZ(2,"div",2),u.TgZ(3,"div",3),u.TgZ(4,"form"),u.TgZ(5,"h1",4),u._uU(6,"Create an account"),u.qZA(),u._UZ(7,"input",5),u._UZ(8,"input",6),u._UZ(9,"input",7),u.TgZ(10,"button"),u._uU(11,"Subscribe"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(12,"div",8),u.TgZ(13,"form",9),u.NdJ("ngSubmit",function(){return t.signIn()}),u.TgZ(14,"h1"),u._uU(15,"Login"),u.qZA(),u._UZ(16,"input",10),u.YNc(17,wx,3,2,"div",11),u._UZ(18,"input",12),u.YNc(19,Ix,3,2,"div",11),u.TgZ(20,"button",13),u.NdJ("click",function(){return t.signIn()}),u._uU(21," Log in "),u.qZA(),u.qZA(),u.qZA(),u.TgZ(22,"div",14),u.TgZ(23,"div",15),u.TgZ(24,"div",16),u.TgZ(25,"h1"),u._uU(26,"Happy to see you again !"),u.qZA(),u.TgZ(27,"p"),u._uU(28,"In order to connect,please enter your credentials"),u.qZA(),u.TgZ(29,"button",17),u.NdJ("click",function(){return t.type="signIn"}),u._uU(30,"Login"),u.qZA(),u.qZA(),u.TgZ(31,"div",18),u.TgZ(32,"h1"),u._uU(33,"Hi !"),u.qZA(),u.TgZ(34,"p"),u._uU(35,"Please enter your informations and start a project !"),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA(),u.qZA()),2&e&&(u.xp6(13),u.Q6J("formGroup",t.loginForm),u.xp6(3),u.Q6J("ngClass",u.VKq(5,Tx,t.submitted&&t.f.email.errors)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.email.errors),u.xp6(1),u.Q6J("ngClass",u.VKq(7,Tx,t.submitted&&t.f.password.errors)),u.xp6(1),u.Q6J("ngIf",t.submitted&&t.f.password.errors))},directives:[Jw,Tw,Qw,tb,Q_,Iw,rb,B,z],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fff!important}.custom-auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background-color:#fff!important}.custom-auth-text[_ngcontent-%COMP%]{font-size:35px;background:-webkit-linear-gradient(#c69cfe,#71bafe);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.invalid-feedback[_ngcontent-%COMP%]{text-align:right;margin-top:-4px}.form-control.is-invalid[_ngcontent-%COMP%]{border:1px solid #ff8d72}.form-control[_ngcontent-%COMP%]:focus{background-color:#eee}.signin-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:.5rem}h1[_ngcontent-%COMP%]{font-weight:bold;margin:0}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}.container[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 14px 28px rgba(0,0,0,.2),0 10px 10px rgba(0,0,0,.2);position:relative;overflow:hidden;width:768px;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]   .ovc_logo[_ngcontent-%COMP%]{position:absolute;top:3rem}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:column;padding:0 50px;height:100%;justify-content:center;align-items:center;text-align:center;position:relative}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}.form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%;color:#000!important}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background:#ff445c;color:#fff;font-size:12px;font-weight:bold;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background:transparent;border-color:#fff}.form-container[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;transition:all .6s ease-in-out}.sign-in-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:1;opacity:0}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:linear-gradient(to right,#ff4b2b,#ff416c) no-repeat 0 0/cover;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translateY(0);transition:transform .6s ease-in-out}.overlay-panel[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 40px;height:100%;width:50%;text-align:center;transform:translateY(0);transition:transform .6s ease-in-out}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translateY(0)}.overlay-left[_ngcontent-%COMP%]{transform:translateY(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translateY(100%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translateY(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translateY(20%)}.footer[_ngcontent-%COMP%]{margin-top:25px;text-align:center}.icons[_ngcontent-%COMP%]{display:flex;width:30px;height:30px;letter-spacing:15px;align-items:center}@media screen and (max-width: 768px) and (min-width: 450px){.sign-in-container[_ngcontent-%COMP%]{width:calc(100% - 50px)}}@media screen and (max-width: 449px){.sign-in-container[_ngcontent-%COMP%]{width:100%}}"]}),e}()},{path:"profile",component:B_,canActivate:[function(){var e=function(){function e(t){d(this,e),this._router=t}return f(e,[{key:"canActivate",value:function(e,t){var n=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")+""):"";return console.log({currentUser:n}),!!n||(this._router.navigate(["/login"]),!1)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(di))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()]},{path:"",redirectTo:"profile",pathMatch:"full"}],Ex=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[Ti.forRoot(Cx)],Ti]}),e}(),Sx=function(){var e=function e(){d(this,e),this.title="firebase-auth"};return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=u.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&u._UZ(0,"router-outlet")},directives:[vi],styles:[""]}),e}(),Rx={apiKey:"AIzaSyBYF7Kvi6av9YByvGlEyA2nlNOvPP_u9J0",authDomain:"fir-auth-172ee.firebaseapp.com",projectId:"fir-auth-172ee",storageBucket:"fir-auth-172ee.appspot.com",messagingSenderId:"1086906070344",appId:"1:1086906070344:web:0428a34aeac0548313af7d"},Ax=function(){function e(t,n,r,i){d(this,e),this.keySelector=t,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new Nx(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}]),e}(),Nx=function(e){p(n,e);var t=v(n);function n(e,r,i,o,a){var u;return d(this,n),(u=t.call(this,e)).keySelector=r,u.elementSelector=i,u.durationSelector=o,u.subjectSelector=a,u.groups=null,u.attemptedToUnsubscribe=!1,u.count=0,u}return f(n,[{key:"_next",value:function(e){var t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)}},{key:"_group",value:function(e,t){var n=this.groups;n||(n=this.groups=new Map);var r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(o){this.error(o)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new Oe.xQ,n.set(t,i);var o=new Px(t,i,this);if(this.destination.next(o),this.durationSelector){var a;try{a=this.durationSelector(new Px(t,i))}catch(u){return void this.error(u)}this.add(a.subscribe(new Ox(t,i,this)))}}i.closed||i.next(r)}},{key:"_error",value:function(e){var t=this.groups;t&&(t.forEach(function(t,n){t.error(e)}),t.clear()),this.destination.error(e)}},{key:"_complete",value:function(){var e=this.groups;e&&(e.forEach(function(e,t){e.complete()}),e.clear()),this.destination.complete()}},{key:"removeGroup",value:function(e){this.groups.delete(e)}},{key:"unsubscribe",value:function(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&i(b(n.prototype),"unsubscribe",this).call(this))}}]),n}(Fe.L),Ox=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this,r)).key=e,o.group=r,o.parent=i,o}return f(n,[{key:"_next",value:function(e){this.complete()}},{key:"_unsubscribe",value:function(){var e=this.parent,t=this.key;this.key=this.parent=null,e&&e.removeGroup(t)}}]),n}(Fe.L),Px=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;return d(this,n),(o=t.call(this)).key=e,o.groupSubject=r,o.refCountSubscription=i,o}return f(n,[{key:"_subscribe",value:function(e){var t=new Dt.w,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&t.add(new Dx(n)),t.add(r.subscribe(e)),t}}]),n}(qe.y),Dx=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).parent=e,e.count++,r}return f(n,[{key:"unsubscribe",value:function(){var e=this.parent;!e.closed&&!this.closed&&(i(b(n.prototype),"unsubscribe",this).call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())}}]),n}(Dt.w),Lx=o(4762),Mx=o(3935),Fx=function e(t){return d(this,e),t},Ux="analytics",Vx=Di.nk.async,jx=(0,Di.u3)(Mx.IH,!0),qx=(0,Di.u3)(Mx.Kz,!0),Bx=(0,Di.u3)(Mx.Iv,!0),zx=function(){var e=function(){function e(t,n,r){var i,o=this;d(this,e),this.disposables=[],(0,Li.KN)("angularfire",Di.q4.full,"user-tracking"),this.initialized=n.runOutsideAngular(function(){return new Promise(function(e){i=e})}),Vx().then(function(){var e=r.get(Fx);e?o.disposables=[jo(t).subscribe(function(t){Bx(e,null==t?void 0:t.uid),i()})]:i()})}return f(e,[{key:"ngOnDestroy",value:function(){this.disposables.forEach(function(e){return e.unsubscribe()})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(No),u.LFG(u.R0b),u.LFG(u.zs3))},e.\u0275prov=u.Yz7({token:e,factory:e.\u0275fac}),e}(),Zx="firebase_screen_id",Hx="outlet",Gx="screen_class",Wx="screen_name",Kx=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31),Yx={},Qx=function(){var n=function(){function n(r,i,o,a,u,s){var c=this;d(this,n),(0,Li.KN)("angularfire",Di.q4.full,"screen-tracking"),Vx().then(function(){var n=s.get(Fx);!r||!n||a.runOutsideAngular(function(){c.disposable=function(n,r,i){return n.events.pipe(ft(function(e){return e instanceof $t})).pipe(tt(function(t){var o,a,u=(null===(a=n.parseUrl(n.url.replace(/(?:\().+(?:\))/g,function(e){return e.replace("://",":///")})).root.children[t.snapshot.outlet])||void 0===a?void 0:a.toString())||"",s=n.routerState.root.children.map(function(e){return e}).find(function(e){return e.outlet===t.snapshot.outlet});if(!s)return(0,Ne.of)(null);for(var c=s;c.firstChild;)c=c.firstChild;var l=c.pathFromRoot.map(function(e){var t;return null===(t=e.routeConfig)||void 0===t?void 0:t.path}).filter(function(e){return e}).join("/")||"/",h=(e(o={},Wx,l),e(o,"page_path","/".concat(u)),e(o,"firebase_event_origin","auto"),e(o,"firebase_screen",l),e(o,Hx,t.snapshot.outlet),o);r&&(h.page_title=r.getTitle());var f=s.component;if(f){if(f===wr){for(var d=t.snapshot;d.firstChild;)d=d.firstChild;f=d.component}}else f=t.snapshot.component;if("string"==typeof f)return(0,Ne.of)(Object.assign(Object.assign({},h),e({},Gx,f)));if(f){var p=i.resolveComponentFactory(f);return(0,Ne.of)(Object.assign(Object.assign({},h),e({},Gx,p.selector)))}return(0,Ne.of)(null)}),ft(function(e){return!!e}),(0,Xe.U)(function(t){return Object.assign(e({firebase_screen_class:t[Gx]},Zx,function(e){var t=[e[Gx],e[Hx]].join("#");if(Yx.hasOwnProperty(t))return Yx[t];var n=Kx++;return Yx[t]=n,n}(t)),t)}),function(e,t,n,r){return function(t){return t.lift(new Ax(e,void 0,void 0,void 0))}}(function(e){return e[Hx]}),(0,yt.zg)(function(e){return e.pipe(fb(function(e,t){return JSON.stringify(e)===JSON.stringify(t)}),st(void 0),cb(),(0,Xe.U)(function(e){var n=t(e,2),r=n[0],i=n[1];return r?Object.assign({firebase_previous_class:r[Gx],firebase_previous_screen:r[Wx],firebase_previous_id:r[Zx]},i):i}))}))}(r,i,o).pipe(tt(function(e){return(0,Lx.mG)(c,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=u,!t.t0){t.next=4;break}return t.next=4,u.initialized;case 4:return t.abrupt("return",qx(n,"screen_view",e));case 5:case"end":return t.stop()}},t)}))})).subscribe()})})}return f(n,[{key:"ngOnDestroy",value:function(){this.disposable&&this.disposable.unsubscribe()}}]),n}();return n.\u0275fac=function(e){return new(e||n)(u.LFG(di,8),u.LFG(Re,8),u.LFG(u._Vd),u.LFG(u.R0b),u.LFG(zx,8),u.LFG(u.zs3))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n}(),Jx=new u.OlP("angularfire2.analytics-instances");function $x(e){return function(t,n){if(!Di.nk.sync())return null;var r=t.runOutsideAngular(function(){return e(n)});return new Fx(r)}}var Xx={provide:function e(){return d(this,e),(0,Di.vb)(Ux)},deps:[[new u.FiY,Jx]]},eI={provide:Fx,useFactory:function(e,t){if(!Di.nk.sync())return null;var n=(0,Di.JM)(Ux,e,t);return n&&new Fx(n)},deps:[[new u.FiY,Jx],Mi]},tI=function(){var e=function e(t,n){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"analytics")};return e.\u0275fac=function(t){return new(t||e)(u.LFG(Qx,8),u.LFG(zx,8))},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[eI,Xx,{provide:u.ip1,useValue:Di.nk.async,multi:!0}]}),e}();function nI(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:tI,providers:[{provide:Jx,useFactory:$x(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi].concat(n)}]}}var rI="@firebase/database",iI="",oI=function(){function e(t){d(this,e),this.domStorage_=t,this.prefix_="firebase:"}return f(e,[{key:"set",value:function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Ki.Pz)(t))}},{key:"get",value:function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Ki.cI)(t)}},{key:"remove",value:function(e){this.domStorage_.removeItem(this.prefixedName_(e))}},{key:"prefixedName_",value:function(e){return this.prefix_+e}},{key:"toString",value:function(){return this.domStorage_.toString()}}]),e}(),aI=function(){function e(){d(this,e),this.cache_={},this.isInMemoryStorage=!0}return f(e,[{key:"set",value:function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}},{key:"get",value:function(e){return(0,Ki.r3)(this.cache_,e)?this.cache_[e]:null}},{key:"remove",value:function(e){delete this.cache_[e]}}]),e}(),uI=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new oI(t)}}catch(t){}return new aI},sI=uI("localStorage"),cI=uI("sessionStorage"),lI=new Yi.Yd("@firebase/database"),hI=function(){var e=1;return function(){return e++}}(),fI=function(e){var t=(0,Ki.dS)(e),n=new Ki.gQ;n.update(t);var r=n.digest();return Ki.US.encodeByteArray(r)},dI=function e(){for(var t="",n=0;n<arguments.length;n++){var r=n<0||arguments.length<=n?void 0:arguments[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=e.apply(null,r):t+="object"==typeof r?(0,Ki.Pz)(r):r,t+=" "}return t},pI=null,vI=!0,gI=function(){if(!0===vI&&(vI=!1,null===pI&&!0===cI.get("logging_enabled")&&((0,Ki.hu)(!0,"Can't turn on custom loggers persistently."),lI.logLevel=Yi.in.VERBOSE,pI=lI.log.bind(lI))),pI){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=dI.apply(null,t);pI(r)}},mI=function(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];gI.apply(void 0,[e].concat(n))}},yI=function(){var e="FIREBASE INTERNAL ERROR: "+dI.apply(void 0,arguments);lI.error(e)},kI=function(){var e="FIREBASE FATAL ERROR: ".concat(dI.apply(void 0,arguments));throw lI.error(e),new Error(e)},_I=function(){var e="FIREBASE WARNING: "+dI.apply(void 0,arguments);lI.warn(e)},wI=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},bI="[MIN_NAME]",xI="[MAX_NAME]",II=function(e,t){if(e===t)return 0;if(e===bI||t===xI)return-1;if(t===bI||e===xI)return 1;var n=OI(e),r=OI(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},TI=function(e,t){return e===t?0:e<t?-1:1},CI=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,Ki.Pz)(t))},EI=function e(t){if("object"!=typeof t||null===t)return(0,Ki.Pz)(t);var n=[];for(var r in t)n.push(r);n.sort();for(var i="{",o=0;o<n.length;o++)0!==o&&(i+=","),i+=(0,Ki.Pz)(n[o]),i+=":",i+=e(t[n[o]]);return i+="}"},SI=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function RI(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var AI=function(e){(0,Ki.hu)(!wI(e),"Invalid JSON number");var t,n,r,i,o,a=1023;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,1-a)?(n=(i=Math.min(Math.floor(Math.log(e)/Math.LN2),a))+a,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var u=[];for(o=52;o;o-=1)u.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)u.push(n%2?1:0),n=Math.floor(n/2);u.push(t?1:0),u.reverse();var s=u.join(""),c="";for(o=0;o<64;o+=8){var l=parseInt(s.substr(o,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},NI=new RegExp("^-?(0*)\\d{1,10}$"),OI=function(e){if(NI.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},PI=function(e){try{e()}catch(t){setTimeout(function(){throw _I("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},DI=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},LI=function(){function e(t,n){var r=this;d(this,e),this.appName_=t,this.appCheckProvider=n,this.appCheck=null==n?void 0:n.getImmediate({optional:!0}),this.appCheck||null==n||n.get().then(function(e){return r.appCheck=e})}return f(e,[{key:"getToken",value:function(e){var t=this;return this.appCheck?this.appCheck.getToken(e):new Promise(function(n,r){setTimeout(function(){t.appCheck?t.getToken(e).then(n,r):n(null)},0)})}},{key:"addTokenChangeListener",value:function(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(function(t){return t.addTokenListener(e)})}},{key:"notifyForInvalidToken",value:function(){_I('Provided AppCheck credentials for the app named "'.concat(this.appName_,'" are invalid. This usually indicates your app was not initialized correctly.'))}}]),e}(),MI=function(){function e(t,n,r){var i=this;d(this,e),this.appName_=t,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(function(e){return i.auth_=e})}return f(e,[{key:"getToken",value:function(e){var t=this;return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(gI("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):new Promise(function(n,r){setTimeout(function(){t.auth_?t.getToken(e).then(n,r):n(null)},0)})}},{key:"addTokenChangeListener",value:function(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)})}},{key:"removeTokenChangeListener",value:function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})}},{key:"notifyForInvalidToken",value:function(){var e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',_I(e)}}]),e}(),FI=(function(){var e=function(){function e(t){d(this,e),this.accessToken=t}return f(e,[{key:"getToken",value:function(e){return Promise.resolve({accessToken:this.accessToken})}},{key:"addTokenChangeListener",value:function(e){e(this.accessToken)}},{key:"removeTokenChangeListener",value:function(e){}},{key:"notifyForInvalidToken",value:function(){}}]),e}();e.OWNER="owner"}(),/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/),UI="websocket",VI="long_polling",jI=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];d(this,e),this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=o,this.persistenceKey=a,this.includeNamespaceInQueryParams=u,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=sI.get("host:"+t)||this._host}return f(e,[{key:"isCacheableHost",value:function(){return"s-"===this.internalHost.substr(0,2)}},{key:"isCustomHost",value:function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}},{key:"host",get:function(){return this._host},set:function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&sI.set("host:"+this._host,this.internalHost))}},{key:"toString",value:function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}},{key:"toURLString",value:function(){return"".concat(this.secure?"https://":"http://").concat(this.host,"/").concat(this.includeNamespaceInQueryParams?"?ns=".concat(this.namespace):"")}}]),e}();function qI(e,t,n){var r;if((0,Ki.hu)("string"==typeof t,"typeof type must == string"),(0,Ki.hu)("object"==typeof n,"typeof params must == object"),t===UI)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==VI)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);var i=[];return RI(n,function(e,t){i.push(e+"="+t)}),r+i.join("&")}var BI=function(){function e(){d(this,e),this.counters_={}}return f(e,[{key:"incrementCounter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;(0,Ki.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}},{key:"get",value:function(){return(0,Ki.p$)(this.counters_)}}]),e}(),zI={},ZI={};function HI(e){var t=e.toString();return zI[t]||(zI[t]=new BI),zI[t]}var GI=function(){function e(t){d(this,e),this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return f(e,[{key:"closeAfter",value:function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}},{key:"handleResponse",value:function(e,t){var n=this,r=function(){var e=n.pendingResponses[n.currentResponseNum];delete n.pendingResponses[n.currentResponseNum];for(var t=function(t){e[t]&&PI(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);if(n.currentResponseNum===n.closeAfterResponse)return n.onClose&&(n.onClose(),n.onClose=null),"break";n.currentResponseNum++};for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}}}]),e}(),WI=function(){function e(t,n,r,i,o,a,u){var s=this;d(this,e),this.connId=t,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.transportSessionId=a,this.lastSessionId=u,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=mI(t),this.stats_=HI(n),this.urlFn=function(e){return s.appCheckToken&&(e.ac=s.appCheckToken),qI(n,VI,e)}}return f(e,[{key:"open",value:function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new GI(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,Ki.Yr)()||"complete"===document.readyState)e();else{var t=!1,n=function n(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new KI(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1],a=t[2];t[3],t[4];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,"start"===i)n.id=o,n.password=a;else{if("close"!==i)throw new Error("Unrecognized command received: "+i);o?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(o,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var i=t[0],o=t[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,o)},function(){n.onClosed_()},n.urlFn);var e={start:"t"};e.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=n.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",n.transportSessionId&&(e.s=n.transportSessionId),n.lastSessionId&&(e.ls=n.lastSessionId),n.applicationId&&(e.p=n.applicationId),n.appCheckToken&&(e.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&FI.test(location.hostname)&&(e.r="f");var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})}},{key:"start",value:function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}},{key:"markConnectionHealthy",value:function(){}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}},{key:"send",value:function(e){var t=(0,Ki.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=(0,Ki.h$)(t),r=SI(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}},{key:"addDisconnectPingFrame",value:function(e,t){if(!(0,Ki.Yr)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}}},{key:"incrementIncomingBytes_",value:function(e){var t=(0,Ki.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}],[{key:"forceAllow",value:function(){e.forceAllow_=!0}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){return!((0,Ki.Yr)()||!e.forceAllow_&&(e.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}}]),e}(),KI=function(){function e(t,n,r,i){if(d(this,e),this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Ki.Yr)())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=hI(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var o="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(o='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+o+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){gI("frame writing exception"),u.stack&&gI(u.stack),gI(u)}}}return f(e,[{key:"close",value:function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())}},{key:"startLongPoll",value:function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}},{key:"newRequest_",value:function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}},{key:"enqueueSegment",value:function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}},{key:"addLongPollTag_",value:function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,function(){clearTimeout(i),r()})}},{key:"addTag",value:function(e,t){var n=this;(0,Ki.Yr)()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;(!e||"loaded"===e||"complete"===e)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){gI("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}],[{key:"createIFrame_",value:function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||gI("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}}]),e}(),YI=null;"undefined"!=typeof MozWebSocket?YI=MozWebSocket:"undefined"!=typeof WebSocket&&(YI=WebSocket);var QI=function(){var e=function(){function e(t,n,r,i,o,a,u){d(this,e),this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=mI(this.connId),this.stats_=HI(n),this.connURL=e.connectionURL_(n,a,u,i),this.nodeAdmin=n.nodeAdmin}return f(e,[{key:"open",value:function(e,t){var n=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,sI.set("previous_websocket_failure",!0);try{if((0,Ki.Yr)()){var r={headers:{"User-Agent":"Firebase/5/".concat(iI,"/").concat(process.platform,"/").concat(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(r.headers.Authorization="Bearer ".concat(this.authToken)),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);var i=process.env,o=0===this.connURL.indexOf("wss://")?i.HTTPS_PROXY||i.https_proxy:i.HTTP_PROXY||i.http_proxy;o&&(r.proxy={origin:o}),this.mySock=new YI(this.connURL,[],r)}else this.mySock=new YI(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(u){this.log_("Error instantiating WebSocket.");var a=u.message||u.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(e){n.handleIncomingFrame(e)},this.mySock.onerror=function(e){n.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&n.log_(t),n.onClosed_()}}},{key:"start",value:function(){}},{key:"markConnectionHealthy",value:function(){sI.remove("previous_websocket_failure")}},{key:"appendFrame_",value:function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=(0,Ki.cI)(t);this.onMessage(n)}}},{key:"handleNewFrameCount_",value:function(e){this.totalFrames=e,this.frames=[]}},{key:"extractFrameCount_",value:function(e){if((0,Ki.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}},{key:"handleIncomingFrame",value:function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}}},{key:"send",value:function(e){this.resetKeepAlive();var t=(0,Ki.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=SI(t,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])}},{key:"shutdown_",value:function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}},{key:"onClosed_",value:function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}},{key:"close",value:function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}},{key:"resetKeepAlive",value:function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(45e3))}},{key:"sendString_",value:function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}],[{key:"connectionURL_",value:function(e,t,n,r){var i={v:"5"};return!(0,Ki.Yr)()&&"undefined"!=typeof location&&location.hostname&&FI.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),qI(e,UI,i)}},{key:"forceDisallow",value:function(){e.forceDisallow_=!0}},{key:"isAvailable",value:function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(t=!0)}return!t&&null!==YI&&!e.forceDisallow_}},{key:"previouslyFailed",value:function(){return sI.isInMemoryStorage||!0===sI.get("previous_websocket_failure")}}]),e}();return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e}(),JI=function(){function e(t){d(this,e),this.initTransports_(t)}return f(e,[{key:"initTransports_",value:function(t){var n=QI&&QI.isAvailable(),r=n&&!QI.previouslyFailed();if(t.webSocketOnly&&(n||_I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[QI];else{var i,o=this.transports_=[],a=s(e.ALL_TRANSPORTS);try{for(a.s();!(i=a.n()).done;){var u=i.value;u&&u.isAvailable()&&o.push(u)}}catch(c){a.e(c)}finally{a.f()}}}},{key:"initialTransport",value:function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}},{key:"upgradeTransport",value:function(){return this.transports_.length>1?this.transports_[1]:null}}],[{key:"ALL_TRANSPORTS",get:function(){return[WI,QI]}}]),e}(),$I=function(){function e(t,n,r,i,o,a,u,s,c,l){d(this,e),this.id=t,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=o,this.onMessage_=a,this.onReady_=u,this.onDisconnect_=s,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=mI("c:"+this.id+":"),this.transportManager_=new JI(n),this.log_("Connection created"),this.start_()}return f(e,[{key:"start_",value:function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=DI(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>102400?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>10240?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))}},{key:"nextTransportId_",value:function(){return"c:"+this.id+":"+this.connectionCount++}},{key:"disconnReceiver_",value:function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}}},{key:"connReceiver_",value:function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}}},{key:"sendRequest",value:function(e){this.sendData_({t:"d",d:e})}},{key:"tryCleanupConnection",value:function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}},{key:"onSecondaryControl_",value:function(e){if("t"in e){var t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}},{key:"onSecondaryMessageReceived_",value:function(e){var t=CI("t",e),n=CI("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}},{key:"upgradeIfSecondaryHealthy_",value:function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}},{key:"proceedWithUpgrade_",value:function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}},{key:"onPrimaryMessageReceived_",value:function(e){var t=CI("t",e),n=CI("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}},{key:"onDataMessage_",value:function(e){this.onPrimaryResponse_(),this.onMessage_(e)}},{key:"onPrimaryResponse_",value:function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}},{key:"onControl_",value:function(e){var t=CI("t",e);if("d"in e){var n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?yI("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):yI("Unknown control packet command: "+t)}}},{key:"onHandshake_",value:function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&_I("Protocol version mismatch detected"),this.tryStartUpgrade_())}},{key:"tryStartUpgrade_",value:function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}},{key:"startUpgrade_",value:function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),DI(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(6e4))}},{key:"onReset_",value:function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}},{key:"onConnectionEstablished_",value:function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):DI(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}},{key:"sendPingOnPrimaryIfNecessary_",value:function(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}},{key:"onSecondaryConnectionLost_",value:function(){var e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}},{key:"onConnectionLost_",value:function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(sI.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}},{key:"onConnectionShutdown_",value:function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}},{key:"sendData_",value:function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}},{key:"close",value:function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}},{key:"closeConnections_",value:function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}]),e}(),XI=function(){function e(){d(this,e)}return f(e,[{key:"put",value:function(e,t,n,r){}},{key:"merge",value:function(e,t,n,r){}},{key:"refreshAuthToken",value:function(e){}},{key:"refreshAppCheckToken",value:function(e){}},{key:"onDisconnectPut",value:function(e,t,n){}},{key:"onDisconnectMerge",value:function(e,t,n){}},{key:"onDisconnectCancel",value:function(e,t){}},{key:"reportStats",value:function(e){}}]),e}(),eT=function(){function e(t){d(this,e),this.allowedEvents_=t,this.listeners_={},(0,Ki.hu)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return f(e,[{key:"trigger",value:function(e){if(Array.isArray(this.listeners_[e])){for(var t=a(this.listeners_[e]),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=0;o<t.length;o++)t[o].callback.apply(t[o].context,r)}}},{key:"on",value:function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)}},{key:"off",value:function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}},{key:"validateEventType_",value:function(e){(0,Ki.hu)(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)}}]),e}(),tT=function(e){p(n,e);var t=v(n);function n(){var e;return d(this,n),(e=t.call(this,["online"])).online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Ki.uI)()&&(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return f(n,[{key:"getInitialEvent",value:function(e){return(0,Ki.hu)("online"===e,"Unknown event type: "+e),[this.online_]}},{key:"currentlyOnline",value:function(){return this.online_}}],[{key:"getInstance",value:function(){return new n}}]),n}(eT),nT=function(){function e(t,n){if(d(this,e),void 0===n){this.pieces_=t.split("/");for(var r=0,i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=n}return f(e,[{key:"toString",value:function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}]),e}();function rT(){return new nT("")}function iT(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function oT(e){return e.pieces_.length-e.pieceNum_}function aT(e){var t=e.pieceNum_;return t<e.pieces_.length&&t++,new nT(e.pieces_,t)}function uT(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function sT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.pieces_.slice(e.pieceNum_+t)}function cT(e){if(e.pieceNum_>=e.pieces_.length)return null;for(var t=[],n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new nT(t,0)}function lT(e,t){for(var n=[],r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof nT)for(var i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);else for(var o=t.split("/"),a=0;a<o.length;a++)o[a].length>0&&n.push(o[a]);return new nT(n,0)}function hT(e){return e.pieceNum_>=e.pieces_.length}function fT(e,t){var n=iT(e),r=iT(t);if(null===n)return t;if(n===r)return fT(aT(e),aT(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function dT(e,t){if(oT(e)!==oT(t))return!1;for(var n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function pT(e,t){var n=e.pieceNum_,r=t.pieceNum_;if(oT(e)>oT(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}var vT=function e(t,n){d(this,e),this.errorPrefix_=n,this.parts_=sT(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var r=0;r<this.parts_.length;r++)this.byteLength_+=(0,Ki.ug)(this.parts_[r]);gT(this)};function gT(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+mT(e))}function mT(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}var yT,kT,_T=function(e){p(n,e);var t=v(n);function n(){var e,r,i;return d(this,n),e=t.call(this,["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(i="visibilitychange",r="hidden"):void 0!==document.mozHidden?(i="mozvisibilitychange",r="mozHidden"):void 0!==document.msHidden?(i="msvisibilitychange",r="msHidden"):void 0!==document.webkitHidden&&(i="webkitvisibilitychange",r="webkitHidden")),e.visible_=!0,i&&document.addEventListener(i,function(){var t=!document[r];t!==e.visible_&&(e.visible_=t,e.trigger("visible",t))},!1),e}return f(n,[{key:"getInitialEvent",value:function(e){return(0,Ki.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}],[{key:"getInstance",value:function(){return new n}}]),n}(eT),wT=1e3,bT=function(){var e=function(e){p(r,e);var n=v(r);function r(e,t,i,o,a,u,s,c){var l;if(d(this,r),(l=n.call(this)).repoInfo_=e,l.applicationId_=t,l.onDataUpdate_=i,l.onConnectStatus_=o,l.onServerInfoUpdate_=a,l.authTokenProvider_=u,l.appCheckTokenProvider_=s,l.authOverride_=c,l.id=r.nextPersistentConnectionId_++,l.log_=mI("p:"+l.id+":"),l.interruptReasons_={},l.listens=new Map,l.outstandingPuts_=[],l.outstandingGets_=[],l.outstandingPutCount_=0,l.outstandingGetCount_=0,l.onDisconnectRequestQueue_=[],l.connected_=!1,l.reconnectDelay_=wT,l.maxReconnectDelay_=3e5,l.securityDebugCallback_=null,l.lastSessionId=null,l.establishConnectionTimer_=null,l.visible_=!1,l.requestCBHash_={},l.requestNumber_=0,l.realtime_=null,l.authToken_=null,l.appCheckToken_=null,l.forceTokenRefresh_=!1,l.invalidAuthTokenCount_=0,l.invalidAppCheckTokenCount_=0,l.firstConnection_=!0,l.lastConnectionAttemptTime_=null,l.lastConnectionEstablishedTime_=null,c&&!(0,Ki.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return _T.getInstance().on("visible",l.onVisible_,m(l)),-1===e.host.indexOf("fblocal")&&tT.getInstance().on("online",l.onOnline_,m(l)),g(l)}return f(r,[{key:"sendRequest",value:function(e,t,n){var r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,Ki.Pz)(i)),(0,Ki.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}},{key:"get",value:function(e){var t=this;this.initConnection_();var n=new Ki.BH,r={p:e._path.toString(),q:e._queryObject},i={action:"g",request:r,onComplete:function(e){var i=e.d;"ok"===e.s?(t.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;var o=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var e=t.outstandingGets_[o];void 0===e||i!==e||(delete t.outstandingGets_[o],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),t.log_("get "+o+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(o),n.promise}},{key:"listen",value:function(e,t,n,r){this.initConnection_();var i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,Ki.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Ki.hu)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}},{key:"sendGet_",value:function(e){var t=this,n=this.outstandingGets_[e];this.sendRequest("g",n.request,function(r){delete t.outstandingGets_[e],t.outstandingGetCount_--,0===t.outstandingGetCount_&&(t.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}},{key:"sendListen_",value:function(e){var t=this,n=e.query,i=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+i+" for "+o);var a={p:i};e.tag&&(a.q=n._queryObject,a.t=e.tag),a.h=e.hashFn(),this.sendRequest("q",a,function(a){var u=a.d,s=a.s;r.warnOnListenWarnings_(u,n),(t.listens.get(i)&&t.listens.get(i).get(o))===e&&(t.log_("listen response",a),"ok"!==s&&t.removeListen_(i,o),e.onComplete&&e.onComplete(s,u))})}},{key:"refreshAuthToken",value:function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)}},{key:"reduceReconnectDelayIfAdminCredential_",value:function(e){(e&&40===e.length||(0,Ki.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}},{key:"refreshAppCheckToken",value:function(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})}},{key:"tryAuth",value:function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=(0,Ki.w9)(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}}},{key:"tryAppCheck",value:function(){var e=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(t){var n=t.s,r=t.d||"error";"ok"===n?e.invalidAppCheckTokenCount_=0:e.onAppCheckRevoked_(n,r)})}},{key:"unlisten",value:function(e,t){var n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,Ki.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}},{key:"sendUnlisten_",value:function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}},{key:"onDisconnectPut",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}},{key:"onDisconnectMerge",value:function(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}},{key:"onDisconnectCancel",value:function(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}},{key:"sendOnDisconnect_",value:function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})}},{key:"put",value:function(e,t,n,r){this.putInternal("p",e,t,n,r)}},{key:"merge",value:function(e,t,n,r){this.putInternal("m",e,t,n,r)}},{key:"putInternal",value:function(e,t,n,r,i){this.initConnection_();var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}},{key:"sendPut_",value:function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})}},{key:"reportStats",value:function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){"ok"!==e.s&&t.log_("reportStats","Error sending stats: "+e.d)})}}},{key:"onDataMessage_",value:function(e){if("r"in e){this.log_("from server: "+(0,Ki.Pz)(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}},{key:"onDataPush_",value:function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):yI("Unrecognized action received from server: "+(0,Ki.Pz)(e)+"\nAre you using the latest client?")}},{key:"onReady_",value:function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}},{key:"scheduleConnect_",value:function(e){var t=this;(0,Ki.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))}},{key:"initConnection_",value:function(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}},{key:"onVisible_",value:function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=wT,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}},{key:"onOnline_",value:function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=wT,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}},{key:"onRealtimeDisconnect_",value:function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=wT),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}},{key:"establishConnection_",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function n(){var i,o,a,u,s,c,l,h,f,d,p,v,g;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.shouldReconnect_()){n.next=21;break}return e.log_("Making a connection attempt"),e.lastConnectionAttemptTime_=(new Date).getTime(),e.lastConnectionEstablishedTime_=null,i=e.onDataMessage_.bind(e),o=e.onReady_.bind(e),a=e.onRealtimeDisconnect_.bind(e),u=e.id+":"+r.nextConnectionId_++,s=e.lastSessionId,c=!1,l=null,h=function(){l?l.close():(c=!0,a())},e.realtime_={close:h,sendRequest:function(e){(0,Ki.hu)(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(e)}},f=e.forceTokenRefresh_,e.forceTokenRefresh_=!1,n.prev=8,n.next=11,Promise.all([e.authTokenProvider_.getToken(f),e.appCheckTokenProvider_.getToken(f)]);case 11:d=n.sent,p=t(d,2),v=p[0],g=p[1],c?gI("getToken() completed but was canceled"):(gI("getToken() completed. Creating connection."),e.authToken_=v&&v.accessToken,e.appCheckToken_=g&&g.token,l=new $I(u,e.repoInfo_,e.applicationId_,e.appCheckToken_,e.authToken_,i,o,a,function(t){_I(t+" ("+e.repoInfo_.toString()+")"),e.interrupt("server_kill")},s)),n.next=21;break;case 18:n.prev=18,n.t0=n.catch(8),e.log_("Failed to get token: "+n.t0),c||(e.repoInfo_.nodeAdmin&&_I(n.t0),h());case 21:case"end":return n.stop()}},n,null,[[8,18]])}))()}},{key:"interrupt",value:function(e){gI("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}},{key:"resume",value:function(e){gI("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Ki.xb)(this.interruptReasons_)&&(this.reconnectDelay_=wT,this.realtime_||this.scheduleConnect_(0))}},{key:"handleTimestamp_",value:function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}},{key:"cancelSentTransactions_",value:function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}},{key:"onListenRevoked_",value:function(e,t){var n;n=t?t.map(function(e){return EI(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}},{key:"removeListen_",value:function(e,t){var n,r=new nT(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n}},{key:"onAuthRevoked_",value:function(e,t){gI("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}},{key:"onAppCheckRevoked_",value:function(e,t){gI("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}},{key:"onSecurityDebugPacket_",value:function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}},{key:"restoreState_",value:function(){this.tryAuth(),this.tryAppCheck();var e,t=s(this.listens.values());try{for(t.s();!(e=t.n()).done;){var n,r=s(e.value.values());try{for(r.s();!(n=r.n()).done;){var i=n.value;this.sendListen_(i)}}catch(c){r.e(c)}finally{r.f()}}}catch(c){t.e(c)}finally{t.f()}for(var o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){var a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(var u=0;u<this.outstandingGets_.length;u++)this.outstandingGets_[u]&&this.sendGet_(u)}},{key:"sendConnectStats_",value:function(){var e={},t="js";(0,Ki.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+iI.replace(/\./g,"-")]=1,(0,Ki.uI)()?e["framework.cordova"]=1:(0,Ki.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}},{key:"shouldReconnect_",value:function(){var e=tT.getInstance().currentlyOnline();return(0,Ki.xb)(this.interruptReasons_)&&e}}],[{key:"warnOnListenWarnings_",value:function(e,t){if(e&&"object"==typeof e&&(0,Ki.r3)(e,"w")){var n=(0,Ki.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t._queryParams.getIndex().toString()+'"',i=t._path.toString();_I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ".concat(r," at ").concat(i," to your security rules for better performance."))}}}}]),r}(XI);return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(),xT=function(){function e(t,n){d(this,e),this.name=t,this.node=n}return f(e,null,[{key:"Wrap",value:function(t,n){return new e(t,n)}}]),e}(),IT=function(){function e(){d(this,e)}return f(e,[{key:"getCompare",value:function(){return this.compare.bind(this)}},{key:"indexedValueChanged",value:function(e,t){var n=new xT(bI,e),r=new xT(bI,t);return 0!==this.compare(n,r)}},{key:"minPost",value:function(){return xT.MIN}}]),e}(),TT=function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){return II(e.name,t.name)}},{key:"isDefinedOn",value:function(e){throw(0,Ki.g5)("KeyIndex.isDefinedOn not expected to be called.")}},{key:"indexedValueChanged",value:function(e,t){return!1}},{key:"minPost",value:function(){return xT.MIN}},{key:"maxPost",value:function(){return new xT(xI,yT)}},{key:"makePost",value:function(e,t){return(0,Ki.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new xT(e,yT)}},{key:"toString",value:function(){return".key"}}],[{key:"__EMPTY_NODE",get:function(){return yT},set:function(e){yT=e}}]),n}(IT),CT=new TT,ET=function(){function e(t,n,r,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;d(this,e),this.isReverse_=i,this.resultGenerator_=o,this.nodeStack_=[];for(var a=1;!t.isEmpty();)if(t=t,a=n?r(t.key,n):1,i&&(a*=-1),a<0)t=this.isReverse_?t.left:t.right;else{if(0===a){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return f(e,[{key:"getNext",value:function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}},{key:"hasNext",value:function(){return this.nodeStack_.length>0}},{key:"peek",value:function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}]),e}(),ST=function(){var e=function(){function e(t,n,r,i,o){d(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:RT.EMPTY_NODE,this.right=null!=o?o:RT.EMPTY_NODE}return f(e,[{key:"copy",value:function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)}},{key:"count",value:function(){return this.left.count()+1+this.right.count()}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min_",value:function(){return this.left.isEmpty()?this:this.left.min_()}},{key:"minKey",value:function(){return this.min_().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()}},{key:"removeMin_",value:function(){if(this.left.isEmpty())return RT.EMPTY_NODE;var e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()}},{key:"remove",value:function(e,t){var n,r;if(t(e,(n=this).key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return RT.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}},{key:"isRed_",value:function(){return this.color}},{key:"fixUp_",value:function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}},{key:"moveRedLeft_",value:function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e}},{key:"moveRedRight_",value:function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e}},{key:"rotateLeft_",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight_",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip_",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth_",value:function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1}},{key:"check_",value:function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}]),e}();return e.RED=!0,e.BLACK=!1,e}(),RT=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.EMPTY_NODE;d(this,e),this.comparator_=t,this.root_=n}return f(e,[{key:"insert",value:function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ST.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ST.BLACK,null,null))}},{key:"get",value:function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}},{key:"getPredecessorKey",value:function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}},{key:"isEmpty",value:function(){return this.root_.isEmpty()}},{key:"count",value:function(){return this.root_.count()}},{key:"minKey",value:function(){return this.root_.minKey()}},{key:"maxKey",value:function(){return this.root_.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root_.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.root_.reverseTraversal(e)}},{key:"getIterator",value:function(e){return new ET(this.root_,null,this.comparator_,!1,e)}},{key:"getIteratorFrom",value:function(e,t){return new ET(this.root_,e,this.comparator_,!1,t)}},{key:"getReverseIteratorFrom",value:function(e,t){return new ET(this.root_,e,this.comparator_,!0,t)}},{key:"getReverseIterator",value:function(e){return new ET(this.root_,null,this.comparator_,!0,e)}}]),e}();function AT(e,t){return II(e.name,t.name)}function NT(e,t){return II(e,t)}RT.EMPTY_NODE=new(function(){function e(){d(this,e)}return f(e,[{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new ST(e,t,null)}},{key:"remove",value:function(e,t){return this}},{key:"count",value:function(){return 0}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"check_",value:function(){return 0}},{key:"isRed_",value:function(){return!1}}]),e}());var OT,PT,DT,LT,MT,FT=function(e){return"number"==typeof e?"number:"+AI(e):"string:"+e},UT=function(e){if(e.isLeafNode()){var t=e.val();(0,Ki.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Ki.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Ki.hu)(e===kT||e.isEmpty(),"priority of unexpected type.");(0,Ki.hu)(e===kT||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},VT=function(){var e=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.__childrenNodeConstructor.EMPTY_NODE;d(this,e),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,Ki.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),UT(this.priorityNode_)}return f(e,[{key:"isLeafNode",value:function(){return!0}},{key:"getPriority",value:function(){return this.priorityNode_}},{key:"updatePriority",value:function(t){return new e(this.value_,t)}},{key:"getImmediateChild",value:function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"getChild",value:function(t){return hT(t)?this:".priority"===iT(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}},{key:"hasChild",value:function(){return!1}},{key:"getPredecessorChildName",value:function(e,t){return null}},{key:"updateImmediateChild",value:function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}},{key:"updateChild",value:function(t,n){var r=iT(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,Ki.hu)(".priority"!==r||1===oT(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(aT(t),n)))}},{key:"isEmpty",value:function(){return!1}},{key:"numChildren",value:function(){return 0}},{key:"forEachChild",value:function(e,t){return!1}},{key:"val",value:function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+FT(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?AI(this.value_):this.value_,this.lazyHash_=fI(e)}return this.lazyHash_}},{key:"getValue",value:function(){return this.value_}},{key:"compareTo",value:function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,Ki.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}},{key:"compareToLeafNode_",value:function(t){var n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return(0,Ki.hu)(i>=0,"Unknown leaf type: "+n),(0,Ki.hu)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}},{key:"withIndex",value:function(){return this}},{key:"isIndexed",value:function(){return!0}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}],[{key:"__childrenNodeConstructor",get:function(){return OT},set:function(e){OT=e}}]),e}();return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}(),jT=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?II(e.name,t.name):i}},{key:"isDefinedOn",value:function(e){return!e.getPriority().isEmpty()}},{key:"indexedValueChanged",value:function(e,t){return!e.getPriority().equals(t.getPriority())}},{key:"minPost",value:function(){return xT.MIN}},{key:"maxPost",value:function(){return new xT(xI,new VT("[PRIORITY-POST]",DT))}},{key:"makePost",value:function(e,t){var n=PT(e);return new xT(t,new VT("[PRIORITY-POST]",n))}},{key:"toString",value:function(){return".priority"}}]),n}(IT)),qT=Math.log(2),BT=function(){function e(t){var n=this;d(this,e),this.count=parseInt(Math.log(t+1)/qT,10),this.current_=this.count-1;var r=parseInt(Array(n.count+1).join("1"),2);this.bits_=t+1&r}return f(e,[{key:"nextBitIsOne",value:function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e}}]),e}(),zT=function(e,t,n,r){e.sort(t);var i=function t(r,i){var o,a,u=i-r;if(0===u)return null;if(1===u)return o=e[r],a=n?n(o):o,new ST(a,o.node,ST.BLACK,null,null);var s=parseInt(u/2,10)+r,c=t(r,s),l=t(s+1,i);return o=e[s],a=n?n(o):o,new ST(a,o.node,ST.BLACK,c,l)},o=function(t){for(var r=null,o=null,a=e.length,u=function(t,r){var o=a-t,u=a;a-=t;var c=i(o+1,u),l=e[o],h=n?n(l):l;s(new ST(h,l.node,r,null,c))},s=function(e){r?(r.left=e,r=e):(o=e,r=e)},c=0;c<t.count;++c){var l=t.nextBitIsOne(),h=Math.pow(2,t.count-(c+1));l?u(h,ST.BLACK):(u(h,ST.BLACK),u(h,ST.RED))}return o}(new BT(e.length));return new RT(r||t,o)},ZT={},HT=function(){function e(t,n){d(this,e),this.indexes_=t,this.indexSet_=n}return f(e,[{key:"get",value:function(e){var t=(0,Ki.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof RT?t:null}},{key:"hasIndex",value:function(e){return(0,Ki.r3)(this.indexSet_,e.toString())}},{key:"addIndex",value:function(t,n){(0,Ki.hu)(t!==CT,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,i=[],o=!1,a=n.getIterator(xT.Wrap),u=a.getNext();u;)o=o||t.isDefinedOn(u.node),i.push(u),u=a.getNext();r=o?zT(i,t.getCompare()):ZT;var s=t.toString(),c=Object.assign({},this.indexSet_);c[s]=t;var l=Object.assign({},this.indexes_);return l[s]=r,new e(l,c)}},{key:"addToIndexes",value:function(t,n){var r=this;return new e((0,Ki.UI)(this.indexes_,function(e,i){var o=(0,Ki.DV)(r.indexSet_,i);if((0,Ki.hu)(o,"Missing index implementation for "+i),e===ZT){if(o.isDefinedOn(t.node)){for(var a=[],u=n.getIterator(xT.Wrap),s=u.getNext();s;)s.name!==t.name&&a.push(s),s=u.getNext();return a.push(t),zT(a,o.getCompare())}return ZT}var c=n.get(t.name),l=e;return c&&(l=l.remove(new xT(t.name,c))),l.insert(t,t.node)}),this.indexSet_)}},{key:"removeFromIndexes",value:function(t,n){return new e((0,Ki.UI)(this.indexes_,function(e){if(e===ZT)return e;var r=n.get(t.name);return r?e.remove(new xT(t.name,r)):e}),this.indexSet_)}}],[{key:"Default",get:function(){return(0,Ki.hu)(ZT&&jT,"ChildrenNode.ts has not been loaded"),LT=LT||new e({".priority":ZT},{".priority":jT})}}]),e}(),GT=function(){var e=function(){function e(t,n,r){d(this,e),this.children_=t,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&UT(this.priorityNode_),this.children_.isEmpty()&&(0,Ki.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return f(e,[{key:"isLeafNode",value:function(){return!1}},{key:"getPriority",value:function(){return this.priorityNode_||MT}},{key:"updatePriority",value:function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}},{key:"getImmediateChild",value:function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?MT:t}},{key:"getChild",value:function(e){var t=iT(e);return null===t?this:this.getImmediateChild(t).getChild(aT(e))}},{key:"hasChild",value:function(e){return null!==this.children_.get(e)}},{key:"updateImmediateChild",value:function(t,n){if((0,Ki.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r,i,o=new xT(t,n);n.isEmpty()?(r=this.children_.remove(t),i=this.indexMap_.removeFromIndexes(o,this.children_)):(r=this.children_.insert(t,n),i=this.indexMap_.addToIndexes(o,this.children_));var a=r.isEmpty()?MT:this.priorityNode_;return new e(r,a,i)}},{key:"updateChild",value:function(e,t){var n=iT(e);if(null===n)return t;(0,Ki.hu)(".priority"!==iT(e)||1===oT(e),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(aT(e),t);return this.updateImmediateChild(n,r)}},{key:"isEmpty",value:function(){return this.children_.isEmpty()}},{key:"numChildren",value:function(){return this.children_.count()}},{key:"val",value:function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(jT,function(a,u){n[a]=u.val(t),r++,o&&e.INTEGER_REGEXP_.test(a)?i=Math.max(i,Number(a)):o=!1}),!t&&o&&i<2*r){var a=[];for(var u in n)a[u]=n[u];return a}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}},{key:"hash",value:function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+FT(this.getPriority().val())+":"),this.forEachChild(jT,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":fI(e)}return this.lazyHash_}},{key:"getPredecessorChildName",value:function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new xT(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)}},{key:"getFirstChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()}},{key:"getFirstChild",value:function(e){var t=this.getFirstChildName(e);return t?new xT(t,this.children_.get(t)):null}},{key:"getLastChildName",value:function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()}},{key:"getLastChild",value:function(e){var t=this.getLastChildName(e);return t?new xT(t,this.children_.get(t)):null}},{key:"forEachChild",value:function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)}},{key:"getIterator",value:function(e){return this.getIteratorFrom(e.minPost(),e)}},{key:"getIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,xT.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r}},{key:"getReverseIterator",value:function(e){return this.getReverseIteratorFrom(e.maxPost(),e)}},{key:"getReverseIteratorFrom",value:function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,xT.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r}},{key:"compareTo",value:function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===WT?-1:0}},{key:"withIndex",value:function(t){if(t===CT||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}},{key:"isIndexed",value:function(e){return e===CT||this.indexMap_.hasIndex(e)}},{key:"equals",value:function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(jT),r=t.getIterator(jT),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1}},{key:"resolveIndex_",value:function(e){return e===CT?null:this.indexMap_.get(e.toString())}}],[{key:"EMPTY_NODE",get:function(){return MT||(MT=new e(new RT(NT),null,HT.Default))}}]),e}();return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),WT=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.call(this,new RT(NT),GT.EMPTY_NODE,HT.Default)}return f(n,[{key:"compareTo",value:function(e){return e===this?0:1}},{key:"equals",value:function(e){return e===this}},{key:"getPriority",value:function(){return this}},{key:"getImmediateChild",value:function(e){return GT.EMPTY_NODE}},{key:"isEmpty",value:function(){return!1}}]),n}(GT));function KT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===e)return GT.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,Ki.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new VT(e,KT(t));if(e instanceof Array){var n=GT.EMPTY_NODE;return RI(e,function(t,r){if((0,Ki.r3)(e,t)&&"."!==t.substring(0,1)){var i=KT(r);(i.isLeafNode()||!i.isEmpty())&&(n=n.updateImmediateChild(t,i))}}),n.updatePriority(KT(t))}var r=[],i=!1;if(RI(e,function(e,t){if("."!==e.substring(0,1)){var n=KT(t);n.isEmpty()||(i=i||!n.getPriority().isEmpty(),r.push(new xT(e,n)))}}),0===r.length)return GT.EMPTY_NODE;var o=zT(r,AT,function(e){return e.name},NT);if(i){var a=zT(r,jT.getCompare());return new GT(o,KT(t),new HT({".priority":a},{".priority":jT}))}return new GT(o,KT(t),HT.Default)}Object.defineProperties(xT,{MIN:{value:new xT(bI,GT.EMPTY_NODE)},MAX:{value:new xT(xI,WT)}}),TT.__EMPTY_NODE=GT.EMPTY_NODE,VT.__childrenNodeConstructor=GT,function(e){kT=e}(WT),function(e){DT=e}(WT),function(e){PT=e}(KT);var YT=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this)).indexPath_=e,(0,Ki.hu)(!hT(e)&&".priority"!==iT(e),"Can't create PathIndex with empty path or .priority key"),r}return f(n,[{key:"extractChild",value:function(e){return e.getChild(this.indexPath_)}},{key:"isDefinedOn",value:function(e){return!e.getChild(this.indexPath_).isEmpty()}},{key:"compare",value:function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?II(e.name,t.name):i}},{key:"makePost",value:function(e,t){var n=KT(e),r=GT.EMPTY_NODE.updateChild(this.indexPath_,n);return new xT(t,r)}},{key:"maxPost",value:function(){var e=GT.EMPTY_NODE.updateChild(this.indexPath_,WT);return new xT(xI,e)}},{key:"toString",value:function(){return sT(this.indexPath_,0).join("/")}}]),n}(IT),QT=new(function(e){p(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return f(n,[{key:"compare",value:function(e,t){var n=e.node.compareTo(t.node);return 0===n?II(e.name,t.name):n}},{key:"isDefinedOn",value:function(e){return!0}},{key:"indexedValueChanged",value:function(e,t){return!e.equals(t)}},{key:"minPost",value:function(){return xT.MIN}},{key:"maxPost",value:function(){return xT.MAX}},{key:"makePost",value:function(e,t){var n=KT(e);return new xT(t,n)}},{key:"toString",value:function(){return".value"}}]),n}(IT));function JT(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}var $T=function(){function e(){d(this,e),this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=jT}return f(e,[{key:"hasStart",value:function(){return this.startSet_}},{key:"hasStartAfter",value:function(){return this.startAfterSet_}},{key:"hasEndBefore",value:function(){return this.endBeforeSet_}},{key:"isViewFromLeft",value:function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}},{key:"getIndexStartValue",value:function(){return(0,Ki.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}},{key:"getIndexStartName",value:function(){return(0,Ki.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:bI}},{key:"hasEnd",value:function(){return this.endSet_}},{key:"getIndexEndValue",value:function(){return(0,Ki.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}},{key:"getIndexEndName",value:function(){return(0,Ki.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:xI}},{key:"hasLimit",value:function(){return this.limitSet_}},{key:"hasAnchoredLimit",value:function(){return this.limitSet_&&""!==this.viewFrom_}},{key:"getLimit",value:function(){return(0,Ki.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}},{key:"getIndex",value:function(){return this.index_}},{key:"loadsAllData",value:function(){return!(this.startSet_||this.endSet_||this.limitSet_)}},{key:"isDefault",value:function(){return this.loadsAllData()&&this.index_===jT}},{key:"copy",value:function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}}]),e}();function XT(e){var t,n={};return e.isDefault()||(e.index_===jT?t="$priority":e.index_===QT?t="$value":e.index_===CT?t="$key":((0,Ki.hu)(e.index_ instanceof YT,"Unrecognized index type!"),t=e.index_.toString()),n.orderBy=(0,Ki.Pz)(t),e.startSet_&&(n.startAt=(0,Ki.Pz)(e.indexStartValue_),e.startNameSet_&&(n.startAt+=","+(0,Ki.Pz)(e.indexStartName_))),e.endSet_&&(n.endAt=(0,Ki.Pz)(e.indexEndValue_),e.endNameSet_&&(n.endAt+=","+(0,Ki.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?n.limitToFirst=e.limit_:n.limitToLast=e.limit_)),n}function eC(e){var t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;var n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==jT&&(t.i=e.index_.toString()),t}var tC=function(e){p(r,e);var n=v(r);function r(e,t,i,o){var a;return d(this,r),(a=n.call(this)).repoInfo_=e,a.onDataUpdate_=t,a.authTokenProvider_=i,a.appCheckTokenProvider_=o,a.log_=mI("p:rest:"),a.listens_={},a}return f(r,[{key:"reportStats",value:function(e){throw new Error("Method not implemented.")}},{key:"listen",value:function(e,t,n,i){var o=this,a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);var u=r.getListenId_(e,n),s={};this.listens_[u]=s;var c=XT(e._queryParams);this.restRequest_(a+".json",c,function(e,t){var r=t;(404===e&&(r=null,e=null),null===e&&o.onDataUpdate_(a,r,!1,n),(0,Ki.DV)(o.listens_,u)===s)&&i(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})}},{key:"unlisten",value:function(e,t){var n=r.getListenId_(e,t);delete this.listens_[n]}},{key:"get",value:function(e){var t=this,n=XT(e._queryParams),r=e._path.toString(),i=new Ki.BH;return this.restRequest_(r+".json",n,function(e,n){var o=n;404===e&&(o=null,e=null),null===e?(t.onDataUpdate_(r,o,!1,null),i.resolve(o)):i.reject(new Error(o))}),i.promise}},{key:"refreshAuthToken",value:function(e){}},{key:"restRequest_",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;return r.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(o){var a=t(o,2),u=a[0],s=a[1];u&&u.accessToken&&(r.auth=u.accessToken),s&&s.token&&(r.ac=s.token);var c=(n.repoInfo_.secure?"https://":"http://")+n.repoInfo_.host+e+"?ns="+n.repoInfo_.namespace+(0,Ki.xO)(r);n.log_("Sending REST request for "+c);var l=new XMLHttpRequest;l.onreadystatechange=function(){if(i&&4===l.readyState){n.log_("REST Response for "+c+" received. status:",l.status,"response:",l.responseText);var e=null;if(l.status>=200&&l.status<300){try{e=(0,Ki.cI)(l.responseText)}catch(t){_I("Failed to parse JSON response for "+c+": "+l.responseText)}i(null,e)}else 401!==l.status&&404!==l.status&&_I("Got unsuccessful REST response for "+c+" Status: "+l.status),i(l.status);i=null}},l.open("GET",c,!0),l.send()})}}],[{key:"getListenId_",value:function(e,t){return void 0!==t?"tag$"+t:((0,Ki.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}}]),r}(XI),nC=function(){function e(){d(this,e),this.rootNode_=GT.EMPTY_NODE}return f(e,[{key:"getNode",value:function(e){return this.rootNode_.getChild(e)}},{key:"updateSnapshot",value:function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}]),e}();function rC(){return{value:null,children:new Map}}function iC(e,t,n){if(hT(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{var r=iT(t);e.children.has(r)||e.children.set(r,rC()),iC(e.children.get(r),t=aT(t),n)}}function oC(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach(function(e,n){t(n,e)})}(e,function(e,r){oC(r,new nT(t.toString()+"/"+e),n)})}var aC=function(){function e(t){d(this,e),this.collection_=t,this.last_=null}return f(e,[{key:"get",value:function(){var e=this.collection_.get(),t=Object.assign({},e);return this.last_&&RI(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t}}]),e}(),uC=function(){function e(t,n){d(this,e),this.server_=n,this.statsToReport_={},this.statsListener_=new aC(t);var r=1e4+2e4*Math.random();DI(this.reportStats_.bind(this),Math.floor(r))}return f(e,[{key:"reportStats_",value:function(){var e=this,t=this.statsListener_.get(),n={},r=!1;RI(t,function(t,i){i>0&&(0,Ki.r3)(e.statsToReport_,t)&&(n[t]=i,r=!0)}),r&&this.server_.reportStats(n),DI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}]),e}(),sC=(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(sC||(sC={})),sC);function cC(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}var lC,hC=function(){function e(t,n,r){d(this,e),this.path=t,this.affectedTree=n,this.revert=r,this.type=sC.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return f(e,[{key:"operationForChild",value:function(t){if(hT(this.path)){if(null!=this.affectedTree.value)return(0,Ki.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new nT(t));return new e(rT(),n,this.revert)}return(0,Ki.hu)(iT(this.path)===t,"operationForChild called for unrelated child."),new e(aT(this.path),this.affectedTree,this.revert)}}]),e}(),fC=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.snap=r,this.type=sC.OVERWRITE}return f(e,[{key:"operationForChild",value:function(t){return hT(this.path)?new e(this.source,rT(),this.snap.getImmediateChild(t)):new e(this.source,aT(this.path),this.snap)}}]),e}(),dC=function(){function e(t,n,r){d(this,e),this.source=t,this.path=n,this.children=r,this.type=sC.MERGE}return f(e,[{key:"operationForChild",value:function(t){if(hT(this.path)){var n=this.children.subtree(new nT(t));return n.isEmpty()?null:n.value?new fC(this.source,rT(),n.value):new e(this.source,rT(),n)}return(0,Ki.hu)(iT(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,aT(this.path),this.children)}},{key:"toString",value:function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}]),e}(),pC=function(){function e(t,n,r){d(this,e),this.node_=t,this.fullyInitialized_=n,this.filtered_=r}return f(e,[{key:"isFullyInitialized",value:function(){return this.fullyInitialized_}},{key:"isFiltered",value:function(){return this.filtered_}},{key:"isCompleteForPath",value:function(e){if(hT(e))return this.isFullyInitialized()&&!this.filtered_;var t=iT(e);return this.isCompleteForChild(t)}},{key:"isCompleteForChild",value:function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}},{key:"getNode",value:function(){return this.node_}}]),e}();function vC(e,t,n,r,i,o){var a=r.filter(function(e){return e.type===n});a.sort(function(t,n){return function(e,t,n){if(null==t.childName||null==n.childName)throw(0,Ki.g5)("Should only compare child_ events.");var r=new xT(t.childName,t.snapshotNode),i=new xT(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)}),a.forEach(function(n){var r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach(function(i){i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function gC(e,t){return{eventCache:e,serverCache:t}}function mC(e,t,n,r){return gC(new pC(t,n,r),e.serverCache)}function yC(e,t,n,r){return gC(e.eventCache,new pC(t,n,r))}function kC(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function _C(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}var wC=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(lC||(lC=new RT(TI)),lC);d(this,e),this.value=t,this.children=n}return f(e,[{key:"isEmpty",value:function(){return null===this.value&&this.children.isEmpty()}},{key:"findRootMostMatchingPathAndValue",value:function(e,t){if(null!=this.value&&t(this.value))return{path:rT(),value:this.value};if(hT(e))return null;var n=iT(e),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(aT(e),t);return null!=i?{path:lT(new nT(n),i.path),value:i.value}:null}return null}},{key:"findRootMostValueAndPath",value:function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})}},{key:"subtree",value:function(t){if(hT(t))return this;var n=iT(t),r=this.children.get(n);return null!==r?r.subtree(aT(t)):new e(null)}},{key:"set",value:function(t,n){if(hT(t))return new e(n,this.children);var r=iT(t),i=(this.children.get(r)||new e(null)).set(aT(t),n),o=this.children.insert(r,i);return new e(this.value,o)}},{key:"remove",value:function(t){if(hT(t))return this.children.isEmpty()?new e(null):new e(null,this.children);var n=iT(t),r=this.children.get(n);if(r){var i,o=r.remove(aT(t));return i=o.isEmpty()?this.children.remove(n):this.children.insert(n,o),null===this.value&&i.isEmpty()?new e(null):new e(this.value,i)}return this}},{key:"get",value:function(e){if(hT(e))return this.value;var t=iT(e),n=this.children.get(t);return n?n.get(aT(e)):null}},{key:"setTree",value:function(t,n){if(hT(t))return n;var r,i=iT(t),o=(this.children.get(i)||new e(null)).setTree(aT(t),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new e(this.value,r)}},{key:"fold",value:function(e){return this.fold_(rT(),e)}},{key:"fold_",value:function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(lT(e,r),t)}),t(e,this.value,n)}},{key:"findOnPath",value:function(e,t){return this.findOnPath_(e,rT(),t)}},{key:"findOnPath_",value:function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(hT(e))return null;var i=iT(e),o=this.children.get(i);return o?o.findOnPath_(aT(e),lT(t,i),n):null}},{key:"foreachOnPath",value:function(e,t){return this.foreachOnPath_(e,rT(),t)}},{key:"foreachOnPath_",value:function(t,n,r){if(hT(t))return this;this.value&&r(n,this.value);var i=iT(t),o=this.children.get(i);return o?o.foreachOnPath_(aT(t),lT(n,i),r):new e(null)}},{key:"foreach",value:function(e){this.foreach_(rT(),e)}},{key:"foreach_",value:function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(lT(e,n),t)}),this.value&&t(e,this.value)}},{key:"foreachChild",value:function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})}}],[{key:"fromObject",value:function(t){var n=new e(null);return RI(t,function(e,t){n=n.set(new nT(e),t)}),n}}]),e}(),bC=function(){function e(t){d(this,e),this.writeTree_=t}return f(e,null,[{key:"empty",value:function(){return new e(new wC(null))}}]),e}();function xC(e,t,n){if(hT(t))return new bC(new wC(n));var r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,a=fT(i,t);return o=o.updateChild(a,n),new bC(e.writeTree_.set(i,o))}var u=new wC(n),s=e.writeTree_.setTree(t,u);return new bC(s)}function IC(e,t,n){var r=e;return RI(n,function(e,n){r=xC(r,lT(t,e),n)}),r}function TC(e,t){if(hT(t))return bC.empty();var n=e.writeTree_.setTree(t,new wC(null));return new bC(n)}function CC(e,t){return null!=EC(e,t)}function EC(e,t){var n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(fT(n.path,t)):null}function SC(e){var t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(jT,function(e,n){t.push(new xT(e,n))}):e.writeTree_.children.inorderTraversal(function(e,n){null!=n.value&&t.push(new xT(e,n.value))}),t}function RC(e,t){if(hT(t))return e;var n=EC(e,t);return new bC(null!=n?new wC(n):e.writeTree_.subtree(t))}function AC(e){return e.writeTree_.isEmpty()}function NC(e,t){return OC(rT(),e.writeTree_,t)}function OC(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(t,i){".priority"===t?((0,Ki.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=OC(lT(e,t),i,n)}),!n.getChild(e).isEmpty()&&null!==r&&(n=n.updateChild(lT(e,".priority"),r)),n}function PC(e,t){return ZC(t,e)}function DC(e,t){if(e.snap)return pT(e.path,t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&pT(lT(e.path,n),t))return!0;return!1}function LC(e){return e.visible}function MC(e,t,n){for(var r=bC.empty(),i=0;i<e.length;++i){var o=e[i];if(t(o)){var a=o.path,u=void 0;if(o.snap)pT(n,a)?r=xC(r,u=fT(n,a),o.snap):pT(a,n)&&(u=fT(a,n),r=xC(r,rT(),o.snap.getChild(u)));else{if(!o.children)throw(0,Ki.g5)("WriteRecord should have .snap or .children");if(pT(n,a))r=IC(r,u=fT(n,a),o.children);else if(pT(a,n))if(hT(u=fT(a,n)))r=IC(r,rT(),o.children);else{var s=(0,Ki.DV)(o.children,iT(u));if(s){var c=s.getChild(aT(u));r=xC(r,rT(),c)}}}}}return r}function FC(e,t,n,r,i){if(r||i){var o=RC(e.visibleWrites,t);return!i&&AC(o)?n:i||null!=n||CC(o,rT())?NC(MC(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(pT(e.path,t)||pT(t,e.path))},t),n||GT.EMPTY_NODE):null}var a=EC(e.visibleWrites,t);if(null!=a)return a;var u=RC(e.visibleWrites,t);return AC(u)?n:null!=n||CC(u,rT())?NC(u,n||GT.EMPTY_NODE):null}function UC(e,t,n,r){return FC(e.writeTree,e.treePath,t,n,r)}function VC(e,t){return function(e,t,n){var r=GT.EMPTY_NODE,i=EC(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(jT,function(e,t){r=r.updateImmediateChild(e,t)}),r;if(n){var o=RC(e.visibleWrites,t);return n.forEachChild(jT,function(e,t){var n=NC(RC(o,new nT(e)),t);r=r.updateImmediateChild(e,n)}),SC(o).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}return SC(RC(e.visibleWrites,t)).forEach(function(e){r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function jC(e,t,n,r){return function(e,t,n,r,i){(0,Ki.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");var o=lT(t,n);if(CC(e.visibleWrites,o))return null;var a=RC(e.visibleWrites,o);return AC(a)?i.getChild(n):NC(a,i.getChild(n))}(e.writeTree,e.treePath,t,n,r)}function qC(e,t){return function(e,t){return EC(e.visibleWrites,t)}(e.writeTree,lT(e.treePath,t))}function BC(e,t,n){return function(e,t,n,r){var i=lT(t,n),o=EC(e.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?NC(RC(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function zC(e,t){return ZC(lT(e.treePath,t),e.writeTree)}function ZC(e,t){return{treePath:e,writeTree:t}}var HC,GC,WC=function(){function e(){d(this,e),this.changeMap=new Map}return f(e,[{key:"trackChildChange",value:function(e){var t=e.type,n=e.childName;(0,Ki.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Ki.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,JT(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,function(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,function(e,t){return{type:"child_added",snapshotNode:t,childName:e}}(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,Ki.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,JT(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}},{key:"getChanges",value:function(){return Array.from(this.changeMap.values())}}]),e}(),KC=new(function(){function e(){d(this,e)}return f(e,[{key:"getCompleteChild",value:function(e){return null}},{key:"getChildAfterChild",value:function(e,t,n){return null}}]),e}()),YC=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;d(this,e),this.writes_=t,this.viewCache_=n,this.optCompleteServerCache_=r}return f(e,[{key:"getCompleteChild",value:function(e){var t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new pC(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return BC(this.writes_,e,n)}},{key:"getChildAfterChild",value:function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:_C(this.viewCache_),i=function(e,t,n,r,i,o){return function(e,t,n,r,i,o,a){var u,s=RC(e.visibleWrites,t),c=EC(s,rT());if(null!=c)u=c;else{if(null==n)return[];u=NC(s,n)}if((u=u.withIndex(a)).isEmpty()||u.isLeafNode())return[];for(var l=[],h=a.getCompare(),f=o?u.getReverseIteratorFrom(r,a):u.getIteratorFrom(r,a),d=f.getNext();d&&l.length<1;)0!==h(d,r)&&l.push(d),d=f.getNext();return l}(e.writeTree,e.treePath,t,n,0,i,o)}(this.writes_,r,t,0,n,e);return 0===i.length?null:i[0]}}]),e}();function QC(e,t,n,r,i,o){var a,u,s=t.eventCache;if(null!=qC(r,n))return t;if(hT(n))if((0,Ki.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){var c=_C(t),l=VC(r,c instanceof GT?c:GT.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),l,o)}else{var h=UC(r,_C(t));a=e.filter.updateFullNode(t.eventCache.getNode(),h,o)}else{var f=iT(n);if(".priority"===f){(0,Ki.hu)(1===oT(n),"Can't have a priority with additional path components");var d=s.getNode(),p=jC(r,n,d,u=t.serverCache.getNode());a=null!=p?e.filter.updatePriority(d,p):s.getNode()}else{var v,g=aT(n);if(s.isCompleteForChild(f)){u=t.serverCache.getNode();var m=jC(r,n,s.getNode(),u);v=null!=m?s.getNode().getImmediateChild(f).updateChild(g,m):s.getNode().getImmediateChild(f)}else v=BC(r,f,t.serverCache);a=null!=v?e.filter.updateChild(s.getNode(),f,v,g,i,o):s.getNode()}}return mC(t,a,s.isFullyInitialized()||hT(n),e.filter.filtersNodes())}function JC(e,t,n,r,i,o,a,u){var s,c=t.serverCache,l=a?e.filter:e.filter.getIndexedFilter();if(hT(n))s=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);s=l.updateFullNode(c.getNode(),h,null)}else{var f=iT(n);if(!c.isCompleteForPath(n)&&oT(n)>1)return t;var d=aT(n),p=c.getNode().getImmediateChild(f).updateChild(d,r);s=".priority"===f?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),f,p,d,KC,null)}var v=yC(t,s,c.isFullyInitialized()||hT(n),l.filtersNodes());return QC(e,v,n,i,new YC(i,v,o),u)}function $C(e,t,n,r,i,o,a){var u,s,c=t.eventCache,l=new YC(i,t,o);if(hT(n))s=e.filter.updateFullNode(t.eventCache.getNode(),r,a),u=mC(t,s,!0,e.filter.filtersNodes());else{var h=iT(n);if(".priority"===h)s=e.filter.updatePriority(t.eventCache.getNode(),r),u=mC(t,s,c.isFullyInitialized(),c.isFiltered());else{var f,d=aT(n),p=c.getNode().getImmediateChild(h);if(hT(d))f=r;else{var v=l.getCompleteChild(h);f=null!=v?".priority"===uT(d)&&v.getChild(cT(d)).isEmpty()?v:v.updateChild(d,r):GT.EMPTY_NODE}u=p.equals(f)?t:mC(t,e.filter.updateChild(c.getNode(),h,f,d,l,a),c.isFullyInitialized(),e.filter.filtersNodes())}}return u}function XC(e,t){return e.eventCache.isCompleteForChild(t)}function eE(e,t,n){return n.foreach(function(e,n){t=t.updateChild(e,n)}),t}function tE(e,t,n,r,i,o,a,u){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;var s,c=t;s=hT(n)?r:new wC(null).setTree(n,r);var l=t.serverCache.getNode();return s.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var s=eE(0,t.serverCache.getNode().getImmediateChild(n),r);c=JC(e,c,new nT(n),s,i,o,a,u)}}),s.children.inorderTraversal(function(n,r){var s=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!s){var h=eE(0,t.serverCache.getNode().getImmediateChild(n),r);c=JC(e,c,new nT(n),h,i,o,a,u)}}),c}function nE(e,t){var n=_C(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!hT(t)&&!n.getImmediateChild(iT(t)).isEmpty())?n.getChild(t):null}function rE(e,t,n,r){t.type===sC.MERGE&&null!==t.source.queryId&&((0,Ki.hu)(_C(e.viewCache_),"We should always have a full cache before handling merges"),(0,Ki.hu)(kC(e.viewCache_),"Missing event cache, even though we have a server cache"));var i=e.viewCache_,o=function(e,t,n,r,i){var o,a,u=new WC;if(n.type===sC.OVERWRITE){var s=n;s.source.fromUser?o=$C(e,t,s.path,s.snap,r,i,u):((0,Ki.hu)(s.source.fromServer,"Unknown source."),a=s.source.tagged||t.serverCache.isFiltered()&&!hT(s.path),o=JC(e,t,s.path,s.snap,r,i,a,u))}else if(n.type===sC.MERGE){var c=n;c.source.fromUser?o=function(e,t,n,r,i,o,a){var u=t;return r.foreach(function(r,s){var c=lT(n,r);XC(t,iT(c))&&(u=$C(e,u,c,s,i,o,a))}),r.foreach(function(r,s){var c=lT(n,r);XC(t,iT(c))||(u=$C(e,u,c,s,i,o,a))}),u}(e,t,c.path,c.children,r,i,u):((0,Ki.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=tE(e,t,c.path,c.children,r,i,a,u))}else if(n.type===sC.ACK_USER_WRITE){var l=n;o=l.revert?function(e,t,n,r,i,o){var a;if(null!=qC(r,n))return t;var u,s=new YC(r,t,i),c=t.eventCache.getNode();if(hT(n)||".priority"===iT(n)){var l;if(t.serverCache.isFullyInitialized())l=UC(r,_C(t));else{var h=t.serverCache.getNode();(0,Ki.hu)(h instanceof GT,"serverChildren would be complete if leaf node"),l=VC(r,h)}l=l,u=e.filter.updateFullNode(c,l,o)}else{var f=iT(n),d=BC(r,f,t.serverCache);null==d&&t.serverCache.isCompleteForChild(f)&&(d=c.getImmediateChild(f)),(u=null!=d?e.filter.updateChild(c,f,d,aT(n),s,o):t.eventCache.getNode().hasChild(f)?e.filter.updateChild(c,f,GT.EMPTY_NODE,aT(n),s,o):c).isEmpty()&&t.serverCache.isFullyInitialized()&&((a=UC(r,_C(t))).isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=qC(r,rT()),mC(t,u,a,e.filter.filtersNodes())}(e,t,l.path,r,i,u):function(e,t,n,r,i,o,a){if(null!=qC(i,n))return t;var u=t.serverCache.isFiltered(),s=t.serverCache;if(null!=r.value){if(hT(n)&&s.isFullyInitialized()||s.isCompleteForPath(n))return JC(e,t,n,s.getNode().getChild(n),i,o,u,a);if(hT(n)){var c=new wC(null);return s.getNode().forEachChild(CT,function(e,t){c=c.set(new nT(e),t)}),tE(e,t,n,c,i,o,u,a)}return t}var l=new wC(null);return r.foreach(function(e,t){var r=lT(n,e);s.isCompleteForPath(r)&&(l=l.set(e,s.getNode().getChild(r)))}),tE(e,t,n,l,i,o,u,a)}(e,t,l.path,l.affectedTree,r,i,u)}else{if(n.type!==sC.LISTEN_COMPLETE)throw(0,Ki.g5)("Unknown operation type: "+n.type);o=function(e,t,n,r,i){var o=t.serverCache;return QC(e,yC(t,o.getNode(),o.isFullyInitialized()||hT(n),o.isFiltered()),n,r,KC,i)}(e,t,n.path,r,u)}var h=u.getChanges();return function(e,t,n){var r=t.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=kC(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(function(e){return{type:"value",snapshotNode:e}}(kC(t)))}}(t,o,h),{viewCache:o,changes:h}}(e.processor_,i,t,n,r);return function(e,t){(0,Ki.hu)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,Ki.hu)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,o.viewCache),(0,Ki.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,function(e,t,n,r){return function(e,t,n,r){var i=[],o=[];return t.forEach(function(t){"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(function(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(t.childName,t.snapshotNode))}),vC(e,i,"child_removed",t,r,n),vC(e,i,"child_added",t,r,n),vC(e,i,"child_moved",o,r,n),vC(e,i,"child_changed",t,r,n),vC(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,e.eventRegistrations_)}(e,o.changes,o.viewCache.eventCache.getNode())}function iE(e,t,n,r){var i=t.source.queryId;if(null!==i){var o=e.views.get(i);return(0,Ki.hu)(null!=o,"SyncTree gave us an op for an invalid query."),rE(o,t,n,r)}var a,u=[],c=s(e.views.values());try{for(c.s();!(a=c.n()).done;){var l=a.value;u=u.concat(rE(l,t,n,r))}}catch(h){c.e(h)}finally{c.f()}return u}function oE(e,t){var n,r=null,i=s(e.views.values());try{for(i.s();!(n=i.n()).done;){var o=n.value;r=r||nE(o,t)}}catch(a){i.e(a)}finally{i.f()}return r}var aE=function e(t){d(this,e),this.listenProvider_=t,this.syncPointTree_=new wC(null),this.pendingWriteTree_={visibleWrites:bC.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map};function uE(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=function(e,t){for(var n=0;n<e.allWrites.length;n++){var r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){var n=e.allWrites.findIndex(function(e){return e.writeId===t});(0,Ki.hu)(n>=0,"removeWrite called with nonexistent writeId.");var r=e.allWrites[n];e.allWrites.splice(n,1);for(var i=r.visible,o=!1,a=e.allWrites.length-1;i&&a>=0;){var u=e.allWrites[a];u.visible&&(a>=n&&DC(u,r.path)?i=!1:pT(r.path,u.path)&&(o=!0)),a--}return!!i&&(o?(function(e){e.visibleWrites=MC(e.allWrites,LC,rT()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=TC(e.visibleWrites,r.path):RI(r.children,function(t){e.visibleWrites=TC(e.visibleWrites,lT(r.path,t))}),!0))}(e.pendingWriteTree_,t)){var i=new wC(null);return null!=r.snap?i=i.set(rT(),!0):RI(r.children,function(e){i=i.set(new nT(e),!0)}),lE(e,new hC(r.path,i,n))}return[]}function sE(e,t,n){return lE(e,new fC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function cE(e,t,n){var r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,function(e,n){var r=oE(n,fT(e,t));if(r)return r});return FC(r,t,i,n,!0)}function lE(e,t){return hE(t,e.syncPointTree_,null,PC(e.pendingWriteTree_,rT()))}function hE(e,t,n,r){if(hT(e.path))return fE(e,t,n,r);var i=t.get(rT());null==n&&null!=i&&(n=oE(i,rT()));var o=[],a=iT(e.path),u=e.operationForChild(a),s=t.children.get(a);if(s&&u){var c=n?n.getImmediateChild(a):null,l=zC(r,a);o=o.concat(hE(u,s,c,l))}return i&&(o=o.concat(iE(i,e,r,n))),o}function fE(e,t,n,r){var i=t.get(rT());null==n&&null!=i&&(n=oE(i,rT()));var o=[];return t.children.inorderTraversal(function(t,i){var a=n?n.getImmediateChild(t):null,u=zC(r,t),s=e.operationForChild(t);s&&(o=o.concat(fE(s,i,a,u)))}),i&&(o=o.concat(iE(i,e,r,n))),o}function dE(e,t){return e.tagToQueryMap.get(t)}function pE(e){var t=e.indexOf("$");return(0,Ki.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new nT(e.substr(0,t))}}function vE(e,t,n){var r=e.syncPointTree_.get(t);return(0,Ki.hu)(r,"Missing sync point for query tag that we're tracking"),iE(r,n,PC(e.pendingWriteTree_,t),null)}var gE=function(){function e(t){d(this,e),this.node_=t}return f(e,[{key:"getImmediateChild",value:function(t){return new e(this.node_.getImmediateChild(t))}},{key:"node",value:function(){return this.node_}}]),e}(),mE=function(){function e(t,n){d(this,e),this.syncTree_=t,this.path_=n}return f(e,[{key:"getImmediateChild",value:function(t){var n=lT(this.path_,t);return new e(this.syncTree_,n)}},{key:"node",value:function(){return cE(this.syncTree_,this.path_)}}]),e}(),yE=function(e,t,n){return e&&"object"==typeof e?((0,Ki.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?kE(e[".sv"],t,n):"object"==typeof e[".sv"]?_E(e[".sv"],t):void(0,Ki.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},kE=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,Ki.hu)(!1,"Unexpected server value: "+e)}},_E=function(e,t,n){e.hasOwnProperty("increment")||(0,Ki.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&(0,Ki.hu)(!1,"Unexpected increment value: "+r);var i=t.node();if((0,Ki.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;var o=i.getValue();return"number"!=typeof o?r:o+r};function wE(e,t,n){var r,i=e.getPriority().val(),o=yE(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var a=e,u=yE(a.getValue(),t,n);return u!==a.getValue()||o!==a.getPriority().val()?new VT(u,KT(o)):e}var s=e;return r=s,o!==s.getPriority().val()&&(r=r.updatePriority(new VT(o))),s.forEachChild(jT,function(e,i){var o=wE(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))}),r}var bE=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{children:{},childCount:0};d(this,e),this.name=t,this.parent=n,this.node=r};function xE(e,t){for(var n=t instanceof nT?t:new nT(t),r=e,i=iT(n);null!==i;){var o=(0,Ki.DV)(r.node.children,i)||{children:{},childCount:0};r=new bE(i,r,o),i=iT(n=aT(n))}return r}function IE(e){return e.node.value}function TE(e,t){e.node.value=t,AE(e)}function CE(e){return e.node.childCount>0}function EE(e,t){RI(e.node.children,function(n,r){t(new bE(n,e,r))})}function SE(e,t,n,r){n&&!r&&t(e),EE(e,function(e){SE(e,t,!0,r)}),n&&r&&t(e)}function RE(e){return new nT(null===e.parent?e.name:RE(e.parent)+"/"+e.name)}function AE(e){null!==e.parent&&function(e,t,n){var r=function(e){return void 0===IE(e)&&!CE(e)}(n),i=(0,Ki.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,AE(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,AE(e))}(e.parent,e.name,e)}var NE=/[\[\].#$\/\u0000-\u001F\u007F]/,OE=/[\[\].#$\u0000-\u001F\u007F]/,PE=10485760,DE=function(e){return"string"==typeof e&&0!==e.length&&!NE.test(e)},LE=function e(t,n,r){var i=r instanceof nT?new vT(r,t):r;if(void 0===n)throw new Error(t+"contains undefined "+mT(i));if("function"==typeof n)throw new Error(t+"contains a function "+mT(i)+" with contents = "+n.toString());if(wI(n))throw new Error(t+"contains "+n.toString()+" "+mT(i));if("string"==typeof n&&n.length>PE/3&&(0,Ki.ug)(n)>PE)throw new Error(t+"contains a string greater than "+PE+" utf8 bytes "+mT(i)+" ('"+n.substring(0,50)+"...')");if(n&&"object"==typeof n){var o=!1,a=!1;if(RI(n,function(n,r){if(".value"===n)o=!0;else if(".priority"!==n&&".sv"!==n&&(a=!0,!DE(n)))throw new Error(t+" contains an invalid key ("+n+") "+mT(i)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,Ki.ug)(t),gT(e)})(i,n),e(t,r,i),function(e){var t=e.parts_.pop();e.byteLength_-=(0,Ki.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(i)}),o&&a)throw new Error(t+' contains ".value" child '+mT(i)+" in addition to actual children.")}},ME=function e(){d(this,e),this.eventLists_=[],this.recursionDepth_=0};function FE(e,t,n){(function(e,t){for(var n=null,r=0;r<t.length;r++){var i=t[r],o=i.getPath();null!==n&&!dT(o,n.path)&&(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&e.eventLists_.push(n)})(e,n),function(e,t){e.recursionDepth_++;for(var n=!0,r=0;r<e.eventLists_.length;r++){var i=e.eventLists_[r];i&&(t(i.path)?(UE(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}(e,function(e){return pT(e,t)||pT(t,e)})}function UE(e){for(var t=0;t<e.events.length;t++){var n=e.events[t];if(null!==n){e.events[t]=null;var r=n.getEventRunner();pI&&gI("event: "+n.toString()),PI(r)}}}var VE=function(){function e(t,n,r,i){d(this,e),this.repoInfo_=t,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new ME,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=rC(),this.transactionQueueTree_=new bE,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return f(e,[{key:"toString",value:function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}]),e}();function jE(e){var t=e.infoData_.getNode(new nT(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function qE(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:jE(e)})}function BE(e,t,n,r,i){e.dataUpdateCount++;var o=new nT(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;var a=[];if(i)if(r){var u=(0,Ki.UI)(n,function(e){return KT(e)});a=function(e,t,n,r){var i=dE(e,r);if(i){var o=pE(i),a=o.path,u=o.queryId,s=fT(a,t),c=wC.fromObject(n);return vE(e,a,new dC(cC(u),s,c))}return[]}(e.serverSyncTree_,o,u,i)}else{var s=KT(n);a=function(e,t,n,r){var i=dE(e,r);if(null!=i){var o=pE(i),a=o.path,u=o.queryId,s=fT(a,t);return vE(e,a,new fC(cC(u),s,n))}return[]}(e.serverSyncTree_,o,s,i)}else if(r){var c=(0,Ki.UI)(n,function(e){return KT(e)});a=function(e,t,n){var r=wC.fromObject(n);return lE(e,new dC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,c)}else{var l=KT(n);a=sE(e.serverSyncTree_,o,l)}var h=o;a.length>0&&(h=KE(e,o)),FE(e.eventQueue_,h,a)}function zE(e,t){ZE(e,"connected",t),!1===t&&function(e){HE(e,"onDisconnectEvents");var t=qE(e),n=rC();oC(e.onDisconnect_,rT(),function(r,i){var o=function(e,t,n,r){return wE(t,new mE(n,e),r)}(r,i,e.serverSyncTree_,t);iC(n,r,o)});var r=[];oC(n,rT(),function(t,n){r=r.concat(sE(e.serverSyncTree_,t,n));var i=function(e,t){var n=RE(YE(e,t)),r=xE(e.transactionQueueTree_,t);return function(e,t,n){for(var r=e.parent;null!==r;){if(t(r))return!0;r=r.parent}}(r,function(t){XE(e,t)}),XE(e,r),SE(r,function(t){XE(e,t)}),n}(e,t);KE(e,i)}),e.onDisconnect_=rC(),FE(e.eventQueue_,rT(),r)}(e)}function ZE(e,t,n){var r=new nT("/.info/"+t),i=KT(n);e.infoData_.updateSnapshot(r,i);var o=sE(e.infoSyncTree_,r,i);FE(e.eventQueue_,r,o)}function HE(e){for(var t="",n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.persistentConnection_&&(t=e.persistentConnection_.id+":"),gI.apply(void 0,[t].concat(r))}function GE(e,t,n){return cE(e.serverSyncTree_,t,n)||GT.EMPTY_NODE}function WE(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.transactionQueueTree_;if(t||$E(e,t),IE(t)){var n=QE(e,t);(0,Ki.hu)(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return 0===e.status})&&function(e,t,n){for(var r=n.map(function(e){return e.currentWriteId}),i=GE(e,t,r),o=i,a=i.hash(),u=0;u<n.length;u++){var s=n[u];(0,Ki.hu)(0===s.status,"tryToSendTransactionQueue_: items in queue should all be run."),s.status=1,s.retryCount++;var c=fT(t,s.path);o=o.updateChild(c,s.currentOutputSnapshotRaw)}var l=o.val(!0),h=t;e.server_.put(h.toString(),l,function(r){HE(e,"transaction put response",{path:h.toString(),status:r});var i=[];if("ok"===r){for(var o=[],a=function(t){n[t].status=2,i=i.concat(uE(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&o.push(function(){return n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)}),n[t].unwatcher()},u=0;u<n.length;u++)a(u);$E(e,xE(e.transactionQueueTree_,t)),WE(e,e.transactionQueueTree_),FE(e.eventQueue_,t,i);for(var s=0;s<o.length;s++)PI(o[s])}else{if("datastale"===r)for(var c=0;c<n.length;c++)n[c].status=3===n[c].status?4:0;else{_I("transaction at "+h.toString()+" failed: "+r);for(var l=0;l<n.length;l++)n[l].status=4,n[l].abortReason=r}KE(e,t)}},a)}(e,RE(t),n)}else CE(t)&&EE(t,function(t){WE(e,t)})}function KE(e,t){var n=YE(e,t),r=RE(n);return function(e,t,n){if(0!==t.length){for(var r=[],i=[],o=t.filter(function(e){return 0===e.status}).map(function(e){return e.currentWriteId}),a=function(a){var u=t[a],s=fT(n,u.path),c=void 0,l=!1;if((0,Ki.hu)(null!==s,"rerunTransactionsUnderNode_: relativePath should not be null."),4===u.status)l=!0,c=u.abortReason,i=i.concat(uE(e.serverSyncTree_,u.currentWriteId,!0));else if(0===u.status)if(u.retryCount>=25)l=!0,c="maxretry",i=i.concat(uE(e.serverSyncTree_,u.currentWriteId,!0));else{var h=GE(e,u.path,o);u.currentInputSnapshot=h;var f=t[a].update(h.val());if(void 0!==f){LE("transaction failed: Data returned ",f,u.path);var d=KT(f);"object"==typeof f&&null!=f&&(0,Ki.r3)(f,".priority")||(d=d.updatePriority(h.getPriority()));var p=u.currentWriteId,v=function(e,t,n){return wE(e,new gE(t),n)}(d,h,qE(e));u.currentOutputSnapshotRaw=d,u.currentOutputSnapshotResolved=v,u.currentWriteId=function(e){return e.nextWriteId_++}(e),o.splice(o.indexOf(p),1),i=(i=i.concat(function(e,t,n,r,i){return function(e,t,n,r,i){(0,Ki.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=xC(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?lE(e,new fC({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}(e.serverSyncTree_,u.path,v,u.currentWriteId,u.applyLocally))).concat(uE(e.serverSyncTree_,p,!0))}else l=!0,c="nodata",i=i.concat(uE(e.serverSyncTree_,u.currentWriteId,!0))}FE(e.eventQueue_,n,i),i=[],l&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===c?function(){return t[a].onComplete(null,!1,t[a].currentInputSnapshot)}:function(){return t[a].onComplete(new Error(c),!1,null)}))},u=0;u<t.length;u++)a(u);$E(e,e.transactionQueueTree_);for(var s=0;s<r.length;s++)PI(r[s]);WE(e,e.transactionQueueTree_)}}(e,QE(e,n),r),r}function YE(e,t){var n,r=e.transactionQueueTree_;for(n=iT(t);null!==n&&void 0===IE(r);)r=xE(r,n),n=iT(t=aT(t));return r}function QE(e,t){var n=[];return JE(e,t,n),n.sort(function(e,t){return e.order-t.order}),n}function JE(e,t,n){var r=IE(t);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);EE(t,function(t){JE(e,t,n)})}function $E(e,t){var n=IE(t);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,TE(t,n.length>0?n:void 0)}EE(t,function(t){$E(e,t)})}function XE(e,t){var n=IE(t);if(n){for(var r=[],i=[],o=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?((0,Ki.hu)(o===a-1,"All SENT items should be at beginning of queue."),o=a,n[a].status=3,n[a].abortReason="set"):((0,Ki.hu)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),i=i.concat(uE(e.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));-1===o?TE(t,void 0):n.length=o+1,FE(e.eventQueue_,RE(t),i);for(var u=0;u<r.length;u++)PI(r[u])}}var eS=function(e,t){var n=tS(e),r=n.namespace;return"firebase.com"===n.domain&&kI(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&kI("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&_I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new jI(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new nT(n.pathString)}},tS=function(e){var t="",n="",r="",i="",o="",a=!0,u="https",c=443;if("string"==typeof e){var l=e.indexOf("//");l>=0&&(u=e.substring(0,l-1),e=e.substring(l+2));var h=e.indexOf("/");-1===h&&(h=e.length);var f=e.indexOf("?");-1===f&&(f=e.length),t=e.substring(0,Math.min(h,f)),h<f&&(i=function(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}(e.substring(h,f)));var d=function(e){var t={};"?"===e.charAt(0)&&(e=e.substring(1));var n,r=s(e.split("&"));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(0!==i.length){var o=i.split("=");2===o.length?t[decodeURIComponent(o[0])]=decodeURIComponent(o[1]):_I("Invalid query segment '".concat(i,"' in query '").concat(e,"'"))}}}catch(a){r.e(a)}finally{r.f()}return t}(e.substring(Math.min(e.length,f)));(l=t.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(t.substring(l+1),10)):l=t.length;var p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var v=t.indexOf(".");r=t.substring(0,v).toLowerCase(),n=t.substring(v+1),o=r}"ns"in d&&(o=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:o}},nS=function(e){p(n,e);var t=v(n);function n(e,r){return d(this,n),t.call(this,e,r,new $T,!1)}return f(n,[{key:"parent",get:function(){var e=cT(this._path);return null===e?null:new n(this._repo,e)}},{key:"root",get:function(){for(var e=this;null!==e.parent;)e=e.parent;return e}}]),n}(function(){function e(t,n,r,i){d(this,e),this._repo=t,this._path=n,this._queryParams=r,this._orderByCalled=i}return f(e,[{key:"key",get:function(){return hT(this._path)?null:uT(this._path)}},{key:"ref",get:function(){return new nS(this._repo,this._path)}},{key:"_queryIdentifier",get:function(){var e=eC(this._queryParams),t=EI(e);return"{}"===t?"default":t}},{key:"_queryObject",get:function(){return eC(this._queryParams)}},{key:"isEqual",value:function(t){if(!((t=(0,Ki.m9)(t))instanceof e))return!1;var n=this._repo===t._repo,r=dT(this._path,t._path);return n&&r&&this._queryIdentifier===t._queryIdentifier}},{key:"toJSON",value:function(){return this.toString()}},{key:"toString",value:function(){return this._repo.toString()+function(e){for(var t="",n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}]),e}());(function(e){(0,Ki.hu)(!HC,"__referenceConstructor has already been defined"),HC=e})(nS),function(e){(0,Ki.hu)(!GC,"__referenceConstructor has already been defined"),GC=e}(nS);var rS={},iS=function(){function e(t,n){d(this,e),this._repoInternal=t,this.app=n,this.type="database",this._instanceStarted=!1}return f(e,[{key:"_repo",get:function(){return this._instanceStarted||(function(e,t,n){if(e.stats_=HI(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new tC(e.repoInfo_,function(t,n,r,i){BE(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(function(){return zE(e,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Ki.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new bT(e.repoInfo_,t,function(t,n,r,i){BE(e,t,n,r,i)},function(t){zE(e,t)},function(t){!function(e,t){RI(t,function(t,n){ZE(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(function(t){e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(function(t){e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){var n=e.toString();return ZI[n]||(ZI[n]=t()),ZI[n]}(e.repoInfo_,function(){return new uC(e.stats_,e.server_)}),e.infoData_=new nC,e.infoSyncTree_=new aE({startListening:function(t,n,r,i){var o=[],a=e.infoData_.getNode(t._path);return a.isEmpty()||(o=sE(e.infoSyncTree_,t._path,a),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ZE(e,"connected",!1),e.serverSyncTree_=new aE({startListening:function(t,n,r,i){return e.server_.listen(t,r,n,function(n,r){var o=i(n,r);FE(e.eventQueue_,t._path,o)}),[]},stopListening:function(t,n){e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}},{key:"_root",get:function(){return this._rootInternal||(this._rootInternal=new nS(this._repo,rT())),this._rootInternal}},{key:"_delete",value:function(){return null!==this._rootInternal&&(function(e,t){var n=rS[t];(!n||n[e.key]!==e)&&kI("Database ".concat(t,"(").concat(e.repoInfo_,") has already been deleted.")),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}},{key:"_checkNotDeleted",value:function(e){null===this._rootInternal&&kI("Cannot call "+e+" on a deleted database.")}}]),e}();bT.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},bT.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){iI=e}(Gi.SDK_VERSION),(0,Gi._registerComponent)(new Wi.wA("database",function(e,t){var n=t.instanceIdentifier;return function(e,t,n,r,i){var o=r||e.options.databaseURL;void 0===o&&(e.options.projectId||kI("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),gI("Using default host for project ",e.options.projectId),o="".concat(e.options.projectId,"-default-rtdb.firebaseio.com"));var a,u=eS(o,i),s=u.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(!0,o="http://".concat(a,"?ns=").concat(s.namespace),s=(u=eS(o,i)).repoInfo):u.repoInfo.secure;var c=new MI(e.name,e.options,t);(function(e,t){var n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!DE(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),function(e){return"string"==typeof e&&0!==e.length&&!OE.test(e)}(e)}(n))throw new Error((0,Ki.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')})("Invalid Firebase Database URL",u),hT(u.path)||kI("Database URL must point to the root of a Firebase Database (not including a child path).");var l=function(e,t,n,r){var i=rS[t.name];i||(i={},rS[t.name]=i);var o=i[e.toURLString()];return o&&kI("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new VE(e,!1,n,r),i[e.toURLString()]=o,o}(s,e,c,new LI(e.name,n));return new iS(l,e)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),n)},"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(rI,"0.12.4",void 0),(0,Gi.registerVersion)(rI,"0.12.4","esm2017");var oS=function e(t){return d(this,e),t},aS="database",uS=new u.OlP("angularfire2.database-instances");function sS(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new oS(r)}}var cS={provide:function e(){return d(this,e),(0,Di.vb)(aS)},deps:[[new u.FiY,uS]]},lS={provide:oS,useFactory:function(e,t){var n=(0,Di.JM)(aS,e,t);return n&&new oS(n)},deps:[[new u.FiY,uS],Mi]},hS=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"rtdb")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[lS,cS]}),e}();function fS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:hS,providers:[{provide:uS,useFactory:sS(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi,[new u.FiY,Oo],[new u.FiY,Ro]].concat(n)}]}}var dS=(0,Di.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Gi.getApp)(),t=arguments.length>1?arguments[1]:void 0;return(0,Gi._getProvider)(e,"database").getImmediate({identifier:t})},!0),pS="functions",vS=function(){function e(t,n,r){var i=this;d(this,e),this.auth=null,this.messaging=null,this.appCheck=null,this.auth=t.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||t.get().then(function(e){return i.auth=e},function(){}),this.messaging||n.get().then(function(e){return i.messaging=e},function(){}),this.appCheck||r.get().then(function(e){return i.appCheck=e},function(){})}return f(e,[{key:"getAuthToken",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.auth){t.next=11;break}return t.prev=1,t.next=4,e.auth.getToken();case 4:return n=t.sent,t.abrupt("return",null==n?void 0:n.accessToken);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return");case 11:case"end":return t.stop()}},t,null,[[1,8]])}))()}},{key:"getMessagingToken",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.messaging||!("Notification"in self)||"granted"!==Notification.permission){t.next=10;break}return t.prev=1,t.next=4,e.messaging.getToken();case 4:return t.abrupt("return",t.sent);case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return");case 10:case"end":return t.stop()}},t,null,[[1,7]])}))()}},{key:"getAppCheckToken",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.appCheck){t.next=5;break}return t.next=3,e.appCheck.getToken();case 3:return n=t.sent,t.abrupt("return",n.error?null:n.token);case 5:return t.abrupt("return",null);case 6:case"end":return t.stop()}},t)}))()}},{key:"getContext",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getAuthToken();case 2:return t.t0=t.sent,t.next=5,e.getMessagingToken();case 5:return t.t1=t.sent,t.next=8,e.getAppCheckToken();case 8:return t.t2=t.sent,t.abrupt("return",{authToken:t.t0,messagingToken:t.t1,appCheckToken:t.t2});case 10:case"end":return t.stop()}},t)}))()}}]),e}(),gS="us-central1",mS=function(){function e(t,n,r,i){var o=this,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gS,u=arguments.length>5?arguments[5]:void 0;d(this,e),this.app=t,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new vS(n,r,i),this.cancelAllRequests=new Promise(function(e){o.deleteService=function(){return Promise.resolve(e())}});try{var s=new URL(a);this.customDomain=s.origin,this.region=gS}catch(s){this.customDomain=null,this.region=a}}return f(e,[{key:"_delete",value:function(){return this.deleteService()}},{key:"_url",value:function(e){var t=this.app.options.projectId;return null!==this.emulatorOrigin?"".concat(this.emulatorOrigin,"/").concat(t,"/").concat(this.region,"/").concat(e):null!==this.customDomain?"".concat(this.customDomain,"/").concat(e):"https://".concat(this.region,"-").concat(t,".cloudfunctions.net/").concat(e)}}]),e}(),yS="@firebase/functions";!function(e,t){(0,Gi._registerComponent)(new Wi.wA(pS,function(t,n){var r=n.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),a=t.getProvider("messaging-internal"),u=t.getProvider("app-check-internal");return new mS(i,o,a,u,r,e)},"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(yS,"0.7.6",void 0),(0,Gi.registerVersion)(yS,"0.7.6","esm2017")}(fetch.bind(self));var kS=function e(t){return d(this,e),t},_S="functions",wS=new u.OlP("angularfire2.functions-instances");function bS(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new kS(r)}}var xS={provide:function e(){return d(this,e),(0,Di.vb)(_S)},deps:[[new u.FiY,wS]]},IS={provide:kS,useFactory:function(e,t){var n=(0,Di.JM)(_S,e,t);return n&&new kS(n)},deps:[[new u.FiY,wS],Mi]},TS=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"fn")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[IS,xS]}),e}();function CS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:TS,providers:[{provide:wS,useFactory:bS(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi,[new u.FiY,Oo],[new u.FiY,Ro]].concat(n)}]}}var ES=(0,Di.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Gi.getApp)(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:gS;return(0,Gi._getProvider)((0,Ki.m9)(e),pS).getImmediate({identifier:t})},!0),SS=o(6241),RS=function e(t){return d(this,e),t},AS="messaging",NS=new u.OlP("angularfire2.messaging-instances");function OS(e){return function(t,n){if(!Di.n1.sync())return null;var r=t.runOutsideAngular(function(){return e(n)});return new RS(r)}}var PS={provide:function e(){return d(this,e),(0,Di.vb)(AS)},deps:[[new u.FiY,NS]]},DS={provide:RS,useFactory:function(e,t){if(!Di.n1.sync())return null;var n=(0,Di.JM)(AS,e,t);return n&&new RS(n)},deps:[[new u.FiY,NS],Mi]},LS=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"fcm")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[DS,PS,{provide:u.ip1,useValue:Di.n1.async,multi:!0}]}),e}();function MS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:LS,providers:[{provide:NS,useFactory:OS(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi].concat(n)}]}}var FS=(0,Di.u3)(SS.KL,!0);o(3328);var US,VS,jS,qS,BS="@firebase/performance",zS="0.5.4",ZS="FB-PERF-TRACE-MEASURE",HS="@firebase/performance/config",GS="@firebase/performance/configexpire",WS="Performance",KS=new Ki.LL("performance",WS,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),YS=new Yi.Yd(WS);YS.logLevel=Yi.in.INFO;var QS=function(){function e(t){if(d(this,e),this.window=t,!t)throw KS.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return f(e,[{key:"getUrl",value:function(){return this.windowLocation.href.split("?")[0]}},{key:"mark",value:function(e){!this.performance||!this.performance.mark||this.performance.mark(e)}},{key:"measure",value:function(e,t,n){!this.performance||!this.performance.measure||this.performance.measure(e,t,n)}},{key:"getEntriesByType",value:function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}},{key:"getEntriesByName",value:function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}},{key:"getTimeOrigin",value:function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}},{key:"requiredApisAvailable",value:function(){return fetch&&Promise&&(0,Ki.zI)()?!!(0,Ki.hl)()||(YS.info("IndexedDB is not supported by current browswer"),!1):(YS.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}},{key:"setupObserver",value:function(e,t){this.PerformanceObserver&&new this.PerformanceObserver(function(e){var n,r=s(e.getEntries());try{for(r.s();!(n=r.n()).done;){var i=n.value;t(i)}}catch(o){r.e(o)}finally{r.f()}}).observe({entryTypes:[e]})}}],[{key:"getInstance",value:function(){return void 0===US&&(US=new e(VS)),US}}]),e}();function JS(){return jS}function $S(e,t){var n=e.length-t.length;if(n<0||n>1)throw KS.create("invalid String merger input");for(var r=[],i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}var XS=function(){function e(){d(this,e),this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=$S("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=$S("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return f(e,[{key:"getFlTransportFullUrl",value:function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}}],[{key:"getInstance",value:function(){return void 0===qS&&(qS=new e),qS}}]),e}(),eR=(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(eR||(eR={})),eR),tR=["firebase_","google_","ga_"],nR=new RegExp("^[a-zA-Z]\\w*$");function rR(){var e=QS.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function iR(){switch(QS.getInstance().document.visibilityState){case"visible":return eR.VISIBLE;case"hidden":return eR.HIDDEN;default:return eR.UNKNOWN}}function oR(){var e=QS.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function aR(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw KS.create("no app id");return n}function uR(e){if(!e)return e;var t=XS.getInstance(),n=e.entries||{};return t.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=sR(t.tracesSamplingRate),t.logNetworkAfterSampling=sR(t.networkRequestsSamplingRate),e}function sR(e){return Math.random()<=e}var cR,lR=1;function hR(e){return lR=2,cR=cR||function(e){return function(){var e=QS.getInstance().document;return new Promise(function(t){if(e&&"complete"!==e.readyState){e.addEventListener("readystatechange",function n(){"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())})}else t()})}().then(function(){return function(e){var t=e.getId();return t.then(function(e){jS=e}),t}(e.installations)}).then(function(t){return function(e,t){var n=function(){var e=QS.getInstance().localStorage;if(e){var t=e.getItem(GS);if(t&&function(e){return Number(e)>Date.now()}(t)){var n=e.getItem(HS);if(n)try{return JSON.parse(n)}catch(r){return}}}}();return n?(uR(n),Promise.resolve()):function(e,t){return function(e){var t=e.getToken();return t.then(function(e){}),t}(e.installations).then(function(n){var r=function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw KS.create("no project id");return n}(e.app),i=function(e){var t,n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw KS.create("no api key");return n}(e.app),o=new Request("https://firebaseremoteconfig.googleapis.com/v1/projects/".concat(r,"/namespaces/fireperf:fetch?key=").concat(i),{method:"POST",headers:{Authorization:"FIREBASE_INSTALLATIONS_AUTH ".concat(n)},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:aR(e.app),app_version:"0.5.4",sdk_version:"0.0.1"})});return fetch(o).then(function(e){if(e.ok)return e.json();throw KS.create("RC response not ok")})}).catch(function(){YS.info("Could not fetch config, will use default configs")})}(e,t).then(uR).then(function(e){return function(e){var t=QS.getInstance().localStorage;!e||!t||(t.setItem(HS,JSON.stringify(e)),t.setItem(GS,String(Date.now()+60*XS.getInstance().configTimeToLive*60*1e3)))}(e)},function(){})}(e,t)}).then(function(){return fR()},function(){return fR()})}(e)}function fR(){lR=3}var dR,pR=3,vR=[],gR=!1;function mR(e){setTimeout(function(){if(0!==pR){if(!vR.length)return mR(1e4);!function(){var e=vR.splice(0,1e3),t=e.map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}});(function(e,t){return function(e){var t=XS.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(e){return e.ok||YS.info("Call to Firebase backend failed."),e.json()}).then(function(e){var n=Number(e.nextRequestWaitMillis),r=1e4;isNaN(n)||(r=Math.max(n,r));var i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(vR=[].concat(a(t),a(vR)),YS.info("Retry transport request later.")),pR=3,mR(r)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:XS.getInstance().logSource,log_event:t},e).catch(function(){vR=[].concat(a(e),a(vR)),pR--,YS.info("Tries left: ".concat(pR,".")),mR(1e4)})}()}},e)}function yR(e,t){dR||(dR=function(e){return function(){!function(e){if(!e.eventTime||!e.message)throw KS.create("invalid cc log");vR=[].concat(a(vR),[e])}({message:e.apply(void 0,arguments),eventTime:Date.now()})}}(wR)),dR(e,t)}function kR(e){var t=XS.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!QS.getInstance().requiredApisAvailable()||e.isAuto&&iR()!==eR.VISIBLE||(3===lR?_R(e):hR(e.performanceController).then(function(){return _R(e)},function(){return _R(e)}))}function _R(e){if(JS()){var t=XS.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(function(){return yR(e,1)},0)}}function wR(e,t){return 0===t?function(e){var t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:bR(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);var r={application_info:bR(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e)}function bR(e){return{google_app_id:aR(e),app_instance_id:JS(),web_app_info:{sdk_version:"0.5.4",page_url:QS.getInstance().getUrl(),service_worker_status:rR(),visibility_state:iR(),effective_connection_type:oR()},application_process_state:0}}var xR=["_fp","_fcp","_fid"],IR=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0;d(this,e),this.performanceController=t,this.name=n,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=QS.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-".concat(this.randomId,"-").concat(this.name),this.traceStopMark="FB-PERF-TRACE-STOP-".concat(this.randomId,"-").concat(this.name),this.traceMeasure=i||"".concat(ZS,"-").concat(this.randomId,"-").concat(this.name),i&&this.calculateTraceMetrics())}return f(e,[{key:"start",value:function(){if(1!==this.state)throw KS.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}},{key:"stop",value:function(){if(2!==this.state)throw KS.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),kR(this)}},{key:"record",value:function(e,t,n){if(e<=0)throw KS.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw KS.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}kR(this)}},{key:"incrementMetric",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}},{key:"putMetric",value:function(e,t){if(!function(e,t){return!(0===e.length||e.length>100)&&(t&&t.startsWith("_wt_")&&xR.indexOf(e)>-1||!e.startsWith("_"))}(e,this.name))throw KS.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function(e){var t=Math.floor(e);return t<e&&YS.info("Metric value should be an Integer, setting the value as : ".concat(t,".")),t}(t)}},{key:"getMetric",value:function(e){return this.counters[e]||0}},{key:"putAttribute",value:function(e,t){var n=function(e){return!(0===e.length||e.length>40||tR.some(function(t){return e.startsWith(t)})||!e.match(nR))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw KS.create("invalid attribute name",{attributeName:e});if(!r)throw KS.create("invalid attribute value",{attributeValue:t})}}},{key:"getAttribute",value:function(e){return this.customAttributes[e]}},{key:"removeAttribute",value:function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}},{key:"getAttributes",value:function(){return Object.assign({},this.customAttributes)}},{key:"setStartTime",value:function(e){this.startTimeUs=e}},{key:"setDuration",value:function(e){this.durationUs=e}},{key:"calculateTraceMetrics",value:function(){var e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}}],[{key:"createOobTrace",value:function(t,n,r,i){var o=QS.getInstance().getUrl();if(o){var a=new e(t,"_wt_"+o,!0),u=Math.floor(1e3*QS.getInstance().getTimeOrigin());if(a.setStartTime(u),n&&n[0]&&(a.setDuration(Math.floor(1e3*n[0].duration)),a.putMetric("domInteractive",Math.floor(1e3*n[0].domInteractive)),a.putMetric("domContentLoadedEventEnd",Math.floor(1e3*n[0].domContentLoadedEventEnd)),a.putMetric("loadEventEnd",Math.floor(1e3*n[0].loadEventEnd))),r){var s=r.find(function(e){return"first-paint"===e.name});s&&s.startTime&&a.putMetric("_fp",Math.floor(1e3*s.startTime));var c=r.find(function(e){return"first-contentful-paint"===e.name});c&&c.startTime&&a.putMetric("_fcp",Math.floor(1e3*c.startTime)),i&&a.putMetric("_fid",Math.floor(1e3*i))}kR(a)}}},{key:"createUserTimingTrace",value:function(t,n){kR(new e(t,n,!1,n))}}]),e}();function TR(e,t){var n=t;if(n&&void 0!==n.responseStart){var r=QS.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),o=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,a=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){var t=XS.getInstance();if(t.instrumentationEnabled){var n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(function(){return yR(e,0)},0)}}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:a})}}function CR(e){!JS()||(setTimeout(function(){return function(e){var t=QS.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");if(t.onFirstInputDelay){var i=setTimeout(function(){IR.createOobTrace(e,n,r),i=void 0},5e3);t.onFirstInputDelay(function(t){i&&(clearTimeout(i),IR.createOobTrace(e,n,r,t))})}else IR.createOobTrace(e,n,r)}(e)},0),setTimeout(function(){return function(e){var t,n=QS.getInstance(),r=s(n.getEntriesByType("resource"));try{for(r.s();!(t=r.n()).done;){var i=t.value;TR(e,i)}}catch(o){r.e(o)}finally{r.f()}n.setupObserver("resource",function(t){return TR(e,t)})}(e)},0),setTimeout(function(){return function(e){var t,n=QS.getInstance(),r=s(n.getEntriesByType("measure"));try{for(r.s();!(t=r.n()).done;){var i=t.value;ER(e,i)}}catch(o){r.e(o)}finally{r.f()}n.setupObserver("measure",function(t){return ER(e,t)})}(e)},0))}function ER(e,t){var n=t.name;n.substring(0,ZS.length)!==ZS&&IR.createUserTimingTrace(e,n)}var SR=function(){function e(t,n){d(this,e),this.app=t,this.installations=n,this.initialized=!1}return f(e,[{key:"_init",value:function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),QS.getInstance().requiredApisAvailable()?(0,Ki.eu)().then(function(e){e&&(gR||(mR(5500),gR=!0),hR(t).then(function(){return CR(t)},function(){return CR(t)}),t.initialized=!0)}).catch(function(e){YS.info("Environment doesn't support IndexedDB: ".concat(e))}):YS.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}},{key:"instrumentationEnabled",get:function(){return XS.getInstance().instrumentationEnabled},set:function(e){XS.getInstance().instrumentationEnabled=e}},{key:"dataCollectionEnabled",get:function(){return XS.getInstance().dataCollectionEnabled},set:function(e){XS.getInstance().dataCollectionEnabled=e}}]),e}();(0,Gi._registerComponent)(new Wi.wA("performance",function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==r.name)throw KS.create("FB not default");if("undefined"==typeof window)throw KS.create("no window");!function(e){VS=e}(window);var o=new SR(r,i);return o._init(n),o},"PUBLIC")),(0,Gi.registerVersion)(BS,zS),(0,Gi.registerVersion)(BS,zS,"esm2017");var RR=function e(t){return d(this,e),t},AR="performance",NR=new u.OlP("angularfire2.performance-instances");function OR(e){return function(t,n,r){if(!W(n))return null;var i=t.runOutsideAngular(function(){return e(r)});return new RR(i)}}var PR={provide:function e(){return d(this,e),(0,Di.vb)(AR)},deps:[[new u.FiY,NR]]},DR={provide:RR,useFactory:function(e,t,n){if(!W(n))return null;var r=(0,Di.JM)(AR,e,t);return r&&new RR(r)},deps:[[new u.FiY,NR],Mi,u.Lbi]},LR=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"perf")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[DR,PR]}),e}();function MR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:LR,providers:[{provide:NR,useFactory:OR(e),multi:!0,deps:[u.R0b,u.Lbi,u.zs3,Di.HU,Fi].concat(n)}]}}var FR=(0,Di.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Gi.getApp)();return e=(0,Ki.m9)(e),(0,Gi._getProvider)(e,"performance").getImmediate()},!0),UR=o(4347),VR=function e(t){return d(this,e),t},jR="remote-config",qR=new u.OlP("angularfire2.remote-config-instances");function BR(e){return function(t,n){if(!Di._J.sync())return null;var r=t.runOutsideAngular(function(){return e(n)});return new VR(r)}}var zR={provide:function e(){return d(this,e),(0,Di.vb)(jR)},deps:[[new u.FiY,qR]]},ZR={provide:VR,useFactory:function(e,t){if(!Di._J.sync())return null;var n=(0,Di.JM)(jR,e,t);return n&&new VR(n)},deps:[[new u.FiY,qR],Mi]},HR=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"rc")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[ZR,zR,{provide:u.ip1,useValue:Di._J.async,multi:!0}]}),e}();function GR(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:HR,providers:[{provide:qR,useFactory:BR(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi].concat(n)}]}}var WR=(0,Di.u3)(UR.sN,!0),KR="firebasestorage.googleapis.com",YR=function(e){p(n,e);var t=v(n);function n(e,r){var i;return d(this,n),(i=t.call(this,QR(e),"Firebase Storage: ".concat(r," (").concat(QR(e),")"))).customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(m(i),n.prototype),i}return f(n,[{key:"_codeEquals",value:function(e){return QR(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?"".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this._baseMessage}}]),n}(Ki.ZR);function QR(e){return"storage/"+e}function JR(e){return new YR("invalid-argument",e)}function $R(){return new YR("app-deleted","The Firebase app was deleted.")}var XR=function(){function e(t,n){d(this,e),this.bucket=t,this.path_=n}return f(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r;try{r=e.makeFromUrl(t,n)}catch(i){return new e(t,"")}if(""===r.path)return r;throw function(e){return new YR("invalid-default-bucket","Invalid default bucket '"+e+"'.")}(t)}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function a(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:o,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/v[A-Za-z0-9_]+/b/").concat(i,"/o(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:a},{regex:new RegExp("^https?://".concat(n===KR?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:a}],c=0;c<s.length;c++){var l=s[c],h=l.regex.exec(t);if(h){var f=h[l.indices.path];f||(f=""),r=new e(h[l.indices.bucket],f),l.postModify(r);break}}if(null==r)throw function(e){return new YR("invalid-url","Invalid URL '"+e+"'.")}(t);return r}}]),e}(),eA=function(){function e(t){d(this,e),this.promise_=Promise.reject(t)}return f(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function tA(e,t,n,r){if(r<t)throw JR("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw JR("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}var nA=(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(nA||(nA={})),nA),rA=function(){function e(t,n,r,i,o,a,u,s,c,l,h){var f=this;d(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=a,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(function(e,t){f.resolve_=e,f.reject_=t,f.start_()})}return f(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,o=n.connection;if(n.wasSuccessCode)try{var a=e.callback_(o,o.getResponse());!function(e){return void 0!==e}(a)?r():r(a)}catch(s){i(s)}else if(null!==o){var u=new YR("unknown","An unknown error occurred, please check the error payload for server response.");u.serverResponse=o.getErrorText(),i(e.errorCallback_?e.errorCallback_(o,u):u)}else i(n.canceled?e.appDelete_?$R():new YR("canceled","User canceled the upload/download."):new YR("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?t(0,new iA(!1,null,!0)):this.backoffId_=function(t,n,r){var i=1,o=null,a=null,u=!1,s=0;function c(){return 2===s}var l=!1;function h(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];l||(l=!0,n.apply(null,t))}function f(t){o=setTimeout(function(){o=null,function(t,n){if(n)return void t(!1,new iA(!1,null,!0));var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){null!==e.progressCallback_&&e.progressCallback_(t.loaded,t.lengthComputable?t.total:-1)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then(function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===nA.NO_ERROR,o=r.getStatus();if(n&&!e.isRetryStatusCode_(o)){var a=-1!==e.successCodes_.indexOf(o);t(!0,new iA(a,r))}else{var u=r.getErrorCode()===nA.ABORT;t(!1,new iA(!1,null,u))}})}(p,c())},t)}function d(){a&&clearTimeout(a)}function p(e){if(!l){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e||c()||u?(d(),void h.call.apply(h,[null,e].concat(n))):(i<64&&(i*=2),1===s?(s=2,o=0):o=1e3*(i+Math.random()),void f(o));var o}d()}var v=!1;function g(e){v||(v=!0,d(),!l&&(null!==o?(e||(s=2),clearTimeout(o),f(0)):e||(s=1)))}return f(0),a=setTimeout(function(){u=!0,g(!0)},r),g}(0,t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}},{key:"isRetryStatusCode_",value:function(e){var t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}]),e}(),iA=function e(t,n,r){d(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r},oA=function(){function e(t,n){d(this,e),this._service=t,this._location=n instanceof XR?n:XR.makeFromUrl(n,t.host)}return f(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new XR(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return function(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new XR(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new YR("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function aA(e,t){var n=null==t?void 0:t.storageBucket;return null==n?null:XR.makeFromBucketSpec(n,e)}var uA=function(){function e(t,n,r,i,o){d(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=KR,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?XR.makeFromBucketSpec(i,this._host):aA(this._host,this.app.options)}return f(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,this._bucket=null!=this._url?XR.makeFromBucketSpec(this._url,e):aA(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){tA("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){tA("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e._overrideAuthToken){t.next=2;break}return t.abrupt("return",e._overrideAuthToken);case 2:if(!(n=e._authProvider.getImmediate({optional:!0}))){t.next=9;break}return t.next=6,n.getToken();case 6:if(null===(r=t.sent)){t.next=9;break}return t.abrupt("return",r.accessToken);case 9:return t.abrupt("return",null);case 10:case"end":return t.stop()}},t)}))()}},{key:"_getAppCheckToken",value:function(){var e=this;return(0,Hi.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e._appCheckProvider.getImmediate({optional:!0}))){t.next=7;break}return t.next=4,n.getToken();case 4:t.t0=t.sent.token,t.next=8;break;case 7:t.t0=null;case 8:return t.abrupt("return",t.t0);case 9:case"end":return t.stop()}},t)}))()}},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach(function(e){return e.cancel()}),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new oA(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this;if(this._deleted)return new eA($R());var o=function(e,t,n,r,i,o){var a=function(e){var t=encodeURIComponent,n="?";for(var r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1)}(e.urlParams),u=e.url+a,s=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(s,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(s,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(s,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(s,r),new rA(u,e.method,s,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(o),o.getPromise().then(function(){return i._requests.delete(o)},function(){return i._requests.delete(o)}),o}},{key:"makeRequestWithTokens",value:function(e,n){var r=this;return(0,Hi.Z)(regeneratorRuntime.mark(function i(){var o,a,u,s;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Promise.all([r._getAuthToken(),r._getAppCheckToken()]);case 2:return o=i.sent,a=t(o,2),u=a[0],s=a[1],i.abrupt("return",r._makeRequest(e,n,u,s).getPromise());case 7:case"end":return i.stop()}},i)}))()}}]),e}(),sA="@firebase/storage",cA="storage";(0,Gi._registerComponent)(new Wi.wA(cA,function(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new uA(r,i,o,n,Gi.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Gi.registerVersion)(sA,"0.9.0",""),(0,Gi.registerVersion)(sA,"0.9.0","esm2017");var lA=function e(t){return d(this,e),t},hA="storage",fA=new u.OlP("angularfire2.storage-instances");function dA(e){return function(t,n){var r=t.runOutsideAngular(function(){return e(n)});return new lA(r)}}var pA={provide:function e(){return d(this,e),(0,Di.vb)(hA)},deps:[[new u.FiY,fA]]},vA={provide:lA,useFactory:function(e,t){var n=(0,Di.JM)(hA,e,t);return n&&new lA(n)},deps:[[new u.FiY,fA],Mi]},gA=function(){var e=function e(){d(this,e),(0,Li.KN)("angularfire",Di.q4.full,"gcs")};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[vA,pA]}),e}();function mA(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return{ngModule:gA,providers:[{provide:fA,useFactory:dA(e),multi:!0,deps:[u.R0b,u.zs3,Di.HU,Fi,[new u.FiY,Oo],[new u.FiY,Ro]].concat(n)}]}}var yA=(0,Di.u3)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Gi.getApp)(),t=arguments.length>1?arguments[1]:void 0;return e=(0,Ki.m9)(e),(0,Gi._getProvider)(e,cA).getImmediate({identifier:t})},!0),kA=o(9105);function _A(e,t,n,r){return(0,kA.m)(n)&&(r=n,n=void 0),r?_A(e,t,n).pipe((0,Xe.U)(function(e){return(0,Me.k)(e)?r.apply(void 0,a(e)):r(e)})):new qe.y(function(r){wA(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function wA(e,t,n,r,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var a=e;e.addEventListener(t,n,i),o=function(){return a.removeEventListener(t,n,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var u=e;e.on(t,n),o=function(){return u.off(t,n)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var s=e;e.addListener(t,n),o=function(){return s.removeListener(t,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var c=0,l=e.length;c<l;c++)wA(e[c],t,n,r,i)}r.add(o)}var bA=o(6561);function xA(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}var IA=function(){function e(){d(this,e)}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new TA(e))}}]),e}(),TA=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).hasFirst=!1,r.observables=[],r.subscriptions=[],r}return f(n,[{key:"_next",value:function(e){this.observables.push(e)}},{key:"_complete",value:function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var n=0;n<t&&!this.hasFirst;n++){var r=Be(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}}},{key:"notifyNext",value:function(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(t)}}]),n}(Ue),CA=o(8640);new qe.y(CA.Z);var EA=o(377);function SA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[t.length-1];return"function"==typeof r&&t.pop(),(0,ze.n)(t,void 0).lift(new RA(r))}var RA=function(){function e(t){d(this,e),this.resultSelector=t}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new AA(e,this.resultSelector))}}]),e}(),AA=function(e){p(n,e);var t=v(n);function n(e,r){var i;arguments.length>2&&void 0!==arguments[2]||Object.create(null);return d(this,n),(i=t.call(this,e)).resultSelector=r,i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:void 0,i}return f(n,[{key:"_next",value:function(e){var t=this.iterators;(0,Me.k)(e)?t.push(new OA(e)):t.push("function"==typeof e[EA.hZ]?new NA(e[EA.hZ]()):new PA(this.destination,this,e))}},{key:"_complete",value:function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var r=e[n];r.stillUnsubscribed?this.destination.add(r.subscribe()):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var e=this.iterators,t=e.length,n=this.destination,r=0;r<t;r++){var i=e[r];if("function"==typeof i.hasValue&&!i.hasValue())return}for(var o=!1,a=[],u=0;u<t;u++){var s=e[u],c=s.next();if(s.hasCompleted()&&(o=!0),c.done)return void n.complete();a.push(c.value)}this.resultSelector?this._tryresultSelector(a):n.next(a),o&&n.complete()}},{key:"_tryresultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Fe.L),NA=function(){function e(t){d(this,e),this.iterator=t,this.nextResult=t.next()}return f(e,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e}},{key:"hasCompleted",value:function(){var e=this.nextResult;return Boolean(e&&e.done)}}]),e}(),OA=function(e){function t(e){d(this,t),this.array=e,this.index=0,this.length=0,this.length=e.length}return f(t,[{key:e,value:function(){return this}},{key:"next",value:function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),t}(EA.hZ),PA=function(e,t){p(r,e);var n=v(r);function r(e,t,i){var o;return d(this,r),(o=n.call(this,e)).parent=t,o.observable=i,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return f(r,[{key:t,value:function(){return this}},{key:"next",value:function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(e){this.buffer.push(e),this.parent.checkIterators()}},{key:"subscribe",value:function(){return(0,et.ft)(this.observable,new et.IY(this))}}]),r}(et.Ds,EA.hZ);function DA(e){return function(t){return t.lift(new LA(e))}}var LA=function(){function e(t){d(this,e),this.notifier=t}return f(e,[{key:"call",value:function(e,t){var n=new MA(e),r=(0,et.ft)(this.notifier,new et.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}]),e}(),MA=function(e){p(n,e);var t=v(n);function n(e){var r;return d(this,n),(r=t.call(this,e)).seenValue=!1,r}return f(n,[{key:"notifyNext",value:function(){this.seenValue=!0,this.complete()}},{key:"notifyComplete",value:function(){}}]),n}(et.Ds);function FA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new UA(t,n))}}var UA=function(){function e(t,n){d(this,e),this.observables=t,this.project=n}return f(e,[{key:"call",value:function(e,t){return t.subscribe(new VA(e,this.observables,this.project))}}]),e}(),VA=function(e){p(n,e);var t=v(n);function n(e,r,i){var o;d(this,n),(o=t.call(this,e)).observables=r,o.project=i,o.toRespond=[];var a=r.length;o.values=new Array(a);for(var u=0;u<a;u++)o.toRespond.push(u);for(var s=0;s<a;s++)o.add(Be(m(o),r[s],void 0,s));return o}return f(n,[{key:"notifyNext",value:function(e,t,n){this.values[n]=t;var r=this.toRespond;if(r.length>0){var i=r.indexOf(n);-1!==i&&r.splice(i,1)}}},{key:"notifyComplete",value:function(){}},{key:"_next",value:function(e){if(0===this.toRespond.length){var t=[e].concat(a(this.values));this.project?this._tryProject(t):this.destination.next(t)}}},{key:"_tryProject",value:function(e){var t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(Ue);o(1593),o(8819);var jA=["*"],qA=["dialog"];function BA(e){return null!=e}function zA(e){return(e||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){var t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var ZA=!0,HA=5,GA=function(){var e=function e(){d(this,e),this.animation=ZA};return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=u.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e}(),WA=function(){},KA=HA,YA=new Map,QA=function(e,t,n,r){var i=r.context||{},o=YA.get(t);if(o)switch(r.runningTransition){case"continue":return Qe.E;case"stop":e.run(function(){return o.transition$.complete()}),i=Object.assign(o.context,i),YA.delete(t)}var a=n(t,r.animation,i)||WA;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(function(){return a()}),(0,Ne.of)(void 0).pipe(function(e){return function(t){return new qe.y(function(n){return t.subscribe(function(t){return e.run(function(){return n.next(t)})},function(t){return e.run(function(){return n.error(t)})},function(){return e.run(function(){return n.complete()})})})}}(e));var u=new Oe.xQ,s=new Oe.xQ,c=u.pipe(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return Ye(e,Ne.of.apply(void 0,t))}}(!0));YA.set(t,{transition$:u,complete:function(){s.next(),s.complete()},context:i});var l=function(e){var t=window.getComputedStyle(e),n=t.transitionDelay,r=t.transitionDuration;return 1e3*(parseFloat(n)+parseFloat(r))}(t);return e.runOutsideAngular(function(){var n=_A(t,"transitionend").pipe(DA(c),ft(function(e){return e.target===t}));(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(1===t.length){if(!(0,Me.k)(t[0]))return t[0];t=t[0]}return(0,ze.n)(t,void 0).lift(new IA)})(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,r=-1;return(0,bA.k)(t)?r=Number(t)<1?1:Number(t):(0,Le.K)(t)&&(n=t),(0,Le.K)(n)||(n=sb.P),new qe.y(function(t){var i=(0,bA.k)(e)?e:+e-n.now();return n.schedule(xA,i,{index:0,period:r,subscriber:t})})}(l+KA).pipe(DA(c)),n,s).pipe(DA(c)).subscribe(function(){YA.delete(t),e.run(function(){a(),u.next(),u.complete()})})}),u.asObservable()},JA=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),$A=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),XA=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}(),eN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),tN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}(),nN=(function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}(nN||(nN={})),nN);"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));var rN=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function iN(e){var t=Array.from(e.querySelectorAll(rN)).filter(function(e){return-1!==e.tabIndex});return[t[0],t[t.length-1]]}new(function(){function e(){d(this,e)}return f(e,[{key:"getAllStyles",value:function(e){return window.getComputedStyle(e)}},{key:"getStyle",value:function(e,t){return this.getAllStyles(e)[t]}},{key:"isStaticPositioned",value:function(e){return"static"===(this.getStyle(e,"position")||"static")}},{key:"offsetParent",value:function(e){for(var t=e.offsetParent||document.documentElement;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}},{key:"position",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))t={top:(t=e.getBoundingClientRect()).top,bottom:t.bottom,left:t.left,right:t.right,height:t.height,width:t.width};else{var i=this.offsetParent(e);t=this.offset(e,!1),i!==document.documentElement&&(r=this.offset(i,!1)),r.top+=i.clientTop,r.left+=i.clientLeft}return t.top-=r.top,t.bottom-=r.top,t.left-=r.left,t.right-=r.left,n&&(t.top=Math.round(t.top),t.bottom=Math.round(t.bottom),t.left=Math.round(t.left),t.right=Math.round(t.right)),t}},{key:"offset",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft,o={height:n.height||e.offsetHeight,width:n.width||e.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return t&&(o.height=Math.round(o.height),o.width=Math.round(o.width),o.top=Math.round(o.top),o.bottom=Math.round(o.bottom),o.left=Math.round(o.left),o.right=Math.round(o.right)),o}},{key:"positionElements",value:function(e,n,r,i){var o=t(r.split("-"),2),a=o[0],u=void 0===a?"top":a,s=o[1],c=void 0===s?"center":s,l=i?this.offset(e,!1):this.position(e,!1),h=this.getAllStyles(n),f=parseFloat(h.marginTop),d=parseFloat(h.marginBottom),p=parseFloat(h.marginLeft),v=parseFloat(h.marginRight),g=0,m=0;switch(u){case"top":g=l.top-(n.offsetHeight+f+d);break;case"bottom":g=l.top+l.height;break;case"left":m=l.left-(n.offsetWidth+p+v);break;case"right":m=l.left+l.width}switch(c){case"top":g=l.top;break;case"bottom":g=l.top+l.height-n.offsetHeight;break;case"left":m=l.left;break;case"right":m=l.left+l.width-n.offsetWidth;break;case"center":"top"===u||"bottom"===u?m=l.left+l.width/2-n.offsetWidth/2:g=l.top+l.height/2-n.offsetHeight/2}n.style.transform="translate(".concat(Math.round(m),"px, ").concat(Math.round(g),"px)");var y=n.getBoundingClientRect(),k=document.documentElement,_=window.innerHeight||k.clientHeight,w=window.innerWidth||k.clientWidth;return y.left>=0&&y.top>=0&&y.right<=w&&y.bottom<=_}}]),e}()),new Date(1882,10,12),new Date(2174,10,25);var oN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G,ob]]}),e}(),aN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}(),uN=function(){var e=function(){function e(t){d(this,e),this._ngbConfig=t,this.backdrop=!0,this.keyboard=!0}return f(e,[{key:"animation",get:function(){return void 0===this._animation?this._ngbConfig.animation:this._animation},set:function(e){this._animation=e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(GA))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(GA))},token:e,providedIn:"root"}),e}(),sN=function e(t,n,r){d(this,e),this.nodes=t,this.viewRef=n,this.componentRef=r},cN=function(){},lN=function(){var e=function(){function e(t){d(this,e),this._document=t}return f(e,[{key:"compensate",value:function(){var e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):cN}},{key:"_adjustBody",value:function(e){var t=this._document.body,n=t.style.paddingRight,r=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]="".concat(r+e,"px"),function(){return t.style["padding-right"]=n}}},{key:"_isPresent",value:function(e){var t=this._document.body.getBoundingClientRect();return window.innerWidth-(t.left+t.right)>=e-.1*e}},{key:"_getWidth",value:function(){var e=this._document.createElement("div");e.className="modal-scrollbar-measure";var t=this._document.body;t.appendChild(e);var n=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),n}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(h))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(h))},token:e,providedIn:"root"}),e}(),hN=function(){var e=function(){function e(t,n){d(this,e),this._el=t,this._zone=n}return f(e,[{key:"ngOnInit",value:function(){var e=this;this._zone.onStable.asObservable().pipe(ot(1)).subscribe(function(){QA(e._zone,e._el.nativeElement,function(e,t){t&&zA(e),e.classList.add("show")},{animation:e.animation,runningTransition:"continue"})})}},{key:"hide",value:function(){return QA(this._zone,this._el.nativeElement,function(e){return e.classList.remove("show")},{animation:this.animation,runningTransition:"stop"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(u.SBq),u.Y36(u.R0b))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,t){2&e&&(u.Tol("modal-backdrop"+(t.backdropClass?" "+t.backdropClass:"")),u.ekj("show",!t.animation)("fade",t.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}(),fN=function(){function e(){d(this,e)}return f(e,[{key:"close",value:function(e){}},{key:"dismiss",value:function(e){}}]),e}(),dN=function(){function e(t,n,r,i){var o=this;d(this,e),this._windowCmptRef=t,this._contentRef=n,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new Oe.xQ,this._dismissed=new Oe.xQ,this._hidden=new Oe.xQ,t.instance.dismissEvent.subscribe(function(e){o.dismiss(e)}),this.result=new Promise(function(e,t){o._resolve=e,o._reject=t}),this.result.then(null,function(){})}return f(e,[{key:"componentInstance",get:function(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}},{key:"closed",get:function(){return this._closed.asObservable().pipe(DA(this._hidden))}},{key:"dismissed",get:function(){return this._dismissed.asObservable().pipe(DA(this._hidden))}},{key:"hidden",get:function(){return this._hidden.asObservable()}},{key:"shown",get:function(){return this._windowCmptRef.instance.shown.asObservable()}},{key:"close",value:function(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}},{key:"_dismiss",value:function(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}},{key:"dismiss",value:function(e){var t=this;if(this._windowCmptRef)if(this._beforeDismiss){var n=this._beforeDismiss();n&&n.then?n.then(function(n){!1!==n&&t._dismiss(e)},function(){}):!1!==n&&this._dismiss(e)}else this._dismiss(e)}},{key:"_removeModalElements",value:function(){var e=this,t=this._windowCmptRef.instance.hide(),n=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,Ne.of)(void 0);t.subscribe(function(){var t=e._windowCmptRef.location.nativeElement;t.parentNode.removeChild(t),e._windowCmptRef.destroy(),e._contentRef&&e._contentRef.viewRef&&e._contentRef.viewRef.destroy(),e._windowCmptRef=null,e._contentRef=null}),n.subscribe(function(){if(e._backdropCmptRef){var t=e._backdropCmptRef.location.nativeElement;t.parentNode.removeChild(t),e._backdropCmptRef.destroy(),e._backdropCmptRef=null}}),SA(t,n).subscribe(function(){e._hidden.next(),e._hidden.complete()})}}]),e}(),pN=(function(e){e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC"}(pN||(pN={})),pN),vN=function(){var e=function(){function e(t,n,r){d(this,e),this._document=t,this._elRef=n,this._zone=r,this._closed$=new Oe.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new Oe.xQ,this.hidden=new Oe.xQ}return f(e,[{key:"dismiss",value:function(e){this.dismissEvent.emit(e)}},{key:"ngOnInit",value:function(){var e=this;this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(ot(1)).subscribe(function(){e._show()})}},{key:"ngOnDestroy",value:function(){this._disableEventHandling()}},{key:"hide",value:function(){var e=this,t=this._elRef.nativeElement,n={animation:this.animation,runningTransition:"stop"},r=SA(QA(this._zone,t,function(){return t.classList.remove("show")},n),QA(this._zone,this._dialogEl.nativeElement,function(){},n));return r.subscribe(function(){e.hidden.next(),e.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),r}},{key:"_show",value:function(){var e=this,t={animation:this.animation,runningTransition:"continue"};SA(QA(this._zone,this._elRef.nativeElement,function(e,t){t&&zA(e),e.classList.add("show")},t),QA(this._zone,this._dialogEl.nativeElement,function(){},t)).subscribe(function(){e.shown.next(),e.shown.complete()}),this._enableEventHandling(),this._setFocus()}},{key:"_enableEventHandling",value:function(){var e=this,t=this._elRef.nativeElement;this._zone.runOutsideAngular(function(){_A(t,"keydown").pipe(DA(e._closed$),ft(function(e){return e.which===nN.Escape})).subscribe(function(t){e.keyboard?requestAnimationFrame(function(){t.defaultPrevented||e._zone.run(function(){return e.dismiss(pN.ESC)})}):"static"===e.backdrop&&e._bumpBackdrop()});var n=!1;_A(e._dialogEl.nativeElement,"mousedown").pipe(DA(e._closed$),(0,Ot.b)(function(){return n=!1}),tt(function(){return _A(t,"mouseup").pipe(DA(e._closed$),ot(1))}),ft(function(e){var n=e.target;return t===n})).subscribe(function(){n=!0}),_A(t,"click").pipe(DA(e._closed$)).subscribe(function(r){var i=r.target;t===i&&("static"===e.backdrop?e._bumpBackdrop():!0===e.backdrop&&!n&&e._zone.run(function(){return e.dismiss(pN.BACKDROP_CLICK)})),n=!1})})}},{key:"_disableEventHandling",value:function(){this._closed$.next()}},{key:"_setFocus",value:function(){var e=this._elRef.nativeElement;if(!e.contains(document.activeElement)){var t=e.querySelector("[ngbAutofocus]"),n=iN(e)[0];(t||n||e).focus()}}},{key:"_restoreFocus",value:function(){var e,t=this,n=this._document.body,r=this._elWithFocus;e=r&&r.focus&&n.contains(r)?r:n,this._zone.runOutsideAngular(function(){setTimeout(function(){return e.focus()}),t._elWithFocus=null})}},{key:"_bumpBackdrop",value:function(){"static"===this.backdrop&&QA(this._zone,this._elRef.nativeElement,function(e){var t=e.classList;return t.add("modal-static"),function(){return t.remove("modal-static")}},{animation:this.animation,runningTransition:"continue"})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.Y36(h),u.Y36(u.SBq),u.Y36(u.R0b))},e.\u0275cmp=u.Xpm({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(e,t){var n;(1&e&&u.Gf(qA,7),2&e)&&(u.iGM(n=u.CRH())&&(t._dialogEl=n.first))},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,t){2&e&&(u.uIk("aria-modal",!0)("aria-labelledby",t.ariaLabelledBy)("aria-describedby",t.ariaDescribedBy),u.Tol("modal d-block"+(t.windowClass?" "+t.windowClass:"")),u.ekj("fade",t.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:jA,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,t){1&e&&(u.F$t(),u.TgZ(0,"div",0,1),u.TgZ(2,"div",2),u.Hsn(3),u.qZA(),u.qZA()),2&e&&u.Tol("modal-dialog"+(t.size?" modal-"+t.size:"")+(t.centered?" modal-dialog-centered":"")+(t.scrollable?" modal-dialog-scrollable":"")+(t.modalDialogClass?" "+t.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),e}(),gN=function(){var e=function(){function e(n,r,i,o,a,s){var c=this;d(this,e),this._applicationRef=n,this._injector=r,this._document=i,this._scrollBar=o,this._rendererFactory=a,this._ngZone=s,this._activeWindowCmptHasChanged=new Oe.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(function(){if(c._windowCmpts.length){var e=c._windowCmpts[c._windowCmpts.length-1];(function(e,n,r){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];e.runOutsideAngular(function(){var e=_A(n,"focusin").pipe(DA(r),(0,Xe.U)(function(e){return e.target}));_A(n,"keydown").pipe(DA(r),ft(function(e){return e.which===nN.Tab}),FA(e)).subscribe(function(e){var r=t(e,2),i=r[0],o=r[1],a=t(iN(n),2),u=a[0],s=a[1];(o===u||o===n)&&i.shiftKey&&(s.focus(),i.preventDefault()),o===s&&!i.shiftKey&&(u.focus(),i.preventDefault())}),i&&_A(n,"click").pipe(DA(r),FA(e),(0,Xe.U)(function(e){return e[1]})).subscribe(function(e){return e.focus()})})})(c._ngZone,e.location.nativeElement,c._activeWindowCmptHasChanged),c._revertAriaHidden(),c._setAriaHidden(e.location.nativeElement)}})}return f(e,[{key:"open",value:function(e,t,n,r){var i=this,o=r.container instanceof HTMLElement?r.container:BA(r.container)?this._document.querySelector(r.container):this._document.body,a=this._rendererFactory.createRenderer(null,null),u=this._scrollBar.compensate(),s=function(){i._modalRefs.length||(a.removeClass(i._document.body,"modal-open"),i._revertAriaHidden())};if(!o)throw new Error('The specified modal container "'.concat(r.container||"body",'" was not found in the DOM.'));var c=new fN,l=this._getContentRef(e,r.injector||t,n,c,r),h=!1!==r.backdrop?this._attachBackdrop(e,o):void 0,f=this._attachWindowComponent(e,o,l),d=new dN(f,l,h,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(f),d.result.then(u,u),d.result.then(s,s),c.close=function(e){d.close(e)},c.dismiss=function(e){d.dismiss(e)},this._applyWindowOptions(f.instance,r),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),h&&h.instance&&(this._applyBackdropOptions(h.instance,r),h.changeDetectorRef.detectChanges()),f.changeDetectorRef.detectChanges(),d}},{key:"activeInstances",get:function(){return this._activeInstances}},{key:"dismissAll",value:function(e){this._modalRefs.forEach(function(t){return t.dismiss(e)})}},{key:"hasOpenModals",value:function(){return this._modalRefs.length>0}},{key:"_attachBackdrop",value:function(e,t){var n=e.resolveComponentFactory(hN).create(this._injector);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}},{key:"_attachWindowComponent",value:function(e,t,n){var r=e.resolveComponentFactory(vN).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}},{key:"_applyWindowOptions",value:function(e,t){this._windowAttributes.forEach(function(n){BA(t[n])&&(e[n]=t[n])})}},{key:"_applyBackdropOptions",value:function(e,t){this._backdropAttributes.forEach(function(n){BA(t[n])&&(e[n]=t[n])})}},{key:"_getContentRef",value:function(e,t,n,r,i){return n?n instanceof u.Rgc?this._createFromTemplateRef(n,r):function(e){return"string"==typeof e}(n)?this._createFromString(n):this._createFromComponent(e,t,n,r,i):new sN([])}},{key:"_createFromTemplateRef",value:function(e,t){var n=e.createEmbeddedView({$implicit:t,close:function(e){t.close(e)},dismiss:function(e){t.dismiss(e)}});return this._applicationRef.attachView(n),new sN([n.rootNodes],n)}},{key:"_createFromString",value:function(e){var t=this._document.createTextNode("".concat(e));return new sN([[t]])}},{key:"_createFromComponent",value:function(e,t,n,r,i){var o=e.resolveComponentFactory(n),a=u.zs3.create({providers:[{provide:fN,useValue:r}],parent:t}),s=o.create(a),c=s.location.nativeElement;return i.scrollable&&c.classList.add("component-host-scrollable"),this._applicationRef.attachView(s.hostView),new sN([[c]],s.hostView,s)}},{key:"_setAriaHidden",value:function(e){var t=this,n=e.parentElement;n&&e!==this._document.body&&(Array.from(n.children).forEach(function(n){n!==e&&"SCRIPT"!==n.nodeName&&(t._ariaHiddenValues.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))}),this._setAriaHidden(n))}},{key:"_revertAriaHidden",value:function(){this._ariaHiddenValues.forEach(function(e,t){e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}},{key:"_registerModalRef",value:function(e){var t=this,n=function(){var n=t._modalRefs.indexOf(e);n>-1&&(t._modalRefs.splice(n,1),t._activeInstances.emit(t._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(n,n)}},{key:"_registerWindowCmpt",value:function(e){var t=this;this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(function(){var n=t._windowCmpts.indexOf(e);n>-1&&(t._windowCmpts.splice(n,1),t._activeWindowCmptHasChanged.next())})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(h),u.LFG(lN),u.LFG(u.FYo),u.LFG(u.R0b))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(u.z2F),u.LFG(u.gxx),u.LFG(h),u.LFG(lN),u.LFG(u.FYo),u.LFG(u.R0b))},token:e,providedIn:"root"}),e}(),mN=function(){var e=function(){function e(t,n,r,i){d(this,e),this._moduleCFR=t,this._injector=n,this._modalStack=r,this._config=i}return f(e,[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._moduleCFR,this._injector,e,n)}},{key:"activeInstances",get:function(){return this._modalStack.activeInstances}},{key:"dismissAll",value:function(e){this._modalStack.dismissAll(e)}},{key:"hasOpenModals",value:function(){return this._modalStack.hasOpenModals()}}]),e}();return e.\u0275fac=function(t){return new(t||e)(u.LFG(u._Vd),u.LFG(u.zs3),u.LFG(gN),u.LFG(uN))},e.\u0275prov=u.Yz7({factory:function(){return new e(u.LFG(u._Vd),u.LFG(u.gxx),u.LFG(gN),u.LFG(uN))},token:e,providedIn:"root"}),e}(),yN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({providers:[mN]}),e}(),kN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),_N=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),wN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),bN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),xN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),IN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),TN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),CN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({}),e}();new u.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});var EN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[[G]]}),e}(),SN=[JA,$A,XA,eN,tN,oN,aN,yN,kN,_N,wN,bN,xN,IN,TN,CN,EN],RN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e}),e.\u0275inj=u.cJS({imports:[SN,JA,$A,XA,eN,tN,oN,aN,yN,kN,_N,wN,bN,xN,IN,TN,CN,EN]}),e}(),AN=function(){var e=function e(){d(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=u.oAB({type:e,bootstrap:[Sx]}),e.\u0275inj=u.cJS({providers:[Qx,zx],imports:[[Ee,Ex,ob,ab,vb.hO.initializeApp(Rx),zi(function(){return Zi(Rx)}),nI(function(){return jx()}),Uo(function(){return qo()}),fS(function(){return dS()}),U_(function(){return q_()}),CS(function(){return ES()}),MS(function(){return FS()}),MR(function(){return FR()}),GR(function(){return WR()}),mA(function(){return yA()}),RN]]}),e}();(0,u.G48)(),Te().bootstrapModule(AN).catch(function(e){return console.error(e)})},4762:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))(function(i,o){function a(e){try{s(r.next(e))}catch(t){o(t)}}function u(e){try{s(r.throw(e))}catch(t){o(t)}}function s(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(a,u)}s((r=r.apply(e,t||[])).next())})}n.d(t,{_T:function(){return r},mG:function(){return i}})},3394:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var r=n(3854),i=n(3910),o=n(8026),a=n(5422),u=function(){function e(t,n){var r=this;d(this,e),this._delegate=t,this.firebase=n,(0,o._addComponent)(t,new i.wA("app-compat",function(){return r},"PUBLIC")),this.container=t.container}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise(function(t){e._delegate.checkDestroyed(),t()}).then(function(){return e.firebase.INTERNAL.removeApp(e.name),(0,o.deleteApp)(e._delegate)})}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o._DEFAULT_ENTRY_NAME;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)&&r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o._DEFAULT_ENTRY_NAME;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){(0,o._addComponent)(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){(0,o._addOrOverwriteComponent)(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),s=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),c=function e(){var t=function(e){var t={},n={__esModule:!0,initializeApp:function(i){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},u=o.initializeApp(i,a);if((0,r.r3)(t,u.name))return t[u.name];var s=new e(u,n);return t[u.name]=s,s},app:i,registerVersion:o.registerVersion,setLogLevel:o.setLogLevel,onLog:o.onLog,apps:null,SDK_VERSION:o.SDK_VERSION,INTERNAL:{registerComponent:function(t){var a=t.name,u=a.replace("-compat","");if(o._registerComponent(t)&&"PUBLIC"===t.type){var c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!=typeof e[u])throw s.create("invalid-app-argument",{appName:a});return e[u]()};void 0!==t.serviceProps&&(0,r.ZB)(c,t.serviceProps),n[u]=c,e.prototype[u]=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this._getService.bind(this,a).apply(this,t.multipleInstances?n:[])}}return"PUBLIC"===t.type?n[u]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:o}};function i(e){if(!(0,r.r3)(t,e=e||o._DEFAULT_ENTRY_NAME))throw s.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(function(e){return t[e]})}}),i.App=e,n}(u);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new a.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var h=self.firebase.SDK_VERSION;h&&h.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var p=c;(0,o.registerVersion)("@firebase/app-compat","0.1.12",void 0)},8026:function(t,n,r){"use strict";var i;r.r(n),r.d(n,{FirebaseError:function(){return c.ZR},SDK_VERSION:function(){return S},_DEFAULT_ENTRY_NAME:function(){return g},_addComponent:function(){return _},_addOrOverwriteComponent:function(){return w},_apps:function(){return y},_clearComponents:function(){return T},_components:function(){return k},_getProvider:function(){return x},_registerComponent:function(){return b},_removeServiceInstance:function(){return I},deleteApp:function(){return O},getApp:function(){return A},getApps:function(){return N},initializeApp:function(){return R},onLog:function(){return L},registerVersion:function(){return D},setLogLevel:function(){return M}});var o=r(8239),a=r(3910),u=r(5422),c=r(3854),l=function(){function e(t){d(this,e),this.container=t}return f(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map(function(e){if("VERSION"===(null==(n=e.getComponent())?void 0:n.type)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}var n;return null}).filter(function(e){return e}).join(" ")}}]),e}(),h="@firebase/app",p="0.7.11",v=new u.Yd("@firebase/app"),g="[DEFAULT]",m=(e(i={},h,"fire-core"),e(i,"@firebase/app-compat","fire-core-compat"),e(i,"@firebase/analytics","fire-analytics"),e(i,"@firebase/analytics-compat","fire-analytics-compat"),e(i,"@firebase/app-check","fire-app-check"),e(i,"@firebase/app-check-compat","fire-app-check-compat"),e(i,"@firebase/auth","fire-auth"),e(i,"@firebase/auth-compat","fire-auth-compat"),e(i,"@firebase/database","fire-rtdb"),e(i,"@firebase/database-compat","fire-rtdb-compat"),e(i,"@firebase/functions","fire-fn"),e(i,"@firebase/functions-compat","fire-fn-compat"),e(i,"@firebase/installations","fire-iid"),e(i,"@firebase/installations-compat","fire-iid-compat"),e(i,"@firebase/messaging","fire-fcm"),e(i,"@firebase/messaging-compat","fire-fcm-compat"),e(i,"@firebase/performance","fire-perf"),e(i,"@firebase/performance-compat","fire-perf-compat"),e(i,"@firebase/remote-config","fire-rc"),e(i,"@firebase/remote-config-compat","fire-rc-compat"),e(i,"@firebase/storage","fire-gcs"),e(i,"@firebase/storage-compat","fire-gcs-compat"),e(i,"@firebase/firestore","fire-fst"),e(i,"@firebase/firestore-compat","fire-fst-compat"),e(i,"fire-js","fire-js"),e(i,"firebase","fire-js-all"),i),y=new Map,k=new Map;function _(e,t){try{e.container.addComponent(t)}catch(n){v.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function w(e,t){e.container.addOrOverwriteComponent(t)}function b(e){var t=e.name;if(k.has(t))return v.debug("There were multiple attempts to register component ".concat(t,".")),!1;k.set(t,e);var n,r=s(y.values());try{for(r.s();!(n=r.n()).done;){_(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function x(e,t){return e.container.getProvider(t)}function I(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;x(e,t).clearInstance(n)}function T(){k.clear()}var C=new c.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."}),E=function(){function e(t,n,r){var i=this;d(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new a.wA("app",function(){return i},"PUBLIC"))}return f(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw C.create("app-deleted",{appName:this._name})}}]),e}(),S="9.6.1";function R(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"object"!=typeof t&&(t={name:t});var n=Object.assign({name:g,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw C.create("bad-app-name",{appName:String(r)});var i=y.get(r);if(i){if((0,c.vZ)(e,i.options)&&(0,c.vZ)(n,i.config))return i;throw C.create("duplicate-app",{appName:r})}var o,u=new a.H0(r),l=s(k.values());try{for(l.s();!(o=l.n()).done;){var h=o.value;u.addComponent(h)}}catch(d){l.e(d)}finally{l.f()}var f=new E(e,n,u);return y.set(r,f),f}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=y.get(e);if(!t)throw C.create("no-app",{appName:e});return t}function N(){return Array.from(y.values())}function O(e){return P.apply(this,arguments)}function P(){return(P=(0,o.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,e.t0=y.has(n),!e.t0){e.next=7;break}return y.delete(n),e.next=6,Promise.all(t.container.getProviders().map(function(e){return e.delete()}));case 6:t.isDeleted=!0;case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function D(e,t,n){var r,i=null!==(r=m[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var o=i.match(/\s|\//),u=t.match(/\s|\//);if(o||u){var s=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&s.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&u&&s.push("and"),u&&s.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void v.warn(s.join(" "))}b(new a.wA("".concat(i,"-version"),function(){return{library:i,version:t}},"VERSION"))}function L(e,t){if(null!==e&&"function"!=typeof e)throw C.create("invalid-log-argument");(0,u.Am)(e,t)}function M(e){(0,u.Ub)(e)}b(new a.wA("platform-logger",function(e){return new l(e)},"PRIVATE")),D(h,p,""),D(h,p,"esm2017"),D("fire-js","")},3910:function(e,n,r){"use strict";r.d(n,{wA:function(){return u},H0:function(){return h}});var i=r(8239),o=r(3854),u=function(){function e(t,n,r){d(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return f(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),c="[DEFAULT]",l=function(){function e(t,n){d(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return f(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new o.BH;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(r){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:c})}catch(o){}var n,r=s(this.instancesDeferred.entries());try{for(r.s();!(n=r.n()).done;){var i=t(n.value,2),o=i[0],a=i[1],u=this.normalizeInstanceIdentifier(o);try{var l=this.getOrInitializeService({instanceIdentifier:u});a.resolve(l)}catch(l){}}}catch(h){r.e(h)}finally{r.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=this;return(0,i.Z)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from(e.instances.values()),t.next=3,Promise.all([].concat(a(n.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()})),a(n.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))));case 3:case"end":return t.stop()}},t)}))()}},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error("".concat(this.name,"(").concat(i,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var o,a=this.getOrInitializeService({instanceIdentifier:i,options:r}),u=s(this.instancesDeferred.entries());try{for(u.s();!(o=u.n()).done;){var c=t(o.value,2),l=c[0],h=c[1];i===this.normalizeInstanceIdentifier(l)&&h.resolve(a)}}catch(f){u.e(f)}finally{u.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&e(o,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){var o=r.value;try{o(e,t)}catch(a){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===c?void 0:t),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;return this.component?this.component.multipleInstances?e:c:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}(),h=function(){function e(t){d(this,e),this.name=t,this.providers=new Map}return f(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new l(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}()},3328:function(e,t,n){"use strict";var r=n(8239),i=n(8026),o=n(3910),u=n(3854),c=n(6676),l="@firebase/installations",h="w:0.5.4",f="FIS_v2",d=new u.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function p(e){return e instanceof u.ZR&&e.code.includes("request-failed")}function v(e){var t=e.projectId;return"https://firebaseinstallations.googleapis.com/v1/projects/".concat(t,"/installations")}function g(e){return{token:e.token,requestStatus:2,expiresIn:x(e.expiresIn),creationTime:Date.now()}}function m(e,t){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.json();case 2:return r=e.sent.error,e.abrupt("return",d.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function k(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function _(e,t){var n=t.refreshToken,r=k(e);return r.append("Authorization",function(e){return"".concat(f," ").concat(e)}(n)),r}function w(e){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t();case 2:return n=e.sent,e.abrupt("return",n.status>=500&&n.status<600?t():n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}function x(e){return Number(e.replace("s","000"))}function I(e,t){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.fid,i=v(t),o={method:"POST",headers:k(t),body:JSON.stringify({fid:r,authVersion:f,appId:t.appId,sdkVersion:h})},e.next=5,w(function(){return fetch(i,o)});case 5:if(!(a=e.sent).ok){e.next=11;break}return e.next=9,a.json();case 9:return u=e.sent,e.abrupt("return",{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:g(u.authToken)});case 11:return e.next=13,m("Create Installation",a);case 13:throw e.sent;case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function C(e){return new Promise(function(t){setTimeout(t,e)})}var E=/^[cdef][\w-]{21}$/;function S(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return function(e){return btoa(String.fromCharCode.apply(String,a(e))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return E.test(t)?t:""}catch(e){return""}}function R(e){return"".concat(e.appName,"!").concat(e.appId)}var A=new Map;function N(e,t){var n=R(e);O(n,t),function(e,t){var n=(!P&&"BroadcastChannel"in self&&((P=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){O(e.data.key,e.data.fid)}),P);n&&n.postMessage({key:e,fid:t}),0===A.size&&P&&(P.close(),P=null)}(n,t)}function O(e,t){var n=A.get(e);if(n){var r,i=s(n);try{for(i.s();!(r=i.n()).done;){(0,r.value)(t)}}catch(o){i.e(o)}finally{i.f()}}}var P=null,D="firebase-installations-store",L=null;function M(){return L||(L=(0,c.openDb)("firebase-installations-database",1,function(e){switch(e.oldVersion){case 0:e.createObjectStore(D)}})),L}function F(e,t){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.next=3,M();case 3:return i=e.sent.transaction(D,"readwrite"),o=i.objectStore(D),e.next=7,o.get(r);case 7:return a=e.sent,e.next=10,o.put(n,r);case 10:return e.next=12,i.complete;case 12:return(!a||a.fid!==n.fid)&&N(t,n.fid),e.abrupt("return",n);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return(j=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=R(t),e.next=3,M();case 3:return r=e.sent.transaction(D,"readwrite"),e.next=6,r.objectStore(D).delete(n);case 6:return e.next=8,r.complete;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function q(e,t){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=R(t),e.next=3,M();case 3:return i=e.sent.transaction(D,"readwrite"),o=i.objectStore(D),e.next=7,o.get(r);case 7:if(a=e.sent,void 0!==(u=n(a))){e.next=14;break}return e.next=12,o.delete(r);case 12:e.next=16;break;case 14:return e.next=16,o.put(u,r);case 16:return e.next=18,i.complete;case 18:return u&&(!a||a.fid!==u.fid)&&N(t,u.fid),e.abrupt("return",u);case 20:case"end":return e.stop()}},e)}))).apply(this,arguments)}function z(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,function(e){var r=H(e),i=G(t,r);return n=i.registrationPromise,i.installationEntry});case 2:if(""!==(r=e.sent).fid){e.next=10;break}return e.next=6,n;case 6:e.t1=e.sent,e.t0={installationEntry:e.t1},e.next=11;break;case 10:e.t0={installationEntry:r,registrationPromise:n};case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function H(e){return J(e||{fid:S(),registrationStatus:0})}function G(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(d.create("app-offline"))};var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return W.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:K(e)}:{installationEntry:t}}function W(){return(W=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=F,e.t1=t,e.next=5,I(t,n);case 5:return e.t2=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2));case 9:if(e.prev=9,e.t3=e.catch(0),!p(e.t3)||409!==e.t3.customData.serverCode){e.next=16;break}return e.next=14,V(t);case 14:e.next=18;break;case 16:return e.next=18,F(t,{fid:n.fid,registrationStatus:0});case 18:throw e.t3;case 19:case"end":return e.stop()}},e,null,[[0,9]])}))).apply(this,arguments)}function K(e){return Y.apply(this,arguments)}function Y(){return(Y=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q(t);case 2:n=e.sent;case 3:if(1!==n.registrationStatus){e.next=11;break}return e.next=6,C(100);case 6:return e.next=8,Q(t);case 8:n=e.sent;case 9:e.next=3;break;case 11:if(0!==n.registrationStatus){e.next=18;break}return e.next=14,z(t);case 14:return r=e.sent,i=r.installationEntry,o=r.registrationPromise,e.abrupt("return",o||i);case 18:return e.abrupt("return",n);case 19:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Q(e){return q(e,function(e){if(!e)throw d.create("installation-not-found");return J(e)})}function J(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function $(e,t){return X.apply(this,arguments)}function X(){return(X=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o,a,u,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.appConfig,i=t.platformLoggerProvider,o=ee(r,n),a=_(r,n),(u=i.getImmediate({optional:!0}))&&a.append("x-firebase-client",u.getPlatformInfoString()),s={method:"POST",headers:a,body:JSON.stringify({installation:{sdkVersion:h}})},e.next=6,w(function(){return fetch(o,s)});case 6:if(!(c=e.sent).ok){e.next=13;break}return e.t0=g,e.next=11,c.json();case 11:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.next=15,m("Generate Auth Token",c);case 15:throw e.sent;case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ee(e,t){var n=t.fid;return"".concat(v(e),"/").concat(n,"/authTokens:generate")}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]&&o[1],e.next=3,q(t.appConfig,function(e){if(!se(e))throw d.create("not-registered");var i=e.authToken;if(!n&&ce(i))return e;if(1===i.requestStatus)return r=re(t,n),e;if(!navigator.onLine)throw d.create("app-offline");var o=le(e);return r=ae(t,o),o});case 3:if(i=e.sent,!r){e.next=10;break}return e.next=7,r;case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=i.authToken;case 11:return e.abrupt("return",e.t0);case 12:case"end":return e.stop()}},e)}))).apply(this,arguments)}function re(e,t){return ie.apply(this,arguments)}function ie(){return(ie=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t.appConfig);case 2:r=e.sent;case 3:if(1!==r.authToken.requestStatus){e.next=11;break}return e.next=6,C(100);case 6:return e.next=8,oe(t.appConfig);case 8:r=e.sent;case 9:e.next=3;break;case 11:return i=r.authToken,e.abrupt("return",0===i.requestStatus?te(t,n):i);case 13:case"end":return e.stop()}},e)}))).apply(this,arguments)}function oe(e){return q(e,function(e){if(!se(e))throw d.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ae(e,t){return ue.apply(this,arguments)}function ue(){return(ue=(0,r.Z)(regeneratorRuntime.mark(function e(t,n){var r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$(t,n);case 3:return r=e.sent,i=Object.assign(Object.assign({},n),{authToken:r}),e.next=7,F(t.appConfig,i);case 7:return e.abrupt("return",r);case 10:if(e.prev=10,e.t0=e.catch(0),p(e.t0)&&(401===e.t0.customData.serverCode||404===e.t0.customData.serverCode)){e.next=18;break}return o=Object.assign(Object.assign({},n),{authToken:{requestStatus:0}}),e.next=16,F(t.appConfig,o);case 16:e.next=20;break;case 18:return e.next=20,V(t.appConfig);case 20:throw e.t0;case 21:case"end":return e.stop()}},e,null,[[0,10]])}))).apply(this,arguments)}function se(e){return void 0!==e&&2===e.registrationStatus}function ce(e){return 2===e.requestStatus&&!function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function le(e){var t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function he(){return(he=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r,i,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.next=3,z(n.appConfig);case 3:return r=e.sent,i=r.installationEntry,o=r.registrationPromise,e.abrupt("return",(o?o.catch(console.error):te(n).catch(console.error),i.fid));case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function fe(){return(fe=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r,i=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]&&i[1],r=t,e.next=4,de(r.appConfig);case 4:return e.next=6,te(r,n);case 6:return e.abrupt("return",e.sent.token);case 7:case"end":return e.stop()}},e)}))).apply(this,arguments)}function de(e){return pe.apply(this,arguments)}function pe(){return(pe=(0,r.Z)(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z(t);case 2:if(n=e.sent,r=n.registrationPromise,e.t0=r,!e.t0){e.next=8;break}return e.next=8,r;case 8:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ve(e){return d.create("missing-app-config-values",{valueName:e})}var ge="installations";(0,i._registerComponent)(new o.wA(ge,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw ve("App Configuration");if(!e.name)throw ve("App Name");for(var t=0,n=["projectId","apiKey","appId"];t<n.length;t++){var r=n[t];if(!e.options[r])throw ve(r)}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,i._getProvider)(t,"platform-logger"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),(0,i._registerComponent)(new o.wA("installations-internal",function(e){var t=e.getProvider("app").getImmediate(),n=(0,i._getProvider)(t,ge).getImmediate();return{getId:function(){return function(e){return he.apply(this,arguments)}(n)},getToken:function(e){return function(e){return fe.apply(this,arguments)}(n,e)}}},"PRIVATE")),(0,i.registerVersion)(l,"0.5.4"),(0,i.registerVersion)(l,"0.5.4","esm2017")},5422:function(t,n,r){"use strict";var i;r.d(n,{in:function(){return u},Yd:function(){return v},Ub:function(){return g},Am:function(){return m}});var o,a=[],u=((o=u||(u={}))[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT",u),c={debug:u.DEBUG,verbose:u.VERBOSE,info:u.INFO,warn:u.WARN,error:u.ERROR,silent:u.SILENT},l=u.INFO,h=(e(i={},u.DEBUG,"log"),e(i,u.VERBOSE,"log"),e(i,u.INFO,"info"),e(i,u.WARN,"warn"),e(i,u.ERROR,"error"),i),p=function(e,t){var n;if(!(t<e.logLevel)){var r=(new Date).toISOString(),i=h[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var o=arguments.length,a=new Array(o>2?o-2:0),u=2;u<o;u++)a[u-2]=arguments[u];(n=console)[i].apply(n,["[".concat(r,"]  ").concat(e.name,":")].concat(a))}},v=function(){function e(t){d(this,e),this.name=t,this._logLevel=l,this._logHandler=p,this._userLogHandler=null,a.push(this)}return f(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in u))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"==typeof e?c[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.DEBUG].concat(t)),this._logHandler.apply(this,[this,u.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.VERBOSE].concat(t)),this._logHandler.apply(this,[this,u.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.INFO].concat(t)),this._logHandler.apply(this,[this,u.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.WARN].concat(t)),this._logHandler.apply(this,[this,u.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,u.ERROR].concat(t)),this._logHandler.apply(this,[this,u.ERROR].concat(t))}}]),e}();function g(e){a.forEach(function(t){t.setLogLevel(e)})}function m(e,t){var n,r=s(a);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=c[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];var s=o.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(function(e){return e}).join(" ");n>=(null!=i?i:t.logLevel)&&e({level:u[n].toLowerCase(),message:s,args:o,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(o){r.e(o)}finally{r.f()}}},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function u(e){r(a,i,o,u,s,"next",e)}function s(e){r(a,i,o,u,s,"throw",e)}u(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=2340)}])}();