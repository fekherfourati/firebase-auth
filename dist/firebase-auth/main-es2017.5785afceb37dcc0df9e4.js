(self.webpackChunkfirebase_auth=self.webpackChunkfirebase_auth||[]).push([[179],{8255:function(e){function t(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=function(){return[]},t.resolve=t,t.id=8255,e.exports=t},7716:function(e,t,n){"use strict";n.d(t,{deG:function(){return an},tb:function(){return Ju},AFp:function(){return Gu},ip1:function(){return Hu},CZH:function(){return Zu},hGG:function(){return Hl},z2F:function(){return Ll},sBO:function(){return $c},Sil:function(){return ul},_Vd:function(){return pc},EJc:function(){return tl},SBq:function(){return _c},qLn:function(){return kr},vpe:function(){return Eu},gxx:function(){return Es},tBr:function(){return Nn},XFs:function(){return R},OlP:function(){return on},zs3:function(){return js},ZZ4:function(){return Fc},aQg:function(){return Vc},soG:function(){return el},YKP:function(){return eu},v3s:function(){return Fl},h0i:function(){return Xc},PXZ:function(){return Rl},R0b:function(){return dl},FiY:function(){return On},Lbi:function(){return Qu},g9A:function(){return Yu},Qsj:function(){return bc},FYo:function(){return wc},JOm:function(){return Or},Tiy:function(){return Tc},q3G:function(){return wr},tp0:function(){return Pn},EAV:function(){return jl},Rgc:function(){return Kc},dDg:function(){return vl},DyG:function(){return cn},q4F:function(){return Ec},GfV:function(){return Cc},s_b:function(){return nu},ifc:function(){return M},eFA:function(){return Nl},G48:function(){return kl},Gpc:function(){return f},X6Q:function(){return Sl},_c5:function(){return zl},VLi:function(){return Il},c2e:function(){return Xu},zSh:function(){return ks},wAp:function(){return sa},vHH:function(){return m},EiD:function(){return _r},mCW:function(){return tr},qzn:function(){return zn},JVY:function(){return Hn},pB0:function(){return Kn},eBb:function(){return Gn},L6k:function(){return Zn},LAX:function(){return Wn},cg1:function(){return na},Tjo:function(){return Bl},kL8:function(){return ra},yhl:function(){return $n},dqk:function(){return j},sIi:function(){return Ys},CqO:function(){return _o},QGY:function(){return mo},F4k:function(){return yo},RDi:function(){return Ee},AaK:function(){return l},z3N:function(){return Bn},qOj:function(){return Bs},TTD:function(){return ye},_Bn:function(){return lc},xp6:function(){return Ai},uIk:function(){return to},Tol:function(){return Mo},DjV:function(){return Qo},ekj:function(){return Lo},Suo:function(){return Vu},Xpm:function(){return Q},lG2:function(){return ie},Yz7:function(){return b},cJS:function(){return I},oAB:function(){return te},Yjl:function(){return se},Y36:function(){return oo},_UZ:function(){return ho},BQk:function(){return po},ynx:function(){return fo},qZA:function(){return lo},TgZ:function(){return uo},EpF:function(){return go},n5z:function(){return en},Ikx:function(){return Jo},SDv:function(){return ec},QtT:function(){return nc},pQV:function(){return tc},LFG:function(){return Sn},$8M:function(){return nn},NdJ:function(){return vo},CRH:function(){return ju},O4$:function(){return vt},oxw:function(){return Io},ALo:function(){return Iu},lcZ:function(){return Tu},Hsn:function(){return Eo},F$t:function(){return Co},Q6J:function(){return ao},s9C:function(){return So},MGl:function(){return ko},VKq:function(){return yu},WLB:function(){return _u},kEZ:function(){return vu},iGM:function(){return Fu},MAs:function(){return so},CHM:function(){return $e},LSH:function(){return br},kYT:function(){return ne},Udp:function(){return Do},YNc:function(){return io},W1O:function(){return $u},_uU:function(){return Wo},Oqu:function(){return Ko},hij:function(){return Yo},Gf:function(){return Uu}});var r=n(9765),i=n(5319),s=n(7574),o=n(6682),a=n(8819);function c(e){for(let t in e)if(e[t]===c)return t;throw Error("Could not find renamed property on target object.")}function u(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function l(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(l).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function h(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=c({__forward_ref__:c});function f(e){return e.__forward_ref__=f,e.toString=function(){return l(this())},e}function p(e){return g(e)?e():e}function g(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===f}class m extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function y(e){return"string"==typeof e?e:null==e?"":String(e)}function _(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():y(e)}function v(e,t){const n=t?` in ${t}`:"";throw new m("201",`No provider for ${_(e)} found${n}`)}function w(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e}`+(null==r?"":` [Expected=> ${n} ${r} ${t} <=Actual]`))}function b(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function I(e){return{providers:e.providers||[],imports:e.imports||[]}}function T(e){return C(e,S)||C(e,A)}function C(e,t){return e.hasOwnProperty(t)?e[t]:null}function E(e){return e&&(e.hasOwnProperty(k)||e.hasOwnProperty(x))?e[k]:null}const S=c({"\u0275prov":c}),k=c({"\u0275inj":c}),A=c({ngInjectableDef:c}),x=c({ngInjectorDef:c});var R=(()=>((R=R||{})[R.Default=0]="Default",R[R.Host=1]="Host",R[R.Self=2]="Self",R[R.SkipSelf=4]="SkipSelf",R[R.Optional=8]="Optional",R))();let N;function O(e){const t=N;return N=e,t}function P(e,t,n){const r=T(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&R.Optional?null:void 0!==t?t:void v(l(e),"Injector")}function D(e){return{toString:e}.toString()}var L=(()=>((L=L||{})[L.OnPush=0]="OnPush",L[L.Default=1]="Default",L))(),M=(()=>((M=M||{})[M.Emulated=0]="Emulated",M[M.None=2]="None",M[M.ShadowDom=3]="ShadowDom",M))();const F="undefined"!=typeof globalThis&&globalThis,U="undefined"!=typeof window&&window,V="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,j=F||"undefined"!=typeof global&&global||U||V,q={},B=[],z=c({"\u0275cmp":c}),$=c({"\u0275dir":c}),H=c({"\u0275pipe":c}),Z=c({"\u0275mod":c}),G=c({"\u0275loc":c}),W=c({"\u0275fac":c}),K=c({__NG_ELEMENT_ID__:c});let Y=0;function Q(e){return D(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===L.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||B,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||M.Emulated,id:"c",styles:e.styles||B,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=Y++,n.inputs=re(e.inputs,t),n.outputs=re(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(X):null,n})}function J(e){return oe(e)||function(e){return e[$]||null}(e)}function X(e){return function(e){return e[H]||null}(e)}const ee={};function te(e){return D(()=>{const t={type:e.type,bootstrap:e.bootstrap||B,declarations:e.declarations||B,imports:e.imports||B,exports:e.exports||B,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ee[e.id]=e.type),t})}function ne(e,t){return D(()=>{const n=ae(e,!0);n.declarations=t.declarations||B,n.imports=t.imports||B,n.exports=t.exports||B})}function re(e,t){if(null==e)return q;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const ie=Q;function se(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function oe(e){return e[z]||null}function ae(e,t){const n=e[Z]||null;if(!n&&!0===t)throw new Error(`Type ${l(e)} does not have '\u0275mod' property.`);return n}function ce(e){return Array.isArray(e)&&"object"==typeof e[1]}function ue(e){return Array.isArray(e)&&!0===e[1]}function le(e){return 0!=(8&e.flags)}function he(e){return 2==(2&e.flags)}function de(e){return 1==(1&e.flags)}function fe(e){return null!==e.template}function pe(e){return 0!=(512&e[2])}function ge(e,t){return e.hasOwnProperty(W)?e[W]:null}class me{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ye(){return _e}function _e(e){return e.type.prototype.ngOnChanges&&(e.setInput=we),ve}function ve(){const e=Ie(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===q)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function we(e,t,n,r){const i=Ie(e)||function(e,t){return e[be]=t}(e,{previous:q,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new me(c&&c.currentValue,t,o===q),e[r]=t}ye.ngInherit=!0;const be="__ngSimpleChanges__";function Ie(e){return e[be]||null}const Te="http://www.w3.org/2000/svg";let Ce;function Ee(e){Ce=e}function Se(){return void 0!==Ce?Ce:"undefined"!=typeof document?document:void 0}function ke(e){return!!e.listen}const Ae={createRenderer:(e,t)=>Se()};function xe(e){for(;Array.isArray(e);)e=e[0];return e}function Re(e,t){return xe(t[e])}function Ne(e,t){return xe(t[e.index])}function Oe(e,t){return e.data[t]}function Pe(e,t){return e[t]}function De(e,t){const n=t[e];return ce(n)?n:n[0]}function Le(e){return 4==(4&e[2])}function Me(e){return 128==(128&e[2])}function Fe(e,t){return null==t?null:e[t]}function Ue(e){e[18]=0}function Ve(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const je={lFrame:dt(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function qe(){return je.bindingsEnabled}function Be(){return je.lFrame.lView}function ze(){return je.lFrame.tView}function $e(e){return je.lFrame.contextLView=e,e[8]}function He(){let e=Ze();for(;null!==e&&64===e.type;)e=e.parent;return e}function Ze(){return je.lFrame.currentTNode}function Ge(){const e=je.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}function We(e,t){const n=je.lFrame;n.currentTNode=e,n.isParent=t}function Ke(){return je.lFrame.isParent}function Ye(){je.lFrame.isParent=!1}function Qe(){return je.isInCheckNoChangesMode}function Je(e){je.isInCheckNoChangesMode=e}function Xe(){const e=je.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function et(){return je.lFrame.bindingIndex}function tt(){return je.lFrame.bindingIndex++}function nt(e){const t=je.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function rt(e){je.lFrame.inI18n=e}function it(e,t){const n=je.lFrame;n.bindingIndex=n.bindingRootIndex=e,st(t)}function st(e){je.lFrame.currentDirectiveIndex=e}function ot(){return je.lFrame.currentQueryIndex}function at(e){je.lFrame.currentQueryIndex=e}function ct(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function ut(e,t,n){if(n&R.SkipSelf){let r=t,i=e;for(;!(r=r.parent,null!==r||n&R.Host||(r=ct(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;t=r,e=i}const r=je.lFrame=ht();return r.currentTNode=t,r.lView=e,!0}function lt(e){const t=ht(),n=e[1];je.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function ht(){const e=je.lFrame,t=null===e?null:e.child;return null===t?dt(e):t}function dt(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function ft(){const e=je.lFrame;return je.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const pt=ft;function gt(){const e=ft();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function mt(){return je.lFrame.selectedIndex}function yt(e){je.lFrame.selectedIndex=e}function _t(){const e=je.lFrame;return Oe(e.tView,e.selectedIndex)}function vt(){je.lFrame.currentNamespace=Te}function wt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function bt(e,t,n){Ct(e,t,3,n)}function It(e,t,n,r){(3&e[2])===n&&Ct(e,t,n,r)}function Tt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function Ct(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(Et(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function Et(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}class St{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function kt(e,t,n){const r=ke(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];xt(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function At(e){return 3===e||4===e||6===e}function xt(e){return 64===e.charCodeAt(0)}function Rt(e,t){if(null!==t&&0!==t.length)if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||Nt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function Nt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function Ot(e){return-1!==e}function Pt(e){return 32767&e}function Dt(e,t){let n=function(e){return e>>16}(e),r=t;for(;n>0;)r=r[15],n--;return r}let Lt=!0;function Mt(e){const t=Lt;return Lt=e,t}let Ft=0;function Ut(e,t){const n=jt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Vt(r.data,e),Vt(t,null),Vt(r.blueprint,null));const i=qt(e,t),s=e.injectorIndex;if(Ot(i)){const e=Pt(i),n=Dt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Vt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function jt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function qt(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return-1;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function Bt(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(K)&&(r=n[K]),null==r&&(r=n[K]=Ft++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function zt(e,t,n){if(n&R.Optional)return e;v(t,"NodeInjector")}function $t(e,t,n,r){if(n&R.Optional&&void 0===r&&(r=null),0==(n&(R.Self|R.Host))){const i=e[9],s=O(void 0);try{return i?i.get(t,r,n&R.Optional):P(t,r,n&R.Optional)}finally{O(s)}}return zt(r,t,n)}function Ht(e,t,n,r=R.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(K)?e[K]:void 0;return"number"==typeof t?t>=0?255&t:Gt:t}(n);if("function"==typeof s){if(!ut(t,e,r))return r&R.Host?zt(i,n,r):$t(t,n,r,i);try{const e=s(r);if(null!=e||r&R.Optional)return e;v(n)}finally{pt()}}else if("number"==typeof s){let i=null,o=jt(e,t),a=-1,c=r&R.Host?t[16][6]:null;for((-1===o||r&R.SkipSelf)&&(a=-1===o?qt(e,t):t[o+8],-1!==a&&Jt(r,!1)?(i=t[1],o=Pt(a),t=Dt(a,t)):o=-1);-1!==o;){const e=t[1];if(Qt(s,o,e.data)){const e=Wt(o,t,n,i,r,c);if(e!==Zt)return e}a=t[o+8],-1!==a&&Jt(r,t[1].data[o+8]===c)&&Qt(s,o,t)?(i=e,o=Pt(a),t=Dt(a,t)):o=-1}}}return $t(t,n,r,i)}const Zt={};function Gt(){return new Xt(He(),Be())}function Wt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=Kt(a,o,n,null==r?he(a)&&Lt:r!=o&&0!=(3&a.type),i&R.Host&&s===a);return null!==c?Yt(t,o,c,a):Zt}function Kt(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,u=s>>20,l=i?a+u:e.directiveEnd;for(let h=r?a:a+u;h<l;h++){const e=o[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=o[c];if(e&&fe(e)&&e.type===n)return c}return null}function Yt(e,t,n,r){let i=e[n];const s=t.data;if(function(e){return e instanceof St}(i)){const o=i;o.resolving&&function(e,t){throw new m("200",`Circular dependency in DI detected for ${e}`)}(_(s[n]));const a=Mt(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?O(o.injectImpl):null;ut(e,r,R.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=_e(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==c&&O(c),Mt(a),o.resolving=!1,pt()}}return i}function Qt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Jt(e,t){return!(e&R.Self||e&R.Host&&t)}class Xt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,n){return Ht(this._tNode,this._lView,e,n,t)}}function en(e){return D(()=>{const t=e.prototype.constructor,n=t[W]||tn(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[W]||tn(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function tn(e){return g(e)?()=>{const t=tn(p(e));return t&&t()}:ge(e)}function nn(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(At(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(He(),e)}const rn="__parameters__";function sn(e,t,n){return D(()=>{const r=function(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(rn)?e[rn]:Object.defineProperty(e,rn,{value:[]})[rn];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}class on{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=b({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new on("AnalyzeForEntryComponents"),cn=Function;function un(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),un(r,t)):t!==e&&t.push(r)}return t}function ln(e,t){e.forEach(e=>Array.isArray(e)?ln(e,t):t(e))}function hn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function dn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function fn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function pn(e,t,n){let r=mn(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function gn(e,t){const n=mn(e,t);if(n>=0)return e[1|n]}function mn(e,t){return function(e,t,n){let r=0,i=e.length>>n;for(;i!==r;){const s=r+(i-r>>1),o=e[s<<n];if(t===o)return s<<n;o>t?i=s:r=s+1}return~(i<<n)}(e,t,1)}const yn={},_n="__NG_DI_FLAG__",vn="ngTempTokenPath",wn=/\n/gm,bn="__source",In=c({provide:String,useValue:c});let Tn;function Cn(e){const t=Tn;return Tn=e,t}function En(e,t=R.Default){if(void 0===Tn)throw new Error("inject() must be called from an injection context");return null===Tn?P(e,void 0,t):Tn.get(e,t&R.Optional?null:void 0,t)}function Sn(e,t=R.Default){return(N||En)(p(e),t)}function kn(e){const t=[];for(let n=0;n<e.length;n++){const r=p(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=R.Default;for(let t=0;t<r.length;t++){const i=r[t],s=xn(i);"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(Sn(e,n))}else t.push(Sn(r))}return t}function An(e,t){return e[_n]=t,e.prototype[_n]=t,e}function xn(e){return e[_n]}function Rn(e,t,n,r){const i=e[vn];throw t[bn]&&i.unshift(t[bn]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=l(t);if(Array.isArray(t))i=t.map(l).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(wn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e[vn]=null,e}const Nn=An(sn("Inject",e=>({token:e})),-1),On=An(sn("Optional"),8),Pn=An(sn("SkipSelf"),4);let Dn;function Ln(e){var t;return(null===(t=function(){if(void 0===Dn&&(Dn=null,j.trustedTypes))try{Dn=j.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(e){}return Dn}())||void 0===t?void 0:t.createHTML(e))||e}class Mn{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Fn extends Mn{getTypeName(){return"HTML"}}class Un extends Mn{getTypeName(){return"Style"}}class Vn extends Mn{getTypeName(){return"Script"}}class jn extends Mn{getTypeName(){return"URL"}}class qn extends Mn{getTypeName(){return"ResourceURL"}}function Bn(e){return e instanceof Mn?e.changingThisBreaksApplicationSecurity:e}function zn(e,t){const n=$n(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function $n(e){return e instanceof Mn&&e.getTypeName()||null}function Hn(e){return new Fn(e)}function Zn(e){return new Un(e)}function Gn(e){return new Vn(e)}function Wn(e){return new jn(e)}function Kn(e){return new qn(e)}function Yn(e){const t=new Jn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Ln(""),"text/html")}catch(e){return!1}}()?new Qn(t):t}class Qn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Ln(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Jn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Ln(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Ln(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;("xmlns:ns1"===n||0===n.indexOf("ns1:"))&&e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Xn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,er=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function tr(e){return(e=String(e)).match(Xn)||e.match(er)?e:"unsafe:"+e}function nr(e){return(e=String(e)).split(",").map(e=>tr(e.trim())).join(", ")}function rr(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function ir(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const sr=rr("area,br,col,hr,img,wbr"),or=rr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ar=rr("rp,rt"),cr=ir(sr,ir(or,rr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),ir(ar,rr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),ir(ar,or)),ur=rr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),lr=rr("srcset"),hr=ir(ur,lr,rr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),rr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),dr=rr("script,style,template");class fr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!cr.hasOwnProperty(t))return this.sanitizedSomething=!0,!dr.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let r=0;r<n.length;r++){const e=n.item(r),t=e.name,i=t.toLowerCase();if(!hr.hasOwnProperty(i)){this.sanitizedSomething=!0;continue}let s=e.value;ur[i]&&(s=tr(s)),lr[i]&&(s=nr(s)),this.buf.push(" ",t,'="',mr(s),'"')}return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();cr.hasOwnProperty(t)&&!sr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(mr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const pr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,gr=/([^\#-~ |!])/g;function mr(e){return e.replace(/&/g,"&amp;").replace(pr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(gr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let yr;function _r(e,t){let n=null;try{yr=yr||Yn(e);let r=t?String(t):"";n=yr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=yr.getInertBodyElement(r)}while(r!==s);return Ln((new fr).sanitizeChildren(vr(n)||n))}finally{if(n){const e=vr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function vr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var wr=(()=>((wr=wr||{})[wr.NONE=0]="NONE",wr[wr.HTML=1]="HTML",wr[wr.STYLE=2]="STYLE",wr[wr.SCRIPT=3]="SCRIPT",wr[wr.URL=4]="URL",wr[wr.RESOURCE_URL=5]="RESOURCE_URL",wr))();function br(e){const t=function(){const e=Be();return e&&e[12]}();return t?t.sanitize(wr.URL,e)||"":zn(e,"URL")?Bn(e):tr(y(e))}const Ir="__ngContext__";function Tr(e,t){e[Ir]=t}function Cr(e){const t=function(e){return e[Ir]||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Er(e){return e.ngOriginalError}function Sr(e,...t){e.error(...t)}class kr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=(i=e)&&i.ngErrorLogger||Sr;var i;r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?e.ngDebugContext||this._findContext(Er(e)):null}_findOriginalError(e){let t=e&&Er(e);for(;t&&Er(t);)t=Er(t);return t||null}}const Ar=/^>|^->|<!--|-->|--!>|<!-$/g,xr=/(<|>)/;const Rr=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(j))();function Nr(e){return e instanceof Function?e():e}var Or=(()=>((Or=Or||{})[Or.Important=1]="Important",Or[Or.DashCase=2]="DashCase",Or))();let Pr;function Dr(e,t){return Pr(e,t)}function Lr(e){const t=e[3];return ue(t)?t[3]:t}function Mr(e){return Ur(e[13])}function Fr(e){return Ur(e[4])}function Ur(e){for(;null!==e&&!ue(e);)e=e[4];return e}function Vr(e,t,n,r,i){if(null!=r){let s,o=!1;ue(r)?s=r:ce(r)&&(o=!0,r=r[0]);const a=xe(r);0===e&&null!==n?null==i?Qr(t,n,a):Yr(t,n,a,i||null,!0):1===e&&null!==n?Yr(t,n,a,i||null,!0):2===e?ui(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==xe(n)&&Vr(t,e,r,s,i);for(let o=10;o<n.length;o++){const i=n[o];hi(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function jr(e,t){return ke(e)?e.createText(t):e.createTextNode(t)}function qr(e,t,n){ke(e)?e.setValue(t,n):t.textContent=n}function Br(e,t){return e.createComment(function(e){return e.replace(Ar,e=>e.replace(xr,"\u200b$1\u200b"))}(t))}function zr(e,t,n){return ke(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function $r(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Ve(i,-1)),n.splice(r,1)}function Hr(e,t){if(e.length<=10)return;const n=10+t,r=e[n];if(r){const i=r[17];null!==i&&i!==e&&$r(i,r),t>0&&(e[n-1][4]=r[4]);const s=dn(e,10+t);!function(e,t){hi(e,t,t[11],2,null,null),t[0]=null,t[6]=null}(r[1],r);const o=s[19];null!==o&&o.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Zr(e,t){if(!(256&t[2])){const n=t[11];ke(n)&&n.destroyNode&&hi(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return Gr(e[1],e);for(;t;){let n=null;if(ce(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)ce(t)&&Gr(t[1],t),t=t[3];null===t&&(t=e),ce(t)&&Gr(t[1],t),n=t&&t[4]}t=n}}(t)}}function Gr(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof St)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):xe(t[e]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)r[e]();t[7]=null}}(e,t),1===t[1].type&&ke(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&ue(t[3])){n!==t[3]&&$r(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Wr(e,t,n){return Kr(e,t.parent,n)}function Kr(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===M.None||t===M.Emulated)return null}return Ne(r,n)}function Yr(e,t,n,r,i){ke(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function Qr(e,t,n){ke(e)?e.appendChild(t,n):t.appendChild(n)}function Jr(e,t,n,r,i){null!==r?Yr(e,t,n,r,i):Qr(e,t,n)}function Xr(e,t){return ke(e)?e.parentNode(t):t.parentNode}function ei(e,t,n){return ri(e,t,n)}function ti(e,t,n){return 40&e.type?Ne(e,n):null}let ni,ri=ti;function ii(e,t){ri=e,ni=t}function si(e,t,n,r){const i=Wr(e,r,t),s=t[11],o=ei(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Jr(s,i,n[a],o,!1);else Jr(s,i,n,o,!1);void 0!==ni&&ni(s,r,t,n,i)}function oi(e,t){if(null!==t){const n=t.type;if(3&n)return Ne(t,e);if(4&n)return ci(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return oi(e,n);{const n=e[t.index];return ue(n)?ci(-1,n):xe(n)}}if(32&n)return Dr(t,e)()||xe(e[t.index]);{const n=ai(e,t);return null!==n?Array.isArray(n)?n[0]:oi(Lr(e[16]),n):oi(e,t.next)}}return null}function ai(e,t){return null!==t?e[16][6].projection[t.projection]:null}function ci(e,t){const n=10+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return oi(e,r)}return t[7]}function ui(e,t,n){const r=Xr(e,t);r&&function(e,t,n,r){ke(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}function li(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&Tr(xe(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)li(e,t,n.child,r,i,s,!1),Vr(t,e,i,a,s);else if(32&c){const o=Dr(n,r);let c;for(;c=o();)Vr(t,e,i,c,s);Vr(t,e,i,a,s)}else 16&c?di(e,t,r,n,i,s):Vr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function hi(e,t,n,r,i,s){li(n,r,e.firstChild,t,i,s,!1)}function di(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Vr(t,e,i,a[c],s);else li(e,t,a,o[3],i,s,!0)}function fi(e,t,n){ke(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function pi(e,t,n){ke(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function gi(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const mi="ng-template";function yi(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==gi(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function _i(e){return 4===e.type&&e.value!==mi}function vi(e,t,n){return t===(4!==e.type||n?e.value:mi)}function wi(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(At(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!vi(e,c,n)||""===c&&1===t.length){if(bi(r))return!1;o=!0}}else{const u=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!yi(e.attrs,u,n)){if(bi(r))return!1;o=!0}continue}const l=Ii(8&r?"class":c,i,_i(e),n);if(-1===l){if(bi(r))return!1;o=!0;continue}if(""!==u){let e;e=l>s?"":i[l+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==gi(t,u,0)||2&r&&u!==e){if(bi(r))return!1;o=!0}}}}else{if(!o&&!bi(r)&&!bi(c))return!1;if(o&&bi(c))continue;o=!1,r=c|1&r}}return bi(r)||o}function bi(e){return 0==(1&e)}function Ii(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function Ti(e,t,n=!1){for(let r=0;r<t.length;r++)if(wi(e,t[r],n))return!0;return!1}function Ci(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function Ei(e,t){return e?":not("+t.trim()+")":t}function Si(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""!==i&&!bi(o)&&(t+=Ei(s,i),i=""),r=o,s=s||!bi(r);n++}return""!==i&&(t+=Ei(s,i)),t}const ki={};function Ai(e){xi(ze(),Be(),mt()+e,Qe())}function xi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&bt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&It(t,r,0,n)}yt(n)}function Ri(e,t){return e<<17|t<<2}function Ni(e){return e>>17&32767}function Oi(e){return 2|e}function Pi(e){return(131068&e)>>2}function Di(e,t){return-131069&e|t<<2}function Li(e){return 1|e}function Mi(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];at(i),n.contentQueries(2,t[s],s)}}}function Fi(e,t,n,r,i,s,o,a,c,u){const l=t.blueprint.slice();return l[0]=i,l[2]=140|r,Ue(l),l[3]=l[15]=e,l[8]=n,l[10]=o||e&&e[10],l[11]=a||e&&e[11],l[12]=c||e&&e[12]||null,l[9]=u||e&&e[9]||null,l[6]=s,l[16]=2==t.type?e[16]:l,l}function Ui(e,t,n,r,i){let s=e.data[t];if(null===s)s=Vi(e,t,n,r,i),je.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=Ge();s.injectorIndex=null===e?-1:e.injectorIndex}return We(s,!0),s}function Vi(e,t,n,r,i){const s=Ze(),o=Ke(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}function ji(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function qi(e,t,n){lt(t);try{const r=e.viewQuery;null!==r&&_s(1,r,n);const i=e.template;null!==i&&$i(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Mi(e,t),e.staticViewQueries&&_s(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)fs(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0,e.firstCreatePass=!1),r}finally{t[2]&=-5,gt()}}function Bi(e,t,n,r){const i=t[2];if(256==(256&i))return;lt(t);const s=Qe();try{Ue(t),function(e){je.lFrame.bindingIndex=e}(e.bindingStartIndex),null!==n&&$i(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&bt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&It(t,n,0,null),Tt(t,0)}if(function(e){for(let t=Mr(e);null!==t;t=Fr(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Ve(r,1),n[2]|=1024}}}(t),function(e){for(let t=Mr(e);null!==t;t=Fr(t))for(let e=10;e<t.length;e++){const n=t[e],r=n[1];Me(n)&&Bi(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Mi(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&bt(t,n)}else{const n=e.contentHooks;null!==n&&It(t,n,1),Tt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)yt(~r);else{const i=r,s=n[++e],o=n[++e];it(s,i),o(2,t[i])}}}finally{yt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)hs(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&_s(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&bt(t,n)}else{const n=e.viewHooks;null!==n&&It(t,n,2),Tt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Ve(t[3],-1))}finally{gt()}}function zi(e,t,n,r){const i=t[10],s=!Qe(),o=Le(t);try{s&&!o&&i.begin&&i.begin(),o&&qi(e,t,r),Bi(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function $i(e,t,n,r,i){const s=mt(),o=2&r;try{yt(-1),o&&t.length>20&&xi(e,t,20,Qe()),n(r,i)}finally{yt(s)}}function Hi(e,t,n){if(le(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Zi(e,t,n){!qe()||(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Ut(n,t),Tr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=fe(r);s&&os(t,n,r);const c=Yt(t,e,a,n);Tr(c,t),null!==o&&cs(0,a-i,c,r,0,o),s&&(De(n.index,t)[8]=c)}}(e,t,n,Ne(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=je.lFrame.currentDirectiveIndex;try{yt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];st(n),(null!==r.hostBindings||0!==r.hostVars||null!==r.hostAttrs)&&ts(r,i)}}finally{yt(-1),st(o)}}(e,t,n))}function Gi(e,t,n=Ne){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Wi(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Ki(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Ki(e,t,n,r,i,s,o,a,c,u){const l=20+r,h=l+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:ki);return n}(l,h),f="function"==typeof u?u():u;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function Yi(e,t,n,r){const i=ws(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&bs(e).push(r,i.length-1))}function Qi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Ji(e,t,n,r,i,s,o,a){const c=Ne(t,n);let u,l=t.inputs;!a&&null!=l&&(u=l[r])?(Ts(e,n,u,r,i),he(t)&&function(e,t){const n=De(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r=function(e){return"class"===e?"className":"for"===e?"htmlFor":"formaction"===e?"formAction":"innerHtml"===e?"innerHTML":"readonly"===e?"readOnly":"tabindex"===e?"tabIndex":e}(r),i=null!=o?o(i,t.value||"",r):i,ke(s)?s.setProperty(c,r,i):xt(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function Xi(e,t,n,r){let i=!1;if(qe()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];Ti(n,o.selectors,!1)&&(i||(i=[]),Bt(Ut(n,t),e,o.type),fe(o)?(ns(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,is(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=ji(e,t,s.length,null);for(let i=0;i<s.length;i++){const u=s[i];n.mergedAttrs=Rt(n.mergedAttrs,u.hostAttrs),ss(e,n,t,c,u),rs(c,u,o),null!==u.contentQueries&&(n.flags|=8),(null!==u.hostBindings||null!==u.hostAttrs||0!==u.hostVars)&&(n.flags|=128);const l=u.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),!a&&(l.ngOnChanges||l.ngDoCheck)&&((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,u=null===i||_i(t)?null:us(n,i);s.push(u),o=Qi(n,c,o),a=Qi(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new m("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=Rt(n.mergedAttrs,n.attrs),i}function es(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function ts(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ns(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function rs(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;fe(t)&&(n[""]=e)}}function is(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function ss(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=ge(i.type)),o=new St(s,fe(i),null);e.blueprint[r]=o,n[r]=o,es(e,t,0,r,ji(e,n,i.hostVars,ki),i)}function os(e,t,n){const r=Ne(t,e),i=Wi(n),s=e[10],o=ps(e,Fi(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function as(e,t,n,r,i,s,o){if(null==s)ke(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);ke(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}function cs(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function us(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function ls(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function hs(e,t){const n=De(t,e);if(Me(n)){const e=n[1];80&n[2]?Bi(e,n,e.template,n[8]):n[5]>0&&ds(n)}}function ds(e){for(let n=Mr(e);null!==n;n=Fr(n))for(let e=10;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];Bi(e,t,e.template,t[8])}else t[5]>0&&ds(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=De(t[n],e);Me(r)&&r[5]>0&&ds(r)}}function fs(e,t){const n=De(t,e),r=n[1];(function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])})(r,n),qi(r,n,n[8])}function ps(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function gs(e){for(;e;){e[2]|=64;const t=Lr(e);if(pe(e)&&!t)return e;e=t}return null}function ms(e,t,n){const r=t[10];r.begin&&r.begin();try{Bi(e,t,e.template,n)}catch(i){throw Is(t,i),i}finally{r.end&&r.end()}}function ys(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=Cr(n),i=r[1];zi(i,r,i.template,n)}}(e[8])}function _s(e,t,n){at(0),t(e,n)}const vs=(()=>Promise.resolve(null))();function ws(e){return e[7]||(e[7]=[])}function bs(e){return e.cleanup||(e.cleanup=[])}function Is(e,t){const n=e[9],r=n?n.get(kr,null):null;r&&r.handleError(t)}function Ts(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],u=e.data[o];null!==u.setInput?u.setInput(c,i,r,a):c[a]=i}}function Cs(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=h(i,e):2==s&&(r=h(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const Es=new on("INJECTOR",-1);class Ss{get(e,t=yn){if(t===yn){const t=new Error(`NullInjectorError: No provider for ${l(e)}!`);throw t.name="NullInjectorError",t}return t}}const ks=new on("Set Injector scope."),As={},xs={};let Rs;function Ns(){return void 0===Rs&&(Rs=new Ss),Rs}function Os(e,t=null,n=null,r){return new Ps(e,n,t||Ns(),r)}class Ps{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&ln(t,n=>this.processProvider(n,e,t)),ln([e],e=>this.processInjectorType(e,[],i)),this.records.set(Es,Ms(void 0,this));const s=this.records.get(ks);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:l(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=yn,n=R.Default){this.assertNotDestroyed();const r=Cn(this),i=O(void 0);try{if(!(n&R.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof on)&&T(e);t=n&&this.injectableDefInScope(n)?Ms(Ds(e),As):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&R.Self?Ns():this.parent).get(e,t=n&R.Optional&&t===yn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[vn]=o[vn]||[]).unshift(l(e)),r)throw o;return Rn(o,e,"R3InjectorError",this.source)}throw o}finally{O(i),Cn(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(l(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=p(e)))return!1;let r=E(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{ln(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];ln(r,e=>this.processProvider(e,n,r||B))}}this.injectorDefTypes.add(s);const a=ge(s)||(()=>new s);this.records.set(s,Ms(a,As));const c=r.providers;if(null!=c&&!o){const t=e;ln(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Us(e=p(e))?e:p(e&&e.provide);const i=Fs(s=e)?Ms(void 0,s.useValue):Ms(Ls(s),As);var s;if(Us(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=Ms(void 0,As,!0),t.factory=()=>kn(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){return t.value===As&&(t.value=xs,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value;var n}injectableDefInScope(e){if(!e.providedIn)return!1;const t=p(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function Ds(e){const t=T(e),n=null!==t?t.factory:ge(e);if(null!==n)return n;if(e instanceof on)throw new Error(`Token ${l(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=fn(t,"?");throw new Error(`Can't resolve all parameters for ${l(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[S]||e[A]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function Ls(e,t,n){let r;if(Us(e)){const t=p(e);return ge(t)||Ds(t)}if(Fs(e))r=()=>p(e.useValue);else if(function(e){return!(!e||!e.useFactory)}(e))r=()=>e.useFactory(...kn(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>Sn(p(e.useExisting));else{const t=p(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return ge(t)||Ds(t);r=()=>new t(...kn(e.deps))}return r}function Ms(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Fs(e){return null!==e&&"object"==typeof e&&In in e}function Us(e){return"function"==typeof e}const Vs=function(e,t,n){return function(e,t=null,n=null,r){const i=Os(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};let js=(()=>{class e{static create(e,t){return Array.isArray(e)?Vs(e,t,""):Vs(e.providers,e.parent,e.name||"")}}return e.THROW_IF_NOT_FOUND=yn,e.NULL=new Ss,e.\u0275prov=b({token:e,providedIn:"any",factory:()=>Sn(Es)}),e.__NG_ELEMENT_ID__=-1,e})();function qs(e,t){wt(Cr(e)[1],He())}function Bs(e){let t=function(e){return Object.getPrototypeOf(e.prototype).constructor}(e.type),n=!0;const r=[e];for(;t;){let i;if(fe(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=zs(e.inputs),t.declaredInputs=zs(e.declaredInputs),t.outputs=zs(e.outputs);const n=i.hostBindings;n&&Zs(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&$s(e,s),o&&Hs(e,o),u(e.inputs,i.inputs),u(e.declaredInputs,i.declaredInputs),u(e.outputs,i.outputs),fe(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===Bs&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=Rt(i.hostAttrs,n=Rt(n,i.hostAttrs))}}(r)}function zs(e){return e===q?{}:e===B?[]:e}function $s(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Hs(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Zs(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}let Gs=null;function Ws(){if(!Gs){const e=j.Symbol;if(e&&e.iterator)Gs=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Gs=n)}}}return Gs}class Ks{constructor(e){this.wrapped=e}static wrap(e){return new Ks(e)}static unwrap(e){return Ks.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ks}}function Ys(e){return!!Qs(e)&&(Array.isArray(e)||!(e instanceof Map)&&Ws()in e)}function Qs(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Js(e,t,n){return e[t]=n}function Xs(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function eo(e,t,n,r){const i=Xs(e,t,n);return Xs(e,t+1,r)||i}function to(e,t,n,r){const i=Be();return Xs(i,tt(),t)&&(ze(),function(e,t,n,r,i,s){const o=Ne(e,t);as(t[11],o,s,e.value,n,r,i)}(_t(),i,e,t,n,r)),to}function no(e,t,n,r){return Xs(e,tt(),n)?t+y(n)+r:ki}function ro(e,t,n,r,i,s,o,a,c,u){const l=function(e,t,n,r,i,s){const o=eo(e,t,n,r);return eo(e,t+2,i,s)||o}(e,et(),n,i,o,c);return nt(4),l?t+y(n)+r+y(i)+s+y(o)+a+y(c)+u:ki}function io(e,t,n,r,i,s,o,a){const c=Be(),u=ze(),l=e+20,h=u.firstCreatePass?function(e,t,n,r,i,s,o,a,c){const u=t.consts,l=Ui(t,e,4,o||null,Fe(u,a));Xi(t,n,l,Fe(u,c)),wt(t,l);const h=l.tViews=Ki(2,l,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,u);return null!==t.queries&&(t.queries.template(t,l),h.queries=t.queries.embeddedTView(l)),l}(l,u,c,t,n,r,i,s,o):u.data[l];We(h,!1);const d=c[11].createComment("");si(u,c,d,h),Tr(d,c),ps(c,c[l]=ls(d,c,d,h)),de(h)&&Zi(u,c,h),null!=o&&Gi(c,h,a)}function so(e){return Pe(je.lFrame.contextLView,20+e)}function oo(e,t=R.Default){const n=Be();return null===n?Sn(e,t):Ht(He(),n,p(e),t)}function ao(e,t,n){const r=Be();return Xs(r,tt(),t)&&Ji(ze(),_t(),r,e,t,r[11],n,!1),ao}function co(e,t,n,r,i){const s=i?"class":"style";Ts(e,n,t.inputs[s],s,r)}function uo(e,t,n,r){const i=Be(),s=ze(),o=20+e,a=i[11],c=i[o]=zr(a,t,je.lFrame.currentNamespace),u=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=Ui(t,e,2,i,Fe(a,s));return Xi(t,n,c,Fe(a,o)),null!==c.attrs&&Cs(c,c.attrs,!1),null!==c.mergedAttrs&&Cs(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];We(u,!0);const l=u.mergedAttrs;null!==l&&kt(a,c,l);const h=u.classes;null!==h&&pi(a,c,h);const d=u.styles;null!==d&&fi(a,c,d),64!=(64&u.flags)&&si(s,i,c,u),0===je.lFrame.elementDepthCount&&Tr(c,i),je.lFrame.elementDepthCount++,de(u)&&(Zi(s,i,u),Hi(s,u,i)),null!==r&&Gi(i,u)}function lo(){let e=He();Ke()?Ye():(e=e.parent,We(e,!1));const t=e;je.lFrame.elementDepthCount--;const n=ze();n.firstCreatePass&&(wt(n,e),le(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&co(n,t,Be(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&co(n,t,Be(),t.stylesWithoutHost,!1)}function ho(e,t,n,r){uo(e,t,n,r),lo()}function fo(e,t,n){const r=Be(),i=ze(),s=e+20,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Fe(s,r),a=Ui(t,e,8,"ng-container",o);return null!==o&&Cs(a,o,!0),Xi(t,n,a,Fe(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];We(o,!0);const a=r[s]=r[11].createComment("");si(i,r,a,o),Tr(a,r),de(o)&&(Zi(i,r,o),Hi(i,o,r)),null!=n&&Gi(r,o)}function po(){let e=He();const t=ze();Ke()?Ye():(e=e.parent,We(e,!1)),t.firstCreatePass&&(wt(t,e),le(e)&&t.queries.elementEnd(e))}function go(){return Be()}function mo(e){return!!e&&"function"==typeof e.then}function yo(e){return!!e&&"function"==typeof e.subscribe}const _o=yo;function vo(e,t,n,r){const i=Be(),s=ze(),o=He();return function(e,t,n,r,i,s,o,a){const c=de(r),u=e.firstCreatePass&&bs(e),l=t[8],h=ws(t);let d=!0;if(3&r.type||a){const f=Ne(r,t),p=a?a(f):f,g=h.length,m=a?e=>a(xe(e[r.index])):r.index;if(ke(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,d=!1;else{s=bo(r,t,l,s,!1);const e=n.listen(p,i,s);h.push(s,e),u&&u.push(i,m,g,g+1)}}else s=bo(r,t,l,s,!0),p.addEventListener(i,s,o),h.push(s),u&&u.push(i,m,g,o)}else s=bo(r,t,l,s,!1);const f=r.outputs;let p;if(d&&null!==f&&(p=f[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=h.length;h.push(s,e),u&&u.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),vo}function wo(e,t,n,r){try{return!1!==n(r)}catch(i){return Is(e,i),!1}}function bo(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?De(e.index,t):t;0==(32&t[2])&&gs(o);let a=wo(t,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=wo(t,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function Io(e=1){return function(e){return(je.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,je.lFrame.contextLView))[8]}(e)}function To(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?Ti(e,s,!0):Ci(r,s))return i}else n=i}return n}function Co(e){const t=Be()[16][6];if(!t.projection){const n=t.projection=fn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?To(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function Eo(e,t=0,n){const r=Be(),i=ze(),s=Ui(i,20+e,16,null,n||null);null===s.projection&&(s.projection=t),Ye(),64!=(64&s.flags)&&function(e,t,n){di(t[11],0,t,n,Wr(e,n,t),ei(n.parent||t[6],n,t))}(i,r,s)}function So(e,t,n){return ko(e,"",t,"",n),So}function ko(e,t,n,r,i){const s=Be(),o=no(s,t,n,r);return o!==ki&&Ji(ze(),_t(),s,e,o,s[11],i,!1),ko}function Ao(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?Ni(s):Pi(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];xo(e[a],t)&&(c=!0,e[a+1]=r?Li(n):Oi(n)),a=r?Ni(n):Pi(n)}c&&(e[n+1]=r?Oi(s):Li(s))}function xo(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&mn(e,t)>=0}const Ro={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function No(e){return e.substring(Ro.key,Ro.keyEnd)}function Oo(e,t){const n=Ro.textEnd;return n===t?-1:(t=Ro.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,Ro.key=t,n),Po(e,t,n))}function Po(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function Do(e,t,n){return Uo(e,t,n,!1),Do}function Lo(e,t){return Uo(e,t,null,!0),Lo}function Mo(e){Vo(pn,Fo,e,!0)}function Fo(e,t){for(let n=function(e){return function(e){Ro.key=0,Ro.keyEnd=0,Ro.value=0,Ro.valueEnd=0,Ro.textEnd=e.length}(e),Oo(e,Po(e,0,Ro.textEnd))}(t);n>=0;n=Oo(t,n))pn(e,No(t),!0)}function Uo(e,t,n,r){const i=Be(),s=ze(),o=nt(2);s.firstUpdatePass&&qo(s,e,o,r),t!==ki&&Xs(i,o,t)&&$o(s,s.data[mt()],i,i[11],e,i[o+1]=function(e,t){return null==e||("string"==typeof t?e+=t:"object"==typeof e&&(e=l(Bn(e)))),e}(t,n),r,o)}function Vo(e,t,n,r){const i=ze(),s=nt(2);i.firstUpdatePass&&qo(i,null,s,r);const o=Be();if(n!==ki&&Xs(o,s,n)){const a=i.data[mt()];if(Go(a,r)&&!jo(i,s)){let e=r?a.classesWithoutHost:a.stylesWithoutHost;null!==e&&(n=h(e,n||"")),co(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===ki&&(i=B);let c=0,u=0,l=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==l||null!==h;){const d=c<i.length?i[c+1]:void 0,f=u<s.length?s[u+1]:void 0;let p,g=null;l===h?(c+=2,u+=2,d!==f&&(g=h,p=f)):null===h||null!==l&&l<h?(c+=2,g=l):(u+=2,g=h,p=f),null!==g&&$o(e,t,n,r,g,p,o,a),l=c<i.length?i[c]:null,h=u<s.length?s[u]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return B;const r=[],i=Bn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),r,s)}}function jo(e,t){return t>=e.expandoStartIndex}function qo(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[mt()],o=jo(e,n);Go(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=je.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=zo(n=Bo(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Bo(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==Pi(r))return e[Ni(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Bo(null,e,t,n[1],r),n=zo(n,t.attrs,r),function(e,t,n,r){e[Ni(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=zo(r,e[s].hostAttrs,n);return zo(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=Ni(o),c=Pi(o);e[r]=n;let u,l=!1;if(Array.isArray(n)){const e=n;u=e[1],(null===u||mn(e,u)>0)&&(l=!0)}else u=n;if(i)if(0!==c){const t=Ni(e[a+1]);e[r+1]=Ri(t,a),0!==t&&(e[t+1]=Di(e[t+1],r)),e[a+1]=function(e,t){return 131071&e|t<<17}(e[a+1],r)}else e[r+1]=Ri(a,0),0!==a&&(e[a+1]=Di(e[a+1],r)),a=r;else e[r+1]=Ri(c,0),0===a?a=r:e[c+1]=Di(e[c+1],r),c=r;l&&(e[r+1]=Oi(e[r+1])),Ao(e,u,r,!0),Ao(e,u,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&mn(s,t)>=0&&(n[r+1]=Li(n[r+1]))}(t,u,e,r,s),o=Ri(a,c),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function Bo(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=zo(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function zo(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),pn(e,o,!!n||t[++s]))}return void 0===e?null:e}function $o(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,u=c[a+1];Zo(function(e){return 1==(1&e)}(u)?Ho(c,t,n,i,Pi(u),o):void 0)||(Zo(s)||function(e){return 2==(2&e)}(u)&&(s=Ho(c,null,n,i,a,o)),function(e,t,n,r,i){const s=ke(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:Or.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=Or.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Re(mt(),n),i,s))}function Ho(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,u=null===c;let l=n[i+1];l===ki&&(l=u?B:void 0);let h=u?gn(l,r):c===r?l:void 0;if(s&&!Zo(h)&&(h=gn(t,r)),Zo(h)&&(a=h,o))return a;const d=e[i+1];i=o?Ni(d):Pi(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=gn(e,r))}return a}function Zo(e){return void 0!==e}function Go(e,t){return 0!=(e.flags&(t?16:32))}function Wo(e,t=""){const n=Be(),r=ze(),i=e+20,s=r.firstCreatePass?Ui(r,i,1,t,null):r.data[i],o=n[i]=jr(n[11],t);si(r,n,o,s),We(s,!1)}function Ko(e){return Yo("",e,""),Ko}function Yo(e,t,n){const r=Be(),i=no(r,e,t,n);return i!==ki&&function(e,t,n){const r=Re(t,e);qr(e[11],r,n)}(r,mt(),i),Yo}function Qo(e,t,n,r,i,s,o,a,c){Vo(pn,Fo,ro(Be(),e,t,n,r,i,s,o,a,c),!0)}function Jo(e,t,n){const r=Be();return Xs(r,tt(),t)&&Ji(ze(),_t(),r,e,t,r[11],n,!0),Jo}const Xo=void 0;var ea=["en",[["a","p"],["AM","PM"],Xo],[["AM","PM"],Xo,Xo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Xo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Xo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Xo,"{1} 'at' {0}",Xo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){const t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let ta={};function na(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=ia(t);if(n)return n;const r=t.split("-")[0];if(n=ia(r),n)return n;if("en"===r)return ea;throw new Error(`Missing locale data for the locale "${e}".`)}function ra(e){return na(e)[sa.PluralCase]}function ia(e){return e in ta||(ta[e]=j.ng&&j.ng.common&&j.ng.common.locales&&j.ng.common.locales[e]),ta[e]}var sa=(()=>((sa=sa||{})[sa.LocaleId=0]="LocaleId",sa[sa.DayPeriodsFormat=1]="DayPeriodsFormat",sa[sa.DayPeriodsStandalone=2]="DayPeriodsStandalone",sa[sa.DaysFormat=3]="DaysFormat",sa[sa.DaysStandalone=4]="DaysStandalone",sa[sa.MonthsFormat=5]="MonthsFormat",sa[sa.MonthsStandalone=6]="MonthsStandalone",sa[sa.Eras=7]="Eras",sa[sa.FirstDayOfWeek=8]="FirstDayOfWeek",sa[sa.WeekendRange=9]="WeekendRange",sa[sa.DateFormat=10]="DateFormat",sa[sa.TimeFormat=11]="TimeFormat",sa[sa.DateTimeFormat=12]="DateTimeFormat",sa[sa.NumberSymbols=13]="NumberSymbols",sa[sa.NumberFormats=14]="NumberFormats",sa[sa.CurrencyCode=15]="CurrencyCode",sa[sa.CurrencySymbol=16]="CurrencySymbol",sa[sa.CurrencyName=17]="CurrencyName",sa[sa.Currencies=18]="Currencies",sa[sa.Directionality=19]="Directionality",sa[sa.PluralCase=20]="PluralCase",sa[sa.ExtraData=21]="ExtraData",sa))();const oa=["zero","one","two","few","many"],aa="en-US",ca={marker:"element"},ua={marker:"ICU"};var la=(()=>((la=la||{})[la.SHIFT=2]="SHIFT",la[la.APPEND_EAGERLY=1]="APPEND_EAGERLY",la[la.COMMENT=2]="COMMENT",la))();let ha=aa;function da(e){(function(e,t){null==e&&w(t,e,null,"!=")})(e,"Expected localeId to be defined"),"string"==typeof e&&(ha=e.toLowerCase().replace(/_/g,"-"))}function fa(e,t,n){const r=t.insertBeforeIndex,i=Array.isArray(r)?r[0]:r;return null===i?ti(e,0,n):xe(n[i])}function pa(e,t,n,r,i){const s=t.insertBeforeIndex;if(Array.isArray(s)){let o=r,a=null;if(3&t.type||(a=o,o=i),null!==o&&0==(2&t.flags))for(let t=1;t<s.length;t++)Yr(e,o,n[s[t]],a,!1)}}function ga(e,t){if(e.push(t),e.length>1)for(let n=e.length-2;n>=0;n--){const r=e[n];ma(r)||ya(r,t)&&null===_a(r)&&va(r,t.index)}}function ma(e){return!(64&e.type)}function ya(e,t){return ma(t)||e.index>t.index}function _a(e){const t=e.insertBeforeIndex;return Array.isArray(t)?t[0]:t}function va(e,t){const n=e.insertBeforeIndex;Array.isArray(n)?n[0]=t:(ii(fa,pa),e.insertBeforeIndex=t)}function wa(e,t){const n=e.data[t];return null===n||"string"==typeof n?null:n.hasOwnProperty("currentCaseLViewIndex")?n:n.value}function ba(e,t,n){const r=Vi(e,n,64,null,null);return ga(t,r),r}function Ia(e,t){const n=t[e.currentCaseLViewIndex];return null===n?n:n<0?~n:n}function Ta(e){return e>>>17}function Ca(e){return(131070&e)>>>1}let Ea=0,Sa=0;function ka(e,t,n,r){const i=n[11];let s,o=null;for(let a=0;a<t.length;a++){const c=t[a];if("string"==typeof c){const e=t[++a];null===n[e]&&(n[e]=jr(i,c))}else if("number"==typeof c)switch(1&c){case 0:const u=Ta(c);let l,h;if(null===o&&(o=u,s=Xr(i,r)),u===o?(l=r,h=s):(l=null,h=xe(n[u])),null!==h){const t=Ca(c);Yr(i,h,n[t],l,!1);const r=wa(e,t);if(null!==r&&"object"==typeof r){const t=Ia(r,n);null!==t&&ka(e,r.create[t],n,n[r.anchorIdx])}}break;case 1:const d=t[++a],f=t[++a];as(i,Re(c>>>1,n),null,null,d,f,null);break;default:throw new Error(`Unable to determine the type of mutate operation for "${c}"`)}else switch(c){case ua:const e=t[++a],r=t[++a];null===n[r]&&Tr(n[r]=Br(i,e),n);break;case ca:const s=t[++a],o=t[++a];null===n[o]&&Tr(n[o]=zr(i,s,null),n)}}}function Aa(e,t,n,r,i){for(let s=0;s<n.length;s++){const o=n[s],a=n[++s];if(o&i){let i="";for(let o=s+1;o<=s+a;o++){const s=n[o];if("string"==typeof s)i+=s;else if("number"==typeof s)if(s<0)i+=y(t[r-s]);else{const a=s>>>2;switch(3&s){case 1:const s=n[++o],c=n[++o],u=e.data[a];"string"==typeof u?as(t[11],t[a],null,u,s,i,c):Ji(e,u,t,s,i,t[11],c,!1);break;case 0:const l=t[a];null!==l&&qr(t[11],l,i);break;case 2:Ra(e,wa(e,a),t,i);break;case 3:xa(e,wa(e,a),r,t)}}}}else{const i=n[s+1];if(i>0&&3==(3&i)){const n=wa(e,i>>>2);t[n.currentCaseLViewIndex]<0&&xa(e,n,r,t)}}s+=a}}function xa(e,t,n,r){let i=r[t.currentCaseLViewIndex];if(null!==i){let s=Ea;i<0&&(i=r[t.currentCaseLViewIndex]=~i,s=-1),Aa(e,r,t.update[i],n,s)}}function Ra(e,t,n,r){const i=function(e,t){let n=e.cases.indexOf(t);if(-1===n)switch(e.type){case 1:{const r=function(e,t){const n=ra(t)(parseInt(e,10)),r=oa[n];return void 0!==r?r:"other"}(t,ha);n=e.cases.indexOf(r),-1===n&&"other"!==r&&(n=e.cases.indexOf("other"));break}case 0:n=e.cases.indexOf("other")}return-1===n?null:n}(t,r);if(Ia(t,n)!==i&&(Na(e,t,n),n[t.currentCaseLViewIndex]=null===i?null:~i,null!==i)){const r=n[t.anchorIdx];r&&ka(e,t.create[i],n,r)}}function Na(e,t,n){let r=Ia(t,n);if(null!==r){const i=t.remove[r];for(let t=0;t<i.length;t++){const r=i[t];if(r>0){const e=Re(r,n);null!==e&&ui(n[11],e)}else Na(e,wa(e,~r),n)}}}function Oa(){const e=[];let t,n,r=-1;function i(e,t){r=0;const i=Ia(e,t);n=null!==i?e.remove[i]:B}function s(){if(r<n.length){const o=n[r++];return o>0?t[o]:(e.push(r,n),i(t[1].data[~o],t),s())}return 0===e.length?null:(n=e.pop(),r=e.pop(),s())}return function(n,r){for(t=r;e.length;)e.pop();return i(n.value,r),s}}const Pa=/\ufffd(\d+):?\d*\ufffd/gi,Da=/\ufffd(\d+)\ufffd/,La=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Ma=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,Fa=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,Ua=/\uE500/g;function Va(e,t,n,r,i,s,o){const a=ji(e,r,1,null);let c=a<<la.SHIFT,u=Ge();t===u&&(u=null),null===u&&(c|=la.APPEND_EAGERLY),o&&(c|=la.COMMENT,function(e){void 0===Pr&&(Pr=e())}(Oa)),i.push(c,null===s?"":s);const l=Vi(e,a,o?32:1,null===s?"":s,null);ga(n,l);const h=l.index;return We(l,!1),null!==u&&t!==u&&function(e,t){let n=e.insertBeforeIndex;null===n?(ii(fa,pa),n=e.insertBeforeIndex=[null,t]):(function(e,t,n){e!=t&&w(n,e,t,"==")}(Array.isArray(n),!0,"Expecting array here"),n.push(t))}(u,h),l}function ja(e,t,n,r,i,s,o){const a=o.match(Pa),c=Va(e,t,n,s,r,a?null:o,!1);a&&qa(i,o,c.index,null,0,null)}function qa(e,t,n,r,i,s){const o=e.length,a=o+1;e.push(null,null);const c=o+2,u=t.split(Pa);let l=0;for(let h=0;h<u.length;h++){const t=u[h];if(1&h){const n=i+parseInt(t,10);e.push(-1-n),l|=Ba(n)}else""!==t&&e.push(t)}return e.push(n<<2|(r?1:0)),r&&e.push(r,s),e[o]=l,e[a]=e.length-c,l}function Ba(e){return 1<<Math.min(e,31)}function za(e){let t,n,r="",i=0,s=!1;for(;null!==(t=Ma.exec(e));)s?t[0]===`\ufffd/*${n}\ufffd`&&(i=t.index,s=!1):(r+=e.substring(i,t.index+t[0].length),n=t[1],s=!0);return r+=e.substr(i),r}function $a(e,t,n,r,i,s){let o=0;const a={type:i.type,currentCaseLViewIndex:ji(e,t,1,null),anchorIdx:s,cases:[],create:[],remove:[],update:[]};(function(e,t,n){e.push(Ba(t.mainBinding),2,-1-t.mainBinding,n<<2|2)})(n,i,s),function(e,t,n){const r=e.data[t];null===r?e.data[t]=n:r.value=n}(e,s,a);const c=i.values;for(let u=0;u<c.length;u++){const s=c[u],l=[];for(let e=0;e<s.length;e++){const t=s[e];if("string"!=typeof t){const n=l.push(t)-1;s[e]=`\x3c!--\ufffd${n}\ufffd--\x3e`}}o=Ga(e,a,t,n,r,i.cases[u],s.join(""),l)|o}o&&function(e,t,n){e.push(t,1,n<<2|3)}(n,o,s)}function Ha(e){const t=[],n=[];let r=1,i=0;const s=Za(e=e.replace(La,function(e,t,n){return r="select"===n?0:1,i=parseInt(t.substr(1),10),""}));for(let o=0;o<s.length;){let e=s[o++].trim();1===r&&(e=e.replace(/\s*(?:=)?(\w+)\s*/,"$1")),e.length&&t.push(e);const i=Za(s[o++]);t.length>n.length&&n.push(i)}return{type:r,mainBinding:i,cases:t,values:n}}function Za(e){if(!e)return[];let t=0;const n=[],r=[],i=/[{}]/g;let s;for(i.lastIndex=0;s=i.exec(e);){const i=s.index;if("}"==s[0]){if(n.pop(),0==n.length){const n=e.substring(t,i);La.test(n)?r.push(Ha(n)):r.push(n),t=i+1}}else{if(0==n.length){const n=e.substring(t,i);r.push(n),t=i+1}n.push("{")}}const o=e.substring(t);return r.push(o),r}function Ga(e,t,n,r,i,s,o,a){const c=[],u=[],l=[];t.cases.push(s),t.create.push(c),t.remove.push(u),t.update.push(l);const h=Yn(Se()).getInertBodyElement(o),d=vr(h)||h;return d?Wa(e,t,n,r,c,u,l,d,i,a,0):0}function Wa(e,t,n,r,i,s,o,a,c,u,l){let h=0,d=a.firstChild;for(;d;){const a=ji(e,n,1,null);switch(d.nodeType){case Node.ELEMENT_NODE:const f=d,p=f.tagName.toLowerCase();if(cr.hasOwnProperty(p)){Qa(i,ca,p,c,a),e.data[a]=p;const g=f.attributes;for(let e=0;e<g.length;e++){const t=g.item(e),n=t.name.toLowerCase();t.value.match(Pa)?hr.hasOwnProperty(n)&&qa(o,t.value,a,t.name,0,ur[n]?tr:lr[n]?nr:null):Ja(i,a,t)}h=Wa(e,t,n,r,i,s,o,d,a,u,l+1)|h,Ka(s,a,l)}break;case Node.TEXT_NODE:const g=d.textContent||"",m=g.match(Pa);Qa(i,null,m?"":g,c,a),Ka(s,a,l),m&&(h=qa(o,g,a,null,0,null)|h);break;case Node.COMMENT_NODE:const y=Da.exec(d.textContent||"");if(y){const t=u[parseInt(y[1],10)];Qa(i,ua,"",c,a),$a(e,n,r,c,t,a),Ya(s,a,l)}}d=d.nextSibling}return h}function Ka(e,t,n){0===n&&e.push(t)}function Ya(e,t,n){0===n&&(e.push(~t),e.push(t))}function Qa(e,t,n,r,i){null!==t&&e.push(t),e.push(n,i,function(e,t,n){return 0|t<<17|n<<1}(0,r,i))}function Ja(e,t,n){e.push(t<<1|1,n.name,n.value)}function Xa(e,t,n=-1){const r=ze(),i=Be(),s=20+e,o=Fe(r.consts,t),a=Ge();r.firstCreatePass&&function(e,t,n,r,i,s){const o=Ge(),a=[],c=[],u=[[]],l=function(e){return e.replace(Ua," ")}(i=function(e,t){if(function(e){return-1===e}(t))return za(e);{const n=e.indexOf(`:${t}\ufffd`)+2+t.toString().length,r=e.search(new RegExp(`\ufffd\\/\\*\\d+:${t}\ufffd`));return za(e.substring(n,r))}}(i,s)).split(Fa);for(let h=0;h<l.length;h++){let r=l[h];if(0==(1&h)){const s=Za(r);for(let r=0;r<s.length;r++){let l=s[r];if(0==(1&r)){const t=l;""!==t&&ja(e,o,u[0],a,c,n,t)}else{const r=l;if("object"!=typeof r)throw new Error(`Unable to parse ICU expression in "${i}" message.`);$a(e,n,c,t,r,Va(e,o,u[0],n,a,"",!0).index)}}}else{const t=47===r.charCodeAt(0),n=(r.charCodeAt(t?1:0),20+Number.parseInt(r.substring(t?2:1)));if(t)u.shift(),We(Ge(),!1);else{const t=ba(e,u[0],n);u.unshift([]),We(t,!0)}}}e.data[r]={create:a,update:c}}(r,null===a?0:a.index,i,s,o,n);const c=r.data[s],u=Kr(r,a===i[6]?null:a,i);(function(e,t,n,r){const i=e[11];for(let s=0;s<t.length;s++){const o=t[s++],a=t[s],c=(o&la.COMMENT)===la.COMMENT,u=(o&la.APPEND_EAGERLY)===la.APPEND_EAGERLY,l=o>>>la.SHIFT;let h=e[l];null===h&&(h=e[l]=c?i.createComment(a):jr(i,a)),u&&null!==n&&Yr(i,n,h,r,!1)}})(i,c.create,u,a&&8&a.type?i[a.index]:null),rt(!0)}function ec(e,t,n){Xa(e,t,n),rt(!1)}function tc(e){return function(e){e&&(Ea|=1<<Math.min(Sa,31)),Sa++}(Xs(Be(),tt(),e)),tc}function nc(e){!function(e,t,n){if(Sa>0){const r=e.data[n];Aa(e,t,Array.isArray(r)?r:r.update,et()-Sa-1,Ea)}Ea=0,Sa=0}(ze(),Be(),e+20)}function rc(e,t,n,r,i){if(e=p(e),Array.isArray(e))for(let s=0;s<e.length;s++)rc(e[s],t,n,r,i);else{const s=ze(),o=Be();let a=Us(e)?e:p(e.provide),c=Ls(e);const u=He(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Us(e)||!e.multi){const r=new St(c,i,oo),f=oc(a,t,i?l:l+d,h);-1===f?(Bt(Ut(u,o),s,a),ic(s,e,t.length),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(r),o.push(r)):(n[f]=r,o[f]=r)}else{const f=oc(a,t,l+d,h),p=oc(a,t,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){Bt(Ut(u,o),s,a);const l=function(e,t,n,r,i){const s=new St(e,n,oo);return s.multi=[],s.index=t,s.componentProviders=0,sc(s,i,r&&!n),s}(i?cc:ac,n.length,i,r,c);!i&&m&&(n[p].providerFactory=l),ic(s,e,t.length,0),t.push(a),u.directiveStart++,u.directiveEnd++,i&&(u.providerIndexes+=1048576),n.push(l),o.push(l)}else ic(s,e,f>-1?f:p,sc(n[i?p:f],c,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function ic(e,t,n,r){const i=Us(t);if(i||function(e){return!!e.useClass}(t)){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function sc(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function oc(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function ac(e,t,n,r){return uc(this.multi,[])}function cc(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Yt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),uc(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],uc(i,s);return s}function uc(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function lc(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=ze();if(r.firstCreatePass){const i=fe(e);rc(n,r.data,r.blueprint,i,!0),rc(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class hc{}const dc="ngComponent";class fc{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${l(e)}. Did you add it to @NgModule.entryComponents?`);return t[dc]=e,t}(e)}}let pc=(()=>{class e{}return e.NULL=new fc,e})();function gc(...e){}function mc(e,t){return new _c(Ne(e,t))}const yc=function(){return mc(He(),Be())};let _c=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=yc,e})();function vc(e){return e instanceof _c?e.nativeElement:e}class wc{}let bc=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>Ic(),e})();const Ic=function(){const e=Be(),t=De(He().index,e);return function(e){return e[11]}(ce(t)?t:e)};let Tc=(()=>{class e{}return e.\u0275prov=b({token:e,providedIn:"root",factory:()=>null}),e})();class Cc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const Ec=new Cc("12.2.14");class Sc{constructor(){}supports(e){return Ys(e)}create(e){return new Ac(e)}}const kc=(e,t)=>t;class Ac{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||kc}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<Oc(n,r,i)?t:n,o=Oc(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ys(e))throw new Error(`Error trying to diff '${l(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Ws()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new xc(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new Nc),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Nc),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class xc{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Rc{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class Nc{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new Rc,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Oc(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class Pc{constructor(){}supports(e){return e instanceof Map||Qs(e)}create(){return new Dc}}class Dc{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Qs(e)))throw new Error(`Error trying to diff '${l(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new Lc(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class Lc{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Mc(){return new Fc([new Sc])}let Fc=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Mc()),deps:[[e,new Pn,new On]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${function(e){return e.name||typeof e}(e)}'`)}}return e.\u0275prov=b({token:e,providedIn:"root",factory:Mc}),e})();function Uc(){return new Vc([new Pc])}let Vc=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Uc()),deps:[[e,new Pn,new On]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=b({token:e,providedIn:"root",factory:Uc}),e})();function jc(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(xe(s)),ue(s))for(let e=10;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&jc(t[1],t,n,r)}const o=n.type;if(8&o)jc(e,t,n.child,r);else if(32&o){const e=Dr(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=ai(t,n);if(Array.isArray(e))r.push(...e);else{const n=Lr(t[16]);jc(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class qc{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return jc(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(ue(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Hr(e,n),dn(t,n))}this._attachedToViewContainer=!1}Zr(this._lView[1],this._lView)}onDestroy(e){Yi(this._lView[1],this._lView,null,e)}markForCheck(){gs(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ms(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Je(!0);try{ms(e,t,n)}finally{Je(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,hi(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Bc extends qc{constructor(e){super(e),this._view=e}detectChanges(){ys(this._view)}checkNoChanges(){!function(e){Je(!0);try{ys(e)}finally{Je(!1)}}(this._view)}get context(){return null}}const zc=function(e){return function(e,t,n){if(he(e)&&!n){const n=De(e.index,t);return new qc(n,n)}return 47&e.type?new qc(t[16],t):null}(He(),Be(),16==(16&e))};let $c=(()=>{class e{}return e.__NG_ELEMENT_ID__=zc,e})();const Hc=[new Pc],Zc=new Fc([new Sc]),Gc=new Vc(Hc),Wc=function(){return Jc(He(),Be())};let Kc=(()=>{class e{}return e.__NG_ELEMENT_ID__=Wc,e})();const Yc=Kc,Qc=class extends Yc{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Fi(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),qi(t,n,e),new qc(n)}};function Jc(e,t){return 4&e.type?new Qc(t,e,mc(e,t)):null}class Xc{}class eu{}const tu=function(){return au(He(),Be())};let nu=(()=>{class e{}return e.__NG_ELEMENT_ID__=tu,e})();const ru=nu,iu=class extends ru{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return mc(this._hostTNode,this._hostLView)}get injector(){return new Xt(this._hostTNode,this._hostLView)}get parentInjector(){const e=qt(this._hostTNode,this._hostLView);if(Ot(e)){const t=Dt(e,this._hostLView),n=Pt(e);return new Xt(t[1].data[n+8],t)}return new Xt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=su(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Xc,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(ue(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new iu(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=10+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-10?(t[4]=n[i],hn(n,10+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=ci(i,s),a=n[11],c=Xr(a,s[7]);return null!==c&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,hi(e,r,n,1,i,s)}(r,s[6],a,n,c,o),e.attachToViewContainerRef(),hn(ou(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=su(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Hr(this._lContainer,t);n&&(dn(ou(this._lContainer),t),Zr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Hr(this._lContainer,t);return n&&null!=dn(ou(this._lContainer),t)?new qc(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function su(e){return e[8]}function ou(e){return e[8]||(e[8]=[])}function au(e,t){let n;const r=t[e.index];if(ue(r))n=r;else{let i;if(8&e.type)i=xe(r);else{const n=t[11];i=n.createComment("");const r=Ne(e,t);Yr(n,Xr(n,r),i,function(e,t){return ke(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=ls(r,t,i,e),ps(t,n)}return new iu(n,e,t)}const cu={};class uu extends pc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=oe(e);return new du(t,this.ngModule)}}function lu(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const hu=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Rr});class du extends hc{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(Si).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return lu(this.componentDef.inputs)}get outputs(){return lu(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,cu,i);return s!==cu||r===cu?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(wc,Ae),o=i.get(Tc,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",u=n?function(e,t,n){if(ke(e))return e.selectRootElement(t,n===M.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):zr(s.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?Te:"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),l=this.componentDef.onPush?576:528,h=function(e,t){return{components:[],scheduler:e||Rr,clean:vs,playerHandler:t||null,flags:0}}(),d=Ki(0,null,null,1,0,null,null,null,null,null),f=Fi(null,d,h,l,null,null,s,a,o,i);let p,g;lt(f);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Ui(o,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(Cs(a,c,!0),null!==e&&(kt(i,e,c),null!==a.classes&&pi(i,e,a.classes),null!==a.styles&&fi(i,e,a.styles)));const u=r.createRenderer(e,t),l=Fi(n,Wi(t),null,t.onPush?64:16,n[20],a,r,u,s||null,null);return o.firstCreatePass&&(Bt(Ut(a,n),o,t.type),ns(o,a),is(a,n.length,1)),ps(n,l),n[20]=l}(u,this.componentDef,f,s,a);if(u)if(n)kt(a,u,["ng-version",Ec.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!bi(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&kt(a,u,e),t&&t.length>0&&pi(a,u,t.join(" "))}if(g=Oe(d,20),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}p=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=He();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),ss(e,r,t,ji(e,t,1,null),n));const i=Yt(t,e,r.directiveStart,r);Tr(i,t);const s=Ne(r,t);return s&&Tr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=He();t.contentQueries(1,o,e.directiveStart)}const a=He();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(yt(a.index),es(n[1],a,0,a.directiveStart,a.directiveEnd,t),ts(t,o)),o}(e,this.componentDef,f,h,[qs]),qi(d,f,null)}finally{gt()}return new fu(this.componentType,p,mc(g,f),f,g)}}class fu extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Bc(r),this.componentType=e}get injector(){return new Xt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const pu=new Map;class gu extends Xc{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new uu(this);const n=ae(e),r=e[G]||null;r&&da(r),this._bootstrapComponents=Nr(n.bootstrap),this._r3Injector=Os(e,t,[{provide:Xc,useValue:this},{provide:pc,useValue:this.componentFactoryResolver}],l(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=js.THROW_IF_NOT_FOUND,n=R.Default){return e===js||e===Xc||e===Es?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class mu extends eu{constructor(e){super(),this.moduleType=e,null!==ae(e)&&function(e){const t=new Set;!function e(n){const r=ae(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${l(t)} vs ${l(t.name)}`)}(i,pu.get(i),n),pu.set(i,n));const s=Nr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new gu(this.moduleType,e)}}function yu(e,t,n,r){return bu(Be(),Xe(),e,t,n,r)}function _u(e,t,n,r,i){return function(e,t,n,r,i,s,o){const a=t+n;return eo(e,a,i,s)?Js(e,a+2,o?r.call(o,i,s):r(i,s)):wu(e,a+2)}(Be(),Xe(),e,t,n,r,i)}function vu(e,t,n,r,i,s){return function(e,t,n,r,i,s,o,a){const c=t+n;return function(e,t,n,r,i){const s=eo(e,t,n,r);return Xs(e,t+2,i)||s}(e,c,i,s,o)?Js(e,c+3,a?r.call(a,i,s,o):r(i,s,o)):wu(e,c+3)}(Be(),Xe(),e,t,n,r,i,s)}function wu(e,t){const n=e[t];return n===ki?void 0:n}function bu(e,t,n,r,i,s){const o=t+n;return Xs(e,o,i)?Js(e,o+1,s?r.call(s,i):r(i)):wu(e,o+1)}function Iu(e,t){const n=ze();let r;const i=e+20;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new m("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=ge(r.type)),o=O(oo);try{const e=Mt(!1),t=s();return Mt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Be(),i,t),t}finally{O(o)}}function Tu(e,t,n){const r=e+20,i=Be(),s=Pe(i,r);return function(e,t){Ks.isWrapped(t)&&(t=Ks.unwrap(t),e[et()]=ki);return t}(i,function(e,t){return e[1].data[t].pure}(i,r)?bu(i,Xe(),t,s.transform,n,s):s.transform(n))}function Cu(e){return t=>{setTimeout(e,void 0,t)}}const Eu=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,c=t||(()=>null),u=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),c=null===(s=t.error)||void 0===s?void 0:s.bind(t),u=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(c=Cu(c),a&&(a=Cu(a)),u&&(u=Cu(u)));const l=super.subscribe({next:a,error:c,complete:u});return e instanceof i.w&&e.add(l),l}};function Su(){return this._results[Ws()]()}class ku{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Ws(),n=ku.prototype;n[t]||(n[t]=Su)}get changes(){return this._changes||(this._changes=new Eu)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=un(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class Au{constructor(e){this.queryList=e,this.matches=null}clone(){return new Au(this.queryList)}setDirty(){this.queryList.setDirty()}}class xu{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new xu(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==zu(e,t).matches&&this.queries[t].setDirty()}}class Ru{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class Nu{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new Nu(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class Ou{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new Ou(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,Pu(t,i)),this.matchTNodeWithReadOption(e,t,Kt(t,e,i,!1,!1))}else n===Kc?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Kt(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===_c||r===nu||r===Kc&&4&t.type)this.addMatch(t.index,-2);else{const n=Kt(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function Pu(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function Du(e,t,n,r){return-1===n?function(e,t){return 11&e.type?mc(e,t):4&e.type?Jc(e,t):null}(t,e):-2===n?function(e,t,n){return n===_c?mc(t,e):n===Kc?Jc(t,e):n===nu?au(t,e):void 0}(e,t,r):Yt(e,e[1],n,t)}function Lu(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:Du(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function Mu(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=Lu(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=10;e<o.length;e++){const t=o[e];t[17]===t[3]&&Mu(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];Mu(n[1],n,i,r)}}}}}return r}function Fu(e){const t=Be(),n=ze(),r=ot();at(r+1);const i=zu(n,r);if(e.dirty&&Le(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?Mu(n,t,r,[]):Lu(n,t,i,r);e.reset(s,vc),e.notifyOnChanges()}return!0}return!1}function Uu(e,t,n){const r=ze();r.firstCreatePass&&(Bu(r,new Ru(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),qu(r,Be(),t)}function Vu(e,t,n,r){const i=ze();if(i.firstCreatePass){const s=He();Bu(i,new Ru(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}qu(i,Be(),n)}function ju(){return e=Be(),t=ot(),e[19].queries[t].queryList;var e,t}function qu(e,t,n){const r=new ku(4==(4&n));Yi(e,t,r,r.destroy),null===t[19]&&(t[19]=new xu),t[19].queries.push(new Au(r))}function Bu(e,t,n){null===e.queries&&(e.queries=new Nu),e.queries.track(new Ou(t,n))}function zu(e,t){return e.queries.getByIndex(t)}function $u(e,t){return Jc(e,t)}const Hu=new on("Application Initializer");let Zu=(()=>{class e{constructor(e){this.appInits=e,this.resolve=gc,this.reject=gc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(mo(t))e.push(t);else if(_o(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(Sn(Hu,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const Gu=new on("AppId"),Wu={provide:Gu,useFactory:function(){return`${Ku()}${Ku()}${Ku()}`},deps:[]};function Ku(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Yu=new on("Platform Initializer"),Qu=new on("Platform ID"),Ju=new on("appBootstrapListener");let Xu=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const el=new on("LocaleId"),tl=new on("DefaultCurrencyCode");class nl{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const rl=function(e){return new mu(e)},il=rl,sl=function(e){return Promise.resolve(rl(e))},ol=function(e){const t=rl(e),n=Nr(ae(e).declarations).reduce((e,t)=>{const n=oe(t);return n&&e.push(new du(n)),e},[]);return new nl(t,n)},al=ol,cl=function(e){return Promise.resolve(ol(e))};let ul=(()=>{class e{constructor(){this.compileModuleSync=il,this.compileModuleAsync=sl,this.compileModuleAndAllComponentsSync=al,this.compileModuleAndAllComponentsAsync=cl}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();const ll=(()=>Promise.resolve(0))();function hl(e){"undefined"==typeof Zone?ll.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class dl{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Eu(!1),this.onMicrotaskEmpty=new Eu(!1),this.onStable=new Eu(!1),this.onError=new Eu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=j.requestAnimationFrame,t=j.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(j,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,gl(e),e.isCheckStableRunning=!0,pl(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),gl(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return ml(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),yl(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return ml(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),yl(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,gl(e),pl(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!dl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(dl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,fl,gc,gc);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const fl={};function pl(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function gl(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function ml(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function yl(e){e._nesting--,pl(e)}class _l{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Eu,this.onMicrotaskEmpty=new Eu,this.onStable=new Eu,this.onError=new Eu}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let vl=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{dl.assertNotInAngularZone(),hl(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())hl(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(Sn(dl))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})(),wl=(()=>{class e{constructor(){this._applications=new Map,Tl.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return Tl.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();class bl{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function Il(e){Tl=e}let Tl=new bl,Cl=!0,El=!1;function Sl(){return El=!0,Cl}function kl(){if(El)throw new Error("Cannot enable prod mode after platform setup.");Cl=!1}let Al;const xl=new on("AllowMultipleToken");class Rl{constructor(e,t){this.name=e,this.token=t}}function Nl(e,t,n=[]){const r=`Platform: ${t}`,i=new on(r);return(t=[])=>{let s=Ol();if(!s||s.injector.get(xl,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:ks,useValue:"platform"});!function(e){if(Al&&!Al.destroyed&&!Al.injector.get(xl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Al=e.get(Pl);const t=e.get(Yu,null);t&&t.forEach(e=>e())}(js.create({providers:e,name:r}))}return function(e){const t=Ol();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function Ol(){return Al&&!Al.destroyed?Al:null}let Pl=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new _l:("zone.js"===e?void 0:e)||new dl({enableLongStackTrace:Sl(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:dl,useValue:n}];return n.run(()=>{const i=js.create({providers:r,parent:this.injector,name:e.moduleType.name}),s=e.create(i),o=s.injector.get(kr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{o.handleError(e)}});s.onDestroy(()=>{Ml(this._modules,s),e.unsubscribe()})}),function(e,n,r){try{const t=r();return mo(t)?t.catch(t=>{throw n.runOutsideAngular(()=>e.handleError(t)),t}):t}catch(t){throw n.runOutsideAngular(()=>e.handleError(t)),t}}(o,n,()=>{const e=s.injector.get(Zu);return e.runInitializers(),e.donePromise.then(()=>(da(s.injector.get(el,aa)||aa),this._moduleDoBootstrap(s),s))})})}bootstrapModule(e,t=[]){const n=Dl({},t);return function(e,t,n){const r=new mu(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(Ll);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${l(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(Sn(js))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Dl(e,t){return Array.isArray(t)?t.reduce(Dl,e):Object.assign(Object.assign({},e),t)}let Ll=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),u=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{dl.assertNotInAngularZone(),hl(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{dl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(c,u.pipe((0,a.B)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof hc?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=function(e){return e.isBoundToModule}(n)?void 0:this._injector.get(Xc),i=n.create(js.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(vl,null),a=o&&i.injector.get(wl);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),Ml(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;Ml(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Ju,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(Sn(dl),Sn(js),Sn(kr),Sn(pc),Sn(Zu))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function Ml(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Fl{}class Ul{}const Vl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let jl=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Vl}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>ql(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>ql(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(Sn(ul),Sn(Ul,8))},e.\u0275prov=b({token:e,factory:e.\u0275fac}),e})();function ql(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Bl=function(e){return null},zl=Nl(null,"core",[{provide:Qu,useValue:"unknown"},{provide:Pl,deps:[js]},{provide:wl,deps:[]},{provide:Xu,deps:[]}]),$l=[{provide:Ll,useClass:Ll,deps:[dl,js,kr,pc,Zu]},{provide:hu,deps:[dl],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Zu,useClass:Zu,deps:[[new On,Hu]]},{provide:ul,useClass:ul,deps:[]},Wu,{provide:Fc,useFactory:function(){return Zc},deps:[]},{provide:Vc,useFactory:function(){return Gc},deps:[]},{provide:el,useFactory:function(e){return da(e=e||"undefined"!=typeof $localize&&$localize.locale||aa),e},deps:[[new Nn(el),new On,new Pn]]},{provide:tl,useValue:"USD"}];let Hl=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(Sn(Ll))},e.\u0275mod=te({type:e}),e.\u0275inj=I({providers:$l}),e})()},8939:function(e,t,n){"use strict";n.d(t,{hO:function(){return g},xv:function(){return h},Dh:function(){return l},GT:function(){return c},cc:function(){return m},on:function(){return d},pX:function(){return a}});var r=n(7716),i=n(7841),s=n(7667);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),c=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class u{constructor(e){return e}}const l=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&f("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new u(o)}const f=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},p={provide:u,useFactory:d,deps:[l,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:l,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[p]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(_("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),_("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,_=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},7667:function(e,t,n){"use strict";n.d(t,{q4:function(){return p},iC:function(){return D},HU:function(){return R},vb:function(){return S},JM:function(){return E},nk:function(){return C},n1:function(){return I},_J:function(){return T},u3:function(){return M}});var r=n(7716),i=n(2329),s=n(4347),o=n(6241),a=n(3935),c=n(7771),u=n(3637),l=n(7574),h=n(8307),d=n(2639),f=n(9746);const p=new r.GfV("7.2.0"),g="__angularfire_symbol__analyticsIsSupportedValue",m="__angularfire_symbol__analyticsIsSupported",y="__angularfire_symbol__remoteConfigIsSupportedValue",_="__angularfire_symbol__remoteConfigIsSupported",v="__angularfire_symbol__messagingIsSupportedValue",w="__angularfire_symbol__messagingIsSupported";globalThis[m]||(globalThis[m]=(0,a.Gb)().then(e=>globalThis[g]=e)),globalThis[w]||(globalThis[w]=(0,o.Gb)().then(e=>globalThis[v]=e)),globalThis[_]||(globalThis[_]=(0,s.Gb)().then(e=>globalThis[y]=e));const b=e=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${e} in the constructor, first ensure that ${e} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${e})\`.`,I={async:()=>globalThis[w],sync:()=>{const e=globalThis[v];if(void 0===e)throw new Error(b("Messaging"));return e}},T={async:()=>globalThis[_],sync:()=>{const e=globalThis[y];if(void 0===e)throw new Error(b("RemoteConfig"));return e}},C={async:()=>globalThis[m],sync:()=>{const e=globalThis[g];if(void 0===e)throw new Error(b("Analytics"));return e}};function E(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}const S=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function k(){}class A{constructor(e,t=c.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class x{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",k,{},k,k)),t.pipe((0,h.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let R=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new A(Zone.current)),this.insideAngular=e.run(()=>new A(Zone.current,u.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function N(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function O(e){return N().ngZone.runOutsideAngular(()=>e())}function P(e){return N().ngZone.run(()=>e())}function D(e){return N(),function(e){return function(t){return(t=t.lift(new x(e.ngZone))).pipe((0,d.R)(e.outsideAngular),(0,f.QV)(e.insideAngular))}}(N())(e)}const L=(e,t)=>function(){return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),P(()=>e.apply(void 0,arguments))},M=(e,t)=>function(){let n;for(let e=0;e<arguments.length;e++)"function"==typeof arguments[e]&&(t&&(n||(n=P(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",k,{},k,k)))),arguments[e]=L(arguments[e],n));const r=O(()=>e.apply(this,arguments));if(!t){if(r instanceof l.y){const e=N();return r.pipe((0,d.R)(e.outsideAngular),(0,f.QV)(e.insideAngular))}return P(()=>r)}return r instanceof l.y?r.pipe(D):r instanceof Promise?P(()=>new Promise((e,t)=>r.then(t=>P(()=>e(t)),e=>P(()=>t(e))))):"function"==typeof r&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),r.apply(this,arguments)}:P(()=>r)}},9353:function(e,t,n){"use strict";n.d(t,{$:function(){return en},A:function(){return l},E:function(){return Ne},G:function(){return De},I:function(){return rt},K:function(){return fe},L:function(){return dt},M:function(){return mt},N:function(){return yt},P:function(){return Br},Q:function(){return _t},R:function(){return Rr},T:function(){return gt},U:function(){return wt},V:function(){return bt},W:function(){return St},X:function(){return qt},Y:function(){return zt},Z:function(){return Ht},_:function(){return Kt},a:function(){return Xn},a0:function(){return nn},a1:function(){return sn},a2:function(){return an},a3:function(){return un},a4:function(){return hn},a5:function(){return fn},a6:function(){return pn},a7:function(){return mn},a8:function(){return yn},a9:function(){return bn},aA:function(){return wi},aB:function(){return ui},aC:function(){return xe},aG:function(){return tr},aJ:function(){return vt},aa:function(){return Tn},ab:function(){return En},ae:function(){return xn},af:function(){return Nn},ag:function(){return On},aj:function(){return Nt},ak:function(){return qn},am:function(){return Hn},an:function(){return Kn},ao:function(){return Ee},ap:function(){return T},aq:function(){return Ce},ar:function(){return be},as:function(){return m},at:function(){return $i},au:function(){return ki},av:function(){return y},aw:function(){return b},ax:function(){return E},ay:function(){return pe},az:function(){return Ci},b:function(){return Jn},c:function(){return Qr},d:function(){return ti},e:function(){return Xr},f:function(){return di},g:function(){return mi},h:function(){return pi},i:function(){return mr},j:function(){return _i},k:function(){return Zi},l:function(){return Dr},m:function(){return Wi},n:function(){return Ji},o:function(){return u},r:function(){return Mr},s:function(){return Or},t:function(){return Bn},u:function(){return jr},z:function(){return h}});var r=n(8239),i=n(3854),s=n(8026),o=n(4762),a=n(5422),c=n(3910);const u={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const h=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},d=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},f=new i.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new a.Yd("@firebase/auth");function g(e,...t){p.logLevel<=a.in.ERROR&&p.error(`Auth (${s.SDK_VERSION}): ${e}`,...t)}function m(e,...t){throw w(e,...t)}function y(e,...t){return w(e,...t)}function _(e,t,n){const r=Object.assign(Object.assign({},d()),{[t]:n});return new i.LL("auth","Firebase",r).create(t,{appName:e.name})}function v(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&m(e,"argument-error"),_(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function w(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return f.create(e,...t)}function b(e,t,...n){if(!e)throw w(t,...n)}function I(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function T(e,t){e||I(t)}const C=new Map;function E(e){T(e instanceof Function,"Expected a class definition");let t=C.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,C.set(e,t),t)}function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===A()||"https:"===A()}function A(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class x{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,i.uI)()||(0,i.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(k()||(0,i.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function R(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class N{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void I("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void I("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void I("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const O={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},P=new x(3e4,6e4);function D(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function L(e,t,n,r){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(function*(e,t,n,s,o={}){return F(e,o,(0,r.Z)(function*(){let r={},o={};s&&("GET"===t?o=s:r={body:JSON.stringify(s)});const a=(0,i.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=yield e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),N.fetch()(q(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},r))}))})).apply(this,arguments)}function F(e,t,n){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},O),t);try{const t=new B(e),i=yield Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=yield i.json();if("needConfirmation"in s)throw z(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw _(e,a,o);m(e,a)}}catch(s){if(s instanceof i.ZR)throw s;m(e,"network-request-failed")}})).apply(this,arguments)}function V(e,t,n,r){return j.apply(this,arguments)}function j(){return(j=(0,r.Z)(function*(e,t,n,r,i={}){const s=yield L(e,t,n,r,i);return"mfaPendingCredential"in s&&m(e,"multi-factor-auth-required",{_serverResponse:s}),s})).apply(this,arguments)}function q(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?R(e.config,i):`${e.config.apiScheme}://${i}`}class B{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"timeout")),P.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}function $(){return($=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:delete",t)})).apply(this,arguments)}function H(e,t){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function G(e,t){return W.apply(this,arguments)}function W(){return(W=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:lookup",t)})).apply(this,arguments)}function K(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function Y(){return(Y=(0,r.Z)(function*(e,t=!1){const n=(0,i.m9)(e),r=yield n.getIdToken(t),s=J(r);b(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:K(Q(s.auth_time)),issuedAtTime:K(Q(s.iat)),expirationTime:K(Q(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}})).apply(this,arguments)}function Q(e){return 1e3*Number(e)}function J(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,i.tV)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(s){return g("Caught error parsing JWT payload as JSON",s),null}}function X(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,r.Z)(function*(e,t,n=!1){if(n)return t;try{return yield t}catch(r){throw r instanceof i.ZR&&te(r)&&e.auth.currentUser===e&&(yield e.auth.signOut()),r}})).apply(this,arguments)}function te({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}class ne{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){var t=this;if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout((0,r.Z)(function*(){yield t.iteration()}),n)}iteration(){var e=this;return(0,r.Z)(function*(){try{yield e.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===t.code&&e.schedule(!0))}e.schedule()})()}}class re{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=K(this.lastLoginAt),this.creationTime=K(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ie(e){return se.apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e){var t;const n=e.auth,r=yield e.getIdToken(),i=yield X(e,G(n,{idToken:r}));b(null==i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?ce(s.providerUserInfo):[],a=ae(e.providerData,o),c=!!e.isAnonymous&&!(e.email&&s.passwordHash||(null==a?void 0:a.length)),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new re(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,u)})).apply(this,arguments)}function oe(){return(oe=(0,r.Z)(function*(e){const t=(0,i.m9)(e);yield ie(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})).apply(this,arguments)}function ae(e,t){return[...e.filter(e=>!t.some(t=>t.providerId===e.providerId)),...t]}function ce(e){return e.map(e=>{var{providerId:t}=e,n=(0,o._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}function ue(){return(ue=(0,r.Z)(function*(e,t){const n=yield F(e,{},(0,r.Z)(function*(){const n=(0,i.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,o=q(e,r,"/v1/token",`key=${s}`),a=yield e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",N.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}})).apply(this,arguments)}class le{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){b(e.idToken,"internal-error"),b(void 0!==e.idToken,"internal-error"),b(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=J(e);return b(t,"internal-error"),b(void 0!==t.exp,"internal-error"),b(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}getToken(e,t=!1){var n=this;return(0,r.Z)(function*(){return b(!n.accessToken||n.refreshToken,e,"user-token-expired"),t||!n.accessToken||n.isExpired?n.refreshToken?(yield n.refresh(e,n.refreshToken),n.accessToken):null:n.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(e,t){var n=this;return(0,r.Z)(function*(){const{accessToken:r,refreshToken:i,expiresIn:s}=yield function(e,t){return ue.apply(this,arguments)}(e,t);n.updateTokensAndExpiration(r,i,Number(s))})()}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new le;return n&&(b("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(b("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(b("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new le,this.toJSON())}_performRefresh(){return I("not implemented")}}function he(e,t){b("string"==typeof e||void 0===e,"internal-error",{appName:t})}class de{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,o._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new ne(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new re(i.createdAt||void 0,i.lastLoginAt||void 0)}getIdToken(e){var t=this;return(0,r.Z)(function*(){const n=yield X(t,t.stsTokenManager.getToken(t.auth,e));return b(n,t.auth,"internal-error"),t.accessToken!==n&&(t.accessToken=n,yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)),n})()}getIdTokenResult(e){return function(e){return Y.apply(this,arguments)}(this,e)}reload(){return function(e){return oe.apply(this,arguments)}(this)}_assign(e){this!==e&&(b(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new de(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){b(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){var n=this;return(0,r.Z)(function*(){let r=!1;e.idToken&&e.idToken!==n.stsTokenManager.accessToken&&(n.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield ie(n)),yield n.auth._persistUserIfCurrent(n),r&&n.auth._notifyListenersIfCurrent(n)})()}delete(){var e=this;return(0,r.Z)(function*(){const t=yield e.getIdToken();return yield X(e,function(e,t){return $.apply(this,arguments)}(e.auth,{idToken:t})),e.stsTokenManager.clearRefreshToken(),e.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:_,emailVerified:v,isAnonymous:w,providerData:I,stsTokenManager:T}=t;b(_&&T,e,"internal-error");const C=le.fromJSON(this.name,T);b("string"==typeof _,e,"internal-error"),he(l,e.name),he(h,e.name),b("boolean"==typeof v,e,"internal-error"),b("boolean"==typeof w,e,"internal-error"),he(d,e.name),he(f,e.name),he(p,e.name),he(g,e.name),he(m,e.name),he(y,e.name);const E=new de({uid:_,auth:e,email:h,emailVerified:v,displayName:l,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:C,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static _fromIdTokenResponse(e,t,n=!1){return(0,r.Z)(function*(){const r=new le;r.updateFromServerResponse(t);const i=new de({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return yield ie(i),i})()}}const fe=(()=>{class e{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,r.Z)(function*(){return!0})()}_set(e,t){var n=this;return(0,r.Z)(function*(){n.storage[e]=t})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=t.storage[e];return void 0===n?null:n})()}_remove(e){var t=this;return(0,r.Z)(function*(){delete t.storage[e]})()}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function pe(e,t,n){return`firebase:${e}:${t}:${n}`}class ge{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=pe(this.userKey,r.apiKey,i),this.fullPersistenceKey=pe("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){var e=this;return(0,r.Z)(function*(){const t=yield e.persistence._get(e.fullUserKey);return t?de._fromJSON(e.auth,t):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){var t=this;return(0,r.Z)(function*(){if(t.persistence===e)return;const n=yield t.getCurrentUser();return yield t.removeCurrentUser(),t.persistence=e,n?t.setCurrentUser(n):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,n="authUser"){return(0,r.Z)(function*(){if(!t.length)return new ge(E(fe),e,n);const i=(yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(yield e._isAvailable())return e});return function(t){return e.apply(this,arguments)}}()))).filter(e=>e);let s=i[0]||E(fe);const o=pe(n,e.config.apiKey,e.name);let a=null;for(const n of t)try{const t=yield n._get(o);if(t){const r=de._fromJSON(e,t);n!==s&&(a=r),s=n;break}}catch(u){}const c=i.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&c.length?(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(function(){var e=(0,r.Z)(function*(e){if(e!==s)try{yield e._remove(o)}catch(t){}});return function(t){return e.apply(this,arguments)}}())),new ge(s,e,n)):new ge(s,e,n)})()}}function me(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(we(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ye(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Ie(t))return"Blackberry";if(Te(t))return"Webos";if(_e(t))return"Safari";if((t.includes("chrome/")||ve(t))&&!t.includes("edge/"))return"Chrome";if(be(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function ye(e=(0,i.z$)()){return/firefox\//i.test(e)}function _e(e=(0,i.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ve(e=(0,i.z$)()){return/crios\//i.test(e)}function we(e=(0,i.z$)()){return/iemobile/i.test(e)}function be(e=(0,i.z$)()){return/android/i.test(e)}function Ie(e=(0,i.z$)()){return/blackberry/i.test(e)}function Te(e=(0,i.z$)()){return/webos/i.test(e)}function Ce(e=(0,i.z$)()){return/iphone|ipad|ipod/i.test(e)}function Ee(e=(0,i.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function Se(e=(0,i.z$)()){return Ce(e)||be(e)||Te(e)||Ie(e)||/windows phone/i.test(e)||we(e)}function ke(e,t=[]){let n;switch(e){case"Browser":n=me((0,i.z$)());break;case"Worker":n=`${me((0,i.z$)())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${s.SDK_VERSION}/${r}`}class Ae{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Re(this),this.idTokenSubscription=new Re(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){var n=this;return t&&(this._popupRedirectResolver=E(t)),this._initializationPromise=this.queue((0,r.Z)(function*(){var r,i;if(!n._deleted&&(n.persistenceManager=yield ge.create(n,e),!n._deleted)){if(null===(r=n._popupRedirectResolver)||void 0===r?void 0:r._shouldInitProactively)try{yield n._popupRedirectResolver._initialize(n)}catch(s){}yield n.initializeCurrentUser(t),n.lastNotifiedUid=(null===(i=n.currentUser)||void 0===i?void 0:i.uid)||null,!n._deleted&&(n._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var e=this;return(0,r.Z)(function*(){if(e._deleted)return;const t=yield e.assertedPersistence.getCurrentUser();if(e.currentUser||t){if(e.currentUser&&t&&e.currentUser.uid===t.uid)return e._currentUser._assign(t),void(yield e.currentUser.getIdToken());yield e._updateCurrentUser(t)}})()}initializeCurrentUser(e){var t=this;return(0,r.Z)(function*(){var n;let r=yield t.assertedPersistence.getCurrentUser();if(e&&t.config.authDomain){yield t.getOrInitRedirectPersistenceManager();const i=null===(n=t.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null==r?void 0:r._redirectEventId,o=yield t.tryRedirectSignIn(e);(!i||i===s)&&(null==o?void 0:o.user)&&(r=o.user)}return r?r._redirectEventId?(b(t._popupRedirectResolver,t,"argument-error"),yield t.getOrInitRedirectPersistenceManager(),t.redirectUser&&t.redirectUser._redirectEventId===r._redirectEventId?t.directlySetCurrentUser(r):t.reloadAndSetCurrentUserOrClear(r)):t.reloadAndSetCurrentUserOrClear(r):t.directlySetCurrentUser(null)})()}tryRedirectSignIn(e){var t=this;return(0,r.Z)(function*(){let n=null;try{n=yield t._popupRedirectResolver._completeRedirectFn(t,e,!0)}catch(r){yield t._setRedirectUser(null)}return n})()}reloadAndSetCurrentUserOrClear(e){var t=this;return(0,r.Z)(function*(){try{yield ie(e)}catch(n){if("auth/network-request-failed"!==n.code)return t.directlySetCurrentUser(null)}return t.directlySetCurrentUser(e)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}_delete(){var e=this;return(0,r.Z)(function*(){e._deleted=!0})()}updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){const n=e?(0,i.m9)(e):null;return n&&b(n.auth.config.apiKey===t.config.apiKey,t,"invalid-user-token"),t._updateCurrentUser(n&&n._clone(t))})()}_updateCurrentUser(e){var t=this;return(0,r.Z)(function*(){if(!t._deleted)return e&&b(t.tenantId===e.tenantId,t,"tenant-id-mismatch"),t.queue((0,r.Z)(function*(){yield t.directlySetCurrentUser(e),t.notifyAuthListeners()}))})()}signOut(){var e=this;return(0,r.Z)(function*(){return(e.redirectPersistenceManager||e._popupRedirectResolver)&&(yield e._setRedirectUser(null)),e._updateCurrentUser(null)})()}setPersistence(e){var t=this;return this.queue((0,r.Z)(function*(){yield t.assertedPersistence.setPersistence(E(e))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new i.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}_setRedirectUser(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.getOrInitRedirectPersistenceManager(t);return null===e?r.removeCurrentUser():r.setCurrentUser(e)})()}getOrInitRedirectPersistenceManager(e){var t=this;return(0,r.Z)(function*(){if(!t.redirectPersistenceManager){const n=e&&E(e)||t._popupRedirectResolver;b(n,t,"argument-error"),t.redirectPersistenceManager=yield ge.create(t,[E(n._redirectPersistence)],"redirectUser"),t.redirectUser=yield t.redirectPersistenceManager.getCurrentUser()}return t.redirectPersistenceManager})()}_redirectUserForId(e){var t=this;return(0,r.Z)(function*(){var n,i;return t._isInitialized&&(yield t.queue((0,r.Z)(function*(){}))),(null===(n=t._currentUser)||void 0===n?void 0:n._redirectEventId)===e?t._currentUser:(null===(i=t.redirectUser)||void 0===i?void 0:i._redirectEventId)===e?t.redirectUser:null})()}_persistUserIfCurrent(e){var t=this;return(0,r.Z)(function*(){if(e===t.currentUser)return t.queue((0,r.Z)(function*(){return t.directlySetCurrentUser(e)}))})()}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return b(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}directlySetCurrentUser(e){var t=this;return(0,r.Z)(function*(){t.currentUser&&t.currentUser!==e&&(t._currentUser._stopProactiveRefresh(),e&&t.isProactiveRefreshEnabled&&e._startProactiveRefresh()),t.currentUser=e,e?yield t.assertedPersistence.setCurrentUser(e):yield t.assertedPersistence.removeCurrentUser()})()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return b(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=ke(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var e=this;return(0,r.Z)(function*(){const t={"X-Client-Version":e.clientVersion};return e.app.options.appId&&(t["X-Firebase-gmpid"]=e.app.options.appId),t})()}}function xe(e){return(0,i.m9)(e)}class Re{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,i.ne)(e=>this.observer=e)}get next(){return b(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ne(e,t,n){const r=xe(e);b(r._canInitEmulator,r,"emulator-config-failed"),b(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Oe(t),{host:o,port:a}=function(e){const t=Oe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:Pe(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Pe(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Oe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Pe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class De{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return I("not implemented")}_getIdTokenResponse(e){return I("not implemented")}_linkToIdToken(e,t){return I("not implemented")}_getReauthenticationResolver(e){return I("not implemented")}}function Le(e,t){return Me.apply(this,arguments)}function Me(){return(Me=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:resetPassword",D(e,t))})).apply(this,arguments)}function Fe(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function Ve(e,t){return je.apply(this,arguments)}function je(){return(je=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:update",D(e,t))})).apply(this,arguments)}function qe(){return(qe=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPassword",D(e,t))})).apply(this,arguments)}function Be(e,t){return ze.apply(this,arguments)}function ze(){return(ze=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:sendOobCode",D(e,t))})).apply(this,arguments)}function $e(e,t){return He.apply(this,arguments)}function He(){return(He=(0,r.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function Ze(e,t){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,r.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function We(e,t){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,r.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function Ye(e,t){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,r.Z)(function*(e,t){return Be(e,t)})).apply(this,arguments)}function Je(){return(Je=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))})).apply(this,arguments)}function Xe(){return(Xe=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithEmailLink",D(e,t))})).apply(this,arguments)}class et extends De{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new et(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new et(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}_getIdTokenResponse(e){var t=this;return(0,r.Z)(function*(){switch(t.signInMethod){case"password":return function(e,t){return qe.apply(this,arguments)}(e,{returnSecureToken:!0,email:t._email,password:t._password});case"emailLink":return function(e,t){return Je.apply(this,arguments)}(e,{email:t._email,oobCode:t._password});default:m(e,"internal-error")}})()}_linkToIdToken(e,t){var n=this;return(0,r.Z)(function*(){switch(n.signInMethod){case"password":return Fe(e,{idToken:t,returnSecureToken:!0,email:n._email,password:n._password});case"emailLink":return function(e,t){return Xe.apply(this,arguments)}(e,{idToken:t,email:n._email,oobCode:n._password});default:m(e,"internal-error")}})()}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}function tt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithIdp",D(e,t))})).apply(this,arguments)}class rt extends De{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new rt(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):m("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,o._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new rt(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return tt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,i.xO)(t)}return e}}function it(e,t){return st.apply(this,arguments)}function st(){return(st=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:sendVerificationCode",D(e,t))})).apply(this,arguments)}function ot(){return(ot=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t))})).apply(this,arguments)}function at(){return(at=(0,r.Z)(function*(e,t){const n=yield V(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n})).apply(this,arguments)}const ct={USER_NOT_FOUND:"user-not-found"};function ut(){return(ut=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithPhoneNumber",D(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),ct)})).apply(this,arguments)}class lt extends De{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lt({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lt({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return function(e,t){return ot.apply(this,arguments)}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return function(e,t){return at.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return function(e,t){return ut.apply(this,arguments)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new lt({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class ht{constructor(e){var t,n,r,s,o,a;const c=(0,i.zd)((0,i.pd)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);b(u&&l&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=l,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,i.zd)((0,i.pd)(e)).link,n=t?(0,i.zd)((0,i.pd)(t)).deep_link_id:null,r=(0,i.zd)((0,i.pd)(e)).deep_link_id;return(r?(0,i.zd)((0,i.pd)(r)).link:null)||r||n||t||e}(e);try{return new ht(t)}catch(n){return null}}}let dt=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return et._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ht.parseLink(t);return b(n,"argument-error"),et._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ft{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class pt extends ft{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class gt extends pt{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return b("providerId"in t&&"signInMethod"in t,"argument-error"),rt._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return b(e.idToken||e.accessToken,"argument-error"),rt._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return gt.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return gt.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!n&&!r&&!t&&!i||!o)return null;try{return new gt(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let mt=(()=>{class e extends pt{constructor(){super("facebook.com")}static credential(t){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),yt=(()=>{class e extends pt{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),_t=(()=>{class e extends pt{constructor(){super("github.com")}static credential(t){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class vt extends De{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return tt(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,tt(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,tt(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new vt(n,i):null}static _create(e,t){return new vt(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class wt extends ft{constructor(e){b(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return wt.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return wt.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=vt.fromJSON(e);return b(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return vt._create(n,t)}catch(r){return null}}}let bt=(()=>{class e extends pt{constructor(){super("twitter.com")}static credential(t,n){return rt._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();function It(e,t){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signUp",D(e,t))})).apply(this,arguments)}class Ct{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,n,i=!1){return(0,r.Z)(function*(){const r=yield de._fromIdTokenResponse(e,n,i),s=Et(n);return new Ct({user:r,providerId:s,_tokenResponse:n,operationType:t})})()}static _forOperation(e,t,n){return(0,r.Z)(function*(){yield e._updateTokensIfNecessary(n,!0);const r=Et(n);return new Ct({user:e,providerId:r,_tokenResponse:n,operationType:t})})()}}function Et(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function St(e){return kt.apply(this,arguments)}function kt(){return(kt=(0,r.Z)(function*(e){var t;const n=xe(e);if(yield n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Ct({user:n.currentUser,providerId:null,operationType:"signIn"});const r=yield It(n,{returnSecureToken:!0}),i=yield Ct._fromIdTokenResponse(n,"signIn",r,!0);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class At extends i.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,At.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new At(e,t,n,r)}}function xt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{throw"auth/multi-factor-auth-required"===n.code?At._fromErrorAndOperation(e,n,t,r):n})}function Rt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}function Nt(e,t){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);yield Lt(!0,n,t);const{providerUserInfo:r}=yield H(n.auth,{idToken:yield n.getIdToken(),deleteProvider:[t]}),s=Rt(r||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),yield n.auth._persistUserIfCurrent(n),n})).apply(this,arguments)}function Pt(e,t){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,r.Z)(function*(e,t,n=!1){const r=yield X(e,t._linkToIdToken(e.auth,yield e.getIdToken()),n);return Ct._forOperation(e,"link",r)})).apply(this,arguments)}function Lt(e,t,n){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,r.Z)(function*(e,t,n){yield ie(t);const r=!1===e?"provider-already-linked":"no-such-provider";b(Rt(t.providerData).has(n)===e,t.auth,r)})).apply(this,arguments)}function Ft(e,t){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,r.Z)(function*(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=yield X(e,xt(r,i,t,e),n);b(s.idToken,r,"internal-error");const o=J(s.idToken);b(o,r,"internal-error");const{sub:a}=o;return b(e.uid===a,r,"user-mismatch"),Ct._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&m(r,"user-mismatch"),s}})).apply(this,arguments)}function Vt(e,t){return jt.apply(this,arguments)}function jt(){return(jt=(0,r.Z)(function*(e,t,n=!1){const r="signIn",i=yield xt(e,r,t),s=yield Ct._fromIdTokenResponse(e,r,i);return n||(yield e._updateCurrentUser(s.user)),s})).apply(this,arguments)}function qt(e,t){return Bt.apply(this,arguments)}function Bt(){return(Bt=(0,r.Z)(function*(e,t){return Vt(xe(e),t)})).apply(this,arguments)}function zt(e,t){return $t.apply(this,arguments)}function $t(){return($t=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e);return yield Lt(!1,n,t.providerId),Pt(n,t)})).apply(this,arguments)}function Ht(e,t){return Zt.apply(this,arguments)}function Zt(){return(Zt=(0,r.Z)(function*(e,t){return Ft((0,i.m9)(e),t)})).apply(this,arguments)}function Gt(e,t){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,r.Z)(function*(e,t){return V(e,"POST","/v1/accounts:signInWithCustomToken",D(e,t))})).apply(this,arguments)}function Kt(e,t){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,r.Z)(function*(e,t){const n=xe(e),r=yield Gt(n,{token:t,returnSecureToken:!0}),i=yield Ct._fromIdTokenResponse(n,"signIn",r);return yield n._updateCurrentUser(i.user),i})).apply(this,arguments)}class Qt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Jt._fromServerResponse(e,t):m(e,"internal-error")}}class Jt extends Qt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Jt(t)}}function Xt(e,t,n){var r;b((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),b(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(b(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(b(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function en(e,t,n){return tn.apply(this,arguments)}function tn(){return(tn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&Xt(r,s,n),yield Ze(r,s)})).apply(this,arguments)}function nn(e,t,n){return rn.apply(this,arguments)}function rn(){return(rn=(0,r.Z)(function*(e,t,n){yield Le((0,i.m9)(e),{oobCode:t,newPassword:n})})).apply(this,arguments)}function sn(e,t){return on.apply(this,arguments)}function on(){return(on=(0,r.Z)(function*(e,t){yield Ve((0,i.m9)(e),{oobCode:t})})).apply(this,arguments)}function an(e,t){return cn.apply(this,arguments)}function cn(){return(cn=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r=yield Le(n,{oobCode:t}),s=r.requestType;switch(b(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":b(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":b(r.mfaInfo,n,"internal-error");default:b(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Qt._fromServerResponse(xe(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}})).apply(this,arguments)}function un(e,t){return ln.apply(this,arguments)}function ln(){return(ln=(0,r.Z)(function*(e,t){const{data:n}=yield an((0,i.m9)(e),t);return n.email})).apply(this,arguments)}function hn(e,t,n){return dn.apply(this,arguments)}function dn(){return(dn=(0,r.Z)(function*(e,t,n){const r=xe(e),i=yield It(r,{returnSecureToken:!0,email:t,password:n}),s=yield Ct._fromIdTokenResponse(r,"signIn",i);return yield r._updateCurrentUser(s.user),s})).apply(this,arguments)}function fn(e,t,n){return qt((0,i.m9)(e),dt.credential(t,n))}function pn(e,t,n){return gn.apply(this,arguments)}function gn(){return(gn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};b(n.handleCodeInApp,r,"argument-error"),n&&Xt(r,s,n),yield We(r,s)})).apply(this,arguments)}function mn(e,t){const n=ht.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}function yn(e,t,n){return _n.apply(this,arguments)}function _n(){return(_n=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=dt.credentialWithLink(t,n||S());return b(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),qt(r,s)})).apply(this,arguments)}function vn(e,t){return wn.apply(this,arguments)}function wn(){return(wn=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:createAuthUri",D(e,t))})).apply(this,arguments)}function bn(e,t){return In.apply(this,arguments)}function In(){return(In=(0,r.Z)(function*(e,t){const n={identifier:t,continueUri:k()?S():"http://localhost"},{signinMethods:r}=yield vn((0,i.m9)(e),n);return r||[]})).apply(this,arguments)}function Tn(e,t){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,r.Z)(function*(e,t){const n=(0,i.m9)(e),r={requestType:"VERIFY_EMAIL",idToken:yield e.getIdToken()};t&&Xt(n.auth,r,t);const{email:s}=yield $e(n.auth,r);s!==e.email&&(yield e.reload())})).apply(this,arguments)}function En(e,t,n){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield e.getIdToken(),newEmail:t};n&&Xt(r.auth,s,n);const{email:o}=yield Ye(r.auth,s);o!==e.email&&(yield e.reload())})).apply(this,arguments)}function kn(e,t){return An.apply(this,arguments)}function An(){return(An=(0,r.Z)(function*(e,t){return L(e,"POST","/v1/accounts:update",t)})).apply(this,arguments)}function xn(e,t){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,r.Z)(function*(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=(0,i.m9)(e),s={idToken:yield r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=yield X(r,kn(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),yield r._updateTokensIfNecessary(o)})).apply(this,arguments)}function Nn(e,t){return Pn((0,i.m9)(e),t,null)}function On(e,t){return Pn((0,i.m9)(e),null,t)}function Pn(e,t,n){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,r.Z)(function*(e,t,n){const{auth:r}=e,i={idToken:yield e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=yield X(e,Fe(r,i));yield e._updateTokensIfNecessary(s,!0)})).apply(this,arguments)}class Ln{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Mn extends Ln{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Fn extends Ln{constructor(e,t){super(e,"facebook.com",t)}}class Un extends Mn{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Vn extends Ln{constructor(e,t){super(e,"google.com",t)}}class jn extends Mn{constructor(e,t,n){super(e,"twitter.com",t,n)}}function qn(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=J(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new Ln(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new Fn(s,i);case"github.com":return new Un(s,i);case"google.com":return new Vn(s,i);case"twitter.com":return new jn(s,i,e.screenName||null);case"custom":case"anonymous":return new Ln(s,null);default:return new Ln(s,r,i)}}(n)}function Bn(e,t,n,r){return(0,i.m9)(e).onAuthStateChanged(t,n,r)}class zn{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new zn("enroll",e)}static _fromMfaPendingCredential(e){return new zn("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return zn._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return zn._fromIdtoken(e.multiFactorSession.idToken)}return null}}class $n{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=xe(e),i=t.customData._serverResponse,s=(i.mfaInfo||[]).map(e=>Qt._fromServerResponse(n,e));b(i.mfaPendingCredential,n,"internal-error");const o=zn._fromMfaPendingCredential(i.mfaPendingCredential);return new $n(o,s,function(){var e=(0,r.Z)(function*(e){const r=yield e._process(n,o);delete i.mfaInfo,delete i.mfaPendingCredential;const s=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(t.operationType){case"signIn":const e=yield Ct._fromIdTokenResponse(n,t.operationType,s);return yield n._updateCurrentUser(e.user),e;case"reauthenticate":return b(t.user,n,"internal-error"),Ct._forOperation(t.user,t.operationType,s);default:m(n,"internal-error")}});return function(t){return e.apply(this,arguments)}}())}resolveSignIn(e){var t=this;return(0,r.Z)(function*(){return t.signInResolver(e)})()}}function Hn(e,t){var n;const r=(0,i.m9)(e),s=t;return b(t.customData.operationType,r,"argument-error"),b(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),$n._fromError(r,s)}function Zn(e,t){return L(e,"POST","/v2/accounts/mfaEnrollment:start",D(e,t))}class Gn{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Qt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new Gn(e)}getSession(){var e=this;return(0,r.Z)(function*(){return zn._fromIdtoken(yield e.user.getIdToken())})()}enroll(e,t){var n=this;return(0,r.Z)(function*(){const r=e,i=yield n.getSession(),s=yield X(n.user,r._process(n.user.auth,i,t));return yield n.user._updateTokensIfNecessary(s),n.user.reload()})()}unenroll(e){var t=this;return(0,r.Z)(function*(){const n="string"==typeof e?e:e.uid,r=yield t.user.getIdToken(),i=yield X(t.user,function(e,t){return L(e,"POST","/v2/accounts/mfaEnrollment:withdraw",D(e,t))}(t.user.auth,{idToken:r,mfaEnrollmentId:n}));t.enrolledFactors=t.enrolledFactors.filter(({uid:e})=>e!==n),yield t.user._updateTokensIfNecessary(i);try{yield t.user.reload()}catch(s){if("auth/user-token-expired"!==s.code)throw s}})()}}const Wn=new WeakMap;function Kn(e){const t=(0,i.m9)(e);return Wn.has(t)||Wn.set(t,Gn._fromUser(t)),Wn.get(t)}const Yn="__sak";class Qn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Yn,"1"),this.storage.removeItem(Yn),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Jn=(()=>{class e extends Qn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,i.z$)();return _e(e)||Ce(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=Se(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);!t&&this.localCache[n]===e||this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,i.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(e,t){var n=()=>super._set,i=this;return(0,r.Z)(function*(){yield n().call(i,e,t),i.localCache[e]=JSON.stringify(t)})()}_get(e){var t=()=>super._get,n=this;return(0,r.Z)(function*(){const r=yield t().call(n,e);return n.localCache[e]=JSON.stringify(r),r})()}_remove(e){var t=()=>super._remove,n=this;return(0,r.Z)(function*(){yield t().call(n,e),delete n.localCache[e]})()}}return e.type="LOCAL",e})(),Xn=(()=>{class e extends Qn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let er=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){var t=this;return(0,r.Z)(function*(){const n=e,{eventId:i,eventType:s,data:o}=n.data,a=t.handlersMap[s];if(!(null==a?void 0:a.size))return;n.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const c=Array.from(a).map(function(){var e=(0,r.Z)(function*(e){return e(n.origin,o)});return function(t){return e.apply(this,arguments)}}()),u=yield function(e){return Promise.all(e.map(function(){var e=(0,r.Z)(function*(e){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}});return function(t){return e.apply(this,arguments)}}()))}(c);n.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:u})})()}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||0===this.handlersMap[e].size)&&delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function tr(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class nr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,n=50){var i=this;return(0,r.Z)(function*(){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{const u=tr("",20);r.port1.start();const l=setTimeout(()=>{c(new Error("unsupported_event"))},n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===u)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(l),clearTimeout(s),c(new Error("invalid_response"))}}},i.handlers.add(o),r.port1.addEventListener("message",o.onMessage),i.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&i.removeMessageHandler(o)})})()}}function rr(){return window}function ir(){return void 0!==rr().WorkerGlobalScope&&"function"==typeof rr().importScripts}function sr(){return(sr=(0,r.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(Ki){return null}})).apply(this,arguments)}const or="firebaseLocalStorageDb",ar="firebaseLocalStorage",cr="fbase_key";class ur{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function lr(e,t){return e.transaction([ar],t?"readwrite":"readonly").objectStore(ar)}function hr(){const e=indexedDB.open(or,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(ar,{keyPath:cr})}catch(r){n(r)}}),e.addEventListener("success",(0,r.Z)(function*(){const n=e.result;n.objectStoreNames.contains(ar)?t(n):(n.close(),yield function(){const e=indexedDB.deleteDatabase(or);return new ur(e).toPromise()}(),t(yield hr()))}))})}function dr(e,t,n){return fr.apply(this,arguments)}function fr(){return(fr=(0,r.Z)(function*(e,t,n){const r=lr(e,!0).put({[cr]:t,value:n});return new ur(r).toPromise()})).apply(this,arguments)}function pr(){return(pr=(0,r.Z)(function*(e,t){const n=lr(e,!1).get(t),r=yield new ur(n).toPromise();return void 0===r?null:r.value})).apply(this,arguments)}function gr(e,t){const n=lr(e,!0).delete(t);return new ur(n).toPromise()}const mr=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var e=this;return(0,r.Z)(function*(){return e.db||(e.db=yield hr()),e.db})()}_withRetries(e){var t=this;return(0,r.Z)(function*(){let n=0;for(;;)try{const n=yield t._openDb();return yield e(n)}catch(r){if(n++>3)throw r;t.db&&(t.db.close(),t.db=void 0)}})()}initializeServiceWorkerMessaging(){var e=this;return(0,r.Z)(function*(){return ir()?e.initializeReceiver():e.initializeSender()})()}initializeReceiver(){var e=this;return(0,r.Z)(function*(){e.receiver=er._getInstance(ir()?self:null),e.receiver._subscribe("keyChanged",function(){var t=(0,r.Z)(function*(t,n){return{keyProcessed:(yield e._poll()).includes(n.key)}});return function(e,n){return t.apply(this,arguments)}}()),e.receiver._subscribe("ping",function(){var e=(0,r.Z)(function*(e,t){return["keyChanged"]});return function(t,n){return e.apply(this,arguments)}}())})()}initializeSender(){var e=this;return(0,r.Z)(function*(){var t,n;if(e.activeServiceWorker=yield function(){return sr.apply(this,arguments)}(),!e.activeServiceWorker)return;e.sender=new nr(e.activeServiceWorker);const r=yield e.sender._send("ping",{},800);!r||(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(e.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(e){var t=this;return(0,r.Z)(function*(){if(t.sender&&t.activeServiceWorker&&function(){var e;return(null===(e=null==navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===t.activeServiceWorker)try{yield t.sender._send("keyChanged",{key:e},t.serviceWorkerReceiverAvailable?800:50)}catch(n){}})()}_isAvailable(){return(0,r.Z)(function*(){try{if(!indexedDB)return!1;const e=yield hr();return yield dr(e,Yn,"1"),yield gr(e,Yn),!0}catch(e){}return!1})()}_withPendingWrite(e){var t=this;return(0,r.Z)(function*(){t.pendingWrites++;try{yield e()}finally{t.pendingWrites--}})()}_set(e,t){var n=this;return(0,r.Z)(function*(){return n._withPendingWrite((0,r.Z)(function*(){return yield n._withRetries(n=>dr(n,e,t)),n.localCache[e]=t,n.notifyServiceWorker(e)}))})()}_get(e){var t=this;return(0,r.Z)(function*(){const n=yield t._withRetries(t=>function(e,t){return pr.apply(this,arguments)}(t,e));return t.localCache[e]=n,n})()}_remove(e){var t=this;return(0,r.Z)(function*(){return t._withPendingWrite((0,r.Z)(function*(){return yield t._withRetries(t=>gr(t,e)),delete t.localCache[e],t.notifyServiceWorker(e)}))})()}_poll(){var e=this;return(0,r.Z)(function*(){const t=yield e._withRetries(e=>{const t=lr(e,!1).getAll();return new ur(t).toPromise()});if(!t)return[];if(0!==e.pendingWrites)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(e.localCache[i])!==JSON.stringify(s)&&(e.notifyListeners(i,s),n.push(i));for(const i of Object.keys(e.localCache))e.localCache[i]&&!r.has(i)&&(e.notifyListeners(i,null),n.push(i));return n})()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){var e=this;this.stopPolling(),this.pollTimer=setInterval((0,r.Z)(function*(){return e._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function yr(e,t){return L(e,"POST","/v2/accounts/mfaSignIn:start",D(e,t))}function _r(){return(_r=(0,r.Z)(function*(e){return(yield L(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function vr(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function wr(e){return`__${e}${Math.floor(1e6*Math.random())}`}const br=1e12;class Ir{constructor(e){this.auth=e,this.counter=br,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Tr(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||br;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||br))||void 0===t?void 0:t.getResponse())||""}execute(e){var t=this;return(0,r.Z)(function*(){var n;return null===(n=t._widgets.get(e||br))||void 0===n||n.execute(),""})()}}class Tr{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;b(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Cr=wr("rcb"),Er=new x(3e4,6e4);class Sr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!rr().grecaptcha}load(e,t=""){return b((n=t).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(n),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve(rr().grecaptcha):new Promise((n,r)=>{const s=rr().setTimeout(()=>{r(y(e,"network-request-failed"))},Er.get());rr()[Cr]=()=>{rr().clearTimeout(s),delete rr()[Cr];const i=rr().grecaptcha;if(!i)return void r(y(e,"internal-error"));const o=i.render;i.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(i)},vr(`https://www.google.com/recaptcha/api.js??${(0,i.xO)({onload:Cr,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),r(y(e,"internal-error"))})});var n}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!rr().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class kr{load(e){return(0,r.Z)(function*(){return new Ir(e)})()}clearedOneInstance(){}}const Ar="recaptcha",xr={theme:"light",type:"image"};class Rr{constructor(e,t=Object.assign({},xr),n){this.parameters=t,this.type=Ar,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=xe(n),this.isInvisible="invisible"===this.parameters.size,b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;b(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new kr:new Sr,this.validateStartingState()}verify(){var e=this;return(0,r.Z)(function*(){e.assertNotDestroyed();const t=yield e.render(),n=e.getAssertedRecaptcha();return n.getResponse(t)||new Promise(r=>{const i=t=>{!t||(e.tokenChangeListeners.delete(i),r(t))};e.tokenChangeListeners.add(i),e.isInvisible&&n.execute(t)})})()}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){b(!this.parameters.sitekey,this.auth,"argument-error"),b(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),b("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=rr()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){b(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var e=this;return(0,r.Z)(function*(){if(yield e.init(),!e.widgetId){let t=e.container;if(!e.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}e.widgetId=e.getAssertedRecaptcha().render(t,e.parameters)}return e.widgetId})()}init(){var e=this;return(0,r.Z)(function*(){b(k()&&!ir(),e.auth,"internal-error"),yield function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),e.recaptcha=yield e._recaptchaLoader.load(e.auth,e.auth.languageCode||void 0);const t=yield function(e){return _r.apply(this,arguments)}(e.auth);b(t,e.auth,"internal-error"),e.parameters.sitekey=t})()}getAssertedRecaptcha(){return b(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Nr{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=lt._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}function Or(e,t,n){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,r.Z)(function*(e,t,n){const r=xe(e),s=yield Ur(r,t,(0,i.m9)(n));return new Nr(s,e=>qt(r,e))})).apply(this,arguments)}function Dr(e,t,n){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);yield Lt(!1,r,"phone");const s=yield Ur(r.auth,t,(0,i.m9)(n));return new Nr(s,e=>zt(r,e))})).apply(this,arguments)}function Mr(e,t,n){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e),s=yield Ur(r.auth,t,(0,i.m9)(n));return new Nr(s,e=>Ht(r,e))})).apply(this,arguments)}function Ur(e,t,n){return Vr.apply(this,arguments)}function Vr(){return(Vr=(0,r.Z)(function*(e,t,n){var r;const i=yield n.verify();try{let s;if(b("string"==typeof i,e,"argument-error"),b(n.type===Ar,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return b("enroll"===t.type,e,"internal-error"),(yield Zn(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{b("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return b(n,e,"missing-multi-factor-info"),(yield yr(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=yield it(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}})).apply(this,arguments)}function jr(e,t){return qr.apply(this,arguments)}function qr(){return(qr=(0,r.Z)(function*(e,t){yield Pt((0,i.m9)(e),t)})).apply(this,arguments)}let Br=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=xe(t)}verifyPhoneNumber(e,t){return Ur(this.auth,e,(0,i.m9)(t))}static credential(e,t){return lt._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?lt._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function zr(e,t){return t?E(t):(b(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class $r extends De{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return tt(e,this._buildIdpRequest())}_linkToIdToken(e,t){return tt(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return tt(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Hr(e){return Vt(e.auth,new $r(e),e.bypassAuthState)}function Zr(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Ft(n,new $r(e),e.bypassAuthState)}function Gr(e){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,r.Z)(function*(e){const{auth:t,user:n}=e;return b(n,t,"internal-error"),Pt(n,new $r(e),e.bypassAuthState)})).apply(this,arguments)}class Kr{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){var e=this;return new Promise(function(){var t=(0,r.Z)(function*(t,n){e.pendingPromise={resolve:t,reject:n};try{e.eventManager=yield e.resolver._initialize(e.auth),yield e.onExecution(),e.eventManager.registerConsumer(e)}catch(r){e.reject(r)}});return function(e,n){return t.apply(this,arguments)}}())}onAuthEvent(e){var t=this;return(0,r.Z)(function*(){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o)return void t.reject(o);const c={auth:t.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:t.user,bypassAuthState:t.bypassAuthState};try{t.resolve(yield t.getIdpTask(a)(c))}catch(u){t.reject(u)}})()}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Hr;case"linkViaPopup":case"linkViaRedirect":return Gr;case"reauthViaPopup":case"reauthViaRedirect":return Zr;default:m(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yr=new x(2e3,1e4);function Qr(e,t,n){return Jr.apply(this,arguments)}function Jr(){return(Jr=(0,r.Z)(function*(e,t,n){const r=xe(e);v(e,t,ft);const i=zr(r,n);return new ri(r,"signInViaPopup",t,i).executeNotNull()})).apply(this,arguments)}function Xr(e,t,n){return ei.apply(this,arguments)}function ei(){return(ei=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=zr(r.auth,n);return new ri(r.auth,"reauthViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}function ti(e,t,n){return ni.apply(this,arguments)}function ni(){return(ni=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=zr(r.auth,n);return new ri(r.auth,"linkViaPopup",t,s,r).executeNotNull()})).apply(this,arguments)}let ri=(()=>{class e extends Kr{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}executeNotNull(){var e=this;return(0,r.Z)(function*(){const t=yield e.execute();return b(t,e.auth,"internal-error"),t})()}onExecution(){var e=this;return(0,r.Z)(function*(){T(1===e.filter.length,"Popup operations only handle one event");const t=tr();e.authWindow=yield e.resolver._openPopup(e.auth,e.provider,e.filter[0],t),e.authWindow.associatedEvent=t,e.resolver._originValidation(e.auth).catch(t=>{e.reject(t)}),e.resolver._isIframeWebStorageSupported(e.auth,t=>{t||e.reject(y(e.auth,"web-storage-unsupported"))}),e.pollUserCancellation()})()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,Yr.get())};e()}}return e.currentPopupAction=null,e})();const ii=new Map;class si extends Kr{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}execute(){var e=()=>super.execute,t=this;return(0,r.Z)(function*(){let n=ii.get(t.auth._key());if(!n){try{const r=(yield function(e,t){return oi.apply(this,arguments)}(t.resolver,t.auth))?yield e().call(t):null;n=()=>Promise.resolve(r)}catch(r){n=()=>Promise.reject(r)}ii.set(t.auth._key(),n)}return t.bypassAuthState||ii.set(t.auth._key(),()=>Promise.resolve(null)),n()})()}onAuthEvent(e){var t=()=>super.onAuthEvent,n=this;return(0,r.Z)(function*(){if("signInViaRedirect"===e.type)return t().call(n,e);if("unknown"!==e.type){if(e.eventId){const r=yield n.auth._redirectUserForId(e.eventId);if(r)return n.user=r,t().call(n,e);n.resolve(null)}}else n.resolve(null)})()}onExecution(){return(0,r.Z)(function*(){})()}cleanUp(){}}function oi(){return(oi=(0,r.Z)(function*(e,t){const n=hi(t),r=li(e);if(!(yield r._isAvailable()))return!1;const i="true"===(yield r._get(n));return yield r._remove(n),i})).apply(this,arguments)}function ai(e,t){return ci.apply(this,arguments)}function ci(){return(ci=(0,r.Z)(function*(e,t){return li(e)._set(hi(t),"true")})).apply(this,arguments)}function ui(){ii.clear()}function li(e){return E(e._redirectPersistence)}function hi(e){return pe("pendingRedirect",e.config.apiKey,e.name)}function di(e,t,n){return function(e,t,n){return fi.apply(this,arguments)}(e,t,n)}function fi(){return(fi=(0,r.Z)(function*(e,t,n){const r=xe(e);v(e,t,ft);const i=zr(r,n);return yield ai(i,r),i._openRedirect(r,t,"signInViaRedirect")})).apply(this,arguments)}function pi(e,t,n){return function(e,t,n){return gi.apply(this,arguments)}(e,t,n)}function gi(){return(gi=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=zr(r.auth,n);yield ai(s,r.auth);const o=yield Ii(r);return s._openRedirect(r.auth,t,"reauthViaRedirect",o)})).apply(this,arguments)}function mi(e,t,n){return function(e,t,n){return yi.apply(this,arguments)}(e,t,n)}function yi(){return(yi=(0,r.Z)(function*(e,t,n){const r=(0,i.m9)(e);v(r.auth,t,ft);const s=zr(r.auth,n);yield Lt(!1,r,t.providerId),yield ai(s,r.auth);const o=yield Ii(r);return s._openRedirect(r.auth,t,"linkViaRedirect",o)})).apply(this,arguments)}function _i(e,t){return vi.apply(this,arguments)}function vi(){return(vi=(0,r.Z)(function*(e,t){return yield xe(e)._initializationPromise,wi(e,t,!1)})).apply(this,arguments)}function wi(e,t){return bi.apply(this,arguments)}function bi(){return(bi=(0,r.Z)(function*(e,t,n=!1){const r=xe(e),i=zr(r,t),s=yield new si(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,yield r._persistUserIfCurrent(s.user),yield r._setRedirectUser(null,t)),s})).apply(this,arguments)}function Ii(e){return Ti.apply(this,arguments)}function Ti(){return(Ti=(0,r.Z)(function*(e){const t=tr(`${e.uid}:::`);return e._redirectEventId=t,yield e.auth._setRedirectUser(e),yield e.auth._persistUserIfCurrent(e),t})).apply(this,arguments)}class Ci{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Si(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Si(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ei(e))}saveEventToCache(e){this.cachedEventUids.add(Ei(e)),this.lastProcessedEventTime=Date.now()}}function Ei(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Si({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}function ki(e){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,r.Z)(function*(e,t={}){return L(e,"GET","/v1/projects",t)})).apply(this,arguments)}const xi=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ri=/^https?/;function Ni(){return(Ni=(0,r.Z)(function*(e){if(e.config.emulator)return;const{authorizedDomains:t}=yield ki(e);for(const r of t)try{if(Oi(r))return}catch(n){}m(e,"unauthorized-domain")})).apply(this,arguments)}function Oi(e){const t=S(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Ri.test(n))return!1;if(xi.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Pi=new x(3e4,6e4);function Di(){const e=rr().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Li=null;function Mi(e){return Li=Li||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Di(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Di(),n(y(e,"network-request-failed"))},timeout:Pi.get()})}if(null===(i=null===(r=rr().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=rr().gapi)||void 0===s?void 0:s.load)){const t=wr("iframefcb");return rr()[t]=()=>{gapi.load?o():n(y(e,"network-request-failed"))},vr(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw Li=null,e})}(e),Li}const Fi=new x(5e3,15e3),Ui={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ji(e){const t=e.config;b(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?R(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:s.SDK_VERSION},o=Vi.get(e.config.apiHost);o&&(r.eid=o);const a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),`${n}?${(0,i.xO)(r).slice(1)}`}function qi(){return(qi=(0,r.Z)(function*(e){const t=yield Mi(e),n=rr().gapi;return b(n,e,"internal-error"),t.open({where:document.body,url:ji(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ui,dontclear:!0},t=>new Promise(function(){var n=(0,r.Z)(function*(n,r){yield t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=rr().setTimeout(()=>{r(i)},Fi.get());function o(){rr().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})});return function(e,t){return n.apply(this,arguments)}}()))})).apply(this,arguments)}const Bi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class zi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function $i(e,t,n,r,o,a){b(e.config.authDomain,e,"auth-domain-config-required"),b(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:s.SDK_VERSION,eventId:o};if(t instanceof ft){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,i.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof pt){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const i of Object.keys(u))void 0===u[i]&&delete u[i];return`${function({config:e}){return e.emulator?R(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,i.xO)(u).slice(1)}`}const Hi="webStorageSupport",Zi=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Xn,this._completeRedirectFn=wi}_openPopup(e,t,n,s){var o=this;return(0,r.Z)(function*(){var r;T(null===(r=o.eventManagers[e._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const a=$i(e,t,n,S(),s);return function(e,t,n,r=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},Bi),{width:r.toString(),height:s.toString(),top:o,left:a}),l=(0,i.z$)().toLowerCase();n&&(c=ve(l)?"_blank":n),ye(l)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,i.z$)()){var t;return Ce(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new zi(null);const d=window.open(t||"",c,h);b(d,e,"popup-blocked");try{d.focus()}catch(f){}return new zi(d)}(e,a,tr())})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s._originValidation(e),r=$i(e,t,n,S(),i),rr().location.href=r,new Promise(()=>{});var r})()}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}initAndGetManager(e){var t=this;return(0,r.Z)(function*(){const n=yield function(e){return qi.apply(this,arguments)}(e),r=new Ci(e);return n.register("authEvent",t=>(b(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:r.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),t.eventManagers[e._key()]={manager:r},t.iframes[e._key()]=n,r})()}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Hi,{type:Hi},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[Hi];void 0!==i&&t(!!i),m(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return Ni.apply(this,arguments)}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Se()||_e()||Ce()}};class Gi extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return I("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new Gi(e)}_finalizeEnroll(e,t,n){return function(e,t){return L(e,"POST","/v2/accounts/mfaEnrollment:finalize",D(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return L(e,"POST","/v2/accounts/mfaSignIn:finalize",D(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Wi=(()=>{class e{constructor(){}static assertion(e){return Gi._fromCredential(e)}}return e.FACTOR_ID="phone",e})();var Ki,Yi="@firebase/auth";class Qi{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}getToken(e){var t=this;return(0,r.Z)(function*(){return t.assertAuthConfigured(),yield t.auth._initializationPromise,t.auth.currentUser?{accessToken:yield t.auth.currentUser.getIdToken(e)}:null})()}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);!t||(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){b(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ji(e=(0,s.getApp)()){const t=(0,s._getProvider)(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=(0,s._getProvider)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,i.vZ)(r,null!=t?t:{}))return e;m(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Zi,persistence:[mr,Jn,Xn]})}Ki="Browser",(0,s._registerComponent)(new c.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{b(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),b(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:Ki,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:ke(Ki)},s=new Ae(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(E);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,s._registerComponent)(new c.wA("auth-internal",e=>{const t=xe(e.getProvider("auth").getImmediate());return new Qi(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,s.registerVersion)(Yi,"0.19.4",void 0),(0,s.registerVersion)(Yi,"0.19.4","esm2017")},3854:function(e,t,n){"use strict";n.d(t,{BH:function(){return f},LL:function(){return R},ZR:function(){return x},gQ:function(){return Z},zI:function(){return A},hu:function(){return r},g5:function(){return i},US:function(){return o},tV:function(){return u},h$:function(){return a},$s:function(){return X},r3:function(){return F},Sg:function(){return p},ne:function(){return G},p$:function(){return l},vZ:function(){return q},ZB:function(){return h},gK:function(){return Y},pd:function(){return H},m9:function(){return ee},z$:function(){return g},GJ:function(){return M},jU:function(){return _},ru:function(){return v},d:function(){return b},xb:function(){return V},w1:function(){return I},hl:function(){return S},uI:function(){return m},UG:function(){return y},Yr:function(){return C},b$:function(){return w},G6:function(){return E},Mn:function(){return T},w9:function(){return L},cI:function(){return O},UI:function(){return j},xO:function(){return z},zd:function(){return $},DV:function(){return U},ug:function(){return J},dS:function(){return Q},Pz:function(){return P},eu:function(){return k}});const r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0;let u=(15&o)<<2|c>>6,l=63&c;a||(l=64,s||(u=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[u],n[l])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){const t=s(e);return o.encodeByteArray(t,!0)},c=function(e){return a(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(e){return h(void 0,e)}function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)!t.hasOwnProperty(n)||!d(n)||(e[n]=h(e[n],t[n]));return e}function d(e){return"__proto__"!==e}class f{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function g(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function m(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(g())}function y(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function _(){return"object"==typeof self&&self.self===self}function v(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function w(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function b(){return g().indexOf("Electron/")>=0}function I(){const e=g();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function T(){return g().indexOf("MSAppHost/")>=0}function C(){return!1}function E(){return!y()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function S(){return"object"==typeof indexedDB}function k(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function A(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class x extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,x.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(N,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new x(r,`${this.serviceName}: ${s} (${r}).`,n)}}const N=/\{\$([^}]+)}/g;function O(e){return JSON.parse(e)}function P(e){return JSON.stringify(e)}const D=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=O(u(s[0])||""),n=O(u(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},L=function(e){const t=D(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},M=function(e){const t=D(e).claims;return"object"==typeof t&&!0===t.admin};function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function U(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]}function V(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function j(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function q(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(B(n)&&B(s)){if(!q(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function B(e){return null!==e&&"object"==typeof e}function z(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function $(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function H(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class Z{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let l=0;l<16;l++)n[l]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let l=0;l<16;l++)n[l]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let l=16;l<80;l++){const e=n[l-3]^n[l-8]^n[l-14]^n[l-16];n[l]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],u=this.chain_[4];for(let l=0;l<80;l++){l<40?l<20?(r=c^o&(a^c),i=1518500249):(r=o^a^c,i=1859775393):l<60?(r=o&a|c&(o|a),i=2400959708):(r=o^a^c,i=3395469782);const e=(s<<5|s>>>27)+r+u+i+n[l]&4294967295;u=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function G(e,t){const n=new W(e,t);return n.subscribe.bind(n)}class W{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=K),void 0===r.error&&(r.error=K),void 0===r.complete&&(r.complete=K);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K(){}function Y(e,t){return`${e} failed: ${t} argument `}const Q=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},J=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function X(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function ee(e){return e&&e._delegate?e._delegate:e}},3935:function(e,t,n){"use strict";n.d(t,{IH:function(){return G},Gb:function(){return W},Kz:function(){return Q},Iv:function(){return Y}});var r=n(8239),i=n(8026),s=n(5422),o=n(3854),a=n(3910);n(3328);const c="analytics",u="firebase_id",l="origin",h="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",d="https://www.googletagmanager.com/gtag/js",f=new s.Yd("@firebase/analytics");function p(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function g(e,t){const n=document.createElement("script");n.src=`${d}?l=${e}&id=${t}`,n.async=!0,document.head.appendChild(n)}function m(e,t,n,r,i,s){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(e,t,n,r,i,s){const o=r[i];try{if(o)yield t[o];else{const e=(yield p(n)).find(e=>e.measurementId===i);e&&(yield t[e.appId])}}catch(a){f.error(a)}e("config",i,s)})).apply(this,arguments)}function _(e,t,n,r,i){return v.apply(this,arguments)}function v(){return(v=(0,r.Z)(function*(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=yield p(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),yield Promise.all(s),e("event",r,i||{})}catch(s){f.error(s)}})).apply(this,arguments)}function w(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(d))return t;return null}const b=new o.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),I=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function T(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}function C(e){return E.apply(this,arguments)}function E(){return(E=(0,r.Z)(function*(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:T(r)},s=h.replace("{app-id}",n),o=yield fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=yield o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw b.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()})).apply(this,arguments)}function S(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(function*(e,t=I,n){const{appId:i,apiKey:s,measurementId:o}=e.options;if(!i)throw b.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:i};throw b.create("no-api-key")}const a=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new O;return setTimeout((0,r.Z)(function*(){c.abort()}),void 0!==n?n:6e4),A({appId:i,apiKey:s,measurementId:o},a,c,t)})).apply(this,arguments)}function A(e,t,n){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(function*(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=I){const{appId:s,measurementId:a}=e;try{yield R(r,t)}catch(c){if(a)return f.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:a};throw c}try{const t=yield C(e);return i.deleteThrottleMetadata(s),t}catch(c){if(!N(c)){if(i.deleteThrottleMetadata(s),a)return f.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:a};throw c}const t=503===Number(c.customData.httpStatus)?(0,o.$s)(n,i.intervalMillis,30):(0,o.$s)(n,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,u),f.debug(`Calling attemptFetch again in ${t} millis`),A(e,u,r,i)}})).apply(this,arguments)}function R(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(b.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function N(e){if(!(e instanceof o.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}class O{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}function P(){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(function*(){if(!(0,o.hl)())return f.warn(b.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,o.eu)()}catch(e){return f.warn(b.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0})).apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(e,t,n,r,i,s,o){var a;const c=S(e);c.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&f.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>f.error(e)),t.push(c);const h=P().then(e=>{if(e)return r.getId()}),[d,p]=yield Promise.all([c,h]);w()||g(s,d.measurementId),i("js",new Date);const m=null!==(a=null==o?void 0:o.config)&&void 0!==a?a:{};return m[l]="firebase",m.update=!0,null!=p&&(m[u]=p),i("config",d.measurementId,m),d.measurementId})).apply(this,arguments)}class M{constructor(e){this.app=e}_delete(){return delete F[this.app.options.appId],Promise.resolve()}}let F={},U=[];const V={};let j,q,B="dataLayer",z=!1;function $(e,t,n){!function(){const e=[];if((0,o.ru)()&&e.push("This is a browser extension environment."),(0,o.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=b.create("invalid-analytics-context",{errorInfo:t});f.warn(n.message)}}();const i=e.options.appId;if(!i)throw b.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw b.create("no-api-key");f.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=F[i])throw b.create("already-exists",{id:i});if(!z){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(B);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,i,s){let o=function(...e){window[i].push(arguments)};return window[s]&&"function"==typeof window[s]&&(o=window[s]),window[s]=function(e,t,n,i){function s(){return(s=(0,r.Z)(function*(r,s,o){try{"event"===r?yield _(e,t,n,s,o):"config"===r?yield m(e,t,n,i,s,o):e("set",s)}catch(a){f.error(a)}})).apply(this,arguments)}return function(e,t,n){return s.apply(this,arguments)}}(o,e,t,n),{gtagCore:o,wrappedGtag:window[s]}}(F,U,V,B,"gtag");q=e,j=t,z=!0}return F[i]=function(e,t,n,r,i,s,o){return L.apply(this,arguments)}(e,U,V,t,j,B,n),new M(e)}function H(){return(H=(0,r.Z)(function*(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=yield t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}})).apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e,t,n,r){if(r&&r.global)return e("set",{user_id:n}),Promise.resolve();e("config",yield t,{update:!0,user_id:n})})).apply(this,arguments)}function G(e=(0,i.getApp)()){e=(0,o.m9)(e);const t=(0,i._getProvider)(e,c);return t.isInitialized()?t.getImmediate():function(e,t={}){const n=(0,i._getProvider)(e,c);if(n.isInitialized()){const e=n.getImmediate();if((0,o.vZ)(t,n.getOptions()))return e;throw b.create("already-initialized")}return n.initialize({options:t})}(e)}function W(){return K.apply(this,arguments)}function K(){return(K=(0,r.Z)(function*(){if((0,o.ru)()||!(0,o.zI)()||!(0,o.hl)())return!1;try{return yield(0,o.eu)()}catch(e){return!1}})).apply(this,arguments)}function Y(e,t,n){e=(0,o.m9)(e),function(e,t,n,r){return Z.apply(this,arguments)}(q,F[e.app.options.appId],t,n).catch(e=>f.error(e))}function Q(e,t,n,r){e=(0,o.m9)(e),function(e,t,n,r,i){return H.apply(this,arguments)}(q,F[e.app.options.appId],t,n,r).catch(e=>f.error(e))}const J="@firebase/analytics";(0,i._registerComponent)(new a.wA(c,(e,{options:t})=>$(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,i._registerComponent)(new a.wA("analytics-internal",function(e){try{const t=e.getProvider(c).getImmediate();return{logEvent:(e,n,r)=>Q(t,e,n,r)}}catch(t){throw b.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,i.registerVersion)(J,"0.7.4"),(0,i.registerVersion)(J,"0.7.4","esm2017")},2329:function(e,t,n){"use strict";n.d(t,{Mq:function(){return r.getApp},C6:function(){return r.getApps},ZF:function(){return r.initializeApp},KN:function(){return r.registerVersion}});var r=n(8026);(0,r.registerVersion)("firebase","9.6.1","app")},7841:function(e,t,n){"use strict";n.d(t,{Z:function(){return r.Z}});var r=n(3394);r.Z.registerVersion("firebase","9.6.1","app-compat")},4828:function(e,t,n){"use strict";n.r(t);var r=n(8239),i=n(3394),s=n(9353),o=n(3854),a=(n(8026),n(5422),n(3910));function c(){return window}function u(){return(u=(0,r.Z)(function*(e,t,n){var r;const{BuildInfo:i}=c();(0,s.ap)(t.sessionId,"AuthEvent did not contain a session ID");const o=yield d(t.sessionId),a={};return(0,s.aq)()?a.ibi=i.packageName:(0,s.ar)()?a.apn=i.packageName:(0,s.as)(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=o,(0,s.at)(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)})).apply(this,arguments)}function l(){return(l=(0,r.Z)(function*(e){const{BuildInfo:t}=c(),n={};(0,s.aq)()?n.iosBundleId=t.packageName:(0,s.ar)()?n.androidPackageName=t.packageName:(0,s.as)(e,"operation-not-supported-in-this-environment"),yield(0,s.au)(e,n)})).apply(this,arguments)}function h(){return(h=(0,r.Z)(function*(e,t,n){const{cordova:r}=c();let i=()=>{};try{yield new Promise((o,a)=>{let c=null;function u(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function l(){c||(c=window.setTimeout(()=>{a((0,s.av)(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null==document?void 0:document.visibilityState)&&l()}t.addPassiveListener(u),document.addEventListener("resume",l,!1),(0,s.ar)()&&document.addEventListener("visibilitychange",h,!1),i=()=>{t.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",h,!1),c&&window.clearTimeout(c)}})}finally{i()}})).apply(this,arguments)}function d(e){return f.apply(this,arguments)}function f(){return(f=(0,r.Z)(function*(e){const t=p(e),n=yield crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function p(e){if((0,s.ap)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}class g extends s.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}initialized(){var e=this;return(0,r.Z)(function*(){yield e.initPromise})()}}function m(e){return y.apply(this,arguments)}function y(){return(y=(0,r.Z)(function*(e){const t=yield v()._get(w(e));return t&&(yield v()._remove(w(e))),t})).apply(this,arguments)}function _(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function v(){return(0,s.ax)(s.b)}function w(e){return(0,s.ay)("authEvent",e.config.apiKey,e.name)}function b(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,o.zd)(n.join("?"))}function I(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,s.av)("no-auth-event")}}function T(){var e;return(null===(e=null==self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function C(e=(0,o.z$)()){return!("file:"!==T()&&"ionic:"!==T()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function E(){try{const e=self.localStorage,t=s.aG();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,o.z$)()){return(0,o.w1)()&&11===(null==document?void 0:document.documentMode)||function(e=(0,o.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,o.hl)()}catch(Q){return S()&&(0,o.hl)()}return!1}function S(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function k(){return("http:"===T()||"https:"===T()||(0,o.ru)()||C())&&!((0,o.b$)()||(0,o.UG)())&&E()&&!S()}function A(){return C()&&"undefined"!=typeof document}function x(){return(x=(0,r.Z)(function*(){return!!A()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})})).apply(this,arguments)}const R={LOCAL:"local",NONE:"none",SESSION:"session"},N=s.aw,O="persistence";function P(e){return D.apply(this,arguments)}function D(){return(D=(0,r.Z)(function*(e){yield e._initializationPromise;const t=L(),n=s.ay(O,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())})).apply(this,arguments)}function L(){return"undefined"!=typeof window?window:null}const M=s.aw;class F{constructor(){this.browserResolver=s.ax(s.k),this.cordovaResolver=s.ax(class{constructor(){this._redirectPersistence=s.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=s.aA}_initialize(e){var t=this;return(0,r.Z)(function*(){const n=e._key();let r=t.eventManagers.get(n);return r||(r=new g(e),t.eventManagers.set(n,r),t.attachCallbackListeners(e,r)),r})()}_openPopup(e){(0,s.as)(e,"operation-not-supported-in-this-environment")}_openRedirect(e,t,n,i){var o=this;return(0,r.Z)(function*(){!function(e){var t,n,r,i,o,a,u,l,h,d;const f=c();(0,s.aw)("function"==typeof(null===(t=null==f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,s.aw)(void 0!==(null===(n=null==f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,s.aw)("function"==typeof(null===(o=null===(i=null===(r=null==f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aw)("function"==typeof(null===(l=null===(u=null===(a=null==f?void 0:f.cordova)||void 0===a?void 0:a.plugins)||void 0===u?void 0:u.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,s.aw)("function"==typeof(null===(d=null===(h=null==f?void 0:f.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const r=yield o._initialize(e);yield r.initialized(),r.resetRedirect(),(0,s.aB)(),yield o._originValidation(e);const a=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:_(),postBody:null,tenantId:e.tenantId,error:(0,s.av)(e,"no-auth-event")}}(e,n,i);yield function(e,t){return v()._set(w(e),t)}(e,a);const l=yield function(e,t,n){return u.apply(this,arguments)}(e,a,t),d=yield function(e){const{cordova:t}=c();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,(0,s.ao)()?"_blank":"_system","location=yes"),n(i)})})}(l);return function(e,t,n){return h.apply(this,arguments)}(e,r,d)})()}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return l.apply(this,arguments)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:i,BuildInfo:o}=c(),a=setTimeout((0,r.Z)(function*(){yield m(e),t.onEvent(I())}),500),u=function(){var n=(0,r.Z)(function*(n){clearTimeout(a);const r=yield m(e);let i=null;r&&(null==n?void 0:n.url)&&(i=function(e,t){var n,r;const i=function(e){const t=b(e),n=t.link?decodeURIComponent(t.link):void 0,r=b(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return b(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const o=b(i),a=o.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(o.firebaseError)):null,c=null===(r=null===(n=null==a?void 0:a.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],u=c?(0,s.av)(c):null;return u?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}(r,n.url)),t.onEvent(i||I())});return function(e){return n.apply(this,arguments)}}();void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,u);const l=i,h=`${o.packageName.toLowerCase()}://`;c().handleOpenURL=function(){var e=(0,r.Z)(function*(e){if(e.toLowerCase().startsWith(h)&&u({url:e}),"function"==typeof l)try{l(e)}catch(t){console.error(t)}});return function(t){return e.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=s.a,this._completeRedirectFn=s.aA}_initialize(e){var t=this;return(0,r.Z)(function*(){return yield t.selectUnderlyingResolver(),t.assertedUnderlyingResolver._initialize(e)})()}_openPopup(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openPopup(e,t,n,i)})()}_openRedirect(e,t,n,i){var s=this;return(0,r.Z)(function*(){return yield s.selectUnderlyingResolver(),s.assertedUnderlyingResolver._openRedirect(e,t,n,i)})()}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return A()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return M(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var e=this;return(0,r.Z)(function*(){if(e.underlyingResolver)return;const t=yield function(){return x.apply(this,arguments)}();e.underlyingResolver=t?e.cordovaResolver:e.browserResolver})()}}function U(e){return e.unwrap()}function V(e){return j(e)}function j(e){const{_tokenResponse:t}=e instanceof o.ZR?e.customData:e;if(!t)return null;if(!(e instanceof o.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return s.P.credentialFromResult(e);const n=t.providerId;if(!n||n===s.o.PASSWORD)return null;let r;switch(n){case s.o.GOOGLE:r=s.N;break;case s.o.FACEBOOK:r=s.M;break;case s.o.GITHUB:r=s.Q;break;case s.o.TWITTER:r=s.V;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return i||o||e||a?a?n.startsWith("saml.")?s.aJ._create(n,a):s.I._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new s.T(n).credential({idToken:e,accessToken:i,rawNonce:c}):null}return e instanceof o.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function q(e,t){return t.catch(t=>{throw t instanceof o.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new $(e,s.am(e,t));else if(r){const e=j(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:V(e),additionalUserInfo:s.ak(e),user:H.getOrCreate(t)}})}function B(e,t){return z.apply(this,arguments)}function z(){return(z=(0,r.Z)(function*(e,t){const n=yield t;return{verificationId:n.verificationId,confirm:t=>q(e,n.confirm(t))}})).apply(this,arguments)}class ${constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return q(U(this.auth),this.resolver.resolveSignIn(e))}}class H{constructor(e){this._delegate=e,this.multiFactor=s.an(e)}static getOrCreate(e){return H.USER_MAP.has(e)||H.USER_MAP.set(e,new H(e)),H.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}linkWithCredential(e){var t=this;return(0,r.Z)(function*(){return q(t.auth,s.Y(t._delegate,e))})()}linkWithPhoneNumber(e,t){var n=this;return(0,r.Z)(function*(){return B(n.auth,s.l(n._delegate,e,t))})()}linkWithPopup(e){var t=this;return(0,r.Z)(function*(){return q(t.auth,s.d(t._delegate,e,F))})()}linkWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield P(s.aC(t.auth)),s.g(t._delegate,e,F)})()}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}reauthenticateWithCredential(e){var t=this;return(0,r.Z)(function*(){return q(t.auth,s.Z(t._delegate,e))})()}reauthenticateWithPhoneNumber(e,t){return B(this.auth,s.r(this._delegate,e,t))}reauthenticateWithPopup(e){return q(this.auth,s.e(this._delegate,e,F))}reauthenticateWithRedirect(e){var t=this;return(0,r.Z)(function*(){return yield P(s.aC(t.auth)),s.h(t._delegate,e,F)})()}sendEmailVerification(e){return s.aa(this._delegate,e)}unlink(e){var t=this;return(0,r.Z)(function*(){return yield s.aj(t._delegate,e),t})()}updateEmail(e){return s.af(this._delegate,e)}updatePassword(e){return s.ag(this._delegate,e)}updatePhoneNumber(e){return s.u(this._delegate,e)}updateProfile(e){return s.ae(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return s.ab(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}H.USER_MAP=new WeakMap;const Z=s.aw;let G=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;Z(n,"invalid-api-key",{appName:e.name});let r=[s.K];if("undefined"!=typeof window){r=function(e,t){const n=L();if(!(null==n?void 0:n.sessionStorage))return[];const r=s.ay(O,e,t);switch(n.sessionStorage.getItem(r)){case R.NONE:return[s.K];case R.LOCAL:return[s.i,s.a];case R.SESSION:return[s.a];default:return[]}}(n,e.name);for(const e of[s.i,s.b,s.a])r.includes(e)||r.push(e)}Z(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?F:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:i}}),this._delegate._updateErrorMap(s.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?H.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){s.E(this._delegate,e,t)}applyActionCode(e){return s.a1(this._delegate,e)}checkActionCode(e){return s.a2(this._delegate,e)}confirmPasswordReset(e,t){return s.a0(this._delegate,e,t)}createUserWithEmailAndPassword(e,t){var n=this;return(0,r.Z)(function*(){return q(n._delegate,s.a4(n._delegate,e,t))})()}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return s.a9(this._delegate,e)}isSignInWithEmailLink(e){return s.a7(this._delegate,e)}getRedirectResult(){var e=this;return(0,r.Z)(function*(){Z(k(),e._delegate,"operation-not-supported-in-this-environment");const t=yield s.j(e._delegate,F);return t?q(e._delegate,Promise.resolve(t)):{credential:null,user:null}})()}addFrameworkForLogging(e){!function(e,t){(0,s.aC)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=W(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=W(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return s.a6(this._delegate,e,t)}sendPasswordResetEmail(e,t){return s.$(this._delegate,e,t||void 0)}setPersistence(e){var t=this;return(0,r.Z)(function*(){let n;switch(function(e,t){N(Object.values(R).includes(t),e,"invalid-persistence-type"),(0,o.b$)()?N(t!==R.SESSION,e,"unsupported-persistence-type"):(0,o.UG)()?N(t===R.NONE,e,"unsupported-persistence-type"):S()?N(t===R.NONE||t===R.LOCAL&&(0,o.hl)(),e,"unsupported-persistence-type"):N(t===R.NONE||E(),e,"unsupported-persistence-type")}(t._delegate,e),e){case R.SESSION:n=s.a;break;case R.LOCAL:n=(yield s.ax(s.i)._isAvailable())?s.i:s.b;break;case R.NONE:n=s.K;break;default:return s.as("argument-error",{appName:t._delegate.name})}return t._delegate.setPersistence(n)})()}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return q(this._delegate,s.W(this._delegate))}signInWithCredential(e){return q(this._delegate,s.X(this._delegate,e))}signInWithCustomToken(e){return q(this._delegate,s._(this._delegate,e))}signInWithEmailAndPassword(e,t){return q(this._delegate,s.a5(this._delegate,e,t))}signInWithEmailLink(e,t){return q(this._delegate,s.a8(this._delegate,e,t))}signInWithPhoneNumber(e,t){return B(this._delegate,s.s(this._delegate,e,t))}signInWithPopup(e){var t=this;return(0,r.Z)(function*(){return Z(k(),t._delegate,"operation-not-supported-in-this-environment"),q(t._delegate,s.c(t._delegate,e,F))})()}signInWithRedirect(e){var t=this;return(0,r.Z)(function*(){return Z(k(),t._delegate,"operation-not-supported-in-this-environment"),yield P(t._delegate),s.f(t._delegate,e,F)})()}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return s.a3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=R,e})();function W(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&H.getOrCreate(e)),error:t,complete:n}}class K{constructor(){this.providerId="phone",this._delegate=new s.P(U(i.Z.auth()))}static credential(e,t){return s.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}K.PHONE_SIGN_IN_METHOD=s.P.PHONE_SIGN_IN_METHOD,K.PROVIDER_ID=s.P.PROVIDER_ID;const Y=s.aw;var Q;(Q=i.Z).INTERNAL.registerComponent(new a.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new G(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:s.A.EMAIL_SIGNIN,PASSWORD_RESET:s.A.PASSWORD_RESET,RECOVER_EMAIL:s.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:s.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:s.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:s.A.VERIFY_EMAIL}},EmailAuthProvider:s.L,FacebookAuthProvider:s.M,GithubAuthProvider:s.Q,GoogleAuthProvider:s.N,OAuthProvider:s.T,SAMLAuthProvider:s.U,PhoneAuthProvider:K,PhoneMultiFactorGenerator:s.m,RecaptchaVerifier:class{constructor(e,t,n=i.Z.app()){var r;Y(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new s.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:s.V,Auth:G,AuthCredential:s.G,Error:o.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),Q.registerVersion("@firebase/auth-compat","0.2.4")},6241:function(e,t,n){"use strict";n.d(t,{KL:function(){return Ie},Gb:function(){return we}});var r=n(8239),i=(n(3328),n(3910)),s=n(6676),o=n(3854),a=n(8026);const c="/firebase-messaging-sw.js",u="/firebase-cloud-messaging-push-scope",l="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",h="google.c.a.c_id",d="google.c.a.c_l",f="google.c.a.ts",p="google.c.a.e";var g=(()=>{return(e=g||(g={})).PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked",g;var e})();function m(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function y(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const _="fcm_token_details_db",v="fcm_token_object_Store";function w(e){return b.apply(this,arguments)}function b(){return(b=(0,r.Z)(function*(e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(e=>e.name).includes(_))return null;let t=null;return(yield(0,s.openDb)(_,5,function(){var n=(0,r.Z)(function*(n){var r;if(n.oldVersion<2||!n.objectStoreNames.contains(v))return;const i=n.transaction.objectStore(v),s=yield i.index("fcmSenderId").get(e);if(yield i.clear(),s)if(2===n.oldVersion){const e=s;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(r=e.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:m(e.vapidKey)}}}else if(3===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:m(e.auth),p256dh:m(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:m(e.vapidKey)}}}else if(4===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:m(e.auth),p256dh:m(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:m(e.vapidKey)}}}});return function(e){return n.apply(this,arguments)}}())).close(),yield(0,s.deleteDb)(_),yield(0,s.deleteDb)("fcm_vapid_details_db"),yield(0,s.deleteDb)("undefined"),I(t)?t:null})).apply(this,arguments)}function I(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}const T="firebase-messaging-store";let C=null;function E(){return C||(C=(0,s.openDb)("firebase-messaging-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(T)}})),C}function S(e){return k.apply(this,arguments)}function k(){return(k=(0,r.Z)(function*(e){const t=O(e),n=yield(yield E()).transaction(T).objectStore(T).get(t);if(n)return n;{const t=yield w(e.appConfig.senderId);if(t)return yield A(e,t),t}})).apply(this,arguments)}function A(e,t){return x.apply(this,arguments)}function x(){return(x=(0,r.Z)(function*(e,t){const n=O(e),r=(yield E()).transaction(T,"readwrite");return yield r.objectStore(T).put(t,n),yield r.complete,t})).apply(this,arguments)}function R(e){return N.apply(this,arguments)}function N(){return(N=(0,r.Z)(function*(e){const t=O(e),n=(yield E()).transaction(T,"readwrite");yield n.objectStore(T).delete(t),yield n.complete})).apply(this,arguments)}function O({appConfig:e}){return e.appId}const P=new o.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function D(e,t){return L.apply(this,arguments)}function L(){return(L=(0,r.Z)(function*(e,t){const n=yield q(e),r=z(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(j(e.appConfig),i)).json()}catch(o){throw P.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw P.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw P.create("token-subscribe-no-token");return s.token})).apply(this,arguments)}function M(e,t){return F.apply(this,arguments)}function F(){return(F=(0,r.Z)(function*(e,t){const n=yield q(e),r=z(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{s=yield(yield fetch(`${j(e.appConfig)}/${t.token}`,i)).json()}catch(o){throw P.create("token-update-failed",{errorInfo:o})}if(s.error)throw P.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw P.create("token-update-no-token");return s.token})).apply(this,arguments)}function U(e,t){return V.apply(this,arguments)}function V(){return(V=(0,r.Z)(function*(e,t){const n={method:"DELETE",headers:yield q(e)};try{const r=yield(yield fetch(`${j(e.appConfig)}/${t}`,n)).json();if(r.error)throw P.create("token-unsubscribe-failed",{errorInfo:r.error.message})}catch(r){throw P.create("token-unsubscribe-failed",{errorInfo:r})}})).apply(this,arguments)}function j({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}function q(e){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(function*({appConfig:e,installations:t}){const n=yield t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})})).apply(this,arguments)}function z({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==l&&(i.web.applicationPubKey=r),i}const $=6048e5;function H(e){return Z.apply(this,arguments)}function Z(){return(Z=(0,r.Z)(function*(e){const t=yield X(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:m(t.getKey("auth")),p256dh:m(t.getKey("p256dh"))},r=yield S(e.firebaseDependencies);if(r){if(te(r.subscriptionOptions,n))return Date.now()>=r.createTime+$?K(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{yield U(e.firebaseDependencies,r.token)}catch(i){console.warn(i)}return Q(e.firebaseDependencies,n)}return Q(e.firebaseDependencies,n)})).apply(this,arguments)}function G(e){return W.apply(this,arguments)}function W(){return(W=(0,r.Z)(function*(e){const t=yield S(e.firebaseDependencies);t&&(yield U(e.firebaseDependencies,t.token),yield R(e.firebaseDependencies));const n=yield e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()})).apply(this,arguments)}function K(e,t){return Y.apply(this,arguments)}function Y(){return(Y=(0,r.Z)(function*(e,t){try{const n=yield M(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return yield A(e.firebaseDependencies,r),n}catch(n){throw yield G(e),n}})).apply(this,arguments)}function Q(e,t){return J.apply(this,arguments)}function J(){return(J=(0,r.Z)(function*(e,t){const n={token:yield D(e,t),createTime:Date.now(),subscriptionOptions:t};return yield A(e,n),n.token})).apply(this,arguments)}function X(e,t){return ee.apply(this,arguments)}function ee(){return(ee=(0,r.Z)(function*(e,t){return(yield e.pushManager.getSubscription())||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:y(t)})})).apply(this,arguments)}function te(e,t){return t.vapidKey===e.vapidKey&&t.endpoint===e.endpoint&&t.auth===e.auth&&t.p256dh===e.p256dh}function ne(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){!t.data||(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function re(e){return"object"==typeof e&&!!e&&h in e}function ie(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function se(e){return P.create("missing-app-config-values",{valueName:e})}ie("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ie("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class oe{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw se("App Configuration Object");if(!e.name)throw se("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw se(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}function ae(e){return ce.apply(this,arguments)}function ce(){return(ce=(0,r.Z)(function*(e){try{e.swRegistration=yield navigator.serviceWorker.register(c,{scope:u}),e.swRegistration.update().catch(()=>{})}catch(t){throw P.create("failed-service-worker-registration",{browserErrorMessage:t.message})}})).apply(this,arguments)}function ue(e,t){return le.apply(this,arguments)}function le(){return(le=(0,r.Z)(function*(e,t){if(!t&&!e.swRegistration&&(yield ae(e)),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw P.create("invalid-sw-registration");e.swRegistration=t}})).apply(this,arguments)}function he(e,t){return de.apply(this,arguments)}function de(){return(de=(0,r.Z)(function*(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=l)})).apply(this,arguments)}function fe(){return(fe=(0,r.Z)(function*(e,t){if(!navigator)throw P.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw P.create("permission-blocked");return yield he(e,null==t?void 0:t.vapidKey),yield ue(e,null==t?void 0:t.serviceWorkerRegistration),H(e)})).apply(this,arguments)}function pe(e,t,n){return ge.apply(this,arguments)}function ge(){return(ge=(0,r.Z)(function*(e,t,n){const r=me(t);(yield e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[h],message_name:n[d],message_time:n[f],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function me(e){switch(e){case g.NOTIFICATION_CLICKED:return"notification_open";case g.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ye(){return(ye=(0,r.Z)(function*(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===g.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(ne(n)):e.onMessageHandler.next(ne(n)));const r=n.data;re(r)&&"1"===r[p]&&(yield pe(e,n.messageType,r))})).apply(this,arguments)}const _e="@firebase/messaging",ve="0.9.4";function we(){return be.apply(this,arguments)}function be(){return(be=(0,r.Z)(function*(){return"undefined"!=typeof window&&(0,o.hl)()&&(yield(0,o.eu)())&&(0,o.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function Ie(e=(0,a.getApp)()){return we().then(e=>{if(!e)throw P.create("unsupported-browser")},e=>{throw P.create("indexed-db-unsupported")}),(0,a._getProvider)((0,o.m9)(e),"messaging").getImmediate()}(0,a._registerComponent)(new i.wA("messaging",e=>{const t=new oe(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>function(e,t){return ye.apply(this,arguments)}(t,e)),t},"PUBLIC")),(0,a._registerComponent)(new i.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>function(e,t){return fe.apply(this,arguments)}(t,e)}},"PRIVATE")),(0,a.registerVersion)(_e,ve),(0,a.registerVersion)(_e,ve,"esm2017")},4347:function(e,t,n){"use strict";n.d(t,{sN:function(){return d},Gb:function(){return I}});var r=n(8239),i=n(8026),s=n(3854),o=n(3910),a=n(5422);n(3328);const c="@firebase/remote-config",u="0.3.3",l="remote-config",h=new s.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function d(e=(0,i.getApp)()){return e=(0,s.m9)(e),(0,i._getProvider)(e,l).getImmediate()}class f{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}fetch(e){var t=this;return(0,r.Z)(function*(){const[n,r]=yield Promise.all([t.storage.getLastSuccessfulFetchTimestampMillis(),t.storage.getLastSuccessfulFetchResponse()]);if(r&&t.isCachedDataFresh(e.cacheMaxAgeMillis,n))return r;e.eTag=r&&r.eTag;const i=yield t.client.fetch(e),s=[t.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===i.status&&s.push(t.storage.setLastSuccessfulFetchResponse(i)),yield Promise.all(s),i})()}}function p(e=navigator){return e.languages&&e.languages[0]||e.language}class g{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}fetch(e){var t=this;return(0,r.Z)(function*(){const[n,r]=yield Promise.all([t.firebaseInstallations.getId(),t.firebaseInstallations.getToken()]),i=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${t.projectId}/namespaces/${t.namespace}:fetch?key=${t.apiKey}`,s={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},o={sdk_version:t.sdkVersion,app_instance_id:n,app_instance_id_token:r,app_id:t.appId,language_code:p()},a={method:"POST",headers:s,body:JSON.stringify(o)},c=fetch(i,a),u=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{yield Promise.race([c,u]),l=yield c}catch(y){let e="fetch-client-network";throw"AbortError"===y.name&&(e="fetch-timeout"),h.create(e,{originalErrorMessage:y.message})}let d=l.status;const f=l.headers.get("ETag")||void 0;let g,m;if(200===l.status){let e;try{e=yield l.json()}catch(_){throw h.create("fetch-client-parse",{originalErrorMessage:_.message})}g=e.entries,m=e.state}if("INSTANCE_STATE_UNSPECIFIED"===m?d=500:"NO_CHANGE"===m?d=304:("NO_TEMPLATE"===m||"EMPTY_CONFIG"===m)&&(g={}),304!==d&&200!==d)throw h.create("fetch-status",{httpStatus:d});return{status:d,eTag:f,config:g}})()}}class m{constructor(e,t){this.client=e,this.storage=t}fetch(e){var t=this;return(0,r.Z)(function*(){const n=(yield t.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return t.attemptFetch(e,n)})()}attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){var i=this;return(0,r.Z)(function*(){yield function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(h.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=yield i.client.fetch(e);return yield i.storage.deleteThrottleMetadata(),t}catch(r){if(!function(e){if(!(e instanceof s.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r))throw r;const t={throttleEndTimeMillis:Date.now()+(0,s.$s)(n),backoffCount:n+1};return yield i.storage.setThrottleMetadata(t),i.attemptFetch(e,t)}})()}}class y{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function _(e,t){const n=e.target.error||void 0;return h.create(t,{originalErrorMessage:n&&n.message})}const v="app_namespace_store";class w{constructor(e,t,n,r=function(){return new Promise((e,n)=>{try{const t=indexedDB.open("firebase_remote_config",1);t.onerror=e=>{n(_(e,"storage-open"))},t.onsuccess=t=>{e(t.target.result)},t.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(v,{keyPath:"compositeKey"})}}}catch(t){n(h.create("storage-open",{originalErrorMessage:t}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(e){var t=this;return(0,r.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([v],"readonly").objectStore(v),o=t.createCompositeKey(e);try{const e=s.get(o);e.onerror=e=>{i(_(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;r(t?t.value:void 0)}}catch(a){i(h.create("storage-get",{originalErrorMessage:a&&a.message}))}})})()}set(e,t){var n=this;return(0,r.Z)(function*(){const r=yield n.openDbPromise;return new Promise((i,s)=>{const o=r.transaction([v],"readwrite").objectStore(v),a=n.createCompositeKey(e);try{const e=o.put({compositeKey:a,value:t});e.onerror=e=>{s(_(e,"storage-set"))},e.onsuccess=()=>{i()}}catch(c){s(h.create("storage-set",{originalErrorMessage:c&&c.message}))}})})()}delete(e){var t=this;return(0,r.Z)(function*(){const n=yield t.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([v],"readwrite").objectStore(v),o=t.createCompositeKey(e);try{const e=s.delete(o);e.onerror=e=>{i(_(e,"storage-delete"))},e.onsuccess=()=>{r()}}catch(a){i(h.create("storage-delete",{originalErrorMessage:a&&a.message}))}})})()}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class b{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var e=this;return(0,r.Z)(function*(){const t=e.storage.getLastFetchStatus(),n=e.storage.getLastSuccessfulFetchTimestampMillis(),r=e.storage.getActiveConfig(),i=yield t;i&&(e.lastFetchStatus=i);const s=yield n;s&&(e.lastSuccessfulFetchTimestampMillis=s);const o=yield r;o&&(e.activeConfig=o)})()}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}function I(){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)(function*(){if(!(0,s.hl)())return!1;try{return yield(0,s.eu)()}catch(e){return!1}})).apply(this,arguments)}(0,i._registerComponent)(new o.wA(l,function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw h.create("registration-window");if(!(0,s.hl)())throw h.create("indexed-db-unavailable");const{projectId:o,apiKey:u,appId:l}=n.options;if(!o)throw h.create("registration-project-id");if(!u)throw h.create("registration-api-key");if(!l)throw h.create("registration-app-id");const d=new w(l,n.name,t=t||"firebase"),p=new b(d),_=new a.Yd(c);_.logLevel=a.in.ERROR;const v=new g(r,i.SDK_VERSION,t,o,u,l),I=new m(v,d),T=new f(I,d,p,_),C=new y(n,T,p,d,_);return function(e){const t=(0,s.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(C),C},"PUBLIC").setMultipleInstances(!0)),(0,i.registerVersion)(c,u),(0,i.registerVersion)(c,u,"esm2017")},6676:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,s=new Promise(function(s,o){n(i=e[t].apply(e,r)).then(s,o)});return s.request=i,s}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new l(e,i.request)})}function s(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function a(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function c(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function u(e){this._index=e}function l(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function f(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function p(e){this._db=e}s(u,"_index",["name","keyPath","multiEntry","unique"]),o(u,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(u,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(l,"_cursor",["direction","key","primaryKey","value"]),o(l,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(l.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new l(e,t._request)})})})}),h.prototype.createIndex=function(){return new u(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new u(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),f.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["deleteObjectStore","close"]),p.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,u].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})}),[u,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),s=i.request;return s&&(s.onupgradeneeded=function(e){n&&n(new f(s.result,e.oldVersion,s.transaction))}),i.then(function(e){return new p(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},1593:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(9193),i=n(5917),s=n(7574);class o{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,i.of)(this.value);case"E":return e=this.error,new s.y(t=>t.error(e));case"C":return(0,r.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new o("N",e):o.undefinedValueNotification}static createError(e){return new o("E",void 0,e)}static createComplete(){return o.completeNotification}}o.completeNotification=new o("C"),o.undefinedValueNotification=new o("N",void 0)},7574:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(7393),i=n(9181),s=n(6490),o=n(6554),a=n(4487);var c=n(2494);let u=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=l(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:function(e){return 0===e.length?a.y:1===e.length?e[0]:function(t){return e.reduce((e,t)=>t(e),t)}}(e)(this)}toPromise(e){return new(e=l(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function l(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},6490:function(e,t,n){"use strict";n.d(t,{c:function(){return s}});var r=n(2494),i=n(4449);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},9765:function(e,t,n){"use strict";n.d(t,{Yc:function(){return u},xQ:function(){return l}});var r=n(7574),i=n(7393),s=n(5319),o=n(7971),a=n(8858),c=n(9181);class u extends i.L{constructor(e){super(e),this.destination=e}}let l=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.b](){return new u(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends l{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},8858:function(e,t,n){"use strict";n.d(t,{W:function(){return i}});var r=n(5319);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},7393:function(e,t,n){"use strict";n.d(t,{L:function(){return u}});var r=n(9105),i=n(6490),s=n(5319),o=n(9181),a=n(2494),c=n(4449);class u extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof u?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new u(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class l extends u{constructor(e,t,n,s){super(),this._parentSubscriber=e;let o,a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},5319:function(e,t,n){"use strict";n.d(t,{w:function(){return a}});var r=n(9796),i=n(1555),s=n(9105);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(c)){n&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?u(h.errors):[h]}}if((0,r.k)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if((0,i.K)(n))try{n.unsubscribe()}catch(d){e=e||[],d instanceof o?e=e.concat(u(d.errors)):e.push(d)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var c;function u(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((c=new a).closed=!0,c)},2494:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},5345:function(e,t,n){"use strict";n.d(t,{IY:function(){return o},Ds:function(){return a},ft:function(){return c}});var r=n(7393),i=n(7574),s=n(7444);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function c(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},2441:function(e,t,n){"use strict";n.d(t,{c:function(){return a},N:function(){return c}});var r=n(9765),i=n(7574),s=n(5319),o=n(1307);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new u(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const c=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class u extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},9193:function(e,t,n){"use strict";n.d(t,{E:function(){return i},c:function(){return s}});var r=n(7574);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},4402:function(e,t,n){"use strict";n.d(t,{D:function(){return h}});var r=n(7574),i=n(7444),s=n(5319),o=n(6554),a=n(4087),c=n(377),u=n(4072),l=n(9489);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,u.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,l.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[c.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[c.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6693:function(e,t,n){"use strict";n.d(t,{n:function(){return o}});var r=n(7574),i=n(5015),s=n(4087);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},6682:function(e,t,n){"use strict";n.d(t,{T:function(){return a}});var r=n(7574),i=n(4869),s=n(3282),o=n(6693);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},5917:function(e,t,n){"use strict";n.d(t,{of:function(){return o}});var r=n(4869),i=n(6693),s=n(4087);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},8002:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(7393);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},3282:function(e,t,n){"use strict";n.d(t,{J:function(){return s}});var r=n(9773),i=n(4487);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},9773:function(e,t,n){"use strict";n.d(t,{zg:function(){return o}});var r=n(8002),i=n(4402),s=n(5345);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new c(e,this.project,this.concurrent))}}class c extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},9746:function(e,t,n){"use strict";n.d(t,{QV:function(){return s},ht:function(){return a}});var r=n(7393),i=n(1593);function s(e,t=0){return function(n){return n.lift(new o(e,t))}}class o{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new a(e,this.scheduler,this.delay))}}class a extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(a.dispatch,this.delay,new c(e,this.destination)))}_next(e){this.scheduleMessage(i.P.createNext(e))}_error(e){this.scheduleMessage(i.P.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(i.P.createComplete()),this.unsubscribe()}}class c{constructor(e,t){this.notification=e,this.destination=t}}},1307:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(7393);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,r&&(!n||r===n)&&r.unsubscribe()}}},8819:function(e,t,n){"use strict";n.d(t,{B:function(){return a}});var r=n(2441);var i=n(1307),s=n(9765);function o(){return new s.xQ}function a(){return e=>(0,i.x)()(function(e,t){return function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.N);return i.source=t,i.subjectFactory=n,i}}(o)(e))}},2639:function(e,t,n){"use strict";n.d(t,{R:function(){return p}});var r=n(7574);let i=1;const s=Promise.resolve(),o={};function a(e){return e in o&&(delete o[e],!0)}const c={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var u=n(6465),l=n(6102);const h=new class extends l.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends u.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=c.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(c.clearImmediate(t),e.scheduled=void 0)}});var d=n(6561);class f extends r.y{constructor(e,t=0,n=h){super(),this.source=e,this.delayTime=t,this.scheduler=n,(!(0,d.k)(t)||t<0)&&(this.delayTime=0),(!n||"function"!=typeof n.schedule)&&(this.scheduler=h)}static create(e,t=0,n=h){return new f(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(f.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function p(e,t=0){return function(n){return n.lift(new g(e,t))}}class g{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new f(t,this.delay,this.scheduler).subscribe(e)}}},8307:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(7393),i=n(8640),s=n(9105);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))}}class c extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i.Z,this._tapError=i.Z,this._tapComplete=i.Z,this._tapError=n||i.Z,this._tapComplete=r||i.Z,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i.Z,this._tapError=t.error||i.Z,this._tapComplete=t.complete||i.Z)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},4087:function(e,t,n){"use strict";n.d(t,{r:function(){return s}});var r=n(7574),i=n(5319);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},6465:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(5319);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},6102:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},3637:function(e,t,n){"use strict";n.d(t,{z:function(){return i},P:function(){return s}});var r=n(6465);const i=new(n(6102).v)(r.o),s=i},7771:function(e,t,n){"use strict";n.d(t,{c:function(){return o},N:function(){return s}});var r=n(6465),i=n(6102);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},377:function(e,t,n){"use strict";n.d(t,{hZ:function(){return r}});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},6554:function(e,t,n){"use strict";n.d(t,{L:function(){return r}});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9181:function(e,t,n){"use strict";n.d(t,{b:function(){return r}});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},7971:function(e,t,n){"use strict";n.d(t,{N:function(){return r}});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},4449:function(e,t,n){"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:function(){return r}})},4487:function(e,t,n){"use strict";function r(e){return e}n.d(t,{y:function(){return r}})},9796:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},9489:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},9105:function(e,t,n){"use strict";function r(e){return"function"==typeof e}n.d(t,{m:function(){return r}})},6561:function(e,t,n){"use strict";n.d(t,{k:function(){return i}});var r=n(9796);function i(e){return!(0,r.k)(e)&&e-parseFloat(e)+1>=0}},1555:function(e,t,n){"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:function(){return r}})},4072:function(e,t,n){"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:function(){return r}})},4869:function(e,t,n){"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:function(){return r}})},8640:function(e,t,n){"use strict";function r(){}n.d(t,{Z:function(){return r}})},7444:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(5015),i=n(4449),s=n(377),o=n(6554),a=n(9489),c=n(4072),u=n(1555);const l=e=>{if(e&&"function"==typeof e[o.L])return(e=>t=>{const n=e[o.L]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(t)})(e);if((0,a.z)(e))return(0,r.V)(e);if((0,c.t)(e))return(e=>t=>(e.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.z),t))(e);if(e&&"function"==typeof e[s.hZ])return(e=>t=>{const n=e[s.hZ]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t})(e);{const t=`You provided ${(0,u.K)(e)?"an invalid object":`'${e}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(t)}}},5015:function(e,t,n){"use strict";n.d(t,{V:function(){return r}});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},2340:function(e,t,n){"use strict";var r=n(7716);let i=null;function s(){return i}const o=new r.OlP("DocumentToken");let a=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:c,token:e,providedIn:"platform"}),e})();function c(){return(0,r.LFG)(l)}const u=new r.OlP("Location Initialized");let l=(()=>{class e extends a{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){h()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){h()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:d,token:e,providedIn:"platform"}),e})();function h(){return!!window.history.pushState}function d(){return new l((0,r.LFG)(o))}function f(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function p(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function g(e){return e&&"?"!==e[0]?"?"+e:e}let m=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:y,token:e,providedIn:"root"}),e})();function y(e){const t=(0,r.LFG)(o).location;return new v((0,r.LFG)(a),t&&t.origin||"")}const _=new r.OlP("appBaseHref");let v=(()=>{class e extends m{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return f(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),w=(()=>{class e extends m{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=f(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(a),r.LFG(_,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),b=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=p(T(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+g(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,T(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+g(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(m),r.LFG(a))},e.normalizeQueryParams=g,e.joinWithSlash=f,e.stripTrailingSlash=p,e.\u0275prov=(0,r.Yz7)({factory:I,token:e,providedIn:"root"}),e})();function I(){return new b((0,r.LFG)(m),(0,r.LFG)(a))}function T(e){return e.replace(/\/index.html$/,"")}var C=(()=>((C=C||{})[C.Zero=0]="Zero",C[C.One=1]="One",C[C.Two=2]="Two",C[C.Few=3]="Few",C[C.Many=4]="Many",C[C.Other=5]="Other",C))();const E=r.kL8;class S{}let k=(()=>{class e extends S{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(E(t||this.locale)(e)){case C.Zero:return"zero";case C.One:return"one";case C.Two:return"two";case C.Few:return"few";case C.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),A=(()=>{class e{constructor(e,t,n,r){this._iterableDiffers=e,this._keyValueDiffers=t,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(e){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof e?e.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(e){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof e?e.split(/\s+/):e,this._rawClass&&((0,r.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const e=this._iterableDiffer.diff(this._rawClass);e&&this._applyIterableChanges(e)}else if(this._keyValueDiffer){const e=this._keyValueDiffer.diff(this._rawClass);e&&this._applyKeyValueChanges(e)}}_applyKeyValueChanges(e){e.forEachAddedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachChangedItem(e=>this._toggleClass(e.key,e.currentValue)),e.forEachRemovedItem(e=>{e.previousValue&&this._toggleClass(e.key,!1)})}_applyIterableChanges(e){e.forEachAddedItem(e=>{if("string"!=typeof e.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,r.AaK)(e.item)}`);this._toggleClass(e.item,!0)}),e.forEachRemovedItem(e=>this._toggleClass(e.item,!1))}_applyClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!0)):Object.keys(e).forEach(t=>this._toggleClass(t,!!e[t])))}_removeClasses(e){e&&(Array.isArray(e)||e instanceof Set?e.forEach(e=>this._toggleClass(e,!1)):Object.keys(e).forEach(e=>this._toggleClass(e,!1)))}_toggleClass(e,t){(e=e.trim())&&e.split(/\s+/g).forEach(e=>{t?this._renderer.addClass(this._ngEl.nativeElement,e):this._renderer.removeClass(this._ngEl.nativeElement,e)})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.ZZ4),r.Y36(r.aQg),r.Y36(r.SBq),r.Y36(r.Qsj))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),e})(),x=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){N("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){N("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function N(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:S,useClass:k}]}),e})();function P(e){return"browser"===e}function D(e){return"server"===e}let L=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new M((0,r.LFG)(o),window)}),e})();class M{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=F(this.window.history)||F(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function F(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class U extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var e;e=new U,i||(i=e)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(j=j||document.querySelector("base"),j?j.getAttribute("href"):null);return null==t?null:function(e){V=V||document.createElement("a"),V.setAttribute("href",e);const t=V.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){j=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}(document.cookie,e)}}let V,j=null;const q=new r.OlP("TRANSITION_ID"),B=[{provide:r.ip1,useFactory:function(e,t,n){return()=>{n.get(r.CZH).donePromise.then(()=>{const n=s(),r=t.querySelectorAll(`style[ng-transition="${e}"]`);for(let e=0;e<r.length;e++)n.remove(r[e])})}},deps:[q,o,r.zs3],multi:!0}];class z{static init(){(0,r.VLi)(new z)}addToWindow(e){r.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),r.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),r.dqk.frameworkStabilizers||(r.dqk.frameworkStabilizers=[]),r.dqk.frameworkStabilizers.push(e=>{const t=r.dqk.getAllAngularTestabilities();let n=t.length,i=!1;const s=function(t){i=i||t,n--,0==n&&e(i)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const r=e.getTestability(t);return null!=r?r:n?s().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let $=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const H=new r.OlP("EventManagerPlugins");let Z=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(H),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class G{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const r=s().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,n)}}let W=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),K=(()=>{class e extends W{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(Y),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(Y))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function Y(e){s().remove(e)}const Q={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},J=/%COMP%/g;function X(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?X(e,i,n):(i=i.replace(J,e),n.push(i))}return n}function ee(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let te=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new ne(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case r.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new re(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case r.ifc.ShadowDom:return new ie(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=X(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(Z),r.LFG(K),r.LFG(r.AFp))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();class ne{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(Q[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=Q[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=Q[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,i){i&(r.JOm.DashCase|r.JOm.Important)?e.style.setProperty(t,n,i&r.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&r.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ee(n)):this.eventManager.addEventListener(e,t,ee(n))}}class re extends ne{constructor(e,t,n,r){super(e),this.component=n;const i=X(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(J,r+"-"+n.id),this.hostAttr=function(e){return"_nghost-%COMP%".replace(J,e)}(r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class ie extends ne{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=X(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let se=(()=>{class e extends G{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const oe=["alt","control","meta","shift"],ae={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ce={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ue={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let le=(()=>{class e extends G{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,r){const i=e.parseEventName(n),o=e.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>s().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(oe.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&ce.hasOwnProperty(t)&&(t=ce[t]))}return ae[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),oe.forEach(r=>{r!=n&&ue[r](e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const he=(0,r.eFA)(r._c5,"browser",[{provide:r.Lbi,useValue:"browser"},{provide:r.g9A,useValue:function(){U.makeCurrent(),z.init()},multi:!0},{provide:o,useFactory:function(){return(0,r.RDi)(document),document},deps:[]}]),de=[[],{provide:r.zSh,useValue:"root"},{provide:r.qLn,useFactory:function(){return new r.qLn},deps:[]},{provide:H,useClass:se,multi:!0,deps:[o,r.R0b,r.Lbi]},{provide:H,useClass:le,multi:!0,deps:[o]},[],{provide:te,useClass:te,deps:[Z,K,r.AFp]},{provide:r.FYo,useExisting:te},{provide:W,useExisting:K},{provide:K,useClass:K,deps:[o]},{provide:r.dDg,useClass:r.dDg,deps:[r.R0b]},{provide:Z,useClass:Z,deps:[H,r.R0b]},{provide:class{},useClass:$,deps:[]},[]];let fe=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:r.AFp,useValue:t.appId},{provide:q,useExisting:r.AFp},B]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(e,12))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:de,imports:[O,r.hGG]}),e})();function pe(){return new ge((0,r.LFG)(o))}let ge=(()=>{class e{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=(0,r.Yz7)({factory:pe,token:e,providedIn:"root"}),e})();"undefined"!=typeof window&&window;var me=n(4402),ye=n(5917),_e=n(9765),ve=n(7971);class we extends _e.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ve.N;return this._value}next(e){super.next(this._value=e)}}var be=n(4869),Ie=n(9796),Te=n(7393);class Ce extends Te.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class Ee extends Te.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Se=n(7444),ke=n(7574);function Ae(e,t,n,r,i=new Ee(e,n,r)){if(!i.closed)return t instanceof ke.y?t.subscribe(i):(0,Se.s)(t)(i)}var xe=n(6693);const Re={};class Ne{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new Oe(e,this.resultSelector))}}class Oe extends Ce{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(Re),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add(Ae(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===Re?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}const Pe=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})();var De=n(3282);function Le(...e){return(0,De.J)(1)((0,ye.of)(...e))}var Me=n(9193);function Fe(e){return new ke.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,me.D)(n):(0,Me.c)()).subscribe(t)})}var Ue=n(2441),Ve=n(8002),je=n(5345);function qe(e,t){return"function"==typeof t?n=>n.pipe(qe((n,r)=>(0,me.D)(e(n,r)).pipe((0,Ve.U)((e,i)=>t(n,e,r,i))))):t=>t.lift(new Be(e))}class Be{constructor(e){this.project=e}call(e,t){return t.subscribe(new ze(e,this.project))}}class ze extends je.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new je.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,je.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const $e=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})();function He(e){return t=>0===e?(0,Me.c)():t.lift(new Ze(e))}class Ze{constructor(e){if(this.total=e,this.total<0)throw new $e}call(e,t){return t.subscribe(new Ge(e,this.total))}}class Ge extends Te.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}function We(...e){const t=e[e.length-1];return(0,be.K)(t)?(e.pop(),n=>Le(e,n,t)):t=>Le(e,t)}function Ke(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Ye(e,t,n))}}class Ye{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new Qe(e,this.accumulator,this.seed,this.hasSeed))}}class Qe extends Te.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Je(e,t){return function(n){return n.lift(new Xe(e,t))}}class Xe{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new et(e,this.predicate,this.thisArg))}}class et extends Te.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}function tt(e){return function(t){const n=new nt(e),r=t.lift(n);return n.caught=r}}class nt{constructor(e){this.selector=e}call(e,t){return t.subscribe(new rt(e,this.selector,this.caught))}}class rt extends je.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new je.IY(this);this.add(r);const i=(0,je.ft)(n,r);i!==r&&this.add(i)}}}var it=n(9773);function st(e,t){return(0,it.zg)(e,t,1)}function ot(e){return function(t){return 0===e?(0,Me.c)():t.lift(new at(e))}}class at{constructor(e){if(this.total=e,this.total<0)throw new $e}call(e,t){return t.subscribe(new ct(e,this.total))}}class ct extends Te.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}function ut(e=dt){return t=>t.lift(new lt(e))}class lt{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new ht(e,this.errorFactory))}}class ht extends Te.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function dt(){return new Pe}function ft(e=null){return t=>t.lift(new pt(e))}class pt{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new gt(e,this.defaultValue))}}class gt extends Te.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var mt=n(4487);function yt(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Je((t,n)=>e(t,n,r)):mt.y,He(1),n?ft(t):ut(()=>new Pe))}var _t=n(8307),vt=n(1307),wt=n(5319);class bt{constructor(e){this.callback=e}call(e,t){return t.subscribe(new It(e,this.callback))}}class It extends Te.L{constructor(e,t){super(e),this.add(new wt.w(t))}}class Tt{constructor(e,t){this.id=e,this.url=t}}class Ct extends Tt{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Et extends Tt{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class St extends Tt{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class kt extends Tt{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class At extends Tt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xt extends Tt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt extends Tt{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nt extends Tt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ot extends Tt{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Pt{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Dt{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Lt{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Mt{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ft{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ut{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vt{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const jt="primary";class qt{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Bt(e){return new qt(e)}const zt="ngNavigationCancelingError";function $t(e){const t=Error("NavigationCancelingError: "+e);return t[zt]=!0,t}function Ht(e,t,n){const r=n.path.split("/");if(r.length>e.length||"full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function Zt(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!Gt(e[i],t[i]))return!1;return!0}function Gt(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function Wt(e){return Array.prototype.concat.apply([],e)}function Kt(e){return e.length>0?e[e.length-1]:null}function Yt(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function Qt(e){return(0,r.CqO)(e)?e:(0,r.QGY)(e)?(0,me.D)(Promise.resolve(e)):(0,ye.of)(e)}const Jt={exact:function e(t,n,r){if(!cn(t.segments,n.segments)||!rn(t.segments,n.segments,r)||t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children)if(!t.children[i]||!e(t.children[i],n.children[i],r))return!1;return!0},subset:tn},Xt={exact:function(e,t){return Zt(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>Gt(e[n],t[n]))},ignored:()=>!0};function en(e,t,n){return Jt[n.paths](e.root,t.root,n.matrixParams)&&Xt[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function tn(e,t,n){return nn(e,t,t.segments,n)}function nn(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!(!cn(i,n)||t.hasChildren()||!rn(i,n,r))}if(e.segments.length===n.length){if(!cn(e.segments,n)||!rn(e.segments,n,r))return!1;for(const n in t.children)if(!e.children[n]||!tn(e.children[n],t.children[n],r))return!1;return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!(cn(e.segments,i)&&rn(e.segments,i,r)&&e.children[jt])&&nn(e.children[jt],t,s,r)}}function rn(e,t,n){return t.every((t,r)=>Xt[n](e[r].parameters,t.parameters))}class sn{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bt(this.queryParams)),this._queryParamMap}toString(){return hn.serialize(this)}}class on{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Yt(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return dn(this)}}class an{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Bt(this.parameters)),this._parameterMap}toString(){return vn(this)}}function cn(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class un{}class ln{parse(e){const t=new Cn(e);return new sn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`${`/${fn(e.root,!0)}`}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${gn(t)}=${gn(e)}`).join("&"):`${gn(t)}=${gn(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const hn=new ln;function dn(e){return e.segments.map(e=>vn(e)).join("/")}function fn(e,t){if(!e.hasChildren())return dn(e);if(t){const t=e.children[jt]?fn(e.children[jt],!1):"",n=[];return Yt(e.children,(e,t)=>{t!==jt&&n.push(`${t}:${fn(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return Yt(e.children,(e,r)=>{r===jt&&(n=n.concat(t(e,r)))}),Yt(e.children,(e,r)=>{r!==jt&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===jt?[fn(e.children[jt],!1)]:[`${n}:${fn(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[jt]?`${dn(e)}/${t[0]}`:`${dn(e)}/(${t.join("//")})`}}function pn(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function gn(e){return pn(e).replace(/%3B/gi,";")}function mn(e){return pn(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function yn(e){return decodeURIComponent(e)}function _n(e){return yn(e.replace(/\+/g,"%20"))}function vn(e){return`${mn(e.path)}${function(e){return Object.keys(e).map(t=>`;${mn(t)}=${mn(e[t])}`).join("")}(e.parameters)}`}const wn=/^[^\/()?;=#]+/;function bn(e){const t=e.match(wn);return t?t[0]:""}const In=/^[^=?&#]+/,Tn=/^[^?&#]+/;class Cn{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new on([],{}):new on([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[jt]=new on(e,t)),n}parseSegment(){const e=bn(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new an(yn(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=bn(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=bn(this.remaining);e&&(n=e,this.capture(n))}e[yn(t)]=yn(n)}parseQueryParam(e){const t=function(e){const t=e.match(In);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Tn);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=_n(t),i=_n(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=bn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=jt);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[jt]:new on([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class En{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Sn(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Sn(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=kn(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return kn(e,this._root).map(e=>e.value)}}function Sn(e,t){if(e===t.value)return t;for(const n of t.children){const t=Sn(e,n);if(t)return t}return null}function kn(e,t){if(e===t.value)return[t];for(const n of t.children){const r=kn(e,n);if(r.length)return r.unshift(t),r}return[]}class An{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function xn(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Rn extends En{constructor(e,t){super(e),this.snapshot=t,Mn(this,e)}toString(){return this.snapshot.toString()}}function Nn(e,t){const n=function(e,t){const n=new Dn([],{},{},"",{},jt,t,null,e.root,-1,{});return new Ln("",new An(n,[]))}(e,t),r=new we([new an("",{})]),i=new we({}),s=new we({}),o=new we({}),a=new we(""),c=new On(r,i,o,a,s,jt,t,n.root);return c.snapshot=n.root,new Rn(new An(c,[]),n)}class On{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ve.U)(e=>Bt(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ve.U)(e=>Bt(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Pn(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Dn{constructor(e,t,n,r,i,s,o,a,c,u,l){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Bt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Bt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Ln extends En{constructor(e,t){super(t),this.url=e,Mn(this,t)}toString(){return Fn(this._root)}}function Mn(e,t){t.value._routerState=e,t.children.forEach(t=>Mn(e,t))}function Fn(e){const t=e.children.length>0?` { ${e.children.map(Fn).join(", ")} } `:"";return`${e.value}${t}`}function Un(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Zt(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),Zt(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Zt(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),Zt(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function Vn(e,t){return Zt(e.params,t.params)&&function(e,t){return cn(e,t)&&e.every((e,n)=>Zt(e.parameters,t[n].parameters))}(e.url,t.url)&&!(!e.parent!=!t.parent)&&(!e.parent||Vn(e.parent,t.parent))}function jn(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return jn(e,t,r);return jn(e,t)})}(e,t,n);return new An(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return qn(t,e),e}}const n=function(e){return new On(new we(e.url),new we(e.params),new we(e.queryParams),new we(e.fragment),new we(e.data),e.outlet,e.component,e)}(t.value),r=t.children.map(t=>jn(e,t));return new An(n,r)}}function qn(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)qn(e.children[n],t.children[n])}function Bn(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function zn(e){return"object"==typeof e&&null!=e&&e.outlets}function $n(e,t,n,r,i){let s={};return r&&Yt(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new sn(n.root===e?t:Hn(n.root,e,t),s,i)}function Hn(e,t,n){const r={};return Yt(e.children,(e,i)=>{r[i]=e===t?n:Hn(e,t,n)}),new on(e.segments,r)}class Zn{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&Bn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(zn);if(r&&r!==Kt(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Gn{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function Wn(e,t,n){if(e||(e=new on([],{})),0===e.segments.length&&e.hasChildren())return Kn(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(zn(o))break;const a=`${o}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!Xn(a,c,t))return s;r+=2}else{if(!Xn(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new on(e.segments.slice(0,r.pathIndex),{});return t.children[jt]=new on(e.segments.slice(r.pathIndex),e.children),Kn(t,0,i)}return r.match&&0===i.length?new on(e.segments,{}):r.match&&!e.hasChildren()?Yn(e,t,n):r.match?Kn(e,0,i):Yn(e,t,n)}function Kn(e,t,n){if(0===n.length)return new on(e.segments,{});{const r=function(e){return zn(e[0])?e[0].outlets:{[jt]:e}}(n),i={};return Yt(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Wn(e.children[r],t,n))}),Yt(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new on(e.segments,i)}}function Yn(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(zn(s)){const e=Qn(s.outlets);return new on(r,e)}if(0===i&&Bn(n[0])){r.push(new an(e.segments[t].path,Jn(n[0]))),i++;continue}const o=zn(s)?s.outlets[jt]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&Bn(a)?(r.push(new an(o,Jn(a))),i+=2):(r.push(new an(o,{})),i++)}return new on(r,{})}function Qn(e){const t={};return Yt(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=Yn(new on([],{}),0,e))}),t}function Jn(e){const t={};return Yt(e,(e,n)=>t[n]=`${e}`),t}function Xn(e,t,n){return e==n.path&&Zt(t,n.parameters)}class er{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),Un(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=xn(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),Yt(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=xn(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=xn(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new Ut(e.value.snapshot))}),e.children.length&&this.forwardEvent(new Mt(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(Un(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),tr(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function tr(e){Un(e.value),e.children.forEach(tr)}class nr{constructor(e,t){this.routes=e,this.module=t}}function rr(e){return"function"==typeof e}function ir(e){return e instanceof sn}const sr=Symbol("INITIAL_VALUE");function or(){return qe(e=>function(...e){let t,n;return(0,be.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,Ie.k)(e[0])&&(e=e[0]),(0,xe.n)(e,n).lift(new Ne(t))}(e.map(e=>e.pipe(He(1),We(sr)))).pipe(Ke((e,t)=>{let n=!1;return t.reduce((e,r,i)=>e!==sr?e:(r===sr&&(n=!0),n||!1!==r&&i!==t.length-1&&!ir(r)?e:r),e)},sr),Je(e=>e!==sr),(0,Ve.U)(e=>ir(e)?e:!0===e),He(1)))}let ar=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:function(){return[ni]},encapsulation:2}),e})();function cr(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];ur(r,lr(t,r))}}function ur(e,t){e.children&&cr(e.children,t)}function lr(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function hr(e){const t=e.children&&e.children.map(hr),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==jt&&(n.component=ar),n}function dr(e){return e.outlet||jt}function fr(e,t){const n=e.filter(e=>dr(e)===t);return n.push(...e.filter(e=>dr(e)!==t)),n}const pr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function gr(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},pr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||Ht)(n,e,t);if(!i)return Object.assign({},pr);const s={};Yt(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function mr(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>yr(e,t,n)&&dr(n)!==jt)}(e,n,r)){const i=new on(t,function(e,t,n,r){const i={};i[jt]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&dr(s)!==jt){const n=new on([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[dr(s)]=n}return i}(e,t,r,new on(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>yr(e,t,n))}(e,n,r)){const s=new on(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(yr(e,n,a)&&!i[dr(a)]){const n=new on([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[dr(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new on(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function yr(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function _r(e,t,n,r){return!!(dr(e)===r||r!==jt&&yr(t,n,e))&&("**"===e.path||gr(t,e,n).matched)}function vr(e,t,n){return 0===t.length&&!e.children[n]}class wr{constructor(e){this.segmentGroup=e||null}}class br{constructor(e){this.urlTree=e}}function Ir(e){return new ke.y(t=>t.error(new wr(e)))}function Tr(e){return new ke.y(t=>t.error(new br(e)))}function Cr(e){return new ke.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Er{constructor(e,t,n,i,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=i,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(r.h0i)}apply(){const e=mr(this.urlTree.root,[],[],this.config).segmentGroup,t=new on(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,jt).pipe((0,Ve.U)(e=>this.createUrlTree(Sr(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tt(e=>{if(e instanceof br)return this.allowRedirects=!1,this.match(e.urlTree);throw e instanceof wr?this.noMatchError(e):e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,jt).pipe((0,Ve.U)(t=>this.createUrlTree(Sr(t),e.queryParams,e.fragment))).pipe(tt(e=>{throw e instanceof wr?this.noMatchError(e):e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new on([],{[jt]:e}):e;return new sn(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,Ve.U)(e=>new on([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,me.D)(r).pipe(st(r=>{const i=n.children[r],s=fr(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,Ve.U)(e=>({segment:e,outlet:r})))}),Ke((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?Je((t,n)=>e(t,n,r)):mt.y,ot(1),n?ft(t):ut(()=>new Pe))}())}expandSegment(e,t,n,r,i,s){return(0,me.D)(n).pipe(st(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(tt(e=>{if(e instanceof wr)return(0,ye.of)(null);throw e}))),yt(e=>!!e),tt((e,n)=>{if(e instanceof Pe||"EmptyError"===e.name){if(vr(t,r,i))return(0,ye.of)(new on([],{}));throw new wr(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return _r(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Ir(t):Ir(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Tr(i):this.lineralizeSegments(n,i).pipe((0,it.zg)(n=>{const i=new on(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:u}=gr(t,r,i);if(!o)return Ir(t);const l=this.applyRedirectCommands(a,r.redirectTo,u);return r.redirectTo.startsWith("/")?Tr(l):this.lineralizeSegments(r,l).pipe((0,it.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,ye.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,Ve.U)(e=>(n._loadedConfig=e,new on(r,{})))):(0,ye.of)(new on(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=gr(t,n,r);if(!s)return Ir(t);const c=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,it.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:u}=mr(t,o,c,s),l=new on(a.segments,a.children);if(0===u.length&&l.hasChildren())return this.expandChildren(r,s,l).pipe((0,Ve.U)(e=>new on(o,e)));if(0===s.length&&0===u.length)return(0,ye.of)(new on(o,{}));const h=dr(n)===i;return this.expandSegment(r,l,s,u,h?jt:i,!0).pipe((0,Ve.U)(e=>new on(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,ye.of)(new nr(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,ye.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,it.zg)(n=>{return n?this.configLoader.load(e.injector,t).pipe((0,Ve.U)(e=>(t._loadedConfig=e,e))):(r=t,new ke.y(e=>e.error($t(`Cannot load children because the guard of the route "path: '${r.path}'" returned false`))));var r})):(0,ye.of)(new nr([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,ye.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if((o=i)&&rr(o.canLoad))s=i.canLoad(t,n);else{if(!rr(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}var o;return Qt(s)});return(0,ye.of)(i).pipe(or(),(0,_t.b)(e=>{if(!ir(e))return;const t=$t(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,Ve.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,ye.of)(n);if(r.numberOfChildren>1||!r.children[jt])return Cr(e.redirectTo);r=r.children[jt]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new sn(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return Yt(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return Yt(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new on(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Sr(e){const t={};for(const n of Object.keys(e.children)){const r=Sr(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children[jt]){const t=e.children[jt];return new on(e.segments.concat(t.segments),t.children)}return e}(new on(e.segments,t))}class kr{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ar{constructor(e,t){this.component=e,this.route=t}}function xr(e,t,n){const r=e._root;return Nr(r,t?t._root:null,n,[r.value])}function Rr(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function Nr(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=xn(t);return e.children.forEach(e=>{(function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!cn(e.url,t.url);case"pathParamsOrQueryParamsChange":return!cn(e.url,t.url)||!Zt(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Vn(e,t)||!Zt(e.queryParams,t.queryParams);case"paramsChange":default:return!Vn(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new kr(r)):(s.data=o.data,s._resolvedData=o._resolvedData),Nr(e,t,s.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Ar(a.outlet.component,o))}else o&&Or(t,a,i),i.canActivateChecks.push(new kr(r)),Nr(e,null,s.component?a?a.children:null:n,r,i)})(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),Yt(s,(e,t)=>Or(e,n.getContext(t),i)),i}function Or(e,t,n){const r=xn(e),i=e.value;Yt(r,(e,r)=>{Or(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Ar(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class Pr{}function Dr(e){return new ke.y(t=>t.error(e))}class Lr{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=mr(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,jt);if(null===t)return null;const n=new Dn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},jt,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new An(n,t),i=new Ln(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=Pn(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=fr(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=Fr(n);return r.sort((e,t)=>e.value.outlet===jt?-1:t.value.outlet===jt?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return vr(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!_r(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?Kt(n).parameters:{};i=new Dn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jr(e),dr(e),e.component,e,Ur(t),Vr(t)+n.length,qr(e))}else{const r=gr(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new Dn(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,jr(e),dr(e),e.component,e,Ur(t),Vr(t)+s.length,qr(e))}const a=(l=e).children?l.children:l.loadChildren?l._loadedConfig.routes:[],{segmentGroup:c,slicedSegments:u}=mr(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);var l;if(0===u.length&&c.hasChildren()){const e=this.processChildren(a,c);return null===e?null:[new An(i,e)]}if(0===a.length&&0===u.length)return[new An(i,[])];const h=dr(e)===r,d=this.processSegment(a,c,u,h?jt:r);return null===d?null:[new An(i,d)]}}function Mr(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function Fr(e){const t=[],n=new Set;for(const r of e){if(!Mr(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=Fr(r.children);t.push(new An(r.value,e))}return t.filter(e=>!n.has(e))}function Ur(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function Vr(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function jr(e){return e.data||{}}function qr(e){return e.resolve||{}}function Br(e){return qe(t=>{const n=e(t);return n?(0,me.D)(n).pipe((0,Ve.U)(()=>t)):(0,ye.of)(t)})}class zr extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const $r=new r.OlP("ROUTES");class Hr{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,Ve.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const i=n.create(e);return new nr(Wt(i.injector.get($r,void 0,r.XFs.Self|r.XFs.Optional)).map(hr),i)}),tt(e=>{throw t._loader$=void 0,e}));return t._loader$=new Ue.c(n,()=>new _e.xQ).pipe((0,vt.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,me.D)(this.loader.load(e)):Qt(e()).pipe((0,it.zg)(e=>e instanceof r.YKP?(0,ye.of)(e):(0,me.D)(this.compiler.compileModuleAsync(e))))}}class Zr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Gr,this.attachRef=null}}class Gr{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Zr,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class Wr{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function Kr(e){throw e}function Yr(e,t,n){return t.parse("/")}function Qr(e,t){return(0,ye.of)(null)}const Jr={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xr={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ei=(()=>{class e{constructor(e,t,n,i,s,o,a,c){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new _e.xQ,this.errorHandler=Kr,this.malformedUriErrorHandler=Yr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Qr,afterPreactivation:Qr},this.urlHandlingStrategy=new Wr,this.routeReuseStrategy=new zr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(r.h0i),this.console=s.get(r.c2e);const u=s.get(r.R0b);this.isNgZoneEnabled=u instanceof r.R0b&&r.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new sn(new on([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Hr(o,a,e=>this.triggerEvent(new Pt(e)),e=>this.triggerEvent(new Dt(e))),this.routerState=Nn(this.currentUrlTree,this.rootComponentType),this.transitions=new we({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe(Je(e=>0!==e.id),(0,Ve.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),qe(e=>{let n=!1,r=!1;return(0,ye.of)(e).pipe((0,_t.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),qe(e=>{const n=this.browserUrlTree.toString(),i=!this.navigated||e.extractedUrl.toString()!==n||n!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||i)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return ti(e.source)&&(this.browserUrlTree=e.extractedUrl),(0,ye.of)(e).pipe(qe(e=>{const n=this.transitions.getValue();return t.next(new Ct(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?Me.E:Promise.resolve(e)}),function(e,t,n,r){return qe(i=>function(e,t,n,r,i){return new Er(e,t,n,r,i).apply()}(e,t,n,i.extractedUrl,r).pipe((0,Ve.U)(e=>Object.assign(Object.assign({},i),{urlAfterRedirects:e}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_t.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,i,s){return(0,it.zg)(o=>function(e,t,n,i,s="emptyOnly",o="legacy"){try{const r=new Lr(e,t,n,i,s,o).recognize();return null===r?Dr(new Pr):(0,ye.of)(r)}catch(r){return Dr(r)}}(e,t,o.urlAfterRedirects,n(o.urlAfterRedirects),i,s).pipe((0,Ve.U)(e=>Object.assign(Object.assign({},o),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_t.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new At(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));if(i&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new Ct(n,this.serializeUrl(r),i,s);t.next(a);const c=Nn(r,this.rootComponentType).snapshot;return(0,ye.of)(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),Me.E}),Br(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,_t.b)(e=>{const t=new xt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,Ve.U)(e=>Object.assign(Object.assign({},e),{guards:xr(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,it.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,ye.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,me.D)(e).pipe((0,it.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,ye.of)(!0);const o=s.map(s=>{const o=Rr(s,t,i);let a;if(function(e){return e&&rr(e.canDeactivate)}(o))a=Qt(o.canDeactivate(e,t,n,r));else{if(!rr(o))throw new Error("Invalid CanDeactivate guard");a=Qt(o(e,t,n,r))}return a.pipe(yt())});return(0,ye.of)(o).pipe(or())}(e.component,e.route,n,t,r)),yt(e=>!0!==e,!0))}(o,r,i,e).pipe((0,it.zg)(n=>n&&function(e){return"boolean"==typeof e}(n)?function(e,t,n,r){return(0,me.D)(t).pipe(st(t=>Le(function(e,t){return null!==e&&t&&t(new Lt(e)),(0,ye.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new Ft(e)),(0,ye.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>Fe(()=>{const i=t.guards.map(i=>{const s=Rr(i,t.node,n);let o;if(function(e){return e&&rr(e.canActivateChild)}(s))o=Qt(s.canActivateChild(r,e));else{if(!rr(s))throw new Error("Invalid CanActivateChild guard");o=Qt(s(r,e))}return o.pipe(yt())});return(0,ye.of)(i).pipe(or())}));return(0,ye.of)(i).pipe(or())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,ye.of)(!0);const i=r.map(r=>Fe(()=>{const i=Rr(r,t,n);let s;if(function(e){return e&&rr(e.canActivate)}(i))s=Qt(i.canActivate(t,e));else{if(!rr(i))throw new Error("Invalid CanActivate guard");s=Qt(i(t,e))}return s.pipe(yt())}));return(0,ye.of)(i).pipe(or())}(e,t.route,n))),yt(e=>!0!==e,!0))}(r,s,e,t):(0,ye.of)(n)),(0,Ve.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,_t.b)(e=>{if(ir(e.guardsResult)){const t=$t(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new Rt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),Je(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),Br(e=>{if(e.guards.canActivateChecks.length)return(0,ye.of)(e).pipe((0,_t.b)(e=>{const t=new Nt(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),qe(e=>{let t=!1;return(0,ye.of)(e).pipe(function(e,t){return(0,it.zg)(n=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return(0,ye.of)(n);let s=0;return(0,me.D)(i).pipe(st(n=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,ye.of)({});const s={};return(0,me.D)(i).pipe((0,it.zg)(i=>function(e,t,n,r){const i=Rr(e,t,r);return Qt(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,_t.b)(e=>{s[i]=e}))),ot(1),(0,it.zg)(()=>Object.keys(s).length===i.length?(0,ye.of)(s):Me.E))}(e._resolve,e,t,r).pipe((0,Ve.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),Pn(e,n).resolve),null)))}(n.route,r,e,t)),(0,_t.b)(()=>s++),ot(1),(0,it.zg)(e=>s===i.length?(0,ye.of)(n):Me.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_t.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}))}),(0,_t.b)(e=>{const t=new Ot(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),Br(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,Ve.U)(e=>{const t=function(e,t,n){const r=jn(e,t._root,n?n._root:void 0);return new Rn(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,_t.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(e.urlAfterRedirects,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),((e,t,n)=>(0,Ve.U)(r=>(new er(t,r.targetRouterState,r.currentRouterState,n).activate(e),r)))(this.rootContexts,this.routeReuseStrategy,e=>this.triggerEvent(e)),(0,_t.b)({next(){n=!0},complete(){n=!0}}),function(e){return t=>t.lift(new bt(e))}(()=>{var t;if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}(null===(t=this.currentNavigation)||void 0===t?void 0:t.id)===e.id&&(this.currentNavigation=null)}),tt(n=>{if(r=!0,function(e){return e&&e[zt]}(n)){const r=ir(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new St(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree),r={skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||ti(e.source)};this.scheduleNavigation(t,"imperative",null,r,{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new kt(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(i){e.reject(i)}}return Me.E}))}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return t.transitionId!==e.transitionId||!n||!("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){cr(e),this.config=e.map(hr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i;let u=null;switch(s){case"merge":u=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=r||null}return null!==u&&(u=this.removeEmptyProps(u)),function(e,t,n,r,i){if(0===n.length)return $n(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new Zn(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return Yt(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new Zn(n,t,r)}(n);if(s.toRoot())return $n(t.root,new on([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new Gn(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new Gn(e,e===t.root,0)}const r=Bn(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Gn(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?Kn(o.segmentGroup,o.index,s.commands):Wn(o.segmentGroup,o.index,s.commands);return $n(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,u,null!=c?c:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=ir(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Jr):!1===t?Object.assign({},Xr):t,ir(e))return en(this.currentUrlTree,e,n);const r=this.parseUrl(e);return en(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Et(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn(`Unhandled Navigation Error: ${e}`)})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),c=ti(t)&&a&&!ti(a.source),u=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(c&&u)return Promise.resolve(!0);let l,h,d;i?(l=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{l=e,h=t});const f=++this.navigationId;let p;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),p=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):p=0,this.setTransition({id:f,targetPageId:p,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:l,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new St(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.DyG),r.LFG(un),r.LFG(Gr),r.LFG(b),r.LFG(r.zs3),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function ti(e){return"imperative"!==e}let ni=(()=>{class e{constructor(e,t,n,i,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.vpe,this.deactivateEvents=new r.vpe,this.name=i||jt,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new ri(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Gr),r.Y36(r.s_b),r.Y36(r._Vd),r.$8M("name"),r.Y36(r.sBO))},e.\u0275dir=r.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class ri{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===On?this.route:e===Gr?this.childContexts:this.parent.get(e,t)}}class ii{}class si{preload(e,t){return(0,ye.of)(null)}}let oi=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new Hr(t,n,t=>e.triggerEvent(new Pt(t)),t=>e.triggerEvent(new Dt(t)))}setUpPreloading(){this.subscription=this.router.events.pipe(Je(e=>e instanceof Et),st(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(r.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,me.D)(n).pipe((0,De.J)(),(0,Ve.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,ye.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,it.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ei),r.LFG(r.v3s),r.LFG(r.Sil),r.LFG(r.zs3),r.LFG(ii))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),ai=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Ct?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Et&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Vt&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new Vt(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ei),r.LFG(L),r.LFG(void 0))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const ci=new r.OlP("ROUTER_CONFIGURATION"),ui=new r.OlP("ROUTER_FORROOT_GUARD"),li=[b,{provide:un,useClass:ln},{provide:ei,useFactory:function(e,t,n,r,i,s,o,a={},c,u){const l=new ei(null,e,t,n,r,i,s,Wt(o));return c&&(l.urlHandlingStrategy=c),u&&(l.routeReuseStrategy=u),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,l),a.enableTracing&&l.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),l},deps:[un,Gr,b,r.zs3,r.v3s,r.Sil,$r,ci,[class{},new r.FiY],[class{},new r.FiY]]},Gr,{provide:On,useFactory:function(e){return e.routerState.root},deps:[ei]},{provide:r.v3s,useClass:r.EAV},oi,si,class{preload(e,t){return t().pipe(tt(()=>(0,ye.of)(null)))}},{provide:ci,useValue:{enableTracing:!1}}];function hi(){return new r.PXZ("Router",ei)}let di=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[li,mi(t),{provide:ui,useFactory:gi,deps:[[ei,new r.FiY,new r.tp0]]},{provide:ci,useValue:n||{}},{provide:m,useFactory:pi,deps:[a,[new r.tBr(_),new r.FiY],ci]},{provide:ai,useFactory:fi,deps:[ei,L,ci]},{provide:ii,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:si},{provide:r.PXZ,multi:!0,useFactory:hi},[yi,{provide:r.ip1,multi:!0,useFactory:_i,deps:[yi]},{provide:wi,useFactory:vi,deps:[yi]},{provide:r.tb,multi:!0,useExisting:wi}]]}}static forChild(t){return{ngModule:e,providers:[mi(t)]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ui,8),r.LFG(ei,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();function fi(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new ai(e,t,n)}function pi(e,t,n={}){return n.useHash?new w(e,t):new v(e,t)}function gi(e){return"guarded"}function mi(e){return[{provide:r.deG,multi:!0,useValue:e},{provide:$r,multi:!0,useValue:e}]}let yi=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new _e.xQ}appInitializer(){return this.injector.get(u,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(ei),r=this.injector.get(ci);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,ye.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(ci),n=this.injector.get(oi),i=this.injector.get(ai),s=this.injector.get(ei),o=this.injector.get(r.z2F);e===o.components[0]&&(("enabledNonBlocking"===t.initialNavigation||void 0===t.initialNavigation)&&s.initialNavigation(),n.setUpPreloading(),i.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function _i(e){return e.appInitializer.bind(e)}function vi(e){return e.bootstrapListener.bind(e)}const wi=new r.OlP("Router Initializer");var bi=n(7667),Ii=n(2329);class Ti{constructor(e){return e}}class Ci{constructor(){return(0,Ii.C6)()}}const Ei=new r.OlP("angularfire2._apps"),Si={provide:Ti,useFactory:function(e){return e&&1===e.length?e[0]:new Ti((0,Ii.Mq)())},deps:[[new r.FiY,Ei]]},ki={provide:Ci,deps:[[new r.FiY,Ei]]};function Ai(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Ti(r)}}let xi=(()=>{class e{constructor(e){(0,Ii.KN)("angularfire",bi.q4.full,"core"),(0,Ii.KN)("angularfire",bi.q4.full,"app"),(0,Ii.KN)("angular",r.q4F.full,e.toString())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Si,ki]}),e})();function Ri(e,...t){return{ngModule:xi,providers:[{provide:Ei,useFactory:Ai(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,...t]}]}}const Ni=(0,bi.u3)(Ii.ZF,!0);var Oi=n(8239),Pi=n(8026),Di=n(3910),Li=n(3854),Mi=n(5422);const Fi=new Map,Ui={activated:!1,tokenObservers:[]},Vi={initialized:!1,enabled:!1};function ji(e){return Fi.get(e)||Ui}function qi(e,t){Fi.set(e,t)}function Bi(){return Vi}class zi{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Oi.Z)(function*(){t.stop();try{t.pending=new Li.BH,yield(n=t.getNextRun(e),new Promise(e=>{setTimeout(e,n)})),t.pending.resolve(),yield t.pending.promise,t.pending=new Li.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}var n})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const $i=new Li.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Hi(e){if(!ji(e).activated)throw $i.create("use-before-activation",{appName:e.name})}function Zi(e,t){return Gi.apply(this,arguments)}function Gi(){return(Gi=(0,Oi.Z)(function*({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=yield fetch(e,s)}catch(h){throw $i.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw $i.create("fetch-status-error",{httpStatus:o.status});try{a=yield o.json()}catch(h){throw $i.create("fetch-parse-error",{originalErrorMessage:h.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw $i.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const u=1e3*Number(c[1]),l=Date.now();return{token:a.attestationToken,expireTimeMillis:l+u,issuedAtTimeMillis:l}})).apply(this,arguments)}function Wi(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}const Ki="firebase-app-check-store";let Yi=null;function Qi(){return Yi||(Yi=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t($i.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(Ki,{keyPath:"compositeKey"})}}}catch(n){t($i.create("storage-open",{originalErrorMessage:n.message}))}}),Yi)}function Ji(){return(Ji=(0,Oi.Z)(function*(e,t){const n=(yield Qi()).transaction(Ki,"readwrite"),r=n.objectStore(Ki).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t($i.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})})).apply(this,arguments)}const Xi=new Mi.Yd("@firebase/app-check");function es(e,t){return(0,Li.hl)()?function(e,t){return function(e,t){return Ji.apply(this,arguments)}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{Xi.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function ts(){return Bi().enabled}function ns(){return rs.apply(this,arguments)}function rs(){return(rs=(0,Oi.Z)(function*(){const e=Bi();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const is={error:"UNKNOWN_ERROR"};function ss(e){return Li.US.encodeString(JSON.stringify(e),!1)}function os(e){return as.apply(this,arguments)}function as(){return(as=(0,Oi.Z)(function*(e,t=!1){const n=e.app;Hi(n);const r=ji(n);let i,s=r.token;if(!s){const e=yield r.cachedTokenPromise;e&&hs(e)&&(s=e)}if(!t&&s&&hs(s))return{token:s.token};let o,a=!1;if(ts()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Zi(Wi(n,yield ns()),e.platformLoggerProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0);const t=yield r.exchangeTokenPromise;return yield es(n,t),qi(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),a=!0),s=yield r.exchangeTokenPromise}catch(c){"appCheck/throttled"===c.code?Xi.warn(c.message):Xi.error(c),i=c}return s?(o={token:s.token},qi(n,Object.assign(Object.assign({},r),{token:s})),yield es(n,s)):o=ds(i),a&&ls(n,o),o})).apply(this,arguments)}function cs(e,t){const n=ji(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),qi(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function us(e){const{app:t}=e,n=ji(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new zi((0,Oi.Z)(function*(){let n;if(n=ji(t).token?yield os(e,!0):yield os(e),n.error)throw n.error}),()=>!0,()=>{const e=ji(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),qi(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function ls(e,t){const n=ji(e).tokenObservers;for(const i of n)try{"EXTERNAL"===i.type&&null!=t.error?i.error(t.error):i.next(t)}catch(r){}}function hs(e){return e.expireTimeMillis-Date.now()>0}function ds(e){return{token:ss(is),error:e}}class fs{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=ji(this.app);for(const t of e)cs(this.app,t.next);return Promise.resolve()}}const ps="app-check-internal";(0,Pi._registerComponent)(new Di.wA("app-check",e=>function(e,t){return new fs(e,t)}(e.getProvider("app").getImmediate(),e.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(ps).initialize()})),(0,Pi._registerComponent)(new Di.wA(ps,e=>function(e){return{getToken:t=>os(e,t),addTokenListener:t=>function(e,t,n,r){const{app:i}=e,s=ji(i),o={next:n,error:r,type:t};if(qi(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&hs(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),us(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>us(e))}(e,"INTERNAL",t),removeTokenListener:t=>cs(e.app,t)}}(e.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Pi.registerVersion)("@firebase/app-check","0.5.2");class gs{constructor(){return(0,bi.vb)("app-check")}}"undefined"!=typeof window&&window;var ms=n(9353);function ys(e){return new ke.y(function(t){return{unsubscribe:(0,ms.t)(e,t.next.bind(t),t.error.bind(t),t.complete.bind(t))}})}class _s{constructor(e){return e}}class vs{constructor(){return(0,bi.vb)("auth")}}const ws=new r.OlP("angularfire2.auth-instances");function bs(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new _s(r)}}const Is={provide:vs,deps:[[new r.FiY,ws]]},Ts={provide:_s,useFactory:function(e,t){const n=(0,bi.JM)("auth",e,t);return n&&new _s(n)},deps:[[new r.FiY,ws],Ti]};let Cs=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"auth")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Ts,Is]}),e})();function Es(e,...t){return{ngModule:Cs,providers:[{provide:ws,useFactory:bs(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,[new r.FiY,gs],...t]}]}}const Ss=(0,bi.u3)(ys,!0),ks=(0,bi.u3)(ms.n,!0);var As,xs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Rs={},Ns=Ns||{},Os=xs||self;function Ps(){}function Ds(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ls(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ms="closure_uid_"+(1e9*Math.random()>>>0),Fs=0;function Us(e,t,n){return e.call.apply(e.bind,arguments)}function Vs(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function js(e,t,n){return(js=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Us:Vs).apply(null,arguments)}function qs(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Bs(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function zs(){this.s=this.s,this.o=this.o}var $s={};zs.prototype.s=!1,zs.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,Ms)&&e[Ms]||(e[Ms]=++Fs)}(this);delete $s[e]}},zs.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Hs=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},Zs=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function Gs(e){return Array.prototype.concat.apply([],arguments)}function Ws(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Ks(e){return/^[\s\xa0]*$/.test(e)}var Ys,Qs=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Js(e,t){return-1!=e.indexOf(t)}function Xs(e,t){return e<t?-1:e>t?1:0}e:{var eo=Os.navigator;if(eo){var to=eo.userAgent;if(to){Ys=to;break e}}Ys=""}function no(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ro(e){const t={};for(const n in e)t[n]=e[n];return t}var io="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function so(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<io.length;t++)n=io[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function oo(e){return oo[" "](e),e}oo[" "]=Ps;var ao,co,uo=Js(Ys,"Opera"),lo=Js(Ys,"Trident")||Js(Ys,"MSIE"),ho=Js(Ys,"Edge"),fo=ho||lo,po=Js(Ys,"Gecko")&&!(Js(Ys.toLowerCase(),"webkit")&&!Js(Ys,"Edge"))&&!(Js(Ys,"Trident")||Js(Ys,"MSIE"))&&!Js(Ys,"Edge"),go=Js(Ys.toLowerCase(),"webkit")&&!Js(Ys,"Edge");function mo(){var e=Os.document;return e?e.documentMode:void 0}e:{var yo="",_o=(co=Ys,po?/rv:([^\);]+)(\)|;)/.exec(co):ho?/Edge\/([\d\.]+)/.exec(co):lo?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(co):go?/WebKit\/(\S+)/.exec(co):uo?/(?:Version)[ \/]?(\S+)/.exec(co):void 0);if(_o&&(yo=_o?_o[1]:""),lo){var vo=mo();if(null!=vo&&vo>parseFloat(yo)){ao=String(vo);break e}}ao=yo}var wo={};function bo(){return e=wo,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=Qs(String(ao)).split("."),n=Qs("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=Xs(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||Xs(0==i[2].length,0==s[2].length)||Xs(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}var Io=Os.document&&lo&&(mo()||parseInt(ao,10))||void 0,To=function(){if(!Os.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Os.addEventListener("test",Ps,t),Os.removeEventListener("test",Ps,t)}catch(n){}return e}();function Co(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function Eo(e,t){if(Co.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(po){e:{try{oo(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:So[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&Eo.Z.h.call(this)}}Co.prototype.h=function(){this.defaultPrevented=!0},Bs(Eo,Co);var So={2:"touch",3:"pen",4:"mouse"};Eo.prototype.h=function(){Eo.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ko="closure_listenable_"+(1e6*Math.random()|0),Ao=0;function xo(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++Ao,this.ca=this.fa=!1}function Ro(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function No(e){this.src=e,this.g={},this.h=0}function Oo(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Hs(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(Ro(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Po(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}No.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=Po(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new xo(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var Do="closure_lm_"+(1e6*Math.random()|0),Lo={};function Mo(e,t,n,r,i){if(r&&r.once)return Uo(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)Mo(e,t[s],n,r,i);return null}return n=Ho(n),e&&e[ko]?e.N(t,n,Ls(r)?!!r.capture:!!r,i):Fo(e,t,n,!1,r,i)}function Fo(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=Ls(i)?!!i.capture:!!i,a=zo(e);if(a||(e[Do]=a=new No(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=Bo;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)To||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(qo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Uo(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Uo(e,t[s],n,r,i);return null}return n=Ho(n),e&&e[ko]?e.O(t,n,Ls(r)?!!r.capture:!!r,i):Fo(e,t,n,!0,r,i)}function Vo(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)Vo(e,t[s],n,r,i);else r=Ls(r)?!!r.capture:!!r,n=Ho(n),e&&e[ko]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=Po(s=e.g[t],n,r,i))&&(Ro(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=zo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Po(t,n,r,i)),(n=-1<e?t[e]:null)&&jo(n))}function jo(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ko])Oo(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(qo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=zo(t))?(Oo(n,e),0==n.h&&(n.src=null,t[Do]=null)):Ro(e)}}}function qo(e){return e in Lo?Lo[e]:Lo[e]="on"+e}function Bo(e,t){if(e.ca)e=!0;else{t=new Eo(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&jo(e),e=n.call(r,t)}return e}function zo(e){return(e=e[Do])instanceof No?e:null}var $o="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ho(e){return"function"==typeof e?e:(e[$o]||(e[$o]=function(t){return e.handleEvent(t)}),e[$o])}function Zo(){zs.call(this),this.i=new No(this),this.P=this,this.I=null}function Go(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new Co(t,e);else if(t instanceof Co)t.target=t.target||e;else{var i=t;so(t=new Co(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Wo(o,r,!0,t)&&i}if(i=Wo(o=t.g=e,r,!0,t)&&i,i=Wo(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Wo(o=t.g=n[s],r,!1,t)&&i}function Wo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&Oo(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}Bs(Zo,zs),Zo.prototype[ko]=!0,Zo.prototype.removeEventListener=function(e,t,n,r){Vo(this,e,t,n,r)},Zo.prototype.M=function(){if(Zo.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Ro(n[r]);delete t.g[e],t.h--}}this.I=null},Zo.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Zo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ko=Os.JSON.stringify;function Yo(){var e=ra;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Qo,Jo=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Xo,e=>e.reset());class Xo{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ea(e){Os.setTimeout(()=>{throw e},0)}function ta(e,t){Qo||function(){var e=Os.Promise.resolve(void 0);Qo=function(){e.then(ia)}}(),na||(Qo(),na=!0),ra.add(e,t)}var na=!1,ra=new class{constructor(){this.h=this.g=null}add(e,t){const n=Jo.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function ia(){for(var e;e=Yo();){try{e.h.call(e.g)}catch(n){ea(n)}var t=Jo;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}na=!1}function sa(e,t){Zo.call(this),this.h=e||1,this.g=t||Os,this.j=js(this.kb,this),this.l=Date.now()}function oa(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function aa(e,t,n){if("function"==typeof e)n&&(e=js(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=js(e.handleEvent,e)}return 2147483647<Number(t)?-1:Os.setTimeout(e,t||0)}function ca(e){e.g=aa(()=>{e.g=null,e.i&&(e.i=!1,ca(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Bs(sa,Zo),(As=sa.prototype).da=!1,As.S=null,As.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Go(this,"tick"),this.da&&(oa(this),this.start()))}},As.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},As.M=function(){sa.Z.M.call(this),oa(this),delete this.g};class ua extends zs{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ca(this)}M(){super.M(),this.g&&(Os.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function la(e){zs.call(this),this.h=e,this.g={}}Bs(la,zs);var ha=[];function da(e,t,n,r){Array.isArray(n)||(n&&(ha[0]=n.toString()),n=ha);for(var i=0;i<n.length;i++){var s=Mo(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function fa(e){no(e.g,function(e,t){this.g.hasOwnProperty(t)&&jo(e)},e),e.g={}}function pa(){this.g=!0}function ga(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Ko(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}la.prototype.M=function(){la.Z.M.call(this),fa(this)},la.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},pa.prototype.Aa=function(){this.g=!1},pa.prototype.info=function(){};var ma={},ya=null;function _a(){return ya=ya||new Zo}function va(e){Co.call(this,ma.Ma,e)}function wa(e){const t=_a();Go(t,new va(t,e))}function ba(e,t){Co.call(this,ma.STAT_EVENT,e),this.stat=t}function Ia(e){const t=_a();Go(t,new ba(t,e))}function Ta(e,t){Co.call(this,ma.Na,e),this.size=t}function Ca(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return Os.setTimeout(function(){e()},t)}ma.Ma="serverreachability",Bs(va,Co),ma.STAT_EVENT="statevent",Bs(ba,Co),ma.Na="timingevent",Bs(Ta,Co);var Ea={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Sa={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ka(){}function Aa(){}ka.prototype.h=null;var xa,Ra={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Na(){Co.call(this,"d")}function Oa(){Co.call(this,"c")}function Pa(){}function Da(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new la(this),this.P=Ma,this.W=new sa(e=fo?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new La}function La(){this.i=null,this.g="",this.h=!1}Bs(Na,Co),Bs(Oa,Co),Bs(Pa,ka),Pa.prototype.g=function(){return new XMLHttpRequest},Pa.prototype.i=function(){return{}},xa=new Pa;var Ma=45e3,Fa={},Ua={};function Va(e,t,n){e.K=1,e.v=cc(nc(t)),e.s=n,e.U=!0,ja(e,null)}function ja(e,t){e.F=Date.now(),$a(e),e.A=nc(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),bc(n.h,"t",r),e.C=0,n=e.l.H,e.h=new La,e.g=bu(e.l,n?t:null,!e.s),0<e.O&&(e.L=new ua(js(e.Ia,e,e.g),e.O)),da(e.V,e.g,"readystatechange",e.gb),t=e.H?ro(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),wa(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function qa(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function Ba(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=za(e,n),r==Ua){4==t&&(e.o=4,Ia(14),i=!1),ga(e.j,e.m,null,"[Incomplete Response]");break}if(r==Fa){e.o=4,Ia(15),ga(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ga(e.j,e.m,r,null),Ka(e,r)}qa(e)&&r!=Ua&&r!=Fa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ia(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),fu(t),t.L=!0,Ia(11))):(ga(e.j,e.m,n,"[Invalid Chunked Response]"),Wa(e),Ga(e))}function za(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ua:(n=Number(t.substring(n,r)),isNaN(n)?Fa:(r+=1)+n>t.length?Ua:(t=t.substr(r,n),e.C=r+n,t))}function $a(e){e.Y=Date.now()+e.P,Ha(e,e.P)}function Ha(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ca(js(e.eb,e),t)}function Za(e){e.B&&(Os.clearTimeout(e.B),e.B=null)}function Ga(e){0==e.l.G||e.I||mu(e.l,e)}function Wa(e){Za(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,oa(e.W),fa(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ka(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||kc(n.i,e)))if(n.I=e.N,!e.J&&kc(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(n.u)n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=Ca(js(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<e.F))break e;gu(n),iu(n)}du(n),Ia(18)}if(1>=Sc(n.i)&&n.ka){try{n.ka()}catch(u){}n.ka=void 0}}else _u(n,11)}else if((e.J||n.g==e)&&gu(n),!Ks(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.U=u[0],u=u[1],2==n.G)if("c"==u[0]){n.J=u[1],n.la=u[2];const t=u[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=u[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(n.K=r=1.5*l,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(Js(e,"spdy")||Js(e,"quic")||Js(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(Ac(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,ac(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=wu(r,r.H?r.la:null,r.W),o.J){xc(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(Za(a),$a(a)),r.g=o}else hu(r);0<n.l.length&&au(n)}else"stop"!=u[0]&&"close"!=u[0]||_u(n,7);else 3==n.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?_u(n,7):ru(n):"noop"!=u[0]&&n.j&&n.j.wa(u),n.A=0)}wa(4)}catch(u){}}function Ya(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Ds(e)||"string"==typeof e)Zs(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(Ds(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(Ds(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function Qa(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof Qa)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function Ja(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Xa(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Xa(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Xa(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(As=Da.prototype).setTimeout=function(e){this.P=e},As.gb=function(e){e=e.target;const t=this.L;t&&3==Jc(e)?t.l():this.Ia(e)},As.Ia=function(e){try{if(e==this.g)e:{const l=Jc(this.g);var t=this.g.Da();const h=this.g.ba();if(!(3>l)&&(3!=l||fo||this.g&&(this.h.h||this.g.ga()||Xc(this.g)))){this.I||4!=l||7==t||wa(8==t||0>=h?3:2),Za(this);var n=this.g.ba();this.N=n;t:if(qa(this)){var r=Xc(this.g);e="";var i=r.length,s=4==Jc(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Wa(this),Ga(this);var o="";break t}this.h.i=new Os.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,l,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ks(a)){var u=a;break t}}u=null}if(!(n=u)){this.i=!1,this.o=3,Ia(12),Wa(this),Ga(this);break e}ga(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ka(this,n)}this.U?(Ba(this,l,o),fo&&this.i&&3==l&&(da(this.V,this.W,"tick",this.fb),this.W.start())):(ga(this.j,this.m,o,null),Ka(this,o)),4==l&&Wa(this),this.i&&!this.I&&(4==l?mu(this.l,this):(this.i=!1,$a(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ia(12)):(this.o=0,Ia(13)),Wa(this),Ga(this)}}}catch(l){}},As.fb=function(){if(this.g){var e=Jc(this.g),t=this.g.ga();this.C<t.length&&(Za(this),Ba(this,e,t),this.i&&4!=e&&$a(this))}},As.cancel=function(){this.I=!0,Wa(this)},As.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(wa(3),Ia(17)),Wa(this),this.o=2,Ga(this)):Ha(this,this.Y-e)},(As=Qa.prototype).R=function(){Ja(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},As.T=function(){return Ja(this),this.g.concat()},As.get=function(e,t){return Xa(this.h,e)?this.h[e]:t},As.set=function(e,t){Xa(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},As.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var ec=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function tc(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof tc){this.g=void 0!==t?t:e.g,rc(this,e.j),this.s=e.s,ic(this,e.i),sc(this,e.m),this.l=e.l,t=e.h;var n=new yc;n.i=t.i,t.g&&(n.g=new Qa(t.g),n.h=t.h),oc(this,n),this.o=e.o}else e&&(n=String(e).match(ec))?(this.g=!!t,rc(this,n[1]||"",!0),this.s=uc(n[2]||""),ic(this,n[3]||"",!0),sc(this,n[4]),this.l=uc(n[5]||"",!0),oc(this,n[6]||"",!0),this.o=uc(n[7]||"")):(this.g=!!t,this.h=new yc(null,this.g))}function nc(e){return new tc(e)}function rc(e,t,n){e.j=n?uc(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ic(e,t,n){e.i=n?uc(t,!0):t}function sc(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function oc(e,t,n){t instanceof yc?(e.h=t,function(e,t){t&&!e.j&&(_c(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(vc(this,t),bc(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=lc(t,gc)),e.h=new yc(t,e.g))}function ac(e,t,n){e.h.set(t,n)}function cc(e){return ac(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function uc(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lc(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,hc),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function hc(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tc.prototype.toString=function(){var e=[],t=this.j;t&&e.push(lc(t,dc,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(lc(t,dc,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(lc(n,"/"==n.charAt(0)?pc:fc,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",lc(n,mc)),e.join("")};var dc=/[#\/\?@]/g,fc=/[#\?:]/g,pc=/[#\?]/g,gc=/[#\?@]/g,mc=/#/g;function yc(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function _c(e){e.g||(e.g=new Qa,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function vc(e,t){_c(e),t=Ic(e,t),Xa(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Xa((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&Ja(e)))}function wc(e,t){return _c(e),t=Ic(e,t),Xa(e.g.h,t)}function bc(e,t,n){vc(e,t),0<n.length&&(e.i=null,e.g.set(Ic(e,t),Ws(n)),e.h+=n.length)}function Ic(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tc(e){this.l=e||Cc,e=Os.PerformanceNavigationTiming?0<(e=Os.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(Os.g&&Os.g.Ea&&Os.g.Ea()&&Os.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(As=yc.prototype).add=function(e,t){_c(this),this.i=null,e=Ic(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},As.forEach=function(e,t){_c(this),this.g.forEach(function(n,r){Zs(n,function(n){e.call(t,n,r,this)},this)},this)},As.T=function(){_c(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},As.R=function(e){_c(this);var t=[];if("string"==typeof e)wc(this,e)&&(t=Gs(t,this.g.get(Ic(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=Gs(t,e[n])}return t},As.set=function(e,t){return _c(this),this.i=null,wc(this,e=Ic(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},As.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},As.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var Cc=10;function Ec(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Sc(e){return e.h?1:e.g?e.g.size:0}function kc(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ac(e,t){e.g?e.g.add(t):e.h=t}function xc(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Rc(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return Ws(e.i)}function Nc(){}function Oc(){this.g=new Nc}function Pc(e,t,n){const r=n||"";try{Ya(e,function(e,n){let i=e;Ls(e)&&(i=Ko(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Dc(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function Lc(e){this.l=e.$b||null,this.j=e.ib||!1}function Mc(e,t){Zo.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=Fc,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Tc.prototype.cancel=function(){if(this.i=Rc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},Nc.prototype.stringify=function(e){return Os.JSON.stringify(e,void 0)},Nc.prototype.parse=function(e){return Os.JSON.parse(e,void 0)},Bs(Lc,ka),Lc.prototype.g=function(){return new Mc(this.l,this.j)},Lc.prototype.i=function(e){return function(){return e}}({}),Bs(Mc,Zo);var Fc=0;function Uc(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function Vc(e){e.readyState=4,e.l=null,e.j=null,e.A=null,jc(e)}function jc(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(As=Mc.prototype).open=function(e,t){if(this.readyState!=Fc)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,jc(this)},As.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Os).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},As.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Vc(this)),this.readyState=Fc},As.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Os.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Uc(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},As.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Vc(this):jc(this),3==this.readyState&&Uc(this)}},As.Ua=function(e){this.g&&(this.response=this.responseText=e,Vc(this))},As.Ta=function(e){this.g&&(this.response=e,Vc(this))},As.ha=function(){this.g&&Vc(this)},As.setRequestHeader=function(e,t){this.v.append(e,t)},As.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},As.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Mc.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var qc=Os.JSON.parse;function Bc(e){Zo.call(this),this.headers=new Qa,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zc,this.K=this.L=!1}Bs(Bc,Zo);var zc="",$c=/^https?$/i,Hc=["POST","PUT"];function Zc(e){return"content-type"==e.toLowerCase()}function Gc(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Wc(e),Yc(e)}function Wc(e){e.D||(e.D=!0,Go(e,"complete"),Go(e,"error"))}function Kc(e){if(e.h&&void 0!==Ns&&(!e.C[1]||4!=Jc(e)||2!=e.ba()))if(e.v&&4==Jc(e))aa(e.Fa,0,e);else if(Go(e,"readystatechange"),4==Jc(e)){e.h=!1;try{const c=e.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===c){var i=String(e.H).match(ec)[1]||null;if(!i&&Os.self&&Os.self.location){var s=Os.self.location.protocol;i=s.substr(0,s.length-1)}r=!$c.test(i?i.toLowerCase():"")}n=r}if(n)Go(e,"complete"),Go(e,"success");else{e.m=6;try{var o=2<Jc(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",Wc(e)}}finally{Yc(e)}}}function Yc(e,t){if(e.g){Qc(e);const r=e.g,i=e.C[0]?Ps:null;e.g=null,e.C=null,t||Go(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function Qc(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Os.clearTimeout(e.A),e.A=null)}function Jc(e){return e.g?e.g.readyState:0}function Xc(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case zc:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function eu(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return no(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):ac(e,t,n))}function tu(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function nu(e){this.za=0,this.l=[],this.h=new pa,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=tu("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=tu("baseRetryDelayMs",5e3,e),this.$a=tu("retryDelaySeedMs",1e4,e),this.Ya=tu("forwardChannelMaxRetries",2,e),this.ra=tu("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new Tc(e&&e.concurrentRequestLimit),this.Ca=new Oc,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function ru(e){if(su(e),3==e.G){var t=e.V++,n=nc(e.F);ac(n,"SID",e.J),ac(n,"RID",t),ac(n,"TYPE","terminate"),uu(e,n),(t=new Da(e,e.h,t,void 0)).K=2,t.v=cc(nc(n)),n=!1,Os.navigator&&Os.navigator.sendBeacon&&(n=Os.navigator.sendBeacon(t.v.toString(),"")),!n&&Os.Image&&((new Image).src=t.v,n=!0),n||(t.g=bu(t.l,null),t.g.ea(t.v)),t.F=Date.now(),$a(t)}vu(e)}function iu(e){e.g&&(fu(e),e.g.cancel(),e.g=null)}function su(e){iu(e),e.u&&(Os.clearTimeout(e.u),e.u=null),gu(e),e.i.cancel(),e.m&&("number"==typeof e.m&&Os.clearTimeout(e.m),e.m=null)}function ou(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&au(e)}function au(e){Ec(e.i)||e.m||(e.m=!0,ta(e.Ha,e),e.C=0)}function cu(e,t){var n;n=t?t.m:e.V++;const r=nc(e.F);ac(r,"SID",e.J),ac(r,"RID",n),ac(r,"AID",e.U),uu(e,r),e.o&&e.s&&eu(r,e.o,e.s),n=new Da(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=lu(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),Ac(e.i,n),Va(n,r,t)}function uu(e,t){e.j&&Ya({},function(e,n){ac(t,n,e)})}function lu(e,t,n){n=Math.min(e.l.length,n);var r=e.j?js(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].h;const c=i[a].g;if(n-=t,0>n)t=Math.max(0,i[a].h-100),o=!1;else try{Pc(c,e,"req"+n+"_")}catch(s){r&&r(c)}}if(o){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function hu(e){e.g||e.u||(e.Y=1,ta(e.Ga,e),e.A=0)}function du(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=Ca(js(e.Ga,e),yu(e,e.A)),e.A++,0))}function fu(e){null!=e.B&&(Os.clearTimeout(e.B),e.B=null)}function pu(e){e.g=new Da(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=nc(e.oa);ac(t,"RID","rpc"),ac(t,"SID",e.J),ac(t,"CI",e.N?"0":"1"),ac(t,"AID",e.U),uu(e,t),ac(t,"TYPE","xmlhttp"),e.o&&e.s&&eu(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=cc(nc(t)),n.s=null,n.U=!0,ja(n,e)}function gu(e){null!=e.v&&(Os.clearTimeout(e.v),e.v=null)}function mu(e,t){var n=null;if(e.g==t){gu(e),fu(e),e.g=null;var r=2}else{if(!kc(e.i,t))return;n=t.D,xc(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Go(r=_a(),new Ta(r,n,t,i)),au(e)}else hu(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(Sc(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=Ca(js(e.Ha,e,t),yu(e,e.C)),e.C++,0)))}(e,t)||2==r&&du(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:_u(e,5);break;case 4:_u(e,10);break;case 3:_u(e,6);break;default:_u(e,2)}}function yu(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function _u(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=js(e.jb,e);n||(n=new tc("//www.google.com/images/cleardot.gif"),Os.location&&"http"==Os.location.protocol||rc(n,"https"),cc(n)),function(e,t){const n=new pa;if(Os.Image){const r=new Image;r.onload=qs(Dc,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qs(Dc,n,r,"TestLoadImage: error",!1,t),r.onabort=qs(Dc,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qs(Dc,n,r,"TestLoadImage: timeout",!1,t),Os.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ia(2);e.G=0,e.j&&e.j.va(t),vu(e),su(e)}function vu(e){e.G=0,e.I=-1,e.j&&((0!=Rc(e.i).length||0!=e.l.length)&&(e.i.i.length=0,Ws(e.l),e.l.length=0),e.j.ua())}function wu(e,t,n){let r=function(e){return e instanceof tc?nc(e):new tc(e,void 0)}(n);if(""!=r.i)t&&ic(r,t+"."+r.i),sc(r,r.m);else{const e=Os.location;r=function(e,t,n,r){var i=new tc(null,void 0);return e&&rc(i,e),t&&ic(i,t),n&&sc(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&no(e.aa,function(e,t){ac(r,t,e)}),n=e.sa,(t=e.D)&&n&&ac(r,t,n),ac(r,"VER",e.ma),uu(e,r),r}function bu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new Bc(n&&e.Ba&&!e.qa?new Lc({ib:!0}):e.qa)).L=e.H,t}function Iu(){}function Tu(){if(lo&&!(10<=Number(Io)))throw Error("Environmental error: no available transport.")}function Cu(e,t){Zo.call(this),this.g=new nu(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!Ks(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Ks(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new ku(this)}function Eu(e){Na.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Su(){Oa.call(this),this.status=1}function ku(e){this.g=e}(As=Bc.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xa.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:xa),this.g.onreadystatechange=js(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void Gc(this,s)}e=n||"";const i=new Qa(this.headers);r&&Ya(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=Zc;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=Os.FormData&&e instanceof Os.FormData,!(0<=Hs(Hc,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Qc(this),0<this.B&&((this.K=function(e){return lo&&bo()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=js(this.pa,this)):this.A=aa(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){Gc(this,s)}},As.pa=function(){void 0!==Ns&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Go(this,"timeout"),this.abort(8))},As.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Go(this,"complete"),Go(this,"abort"),Yc(this))},As.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Yc(this,!0)),Bc.Z.M.call(this)},As.Fa=function(){this.s||(this.F||this.v||this.l?Kc(this):this.cb())},As.cb=function(){Kc(this)},As.ba=function(){try{return 2<Jc(this)?this.g.status:-1}catch(co){return-1}},As.ga=function(){try{return this.g?this.g.responseText:""}catch(co){return""}},As.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),qc(t)}},As.Da=function(){return this.m},As.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(As=nu.prototype).ma=8,As.G=1,As.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},As.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new Da(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=ro(s),so(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=lu(this,i,t),ac(n=nc(this.F),"RID",e),ac(n,"CVER",22),this.D&&ac(n,"X-HTTP-Session-Id",this.D),uu(this,n),this.o&&s&&eu(n,this.o,s),Ac(this.i,i),this.Ra&&ac(n,"TYPE","init"),this.ja?(ac(n,"$req",t),ac(n,"SID","null"),i.$=!0,Va(i,n,null)):Va(i,n,t),this.G=2}}else 3==this.G&&(e?cu(this,e):0==this.l.length||Ec(this.i)||cu(this))},As.Ga=function(){if(this.u=null,pu(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=Ca(js(this.bb,this),e)}},As.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ia(10),iu(this),pu(this))},As.ab=function(){null!=this.v&&(this.v=null,iu(this),du(this),Ia(19))},As.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ia(2)):(this.h.info("Failed to ping google.com"),Ia(1))},(As=Iu.prototype).xa=function(){},As.wa=function(){},As.va=function(){},As.ua=function(){},As.Oa=function(){},Tu.prototype.g=function(e,t){return new Cu(e,t)},Bs(Cu,Zo),Cu.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),ta(js(e.hb,e,t))),Ia(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=wu(e,null,e.W),au(e)},Cu.prototype.close=function(){ru(this.g)},Cu.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,ou(this.g,t)}else this.v?((t={}).__data__=Ko(e),ou(this.g,t)):ou(this.g,e)},Cu.prototype.M=function(){this.g.j=null,delete this.j,ru(this.g),delete this.g,Cu.Z.M.call(this)},Bs(Eu,Na),Bs(Su,Oa),Bs(ku,Iu),ku.prototype.xa=function(){Go(this.g,"a")},ku.prototype.wa=function(e){Go(this.g,new Eu(e))},ku.prototype.va=function(e){Go(this.g,new Su(e))},ku.prototype.ua=function(){Go(this.g,"b")},Tu.prototype.createWebChannel=Tu.prototype.g,Cu.prototype.send=Cu.prototype.u,Cu.prototype.open=Cu.prototype.m,Cu.prototype.close=Cu.prototype.close,Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Sa.COMPLETE="complete",Aa.EventType=Ra,Ra.OPEN="a",Ra.CLOSE="b",Ra.ERROR="c",Ra.MESSAGE="d",Zo.prototype.listen=Zo.prototype.N,Bc.prototype.listenOnce=Bc.prototype.O,Bc.prototype.getLastError=Bc.prototype.La,Bc.prototype.getLastErrorCode=Bc.prototype.Da,Bc.prototype.getStatus=Bc.prototype.ba,Bc.prototype.getResponseJson=Bc.prototype.Qa,Bc.prototype.getResponseText=Bc.prototype.ga,Bc.prototype.send=Bc.prototype.ea;var Au=Rs.createWebChannelTransport=function(){return new Tu},xu=Rs.getStatEventTarget=function(){return _a()},Ru=Rs.ErrorCode=Ea,Nu=Rs.EventType=Sa,Ou=Rs.Event=ma,Pu=Rs.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Du=Rs.FetchXmlHttpFactory=Lc,Lu=Rs.WebChannel=Aa,Mu=Rs.XhrIo=Bc;const Fu="@firebase/firestore";class Uu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Uu.UNAUTHENTICATED=new Uu(null),Uu.GOOGLE_CREDENTIALS=new Uu("google-credentials-uid"),Uu.FIRST_PARTY=new Uu("first-party-uid"),Uu.MOCK_USER=new Uu("mock-user");let Vu="9.6.1";const ju=new Mi.Yd("@firebase/firestore");function qu(){return ju.logLevel}function Bu(e,...t){if(ju.logLevel<=Mi.in.DEBUG){const n=t.map(Hu);ju.debug(`Firestore (${Vu}): ${e}`,...n)}}function zu(e,...t){if(ju.logLevel<=Mi.in.ERROR){const n=t.map(Hu);ju.error(`Firestore (${Vu}): ${e}`,...n)}}function $u(e,...t){if(ju.logLevel<=Mi.in.WARN){const n=t.map(Hu);ju.warn(`Firestore (${Vu}): ${e}`,...n)}}function Hu(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Zu(e="Unexpected state"){const t=`FIRESTORE (${Vu}) INTERNAL ASSERTION FAILED: `+e;throw zu(t),new Error(t)}function Gu(e,t){e||Zu()}function Wu(e,t){return e}const Ku={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Yu extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Qu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ju{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Xu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Uu.UNAUTHENTICATED))}shutdown(){}}class el{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tl{constructor(e){this.t=e,this.currentUser=Uu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var n=this;let r=this.i;const i=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve();let s=new Qu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Qu,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const t=s;e.enqueueRetryable((0,Oi.Z)(function*(){yield t.promise,yield i(n.currentUser)}))},a=e=>{Bu("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Bu("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Qu)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Bu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Gu("string"==typeof t.accessToken),new Ju(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Gu(null===e||"string"==typeof e),new Uu(e)}}class nl{constructor(e,t,n){this.type="FirstParty",this.user=Uu.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const r=e.auth.getAuthHeaderValueForFirstParty([]);r&&this.headers.set("Authorization",r),n&&this.headers.set("X-Goog-Iam-Authorization-Token",n)}}class rl{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new nl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Uu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class il{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class sl{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,t){this.o=n=>{e.enqueueRetryable(()=>{return null!=(e=n).error&&Bu("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`),t(e.token);var e})};const n=e=>{Bu("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.g.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){const e=this.g.getImmediate({optional:!0});e?n(e):Bu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Gu("string"==typeof e.token),new il(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ol{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.p(e),this.T=e=>t.writeSequenceNumber(e))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function al(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}ol.I=-1;class cl{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=al(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function ul(e,t){return e<t?-1:e>t?1:0}function ll(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function hl(e){return e+"\0"}class dl{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Yu(Ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Yu(Ku.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Yu(Ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Yu(Ku.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dl.fromMillis(Date.now())}static fromDate(e){return dl.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new dl(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ul(this.nanoseconds,e.nanoseconds):ul(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class fl{constructor(e){this.timestamp=e}static fromTimestamp(e){return new fl(e)}static min(){return new fl(new dl(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function pl(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function gl(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ml(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class yl{constructor(e,t,n){void 0===t?t=0:t>e.length&&Zu(),void 0===n?n=e.length-t:n>e.length-t&&Zu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===yl.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof yl?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _l extends yl{construct(e,t,n){return new _l(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new _l(t)}static emptyPath(){return new _l([])}}const vl=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wl extends yl{construct(e,t,n){return new wl(e,t,n)}static isValidIdentifier(e){return vl.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wl.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new wl(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Yu(Ku.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Yu(Ku.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Yu(Ku.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wl(t)}static emptyPath(){return new wl([])}}class bl{constructor(e){this.fields=e,e.sort(wl.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ll(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class Il{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Il(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Il(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ul(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Il.EMPTY_BYTE_STRING=new Il("");const Tl=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cl(e){if(Gu(!!e),"string"==typeof e){let t=0;const n=Tl.exec(e);if(Gu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:El(e.seconds),nanos:El(e.nanos)}}function El(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Sl(e){return"string"==typeof e?Il.fromBase64String(e):Il.fromUint8Array(e)}function kl(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Al(e){const t=e.mapValue.fields.__previous_value__;return kl(t)?Al(t):t}function xl(e){const t=Cl(e.mapValue.fields.__local_write_time__.timestampValue);return new dl(t.seconds,t.nanos)}function Rl(e){return null==e}function Nl(e){return 0===e&&1/e==-1/0}function Ol(e){return"number"==typeof e&&Number.isInteger(e)&&!Nl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class Pl{constructor(e){this.path=e}static fromPath(e){return new Pl(_l.fromString(e))}static fromName(e){return new Pl(_l.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===_l.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _l.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Pl(new _l(e.slice()))}}function Dl(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?kl(e)?4:10:Zu()}function Ll(e,t){const n=Dl(e);if(n!==Dl(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return xl(e).isEqual(xl(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Cl(e.timestampValue),r=Cl(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return r=t,Sl(e.bytesValue).isEqual(Sl(r.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return El(e.geoPointValue.latitude)===El(t.geoPointValue.latitude)&&El(e.geoPointValue.longitude)===El(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return El(e.integerValue)===El(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=El(e.doubleValue),r=El(t.doubleValue);return n===r?Nl(n)===Nl(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ll(e.arrayValue.values||[],t.arrayValue.values||[],Ll);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(pl(n)!==pl(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Ll(n[i],r[i])))return!1;return!0}(e,t);default:return Zu()}var r}function Ml(e,t){return void 0!==(e.values||[]).find(e=>Ll(e,t))}function Fl(e,t){const n=Dl(e),r=Dl(t);if(n!==r)return ul(n,r);switch(n){case 0:return 0;case 1:return ul(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=El(e.integerValue||e.doubleValue),r=El(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Ul(e.timestampValue,t.timestampValue);case 4:return Ul(xl(e),xl(t));case 5:return ul(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Sl(e),r=Sl(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=ul(n[i],r[i]);if(0!==e)return e}return ul(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ul(El(e.latitude),El(t.latitude));return 0!==n?n:ul(El(e.longitude),El(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Fl(n[i],r[i]);if(e)return e}return ul(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=ul(r[o],s[o]);if(0!==e)return e;const t=Fl(n[r[o]],i[s[o]]);if(0!==t)return t}return ul(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Zu()}}function Ul(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ul(e,t);const n=Cl(e),r=Cl(t),i=ul(n.seconds,r.seconds);return 0!==i?i:ul(n.nanos,r.nanos)}function Vl(e){return jl(e)}function jl(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Cl(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Sl(e.bytesValue).toBase64():"referenceValue"in e?Pl.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=jl(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${jl(e.fields[i])}`;return n+"}"}(e.mapValue):Zu();var t}function ql(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Bl(e){return!!e&&"integerValue"in e}function zl(e){return!!e&&"arrayValue"in e}function $l(e){return!!e&&"nullValue"in e}function Hl(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zl(e){return!!e&&"mapValue"in e}function Gl(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return gl(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Gl(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Gl(e.arrayValue.values[n]);return t}return Object.assign({},e)}class Wl{constructor(e){this.value=e}static empty(){return new Wl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Gl(t)}setAll(e){let t=wl.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Gl(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ll(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){gl(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Wl(Gl(this.value))}}function Kl(e){const t=[];return gl(e.fields,(e,n)=>{const r=new wl([e]);if(Zl(n)){const e=Kl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new bl(t)}class Yl{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new Yl(e,0,fl.min(),Wl.empty(),0)}static newFoundDocument(e,t,n){return new Yl(e,1,t,n,0)}static newNoDocument(e,t){return new Yl(e,2,t,Wl.empty(),0)}static newUnknownDocument(e,t){return new Yl(e,3,t,Wl.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Yl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Yl(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ql{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.R=null}}function Jl(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ql(e,t,n,r,i,s,o)}function Xl(e){const t=Wu(e);if(null===t.R){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+Vl(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>{return(t=e).field.canonicalString()+t.dir;var t}).join(","),Rl(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=dh(t.startAt)),t.endAt&&(e+="|ub:",e+=dh(t.endAt)),t.R=e}return t.R}function eh(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!ph(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!Ll(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!mh(e.startAt,t.startAt)&&mh(e.endAt,t.endAt)}function th(e){return Pl.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class nh extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.P(e,t,n):new rh(e,t,n):"array-contains"===t?new ah(e,n):"in"===t?new ch(e,n):"not-in"===t?new uh(e,n):"array-contains-any"===t?new lh(e,n):new nh(e,t,n)}static P(e,t,n){return"in"===t?new ih(e,n):new sh(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.v(Fl(t,this.value)):null!==t&&Dl(this.value)===Dl(t)&&this.v(Fl(t,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Zu()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class rh extends nh{constructor(e,t,n){super(e,t,n),this.key=Pl.fromName(n.referenceValue)}matches(e){const t=Pl.comparator(e.key,this.key);return this.v(t)}}class ih extends nh{constructor(e,t){super(e,"in",t),this.keys=oh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class sh extends nh{constructor(e,t){super(e,"not-in",t),this.keys=oh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function oh(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Pl.fromName(e.referenceValue))}class ah extends nh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return zl(t)&&Ml(t.arrayValue,this.value)}}class ch extends nh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ml(this.value.arrayValue,t)}}class uh extends nh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ml(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Ml(this.value.arrayValue,t)}}class lh extends nh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!zl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ml(this.value.arrayValue,e))}}class hh{constructor(e,t){this.position=e,this.before=t}}function dh(e){return`${e.before?"b":"a"}:${e.position.map(e=>Vl(e)).join(",")}`}class fh{constructor(e,t="asc"){this.field=e,this.dir=t}}function ph(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function gh(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?Pl.comparator(Pl.fromName(o.referenceValue),n.key):Fl(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function mh(e,t){if(null===e)return null===t;if(null===t||e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ll(e.position[n],t.position[n]))return!1;return!0}class yh{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.S=null,this.D=null}}function _h(e,t,n,r,i,s,o,a){return new yh(e,t,n,r,i,s,o,a)}function vh(e){return new yh(e)}function wh(e){return!Rl(e.limit)&&"F"===e.limitType}function bh(e){return!Rl(e.limit)&&"L"===e.limitType}function Ih(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Th(e){for(const t of e.filters)if(t.V())return t.field;return null}function Ch(e){return null!==e.collectionGroup}function Eh(e){const t=Wu(e);if(null===t.S){t.S=[];const e=Th(t),n=Ih(t);if(null!==e&&null===n)e.isKeyField()||t.S.push(new fh(e)),t.S.push(new fh(wl.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.S.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.S.push(new fh(wl.keyField(),e))}}}return t.S}function Sh(e){const t=Wu(e);if(!t.D)if("F"===t.limitType)t.D=Jl(t.path,t.collectionGroup,Eh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of Eh(t))e.push(new fh(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new hh(t.endAt.position,!t.endAt.before):null,r=t.startAt?new hh(t.startAt.position,!t.startAt.before):null;t.D=Jl(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.D}function kh(e,t,n){return new yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Ah(e,t){return eh(Sh(e),Sh(t))&&e.limitType===t.limitType}function xh(e){return`${Xl(Sh(e))}|lt:${e.limitType}`}function Rh(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${Vl(t.value)}`;var t}).join(", ")}]`),Rl(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>{return`${(t=e).field.canonicalString()} (${t.dir})`;var t}).join(", ")}]`),e.startAt&&(t+=", startAt: "+dh(e.startAt)),e.endAt&&(t+=", endAt: "+dh(e.endAt)),`Target(${t})`}(Sh(e))}; limitType=${e.limitType})`}function Nh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Pl.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&(r=t,!((n=e).startAt&&!gh(n.startAt,Eh(n),r)||n.endAt&&gh(n.endAt,Eh(n),r)));var n,r}function Oh(e){return(t,n)=>{let r=!1;for(const i of Eh(e)){const e=Ph(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Ph(e,t,n){const r=e.field.isKeyField()?Pl.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fl(r,i):Zu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Zu()}}function Dh(e,t){if(e.C){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Nl(t)?"-0":t}}function Lh(e){return{integerValue:""+e}}function Mh(e,t){return Ol(t)?Lh(t):Dh(e,t)}class Fh{constructor(){this._=void 0}}function Uh(e,t,n){return e instanceof qh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Bh?zh(e,t):e instanceof $h?Hh(e,t):function(e,t){const n=jh(e,t),r=Gh(n)+Gh(e.N);return Bl(n)&&Bl(e.N)?Lh(r):Dh(e.k,r)}(e,t)}function Vh(e,t,n){return e instanceof Bh?zh(e,t):e instanceof $h?Hh(e,t):n}function jh(e,t){return e instanceof Zh?Bl(r=t)||(n=r)&&"doubleValue"in n?t:{integerValue:0}:null;var n,r}class qh extends Fh{}class Bh extends Fh{constructor(e){super(),this.elements=e}}function zh(e,t){const n=Wh(t);for(const r of e.elements)n.some(e=>Ll(e,r))||n.push(r);return{arrayValue:{values:n}}}class $h extends Fh{constructor(e){super(),this.elements=e}}function Hh(e,t){let n=Wh(t);for(const r of e.elements)n=n.filter(e=>!Ll(e,r));return{arrayValue:{values:n}}}class Zh extends Fh{constructor(e,t){super(),this.k=e,this.N=t}}function Gh(e){return El(e.integerValue||e.doubleValue)}function Wh(e){return zl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Kh{constructor(e,t){this.field=e,this.transform=t}}class Yh{constructor(e,t){this.version=e,this.transformResults=t}}class Qh{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Qh}static exists(e){return new Qh(void 0,e)}static updateTime(e){return new Qh(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Jh(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Xh{}function ed(e,t,n){e instanceof sd?function(e,t,n){const r=e.value.clone(),i=cd(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof od?function(e,t,n){if(!Jh(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=cd(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(ad(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):t.convertToNoDocument(n.version).setHasCommittedMutations()}function td(e,t,n){var r;e instanceof sd?function(e,t,n){if(!Jh(e.precondition,t))return;const r=e.value.clone(),i=ud(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(id(t),r).setHasLocalMutations()}(e,t,n):e instanceof od?function(e,t,n){if(!Jh(e.precondition,t))return;const r=ud(e.fieldTransforms,n,t),i=t.data;i.setAll(ad(e)),i.setAll(r),t.convertToFoundDocument(id(t),i).setHasLocalMutations()}(e,t,n):Jh(e.precondition,r=t)&&r.convertToNoDocument(fl.min())}function nd(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=jh(r.transform,e||null);null!=i&&(null==n&&(n=Wl.empty()),n.set(r.field,i))}return n||null}function rd(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=t.fieldTransforms,!!(void 0===(n=e.fieldTransforms)&&void 0===r||n&&r&&ll(n,r,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&(r=t.transform,(n=e.transform)instanceof Bh&&r instanceof Bh||n instanceof $h&&r instanceof $h?ll(n.elements,r.elements,Ll):n instanceof Zh&&r instanceof Zh?Ll(n.N,r.N):n instanceof qh&&r instanceof qh);var n,r}(e,t))))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask));var n,r}function id(e){return e.isFoundDocument()?e.version:fl.min()}class sd extends Xh{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class od extends Xh{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function ad(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function cd(e,t,n){const r=new Map;Gu(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,Vh(o,a,n[i]))}return r}function ud(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Uh(e,s,t))}return r}class ld extends Xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class hd extends Xh{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class dd{constructor(e){this.count=e}}var fd,pd;function gd(e){switch(e){default:return Zu();case Ku.CANCELLED:case Ku.UNKNOWN:case Ku.DEADLINE_EXCEEDED:case Ku.RESOURCE_EXHAUSTED:case Ku.INTERNAL:case Ku.UNAVAILABLE:case Ku.UNAUTHENTICATED:return!1;case Ku.INVALID_ARGUMENT:case Ku.NOT_FOUND:case Ku.ALREADY_EXISTS:case Ku.PERMISSION_DENIED:case Ku.FAILED_PRECONDITION:case Ku.ABORTED:case Ku.OUT_OF_RANGE:case Ku.UNIMPLEMENTED:case Ku.DATA_LOSS:return!0}}function md(e){if(void 0===e)return zu("GRPC error has no .code"),Ku.UNKNOWN;switch(e){case fd.OK:return Ku.OK;case fd.CANCELLED:return Ku.CANCELLED;case fd.UNKNOWN:return Ku.UNKNOWN;case fd.DEADLINE_EXCEEDED:return Ku.DEADLINE_EXCEEDED;case fd.RESOURCE_EXHAUSTED:return Ku.RESOURCE_EXHAUSTED;case fd.INTERNAL:return Ku.INTERNAL;case fd.UNAVAILABLE:return Ku.UNAVAILABLE;case fd.UNAUTHENTICATED:return Ku.UNAUTHENTICATED;case fd.INVALID_ARGUMENT:return Ku.INVALID_ARGUMENT;case fd.NOT_FOUND:return Ku.NOT_FOUND;case fd.ALREADY_EXISTS:return Ku.ALREADY_EXISTS;case fd.PERMISSION_DENIED:return Ku.PERMISSION_DENIED;case fd.FAILED_PRECONDITION:return Ku.FAILED_PRECONDITION;case fd.ABORTED:return Ku.ABORTED;case fd.OUT_OF_RANGE:return Ku.OUT_OF_RANGE;case fd.UNIMPLEMENTED:return Ku.UNIMPLEMENTED;case fd.DATA_LOSS:return Ku.DATA_LOSS;default:return Zu()}}(pd=fd||(fd={}))[pd.OK=0]="OK",pd[pd.CANCELLED=1]="CANCELLED",pd[pd.UNKNOWN=2]="UNKNOWN",pd[pd.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pd[pd.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pd[pd.NOT_FOUND=5]="NOT_FOUND",pd[pd.ALREADY_EXISTS=6]="ALREADY_EXISTS",pd[pd.PERMISSION_DENIED=7]="PERMISSION_DENIED",pd[pd.UNAUTHENTICATED=16]="UNAUTHENTICATED",pd[pd.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pd[pd.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pd[pd.ABORTED=10]="ABORTED",pd[pd.OUT_OF_RANGE=11]="OUT_OF_RANGE",pd[pd.UNIMPLEMENTED=12]="UNIMPLEMENTED",pd[pd.INTERNAL=13]="INTERNAL",pd[pd.UNAVAILABLE=14]="UNAVAILABLE",pd[pd.DATA_LOSS=15]="DATA_LOSS";class yd{constructor(e,t){this.comparator=e,this.root=t||vd.EMPTY}insert(e,t){return new yd(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,vd.BLACK,null,null))}remove(e){return new yd(this.comparator,this.root.remove(e,this.comparator).copy(null,null,vd.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _d(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _d(this.root,e,this.comparator,!1)}getReverseIterator(){return new _d(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _d(this.root,e,this.comparator,!0)}}class _d{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class vd{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:vd.RED,this.left=null!=r?r:vd.EMPTY,this.right=null!=i?i:vd.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new vd(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return vd.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return vd.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,vd.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,vd.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Zu();const e=this.left.check();if(e!==this.right.check())throw Zu();return e+(this.isRed()?0:1)}}vd.EMPTY=null,vd.RED=!0,vd.BLACK=!1,vd.EMPTY=new class{constructor(){this.size=0}get key(){throw Zu()}get value(){throw Zu()}get color(){throw Zu()}get left(){throw Zu()}get right(){throw Zu()}copy(e,t,n,r,i){return this}insert(e,t,n){return new vd(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wd{constructor(e){this.comparator=e,this.data=new yd(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new bd(this.data.getIterator())}getIteratorFrom(e){return new bd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof wd)||this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wd(this.comparator);return t.data=e,t}}class bd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const Id=new yd(Pl.comparator);function Td(){return Id}const Cd=new yd(Pl.comparator);function Ed(){return Cd}const Sd=new yd(Pl.comparator);function kd(){return Sd}const Ad=new wd(Pl.comparator);function xd(...e){let t=Ad;for(const n of e)t=t.add(n);return t}const Rd=new wd(ul);function Nd(){return Rd}class Od{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,Pd.createSynthesizedTargetChangeForCurrentChange(e,t)),new Od(fl.min(),n,Nd(),Td(),xd())}}class Pd{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new Pd(Il.EMPTY_BYTE_STRING,t,xd(),xd(),xd())}}class Dd{constructor(e,t,n,r){this.$=e,this.removedTargetIds=t,this.key=n,this.F=r}}class Ld{constructor(e,t){this.targetId=e,this.O=t}}class Md{constructor(e,t,n=Il.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Fd{constructor(){this.M=0,this.L=jd(),this.B=Il.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=xd(),t=xd(),n=xd();return this.L.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Zu()}}),new Pd(this.B,this.U,e,t,n)}H(){this.q=!1,this.L=jd()}J(e,t){this.q=!0,this.L=this.L.insert(e,t)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class Ud{constructor(e){this.et=e,this.nt=new Map,this.st=Td(),this.it=Vd(),this.rt=new wd(ul)}ot(e){for(const t of e.$)e.F&&e.F.isFoundDocument()?this.at(t,e.F):this.ct(t,e.key,e.F);for(const t of e.removedTargetIds)this.ct(t,e.key,e.F)}ut(e){this.forEachTarget(e,t=>{const n=this.ht(t);switch(e.state){case 0:this.lt(t)&&n.W(e.resumeToken);break;case 1:n.Z(),n.K||n.H(),n.W(e.resumeToken);break;case 2:n.Z(),n.K||this.removeTarget(t);break;case 3:this.lt(t)&&(n.tt(),n.W(e.resumeToken));break;case 4:this.lt(t)&&(this.ft(t),n.W(e.resumeToken));break;default:Zu()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.nt.forEach((e,n)=>{this.lt(n)&&t(n)})}dt(e){const t=e.targetId,n=e.O.count,r=this.wt(t);if(r){const e=r.target;if(th(e))if(0===n){const n=new Pl(e.path);this.ct(t,n,Yl.newNoDocument(n,fl.min()))}else Gu(1===n);else this._t(t)!==n&&(this.ft(t),this.rt=this.rt.add(t))}}gt(e){const t=new Map;this.nt.forEach((n,r)=>{const i=this.wt(r);if(i){if(n.current&&th(i.target)){const t=new Pl(i.target.path);null!==this.st.get(t)||this.yt(r,t)||this.ct(r,t,Yl.newNoDocument(t,e))}n.j&&(t.set(r,n.G()),n.H())}});let n=xd();this.it.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.wt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new Od(e,t,this.rt,this.st,n);return this.st=Td(),this.it=Vd(),this.rt=new wd(ul),r}at(e,t){if(!this.lt(e))return;const n=this.yt(e,t.key)?2:0;this.ht(e).J(t.key,n),this.st=this.st.insert(t.key,t),this.it=this.it.insert(t.key,this.Tt(t.key).add(e))}ct(e,t,n){if(!this.lt(e))return;const r=this.ht(e);this.yt(e,t)?r.J(t,1):r.Y(t),this.it=this.it.insert(t,this.Tt(t).delete(e)),n&&(this.st=this.st.insert(t,n))}removeTarget(e){this.nt.delete(e)}_t(e){const t=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let t=this.nt.get(e);return t||(t=new Fd,this.nt.set(e,t)),t}Tt(e){let t=this.it.get(e);return t||(t=new wd(ul),this.it=this.it.insert(e,t)),t}lt(e){const t=null!==this.wt(e);return t||Bu("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.nt.get(e);return t&&t.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new Fd),this.et.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}yt(e,t){return this.et.getRemoteKeysForTarget(e).has(t)}}function Vd(){return new yd(Pl.comparator)}function jd(){return new yd(Pl.comparator)}const qd={asc:"ASCENDING",desc:"DESCENDING"},Bd={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class zd{constructor(e,t){this.databaseId=e,this.C=t}}function $d(e,t){return e.C?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Hd(e,t){return e.C?t.toBase64():t.toUint8Array()}function Zd(e,t){return $d(e,t.toTimestamp())}function Gd(e){return Gu(!!e),fl.fromTimestamp(function(e){const t=Cl(e);return new dl(t.seconds,t.nanos)}(e))}function Wd(e,t){return(n=e,new _l(["projects",n.projectId,"databases",n.database])).child("documents").child(t).canonicalString();var n}function Kd(e){const t=_l.fromString(e);return Gu(wf(t)),t}function Yd(e,t){return Wd(e.databaseId,t.path)}function Qd(e,t){const n=Kd(t);if(n.get(1)!==e.databaseId.projectId)throw new Yu(Ku.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Yu(Ku.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Pl(tf(n))}function Jd(e,t){return Wd(e.databaseId,t)}function Xd(e){const t=Kd(e);return 4===t.length?_l.emptyPath():tf(t)}function ef(e){return new _l(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function tf(e){return Gu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function nf(e,t,n){return{name:Yd(e,t),fields:n.value.mapValue.fields}}function rf(e,t,n){const r=Qd(e,t.name),i=Gd(t.updateTime),s=new Wl({mapValue:{fields:t.fields}}),o=Yl.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function sf(e,t){let n;if(t instanceof sd)n={update:nf(e,t.key,t.value)};else if(t instanceof ld)n={delete:Yd(e,t.key)};else if(t instanceof od)n={update:nf(e,t.key,t.data),updateMask:vf(t.fieldMask)};else{if(!(t instanceof hd))return Zu();n={verify:Yd(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof qh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Bh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $h)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Zh)return{fieldPath:t.field.canonicalString(),increment:n.N};throw Zu()}(0,e))),t.precondition.isNone||(n.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:Zd(e,r.updateTime)}:void 0!==r.exists?{exists:r.exists}:Zu()),n;var r}function of(e,t){const n=t.currentDocument?void 0!==(i=t.currentDocument).updateTime?Qh.updateTime(Gd(i.updateTime)):void 0!==i.exists?Qh.exists(i.exists):Qh.none():Qh.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(Gu("REQUEST_TIME"===t.setToServerValue),n=new qh):"appendMissingElements"in t?n=new Bh(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new $h(t.removeAllFromArray.values||[]):"increment"in t?n=new Zh(e,t.increment):Zu();const r=wl.fromServerFormat(t.fieldPath);return new Kh(r,n)}(e,t)):[];var i;if(t.update){const i=Qd(e,t.update.name),s=new Wl({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=new bl((t.updateMask.fieldPaths||[]).map(e=>wl.fromServerFormat(e)));return new od(i,s,e,n,r)}return new sd(i,s,n,r)}if(t.delete){const r=Qd(e,t.delete);return new ld(r,n)}if(t.verify){const r=Qd(e,t.verify);return new hd(r,n)}return Zu()}function af(e,t){return{documents:[Jd(e,t.path)]}}function cf(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Jd(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Jd(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Hl(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NAN"}};if($l(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Hl(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NOT_NAN"}};if($l(e.value))return{unaryFilter:{field:gf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gf(e.field),op:pf(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>{return{field:gf((t=e).field),direction:ff(t.dir)};var t})}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=(a=t.limit,e.C||Rl(a)?a:{value:a});var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=hf(t.startAt)),t.endAt&&(n.structuredQuery.endAt=hf(t.endAt)),n}function uf(e){let t=Xd(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Gu(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=lf(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>{return new fh(mf((t=e).field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction));var t}));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,Rl(t)?null:t}(n.limit));let c=null;n.startAt&&(c=df(n.startAt));let u=null;return n.endAt&&(u=df(n.endAt)),_h(t,i,o,s,a,"F",c,u)}function lf(e){return e?void 0!==e.unaryFilter?[_f(e)]:void 0!==e.fieldFilter?[yf(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>lf(e)).reduce((e,t)=>e.concat(t)):Zu():[]}function hf(e){return{before:e.before,values:e.position}}function df(e){return new hh(e.values||[],!!e.before)}function ff(e){return qd[e]}function pf(e){return Bd[e]}function gf(e){return{fieldPath:e.canonicalString()}}function mf(e){return wl.fromServerFormat(e.fieldPath)}function yf(e){return nh.create(mf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Zu()}}(e.fieldFilter.op),e.fieldFilter.value)}function _f(e){switch(e.unaryFilter.op){case"IS_NAN":const t=mf(e.unaryFilter.field);return nh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=mf(e.unaryFilter.field);return nh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=mf(e.unaryFilter.field);return nh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=mf(e.unaryFilter.field);return nh.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Zu()}}function vf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function wf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function bf(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Tf(t)),t=If(e.get(n),t);return Tf(t)}function If(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Tf(e){return e+"\x01\x01"}function Cf(e){const t=e.length;if(Gu(t>=2),2===t)return Gu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),_l.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Zu(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Zu()}s=t+2}return new _l(r)}class Ef{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class Sf{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}Sf.store="owner",Sf.key="owner";class kf{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}kf.store="mutationQueues",kf.keyPath="userId";class Af{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}Af.store="mutations",Af.keyPath="batchId",Af.userMutationsIndex="userMutationsIndex",Af.userMutationsKeyPath=["userId","batchId"];class xf{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,bf(t)]}static key(e,t,n){return[e,bf(t),n]}}xf.store="documentMutations",xf.PLACEHOLDER=new xf;class Rf{constructor(e,t){this.path=e,this.readTime=t}}class Nf{constructor(e,t){this.path=e,this.version=t}}class Of{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}Of.store="remoteDocuments",Of.readTimeIndex="readTimeIndex",Of.readTimeIndexPath="readTime",Of.collectionReadTimeIndex="collectionReadTimeIndex",Of.collectionReadTimeIndexPath=["parentPath","readTime"];class Pf{constructor(e){this.byteSize=e}}Pf.store="remoteDocumentGlobal",Pf.key="remoteDocumentGlobalKey";class Df{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}Df.store="targets",Df.keyPath="targetId",Df.queryTargetsIndexName="queryTargetsIndex",Df.queryTargetsKeyPath=["canonicalId","targetId"];class Lf{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}Lf.store="targetDocuments",Lf.keyPath=["targetId","path"],Lf.documentTargetsIndex="documentTargetsIndex",Lf.documentTargetsKeyPath=["path","targetId"];class Mf{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}Mf.key="targetGlobalKey",Mf.store="targetGlobal";class Ff{constructor(e,t){this.collectionId=e,this.parent=t}}Ff.store="collectionParents",Ff.keyPath=["collectionId","parent"];class Uf{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}Uf.store="clientMetadata",Uf.keyPath="clientId";class Vf{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}Vf.store="bundles",Vf.keyPath="bundleId";class jf{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}jf.store="namedQueries",jf.keyPath="name";const qf=[kf.store,Af.store,xf.store,Of.store,Df.store,Sf.store,Mf.store,Lf.store,Uf.store,Pf.store,Ff.store,Vf.store,jf.store],Bf="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zf{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class $f{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Zu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new $f((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof $f?t:$f.resolve(t)}catch(t){return $f.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):$f.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):$f.reject(t)}static resolve(e){return new $f((t,n)=>{t(e)})}static reject(e){return new $f((t,n)=>{n(e)})}static waitFor(e){return new $f((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=$f.resolve(!1);for(const n of e)t=t.next(e=>e?$f.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Hf{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.It=new Qu,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{t.error?this.It.reject(new Wf(e,t.error)):this.It.resolve()},this.transaction.onerror=t=>{const n=Xf(t.target.error);this.It.reject(new Wf(e,n))}}static open(e,t,n,r){try{return new Hf(t,e.transaction(r,n))}catch(i){throw new Wf(t,i)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(Bu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new Yf(t)}}class Zf{constructor(e,t,n){this.name=e,this.version=t,this.Rt=n,12.2===Zf.Pt((0,Li.z$)())&&zu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Bu("SimpleDb","Removing database:",e),Qf(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,Li.hl)())return!1;if(Zf.vt())return!0;const e=(0,Li.z$)(),t=Zf.Pt(e),n=0<t&&t<10,r=Zf.Vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,t){return e.store(t)}static Pt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static Vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}Ct(e){var t=this;return(0,Oi.Z)(function*(){return t.db||(Bu("SimpleDb","Opening database:",t.name),t.db=yield new Promise((n,r)=>{const i=indexedDB.open(t.name,t.version);i.onsuccess=e=>{n(e.target.result)},i.onblocked=()=>{r(new Wf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=t=>{const n=t.target.error;r("VersionError"===n.name?new Yu(Ku.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===n.name?new Yu(Ku.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n):new Wf(e,n))},i.onupgradeneeded=e=>{Bu("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',e.oldVersion),t.Rt.Nt(e.target.result,i.transaction,e.oldVersion,t.version).next(()=>{Bu("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.kt&&(t.db.onversionchange=e=>t.kt(e)),t.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,n,r){var i=this;return(0,Oi.Z)(function*(){const s="readonly"===t;let o=0;for(;;){++o;try{i.db=yield i.Ct(e);const t=Hf.open(i.db,e,s?"readonly":"readwrite",n),o=r(t).catch(e=>(t.abort(e),$f.reject(e))).toPromise();return o.catch(()=>{}),yield t.At,o}catch(a){const e="FirebaseError"!==a.name&&o<3;if(Bu("SimpleDb","Transaction failed with error:",a.message,"Retrying:",e),i.close(),!e)return Promise.reject(a)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Gf{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Qf(this.$t.delete())}}class Wf extends Yu{constructor(e,t){super(Ku.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kf(e){return"IndexedDbTransactionError"===e.name}class Yf{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(Bu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Bu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Qf(n)}add(e){return Bu("SimpleDb","ADD",this.store.name,e,e),Qf(this.store.add(e))}get(e){return Qf(this.store.get(e)).next(t=>(void 0===t&&(t=null),Bu("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Bu("SimpleDb","DELETE",this.store.name,e),Qf(this.store.delete(e))}count(){return Bu("SimpleDb","COUNT",this.store.name),Qf(this.store.count())}Bt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Ut(n,(e,t)=>{r.push(t)}).next(()=>r)}qt(e,t){Bu("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Kt=!1;const r=this.cursor(n);return this.Ut(r,(e,t,n)=>n.delete())}jt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Ut(r,t)}Qt(e){const t=this.cursor({});return new $f((n,r)=>{t.onerror=e=>{const t=Xf(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Ut(e,t){const n=[];return new $f((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Gf(i),o=t(i.primaryKey,i.value,s);if(o instanceof $f){const e=o.catch(e=>(s.done(),$f.reject(e)));n.push(e)}s.isDone?r():null===s.Mt?i.continue():i.continue(s.Mt)}}).next(()=>$f.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Kt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Qf(e){return new $f((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Xf(e.target.error);n(t)}})}let Jf=!1;function Xf(e){const t=Zf.Pt((0,Li.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Yu("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jf||(Jf=!0,setTimeout(()=>{throw e},0)),e}}return e}class ep extends zf{constructor(e,t){super(),this.Wt=e,this.currentSequenceNumber=t}}function tp(e,t){const n=Wu(e);return Zf.Dt(n.Wt,t)}class np{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&ed(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&td(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&td(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(fl.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),xd())}isEqual(e){return this.batchId===e.batchId&&ll(this.mutations,e.mutations,(e,t)=>rd(e,t))&&ll(this.baseMutations,e.baseMutations,(e,t)=>rd(e,t))}}class rp{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Gu(e.mutations.length===n.length);let r=kd();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new rp(e,t,n,r)}}class ip{constructor(e,t,n,r,i=fl.min(),s=fl.min(),o=Il.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new ip(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new ip(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ip(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class sp{constructor(e){this.Gt=e}}function op(e,t){if(t.document)return rf(e.Gt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=Pl.fromSegments(t.noDocument.path),n=hp(t.noDocument.readTime),r=Yl.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=Pl.fromSegments(t.unknownDocument.path),n=hp(t.unknownDocument.version);return Yl.newUnknownDocument(e,n)}return Zu()}function ap(e,t,n){const r=cp(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n={name:Yd(s=e.Gt,(o=t).key),fields:o.data.value.mapValue.fields,updateTime:$d(s,o.version.toTimestamp())};return new Of(null,null,n,t.hasCommittedMutations,r,i)}var s,o;if(t.isNoDocument()){const e=t.key.path.toArray(),n=lp(t.version),s=t.hasCommittedMutations;return new Of(null,new Rf(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=lp(t.version);return new Of(new Nf(e,n),null,null,!0,r,i)}return Zu()}function cp(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function up(e){const t=new dl(e[0],e[1]);return fl.fromTimestamp(t)}function lp(e){const t=e.toTimestamp();return new Ef(t.seconds,t.nanoseconds)}function hp(e){const t=new dl(e.seconds,e.nanoseconds);return fl.fromTimestamp(t)}function dp(e,t){const n=(t.baseMutations||[]).map(t=>of(e.Gt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>of(e.Gt,t)),i=dl.fromMillis(t.localWriteTimeMs);return new np(t.batchId,i,n,r)}function fp(e){const t=hp(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?hp(e.lastLimboFreeSnapshotVersion):fl.min();let r;var i;return void 0!==e.query.documents?(Gu(1===(i=e.query).documents.length),r=Sh(vh(Xd(i.documents[0])))):r=Sh(uf(e.query)),new ip(r,e.targetId,0,e.lastListenSequenceNumber,t,n,Il.fromBase64String(e.resumeToken))}function pp(e,t){const n=lp(t.snapshotVersion),r=lp(t.lastLimboFreeSnapshotVersion);let i;i=th(t.target)?af(e.Gt,t.target):cf(e.Gt,t.target);const s=t.resumeToken.toBase64();return new Df(t.targetId,Xl(t.target),n,s,t.sequenceNumber,r,i)}function gp(e){const t=uf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kh(t,t.limit,"L"):t}class mp{getBundleMetadata(e,t){return yp(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:hp(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return yp(e).put({bundleId:(n=t).id,createTime:lp(Gd(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return _p(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:gp(t.bundledQuery),readTime:hp(t.readTime)};var t})}saveNamedQuery(e,t){return _p(e).put({name:(n=t).name,readTime:lp(Gd(n.readTime)),bundledQuery:n.bundledQuery});var n}}function yp(e){return tp(e,Vf.store)}function _p(e){return tp(e,jf.store)}class vp{constructor(){this.zt=new wp}addToCollectionParentIndex(e,t){return this.zt.add(t),$f.resolve()}getCollectionParents(e,t){return $f.resolve(this.zt.getEntries(t))}}class wp{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wd(_l.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new wd(_l.comparator)).toArray()}}class bp{constructor(){this.Ht=new wp}addToCollectionParentIndex(e,t){if(!this.Ht.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.Ht.add(t)});const i={collectionId:n,parent:bf(r)};return Ip(e).put(i)}return $f.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[hl(t),""],!1,!0);return Ip(e).Bt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Cf(r.parent))}return n})}}function Ip(e){return tp(e,Ff.store)}const Tp={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Cp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Cp(e,Cp.DEFAULT_COLLECTION_PERCENTILE,Cp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Ep(e,t,n){const r=e.store(Af.store),i=e.store(xf.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.jt({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{Gu(1===a)}));const u=[];for(const l of n.mutations){const e=xf.key(t,l.key.path,n.batchId);s.push(i.delete(e)),u.push(l.key)}return $f.waitFor(s).next(()=>u)}function Sp(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Zu();t=e.noDocument}return JSON.stringify(t).length}Cp.DEFAULT_COLLECTION_PERCENTILE=10,Cp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Cp.DEFAULT=new Cp(41943040,Cp.DEFAULT_COLLECTION_PERCENTILE,Cp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Cp.DISABLED=new Cp(-1,0,0);class kp{constructor(e,t,n,r){this.userId=e,this.k=t,this.Jt=n,this.referenceDelegate=r,this.Yt={}}static Xt(e,t,n,r){Gu(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new kp(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xp(e).jt({index:Af.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Rp(e),s=xp(e);return s.add({}).next(o=>{Gu("number"==typeof o);const a=new np(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>sf(e.Gt,t)),i=n.mutations.map(t=>sf(e.Gt,t));return new Af(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.k,this.userId,a),u=[];let l=new wd((e,t)=>ul(e.canonicalString(),t.canonicalString()));for(const e of r){const t=xf.key(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,xf.PLACEHOLDER))}return l.forEach(t=>{u.push(this.Jt.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Yt[o]=a.keys()}),$f.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return xp(e).get(t).next(e=>e?(Gu(e.userId===this.userId),dp(this.k,e)):null)}Zt(e,t){return this.Yt[t]?$f.resolve(this.Yt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Yt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return xp(e).jt({index:Af.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(Gu(t.batchId>=n),i=dp(this.k,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return xp(e).jt({index:Af.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xp(e).Bt(Af.userMutationsIndex,t).next(e=>e.map(e=>dp(this.k,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=xf.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Rp(e).jt({range:r},(n,r,s)=>{const[o,a,c]=n,u=Cf(a);if(o===this.userId&&t.path.isEqual(u))return xp(e).get(c).next(e=>{if(!e)throw Zu();Gu(e.userId===this.userId),i.push(dp(this.k,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wd(ul);const r=[];return t.forEach(t=>{const i=xf.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Rp(e).jt({range:s},(e,r,i)=>{const[s,o,a]=e,c=Cf(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),$f.waitFor(r).next(()=>this.te(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=xf.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new wd(ul);return Rp(e).jt({range:s},(e,t,i)=>{const[s,a,c]=e,u=Cf(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.te(e,o))}te(e,t){const n=[],r=[];return t.forEach(t=>{r.push(xp(e).get(t).next(e=>{if(null===e)throw Zu();Gu(e.userId===this.userId),n.push(dp(this.k,e))}))}),$f.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return Ep(e.Wt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ee(t.batchId)}),$f.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return $f.resolve();const n=IDBKeyRange.lowerBound(xf.prefixForUser(this.userId)),r=[];return Rp(e).jt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Cf(e[1]);r.push(t)}else n.done()}).next(()=>{Gu(0===r.length)})})}containsKey(e,t){return Ap(e,this.userId,t)}ne(e){return Np(e).get(this.userId).next(e=>e||new kf(this.userId,-1,""))}}function Ap(e,t,n){const r=xf.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Rp(e).jt({range:s,Kt:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function xp(e){return tp(e,Af.store)}function Rp(e){return tp(e,xf.store)}function Np(e){return tp(e,kf.store)}class Op{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new Op(0)}static re(){return new Op(-1)}}class Pp{constructor(e,t){this.referenceDelegate=e,this.k=t}allocateTargetId(e){return this.oe(e).next(t=>{const n=new Op(t.highestTargetId);return t.highestTargetId=n.next(),this.ae(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(e=>fl.fromTimestamp(new dl(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.oe(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.ae(e,r)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.oe(e).next(n=>(n.targetCount+=1,this.ue(t,n),this.ae(e,n))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Dp(e).delete(t.targetId)).next(()=>this.oe(e)).next(t=>(Gu(t.targetCount>0),t.targetCount-=1,this.ae(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Dp(e).jt((s,o)=>{const a=fp(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>$f.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Dp(e).jt((e,n)=>{const r=fp(n);t(r)})}oe(e){return Lp(e).get(Mf.key).next(e=>(Gu(null!==e),e))}ae(e,t){return Lp(e).put(Mf.key,t)}ce(e,t){return Dp(e).put(pp(this.k,t))}ue(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.oe(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Xl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Dp(e).jt({range:r,index:Df.queryTargetsIndexName},(e,n,r)=>{const s=fp(n);eh(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Mp(e);return t.forEach(t=>{const s=bf(t.path);r.push(i.put(new Lf(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),$f.waitFor(r)}removeMatchingKeys(e,t,n){const r=Mp(e);return $f.forEach(t,t=>{const i=bf(t.path);return $f.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Mp(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Mp(e);let i=xd();return r.jt({range:n,Kt:!0},(e,t,n)=>{const r=Cf(e[1]),s=new Pl(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=bf(t.path),r=IDBKeyRange.bound([n],[hl(n)],!1,!0);let i=0;return Mp(e).jt({index:Lf.documentTargetsIndex,Kt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Et(e,t){return Dp(e).get(t).next(e=>e?fp(e):null)}}function Dp(e){return tp(e,Df.store)}function Lp(e){return tp(e,Mf.store)}function Mp(e){return tp(e,Lf.store)}function Fp(e){return Up.apply(this,arguments)}function Up(){return(Up=(0,Oi.Z)(function*(e){if(e.code!==Ku.FAILED_PRECONDITION||e.message!==Bf)throw e;Bu("LocalStore","Unexpectedly lost primary lease")})).apply(this,arguments)}function Vp([e,t],[n,r]){const i=ul(e,n);return 0===i?ul(t,r):i}class jp{constructor(e){this.he=e,this.buffer=new wd(Vp),this.le=0}fe(){return++this.le}de(e){const t=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Vp(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class qp{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var t=this;const n=this.we?3e5:6e4;Bu("LruGarbageCollector",`Garbage collection scheduled in ${n}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(0,Oi.Z)(function*(){t._e=null,t.we=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(n){Kf(n)?Bu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):yield Fp(n)}yield t.me(e)}))}}class Bp{constructor(e,t){this.ge=e,this.params=t}calculateTargetCount(e,t){return this.ge.ye(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return $f.resolve(ol.I);const n=new jp(t);return this.ge.forEachTarget(e,e=>n.de(e.sequenceNumber)).next(()=>this.ge.pe(e,e=>n.de(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.ge.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.ge.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Bu("LruGarbageCollector","Garbage collection skipped; disabled"),$f.resolve(Tp)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Bu("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Tp):this.Te(e,t))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,t){let n,r,i,s,o,a,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Bu("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),qu()<=Mi.in.DEBUG&&Bu("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(o-s)+`ms\n\tRemoved ${i} targets in `+(a-o)+`ms\n\tRemoved ${e} documents in `+(c-a)+`ms\nTotal Duration: ${c-u}ms`),$f.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class zp{constructor(e,t){this.db=e,this.garbageCollector=new Bp(this,t)}ye(e){const t=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Ee(e){let t=0;return this.pe(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pe(e,t){return this.Ie(e,(e,n)=>t(n))}addReference(e,t,n){return $p(e,n)}removeReference(e,t,n){return $p(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return $p(e,t)}Ae(e,t){return function(e,t){let n=!1;return Np(e).Qt(r=>Ap(e,r,t).next(e=>(e&&(n=!0),$f.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ie(e,(s,o)=>{if(o<=t){const t=this.Ae(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),Mp(e).delete([0,bf(s.path)])))});r.push(t)}}).next(()=>$f.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return $p(e,t)}Ie(e,t){const n=Mp(e);let r,i=ol.I;return n.jt({index:Lf.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==ol.I&&t(new Pl(Cf(r)),i),i=o,r=s):i=ol.I}).next(()=>{i!==ol.I&&t(new Pl(Cf(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $p(e,t){return Mp(e).put((n=e.currentSequenceNumber,new Lf(0,bf(t.path),n)));var n}class Hp{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){gl(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return ml(this.inner)}}class Zp{constructor(){this.changes=new Hp(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:fl.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:Yl.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?$f.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Gp{constructor(e,t){this.k=e,this.Jt=t}addEntry(e,t,n){return Yp(e).put(Qp(t),n)}removeEntry(e,t){const n=Yp(e),r=Qp(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Re(e,n)))}getEntry(e,t){return Yp(e).get(Qp(t)).next(e=>this.Pe(t,e))}be(e,t){return Yp(e).get(Qp(t)).next(e=>({document:this.Pe(t,e),size:Sp(e)}))}getEntries(e,t){let n=Td();return this.ve(e,t,(e,t)=>{const r=this.Pe(e,t);n=n.insert(e,r)}).next(()=>n)}Ve(e,t){let n=Td(),r=new yd(Pl.comparator);return this.ve(e,t,(e,t)=>{const i=this.Pe(e,t);n=n.insert(e,i),r=r.insert(e,Sp(t))}).next(()=>({documents:n,Se:r}))}ve(e,t,n){if(t.isEmpty())return $f.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Yp(e).jt({range:r},(e,t,r)=>{const o=Pl.fromSegments(e);for(;s&&Pl.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Lt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=Td();const i=t.path.length+1,s={};if(n.isEqual(fl.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=cp(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=Of.collectionReadTimeIndex}return Yp(e).jt(s,(e,n,s)=>{if(e.length!==i)return;const o=op(this.k,n);t.path.isPrefixOf(o.key.path)?Nh(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new Wp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Kp(e).get(Pf.key).next(e=>(Gu(!!e),e))}Re(e,t){return Kp(e).put(Pf.key,t)}Pe(e,t){if(t){const e=op(this.k,t);if(!e.isNoDocument()||!e.version.isEqual(fl.min()))return e}return Yl.newInvalidDocument(e)}}class Wp extends Zp{constructor(e,t){super(),this.De=e,this.trackRemovals=t,this.Ce=new Hp(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new wd((e,t)=>ul(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.Ce.get(i);if(s.document.isValidDocument()){const a=ap(this.De.k,s.document,this.getReadTime(i));r=r.add(i.path.popLast()),n+=Sp(a)-o,t.push(this.De.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=ap(this.De.k,Yl.newNoDocument(i,fl.min()),this.getReadTime(i));t.push(this.De.addEntry(e,i,n))}else t.push(this.De.removeEntry(e,i))}),r.forEach(n=>{t.push(this.De.Jt.addToCollectionParentIndex(e,n))}),t.push(this.De.updateMetadata(e,n)),$f.waitFor(t)}getFromCache(e,t){return this.De.be(e,t).next(e=>(this.Ce.set(t,e.size),e.document))}getAllFromCache(e,t){return this.De.Ve(e,t).next(({documents:e,Se:t})=>(t.forEach((e,t)=>{this.Ce.set(e,t)}),e))}}function Kp(e){return tp(e,Pf.store)}function Yp(e){return tp(e,Of.store)}function Qp(e){return e.path.toArray()}class Jp{constructor(e){this.k=e}Nt(e,t,n,r){Gu(n<r&&n>=0&&r<=11);const i=new Hf("createOrUpgrade",t);var s;n<1&&r>=1&&(e.createObjectStore(Sf.store),(s=e).createObjectStore(kf.store,{keyPath:kf.keyPath}),s.createObjectStore(Af.store,{keyPath:Af.keyPath,autoIncrement:!0}).createIndex(Af.userMutationsIndex,Af.userMutationsKeyPath,{unique:!0}),s.createObjectStore(xf.store),Xp(e),function(e){e.createObjectStore(Of.store)}(e));let o=$f.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(Lf.store),e.deleteObjectStore(Df.store),e.deleteObjectStore(Mf.store)}(e),Xp(e)),o=o.next(()=>function(e){const t=e.store(Mf.store),n=new Mf(0,0,fl.min().toTimestamp(),0);return t.put(Mf.key,n)}(i))),n<4&&r>=4&&(0!==n&&(o=o.next(()=>function(e,t){return t.store(Af.store).Bt().next(n=>{e.deleteObjectStore(Af.store),e.createObjectStore(Af.store,{keyPath:Af.keyPath,autoIncrement:!0}).createIndex(Af.userMutationsIndex,Af.userMutationsKeyPath,{unique:!0});const r=t.store(Af.store),i=n.map(e=>r.put(e));return $f.waitFor(i)})}(e,i))),o=o.next(()=>{!function(e){e.createObjectStore(Uf.store,{keyPath:Uf.keyPath})}(e)})),n<5&&r>=5&&(o=o.next(()=>this.Ne(i))),n<6&&r>=6&&(o=o.next(()=>(function(e){e.createObjectStore(Pf.store)}(e),this.ke(i)))),n<7&&r>=7&&(o=o.next(()=>this.xe(i))),n<8&&r>=8&&(o=o.next(()=>this.$e(e,i))),n<9&&r>=9&&(o=o.next(()=>{(function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})(e),function(e){const t=e.objectStore(Of.store);t.createIndex(Of.readTimeIndex,Of.readTimeIndexPath,{unique:!1}),t.createIndex(Of.collectionReadTimeIndex,Of.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(o=o.next(()=>this.Fe(i))),n<11&&r>=11&&(o=o.next(()=>{(function(e){e.createObjectStore(Vf.store,{keyPath:Vf.keyPath})})(e),function(e){e.createObjectStore(jf.store,{keyPath:jf.keyPath})}(e)})),o}ke(e){let t=0;return e.store(Of.store).jt((e,n)=>{t+=Sp(n)}).next(()=>{const n=new Pf(t);return e.store(Pf.store).put(Pf.key,n)})}Ne(e){const t=e.store(kf.store),n=e.store(Af.store);return t.Bt().next(t=>$f.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Bt(Af.userMutationsIndex,r).next(n=>$f.forEach(n,n=>{Gu(n.userId===t.userId);const r=dp(this.k,n);return Ep(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(Lf.store),n=e.store(Of.store);return e.store(Mf.store).get(Mf.key).next(e=>{const r=[];return n.jt((n,i)=>{const s=new _l(n),o=[0,bf(s)];r.push(t.get(o).next(n=>n?$f.resolve():t.put(new Lf(0,bf(s),e.highestListenSequenceNumber))))}).next(()=>$f.waitFor(r))})}$e(e,t){e.createObjectStore(Ff.store,{keyPath:Ff.keyPath});const n=t.store(Ff.store),r=new wp,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:bf(r)})}};return t.store(Of.store).jt({Kt:!0},(e,t)=>{const n=new _l(e);return i(n.popLast())}).next(()=>t.store(xf.store).jt({Kt:!0},([e,t,n],r)=>{const s=Cf(t);return i(s.popLast())}))}Fe(e){const t=e.store(Df.store);return t.jt((e,n)=>{const r=fp(n),i=pp(this.k,r);return t.put(i)})}}function Xp(e){e.createObjectStore(Lf.store,{keyPath:Lf.keyPath}).createIndex(Lf.documentTargetsIndex,Lf.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(Df.store,{keyPath:Df.keyPath}).createIndex(Df.queryTargetsIndexName,Df.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(Mf.store)}const eg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class tg{constructor(e,t,n,r,i,s,o,a,c,u){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Me=c,this.Le=u,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=e=>Promise.resolve(),!tg.bt())throw new Yu(Ku.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zp(this,r),this.Ge=t+"main",this.k=new sp(a),this.ze=new Zf(this.Ge,11,new Jp(this.k)),this.He=new Pp(this.referenceDelegate,this.k),this.Jt=new bp,this.Je=new Gp(this.k,this.Jt),this.Ye=new mp,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===u&&zu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Yu(Ku.FAILED_PRECONDITION,eg);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new ol(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var t=this;return this.We=function(){var n=(0,Oi.Z)(function*(n){if(t.started)return e(n)});return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var t=(0,Oi.Z)(function*(t){null===t.newVersion&&(yield e())});return function(e){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,Oi.Z)(function*(){t.started&&(yield t.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rg(e).put(new Uf(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(t=>this.isPrimary&&!t?this.an(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Kf(e))return Bu("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Bu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return ng(e).get(Sf.key).next(e=>$f.resolve(this.un(e)))}hn(e){return rg(e).delete(this.clientId)}ln(){var e=this;return(0,Oi.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",t=>{const n=tp(t,Uf.store);return n.Bt().next(t=>{const r=e.dn(t,18e5),i=t.filter(e=>-1===r.indexOf(e));return $f.forEach(i,e=>n.delete(e.clientId)).next(()=>i)})}).catch(()=>[]);if(e.Xe)for(const n of t)e.Xe.removeItem(e.wn(n.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?$f.resolve(!0):ng(e).get(Sf.key).next(t=>{if(null!==t&&this.fn(t.leaseTimestampMs,5e3)&&!this._n(t.ownerId)){if(this.un(t)&&this.networkEnabled)return!0;if(!this.un(t)){if(!t.allowTabSynchronization)throw new Yu(Ku.FAILED_PRECONDITION,eg);return!1}}return!(!this.networkEnabled||!this.inForeground)||rg(e).Bt().next(e=>void 0===this.dn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&Bu("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}shutdown(){var e=this;return(0,Oi.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[Sf.store,Uf.store],t=>{const n=new ep(t,ol.I);return e.an(n).next(()=>e.hn(n))}),e.ze.close(),e.pn()})()}dn(e,t){return e.filter(e=>this.fn(e.updateTimeMs,t)&&!this._n(e.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>rg(e).Bt().next(e=>this.dn(e,18e5).map(e=>e.clientId)))}get started(){return this.Ue}getMutationQueue(e){return kp.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,t,n){let r;return Bu("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===t?"readonly":"readwrite",qf,i=>(r=new ep(i,this.Be?this.Be.next():ol.I),"readwrite-primary"===t?this.rn(r).next(e=>!!e||this.on(r)).next(t=>{if(!t)throw zu(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Yu(Ku.FAILED_PRECONDITION,Bf);return n(r)}).next(e=>this.cn(r).next(()=>e)):this.En(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}En(e){return ng(e).get(Sf.key).next(e=>{if(null!==e&&this.fn(e.leaseTimestampMs,5e3)&&!this._n(e.ownerId)&&!this.un(e)&&!(this.Le||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Yu(Ku.FAILED_PRECONDITION,eg)})}cn(e){const t=new Sf(this.clientId,this.allowTabSynchronization,Date.now());return ng(e).put(Sf.key,t)}static bt(){return Zf.bt()}an(e){const t=ng(e);return t.get(Sf.key).next(e=>this.un(e)?(Bu("IndexedDbPersistence","Releasing primary lease."),t.delete(Sf.key)):$f.resolve())}fn(e,t){const n=Date.now();return!(e<n-t||e>n&&(zu(`Detected an update time that is in the future: ${e} > ${n}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,Li.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var t;try{const n=null!==(null===(t=this.Xe)||void 0===t?void 0:t.getItem(this.wn(e)));return Bu("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return zu("IndexedDbPersistence","Failed to get zombied client id.",n),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){zu("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ng(e){return tp(e,Sf.store)}function rg(e){return tp(e,Uf.store)}function ig(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class sg{constructor(e,t){this.progress=e,this.In=t}}class og{constructor(e,t,n){this.Je=e,this.An=t,this.Jt=n}Rn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Pn(e,t,n))}Pn(e,t,n){return this.Je.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}vn(e,t){return this.Je.getEntries(e,t).next(t=>this.Vn(e,t).next(()=>t))}Vn(e,t){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return Pl.isDocumentKey((r=t).path)&&null===r.collectionGroup&&0===r.filters.length?this.Sn(e,t.path):Ch(t)?this.Dn(e,t,n):this.Cn(e,t,n);var r}Sn(e,t){return this.Rn(e,new Pl(t)).next(e=>{let t=Ed();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Dn(e,t,n){const r=t.collectionGroup;let i=Ed();return this.Jt.getCollectionParents(e,r).next(s=>$f.forEach(s,s=>{const o=(a=t,c=s.child(r),new yh(c,null,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt));var a,c;return this.Cn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Cn(e,t,n){let r,i;return this.Je.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.An.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Nn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=Yl.newInvalidDocument(n),r=r.insert(n,i)),td(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{Nh(t,n)||(r=r.remove(e))}),r))}Nn(e,t,n){let r=xd();for(const s of t)for(const e of s.mutations)e instanceof od&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.Je.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class ag{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.kn=n,this.xn=r}static $n(e,t){let n=xd(),r=xd();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new ag(e,t.fromCache,n,r)}}class cg{Fn(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return 0===(i=t).filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())||n.isEqual(fl.min())?this.Mn(e,t):this.On.vn(e,r).next(i=>{const s=this.Ln(t,i);return(wh(t)||bh(t))&&this.Bn(t.limitType,s,r,n)?this.Mn(e,t):(qu()<=Mi.in.DEBUG&&Bu("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Rh(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))});var i}Ln(e,t){let n=new wd(Oh(e));return t.forEach((t,r)=>{Nh(e,r)&&(n=n.add(r))}),n}Bn(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Mn(e,t){return qu()<=Mi.in.DEBUG&&Bu("QueryEngine","Using full collection scan to execute query:",Rh(t)),this.On.getDocumentsMatchingQuery(e,t,fl.min())}}class ug{constructor(e,t,n,r){this.persistence=e,this.Un=t,this.k=r,this.qn=new yd(ul),this.Kn=new Hp(e=>Xl(e),eh),this.jn=fl.min(),this.An=e.getMutationQueue(n),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new og(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qn))}}function lg(e,t,n,r){return new ug(e,t,n,r)}function hg(e,t){return dg.apply(this,arguments)}function dg(){return(dg=(0,Oi.Z)(function*(e,t){const n=Wu(e);let r=n.An,i=n.Wn;const s=yield n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.An.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new og(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=xd();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.vn(e,o).next(e=>({Gn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.An=r,n.Wn=i,n.Un.Fn(n.Wn),s})).apply(this,arguments)}function fg(e,t){const n=Wu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=$f.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Gu(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.An.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.An.performConsistencyCheck(e)).next(()=>n.Wn.vn(e,r))})}function pg(e){const t=Wu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.He.getLastRemoteSnapshotVersion(e))}function gg(e,t){const n=Wu(e),r=t.snapshotVersion;let i=n.qn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.qn;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.He.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.He.addMatchingKeys(e,t.addedDocuments,s)));const c=t.resumeToken;if(c.approximateByteSize()>0){const d=a.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,d),u=a,h=t,Gu((l=d).resumeToken.approximateByteSize()>0),(0===u.resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||h.addedDocuments.size+h.modifiedDocuments.size+h.removedDocuments.size>0)&&o.push(n.He.updateTargetData(e,d))}var u,l,h});let a=Td();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(mg(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(fl.min())){const t=n.He.getLastRemoteSnapshotVersion(e).next(t=>n.He.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return $f.waitFor(o).next(()=>s.apply(e)).next(()=>n.Wn.Vn(e,a)).next(()=>a)}).then(e=>(n.qn=i,e))}function mg(e,t,n,r,i){let s=xd();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=Td();return n.forEach((n,o)=>{const a=e.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(fl.min())?(t.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,c),s=s.insert(n,o)):Bu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function yg(e,t){const n=Wu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.An.getNextMutationBatchAfterBatchId(e,t)))}function _g(e,t){const n=Wu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.He.getTargetData(e,t).next(i=>i?(r=i,$f.resolve(r)):n.He.allocateTargetId(e).next(i=>(r=new ip(t,i,0,e.currentSequenceNumber),n.He.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.qn.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.qn=n.qn.insert(e.targetId,e),n.Kn.set(t,e.targetId)),e})}function vg(e,t,n){return wg.apply(this,arguments)}function wg(){return(wg=(0,Oi.Z)(function*(e,t,n){const r=Wu(e),i=r.qn.get(t),s=n?"readwrite":"readwrite-primary";try{n||(yield r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(o){if(!Kf(o))throw o;Bu("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.qn=r.qn.remove(t),r.Kn.delete(i.target)})).apply(this,arguments)}function bg(e,t,n){const r=Wu(e);let i=fl.min(),s=xd();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Wu(e),i=r.Kn.get(n);return void 0!==i?$f.resolve(r.qn.get(i)):r.He.getTargetData(t,n)}(r,e,Sh(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.He.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Un.getDocumentsMatchingQuery(e,t,n?i:fl.min(),n?s:xd())).next(e=>({documents:e,zn:s})))}function Ig(e,t){const n=Wu(e),r=Wu(n.He),i=n.qn.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Et(e,t).next(e=>e?e.target:null))}function Tg(e){const t=Wu(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Wu(e);let i=Td(),s=cp(n);const o=Yp(t),a=IDBKeyRange.lowerBound(s,!0);return o.jt({index:Of.readTimeIndex,range:a},(e,t)=>{const n=op(r.k,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({In:i,readTime:up(s)}))}(t.Qn,e,t.jn)).then(({In:e,readTime:n})=>(t.jn=n,e))}function Cg(){return(Cg=(0,Oi.Z)(function*(e){const t=Wu(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Yp(e);let n=fl.min();return t.jt({index:Of.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=up(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.jn=e})})).apply(this,arguments)}function Eg(){return(Eg=(0,Oi.Z)(function*(e,t,n,r){const i=Wu(e);let s=xd(),o=Td(),a=kd();for(const h of n){const e=t.Hn(h.metadata.name);h.document&&(s=s.add(e)),o=o.insert(e,t.Jn(h)),a=a.insert(e,t.Yn(h.metadata.readTime))}const c=i.Qn.newChangeBuffer({trackRemovals:!0}),u=yield _g(i,(l=r,Sh(vh(_l.fromString(`__bundle__/docs/${l}`)))));var l;return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>mg(e,c,o,fl.min(),a).next(t=>(c.apply(e),t)).next(t=>i.He.removeMatchingKeysForTargetId(e,u.targetId).next(()=>i.He.addMatchingKeys(e,s,u.targetId)).next(()=>i.Wn.Vn(e,t)).next(()=>t)))})).apply(this,arguments)}function Sg(e,t){return kg.apply(this,arguments)}function kg(){return(kg=(0,Oi.Z)(function*(e,t,n=xd()){const r=yield _g(e,Sh(gp(t.bundledQuery))),i=Wu(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Gd(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Ye.saveNamedQuery(e,t);const o=r.withResumeToken(Il.EMPTY_BYTE_STRING,s);return i.qn=i.qn.insert(o.targetId,o),i.He.updateTargetData(e,o).next(()=>i.He.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.He.addMatchingKeys(e,n,r.targetId)).next(()=>i.Ye.saveNamedQuery(e,t))})})).apply(this,arguments)}class Ag{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,t){return $f.resolve(this.Xn.get(t))}saveBundleMetadata(e,t){var n;return this.Xn.set(t.id,{id:(n=t).id,version:n.version,createTime:Gd(n.createTime)}),$f.resolve()}getNamedQuery(e,t){return $f.resolve(this.Zn.get(t))}saveNamedQuery(e,t){return this.Zn.set(t.name,{name:(n=t).name,query:gp(n.bundledQuery),readTime:Gd(n.readTime)}),$f.resolve();var n}}class xg{constructor(){this.ts=new wd(Rg.es),this.ns=new wd(Rg.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,t){const n=new Rg(e,t);this.ts=this.ts.add(n),this.ns=this.ns.add(n)}rs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.os(new Rg(e,t))}cs(e,t){e.forEach(e=>this.removeReference(e,t))}us(e){const t=new Pl(new _l([])),n=new Rg(t,e),r=new Rg(t,e+1),i=[];return this.ns.forEachInRange([n,r],e=>{this.os(e),i.push(e.key)}),i}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const t=new Pl(new _l([])),n=new Rg(t,e),r=new Rg(t,e+1);let i=xd();return this.ns.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new Rg(e,0),n=this.ts.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Rg{constructor(e,t){this.key=e,this.fs=t}static es(e,t){return Pl.comparator(e.key,t.key)||ul(e.fs,t.fs)}static ss(e,t){return ul(e.fs,t.fs)||Pl.comparator(e.key,t.key)}}class Ng{constructor(e,t){this.Jt=e,this.referenceDelegate=t,this.An=[],this.ds=1,this.ws=new wd(Rg.es)}checkEmpty(e){return $f.resolve(0===this.An.length)}addMutationBatch(e,t,n,r){const i=this.ds;this.ds++;const s=new np(i,t,n,r);this.An.push(s);for(const o of r)this.ws=this.ws.add(new Rg(o.key,i)),this.Jt.addToCollectionParentIndex(e,o.key.path.popLast());return $f.resolve(s)}lookupMutationBatch(e,t){return $f.resolve(this._s(t))}getNextMutationBatchAfterBatchId(e,t){const n=this.gs(t+1),r=n<0?0:n;return $f.resolve(this.An.length>r?this.An[r]:null)}getHighestUnacknowledgedBatchId(){return $f.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return $f.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Rg(t,0),r=new Rg(t,Number.POSITIVE_INFINITY),i=[];return this.ws.forEachInRange([n,r],e=>{const t=this._s(e.fs);i.push(t)}),$f.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wd(ul);return t.forEach(e=>{const t=new Rg(e,0),r=new Rg(e,Number.POSITIVE_INFINITY);this.ws.forEachInRange([t,r],e=>{n=n.add(e.fs)})}),$f.resolve(this.ys(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;Pl.isDocumentKey(i)||(i=i.child(""));const s=new Rg(new Pl(i),0);let o=new wd(ul);return this.ws.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.fs)),!0)},s),$f.resolve(this.ys(o))}ys(e){const t=[];return e.forEach(e=>{const n=this._s(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Gu(0===this.ps(t.batchId,"removed")),this.An.shift();let n=this.ws;return $f.forEach(t.mutations,r=>{const i=new Rg(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ws=n})}ee(e){}containsKey(e,t){const n=new Rg(t,0),r=this.ws.firstAfterOrEqual(n);return $f.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return $f.resolve()}ps(e,t){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const t=this.gs(e);return t<0||t>=this.An.length?null:this.An[t]}}class Og{constructor(e,t){this.Jt=e,this.Ts=t,this.docs=new yd(Pl.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.Ts(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Jt.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return $f.resolve(n?n.document.clone():Yl.newInvalidDocument(t))}getEntries(e,t){let n=Td();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():Yl.newInvalidDocument(e))}),$f.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=Td();const i=new Pl(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||Nh(t,i)&&(r=r.insert(i.key,i.clone()))}return $f.resolve(r)}Es(e,t){return $f.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Pg(this)}getSize(e){return $f.resolve(this.size)}}class Pg extends Zp{constructor(e){super(),this.De=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.De.addEntry(e,r.document,this.getReadTime(n))):this.De.removeEntry(n)}),$f.waitFor(t)}getFromCache(e,t){return this.De.getEntry(e,t)}getAllFromCache(e,t){return this.De.getEntries(e,t)}}class Dg{constructor(e){this.persistence=e,this.Is=new Hp(e=>Xl(e),eh),this.lastRemoteSnapshotVersion=fl.min(),this.highestTargetId=0,this.As=0,this.Rs=new xg,this.targetCount=0,this.Ps=Op.ie()}forEachTarget(e,t){return this.Is.forEach((e,n)=>t(n)),$f.resolve()}getLastRemoteSnapshotVersion(e){return $f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $f.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),$f.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.As&&(this.As=t),$f.resolve()}ce(e){this.Is.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ps=new Op(t),this.highestTargetId=t),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,$f.resolve()}updateTargetData(e,t){return this.ce(t),$f.resolve()}removeTargetData(e,t){return this.Is.delete(t.target),this.Rs.us(t.targetId),this.targetCount-=1,$f.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Is.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Is.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),$f.waitFor(i).next(()=>r)}getTargetCount(e){return $f.resolve(this.targetCount)}getTargetData(e,t){const n=this.Is.get(t)||null;return $f.resolve(n)}addMatchingKeys(e,t,n){return this.Rs.rs(t,n),$f.resolve()}removeMatchingKeys(e,t,n){this.Rs.cs(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),$f.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Rs.us(t),$f.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Rs.ls(t);return $f.resolve(n)}containsKey(e,t){return $f.resolve(this.Rs.containsKey(t))}}class Lg{constructor(e,t){this.bs={},this.Be=new ol(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new Dg(this),this.Jt=new vp,this.Je=new Og(this.Jt,e=>this.referenceDelegate.vs(e)),this.k=new sp(t),this.Ye=new Ag(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new Ng(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,t,n){Bu("MemoryPersistence","Starting transaction:",e);const r=new Mg(this.Be.next());return this.referenceDelegate.Vs(),n(r).next(e=>this.referenceDelegate.Ss(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ds(e,t){return $f.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class Mg extends zf{constructor(e){super(),this.currentSequenceNumber=e}}class Fg{constructor(e){this.persistence=e,this.Cs=new xg,this.Ns=null}static ks(e){return new Fg(e)}get xs(){if(this.Ns)return this.Ns;throw Zu()}addReference(e,t,n){return this.Cs.addReference(n,t),this.xs.delete(n.toString()),$f.resolve()}removeReference(e,t,n){return this.Cs.removeReference(n,t),this.xs.add(n.toString()),$f.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),$f.resolve()}removeTarget(e,t){this.Cs.us(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Vs(){this.Ns=new Set}Ss(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $f.forEach(this.xs,n=>{const r=Pl.fromPath(n);return this.$s(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Ns=null,t.apply(e)))}updateLimboDocument(e,t){return this.$s(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}vs(e){return 0}$s(e,t){return $f.or([()=>$f.resolve(this.Cs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ds(e,t)])}}function Ug(e,t){return`firestore_clients_${e}_${t}`}function Vg(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function jg(e,t){return`firestore_targets_${e}_${t}`}class qg{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Fs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Yu(r.error.code,r.error.message))),s?new qg(e,t,r.state,i):(zu("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bg{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Fs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Yu(n.error.code,n.error.message))),i?new Bg(e,n.state,r):(zu("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class zg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Fs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Nd();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=Ol(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new zg(e,i):(zu("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class $g{constructor(e,t){this.clientId=e,this.onlineState=t}static Fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new $g(t.clientId,t.onlineState):(zu("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Hg{constructor(){this.activeTargetIds=Nd()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zg{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Bs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new yd(ul),this.started=!1,this.js=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=Ug(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new Hg),this.Gs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Oi.Z)(function*(){const t=yield e.syncEngine.Tn();for(const r of t){if(r===e.Bs)continue;const t=e.getItem(Ug(e.persistenceKey,r));if(t){const n=zg.Fs(r,t);n&&(e.Ks=e.Ks.insert(n.clientId,n))}}e.Xs();const n=e.storage.getItem(e.Js);if(n){const t=e.Zs(n);t&&e.ti(t)}for(const r of e.js)e.qs(r);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let t=!1;return this.Ks.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,t,n){this.ni(e,t,n),this.si(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(jg(this.persistenceKey,e));if(n){const r=Bg.Fs(e,n);r&&(t=r.state)}}return this.ii.Ms(e),this.Xs(),t}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jg(this.persistenceKey,e))}updateQueryState(e,t,n){this.ri(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.si(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Bu("SharedClientState","READ",e,t),t}setItem(e,t){Bu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Bu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var t=this;const n=e;if(n.storageArea===this.storage){if(Bu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void zu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,Oi.Z)(function*(){if(t.started){if(null!==n.key)if(t.Gs.test(n.key)){if(null==n.newValue){const e=t.ci(n.key);return t.ui(e,null)}{const e=t.hi(n.key,n.newValue);if(e)return t.ui(e.clientId,e)}}else if(t.zs.test(n.key)){if(null!==n.newValue){const e=t.li(n.key,n.newValue);if(e)return t.fi(e)}}else if(t.Hs.test(n.key)){if(null!==n.newValue){const e=t.di(n.key,n.newValue);if(e)return t.wi(e)}}else if(n.key===t.Js){if(null!==n.newValue){const e=t.Zs(n.newValue);if(e)return t.ti(e)}}else if(n.key===t.Ws){const e=function(e){let t=ol.I;if(null!=e)try{const n=JSON.parse(e);Gu("number"==typeof n),t=n}catch(n){zu("SharedClientState","Failed to read sequence number from WebStorage",n)}return t}(n.newValue);e!==ol.I&&t.sequenceNumberHandler(e)}else if(n.key===t.Ys)return t.syncEngine._i()}else t.js.push(n)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,t,n){const r=new qg(this.currentUser,e,t,n),i=Vg(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}si(e){const t=Vg(this.persistenceKey,this.currentUser,e);this.removeItem(t)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,t,n){const r=jg(this.persistenceKey,e),i=new Bg(e,t,n);this.setItem(r,i.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const t=this.Gs.exec(e);return t?t[1]:null}hi(e,t){const n=this.ci(e);return zg.Fs(n,t)}li(e,t){const n=this.zs.exec(e),r=Number(n[1]);return qg.Fs(new Uu(void 0!==n[2]?n[2]:null),r,t)}di(e,t){const n=this.Hs.exec(e),r=Number(n[1]);return Bg.Fs(r,t)}Zs(e){return $g.Fs(e)}fi(e){var t=this;return(0,Oi.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.mi(e.batchId,e.state,e.error);Bu("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,t){const n=t?this.Ks.insert(e,t):this.Ks.remove(e),r=this.ei(this.Ks),i=this.ei(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.yi(s,o).then(()=>{this.Ks=n})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let t=Nd();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Gg{constructor(){this.pi=new Hg,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,t,n){this.Ti[e]=t}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new Hg,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class Wg{Ei(e){}shutdown(){}}class Kg{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){Bu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){Bu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Yg={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Qg{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class Jg extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,t,n,r,i){const s=this.Ui(e,t);Bu("RestConnection","Sending: ",s,n);const o={};return this.qi(o,r,i),this.Ki(e,s,o,n).then(e=>(Bu("RestConnection","Received: ",e),e),t=>{throw $u("RestConnection",`${e} failed with error: `,t,"url: ",s,"request:",n),t})}ji(e,t,n,r,i){return this.Bi(e,t,n,r,i)}qi(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Vu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Ui(e,t){return`${this.Mi}/v1/${t}:${Yg[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,t,n,r){return new Promise((i,s)=>{const o=new Mu;o.listenOnce(Nu.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case Ru.NO_ERROR:const t=o.getResponseJson();Bu("Connection","XHR received:",JSON.stringify(t)),i(t);break;case Ru.TIMEOUT:Bu("Connection",'RPC "'+e+'" timed out'),s(new Yu(Ku.DEADLINE_EXCEEDED,"Request time out"));break;case Ru.HTTP_ERROR:const n=o.getStatus();if(Bu("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ku).indexOf(t)>=0?t:Ku.UNKNOWN}(e.status);s(new Yu(t,e.message))}else s(new Yu(Ku.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Yu(Ku.UNAVAILABLE,"Connection failed."));break;default:Zu()}}finally{Bu("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}Qi(e,t,n){const r=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Au(),s=xu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(o.xmlHttpFactory=new Du({})),this.qi(o.initMessageHeaders,t,n),(0,Li.uI)()||(0,Li.b$)()||(0,Li.d)()||(0,Li.w1)()||(0,Li.Mn)()||(0,Li.ru)()||(o.httpHeadersOverwriteParam="$httpHeaders");const a=r.join("");Bu("Connection","Creating WebChannel: "+a,o);const c=i.createWebChannel(a,o);let u=!1,l=!1;const h=new Qg({Vi:e=>{l?Bu("Connection","Not sending because WebChannel is closed:",e):(u||(Bu("Connection","Opening WebChannel transport."),c.open(),u=!0),Bu("Connection","WebChannel sending:",e),c.send(e))},Si:()=>c.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(t){setTimeout(()=>{throw t},0)}})};return d(c,Lu.EventType.OPEN,()=>{l||Bu("Connection","WebChannel transport opened.")}),d(c,Lu.EventType.CLOSE,()=>{l||(l=!0,Bu("Connection","WebChannel transport closed"),h.Fi())}),d(c,Lu.EventType.ERROR,e=>{l||(l=!0,$u("Connection","WebChannel transport errored:",e),h.Fi(new Yu(Ku.UNAVAILABLE,"The operation could not be completed")))}),d(c,Lu.EventType.MESSAGE,e=>{var t;if(!l){const n=e.data[0];Gu(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){Bu("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=fd[e];if(void 0!==t)return md(t)}(e),n=i.message;void 0===t&&(t=Ku.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),l=!0,h.Fi(new Yu(t,n)),c.close()}else Bu("Connection","WebChannel received:",n),h.Oi(n)}}),d(s,Ou.STAT_EVENT,e=>{e.stat===Pu.PROXY?Bu("Connection","Detected buffering proxy"):e.stat===Pu.NOPROXY&&Bu("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.$i()},0),h}}function Xg(){return"undefined"!=typeof window?window:null}function em(){return"undefined"!=typeof document?document:null}function tm(e){return new zd(e,!0)}class nm{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Wi=n,this.Gi=r,this.zi=i,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const t=Math.floor(this.Hi+this.tr()),n=Math.max(0,Date.now()-this.Yi),r=Math.max(0,t-n);r>0&&Bu("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Hi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class rm{constructor(e,t,n,r,i,s,o,a){this.Oe=e,this.nr=n,this.sr=r,this.ir=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new nm(e,t)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,Oi.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,Oi.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,t){var n=this;return(0,Oi.Z)(function*(){n.yr(),n.pr(),n.ur.cancel(),n.rr++,4!==e?n.ur.reset():t&&t.code===Ku.RESOURCE_EXHAUSTED?(zu(t.toString()),zu("Using maximum backoff delay to prevent overloading the backend."),n.ur.Xi()):t&&t.code===Ku.UNAUTHENTICATED&&3!==n.state&&(n.authCredentialsProvider.invalidateToken(),n.appCheckCredentialsProvider.invalidateToken()),null!==n.stream&&(n.Tr(),n.stream.close(),n.stream=null),n.state=e,yield n.listener.Ni(t)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),t=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.rr===t&&this.Ir(e,n)},t=>{e(()=>{const e=new Yu(Ku.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ar(e)})})}Ir(e,t){const n=this.Er(this.rr);this.stream=this.Rr(e,t),this.stream.Di(()=>{n(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(e=>{n(()=>this.Ar(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}dr(){var e=this;this.state=5,this.ur.Zi((0,Oi.Z)(function*(){e.state=0,e.start()}))}Ar(e){return Bu("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return t=>{this.Oe.enqueueAndForget(()=>this.rr===e?t():(Bu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class im extends rm{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.k=i}Rr(e,t){return this.ir.Qi("Listen",e,t)}onMessage(e){this.ur.reset();const t=function(e,t){let n;if("targetChange"in t){const i="NO_CHANGE"===(r=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===r?1:"REMOVE"===r?2:"CURRENT"===r?3:"RESET"===r?4:Zu(),s=t.targetChange.targetIds||[],o=function(e,t){return e.C?(Gu(void 0===t||"string"==typeof t),Il.fromBase64String(t||"")):(Gu(void 0===t||t instanceof Uint8Array),Il.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,c=a&&function(e){const t=void 0===e.code?Ku.UNKNOWN:md(e.code);return new Yu(t,e.message||"")}(a);n=new Md(i,s,o,c||null)}else if("documentChange"in t){const r=t.documentChange,i=Qd(e,r.document.name),s=Gd(r.document.updateTime),o=new Wl({mapValue:{fields:r.document.fields}}),a=Yl.newFoundDocument(i,s,o);n=new Dd(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Qd(e,r.document),s=r.readTime?Gd(r.readTime):fl.min(),o=Yl.newNoDocument(i,s);n=new Dd([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Qd(e,r.document);n=new Dd([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Zu();{const e=t.filter,r=new dd(e.count||0);n=new Ld(e.targetId,r)}}var r;return n}(this.k,e),n=function(e){if(!("targetChange"in e))return fl.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?fl.min():t.readTime?Gd(t.readTime):fl.min()}(e);return this.listener.Pr(t,n)}br(e){const t={};t.database=ef(this.k),t.addTarget=function(e,t){let n;const r=t.target;return n=th(r)?{documents:af(e,r)}:{query:cf(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Hd(e,t.resumeToken):t.snapshotVersion.compareTo(fl.min())>0&&(n.readTime=$d(e,t.snapshotVersion.toTimestamp())),n}(this.k,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Zu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.gr(t)}vr(e){const t={};t.database=ef(this.k),t.removeTarget=e,this.gr(t)}}class sm extends rm{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.k=i,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,t){return this.ir.Qi("Write",e,t)}onMessage(e){if(Gu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const t=function(e,t){return e&&e.length>0?(Gu(void 0!==t),e.map(e=>function(e,t){let n=Gd(e.updateTime?e.updateTime:t);return n.isEqual(fl.min())&&(n=Gd(t)),new Yh(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Gd(e.commitTime);return this.listener.Cr(n,t)}return Gu(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=ef(this.k),this.gr(e)}Dr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>sf(this.k,e))};this.gr(t)}}class om extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.ir=n,this.k=r,this.$r=!1}Fr(){if(this.$r)throw new Yu(Ku.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.Bi(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ku.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yu(Ku.UNKNOWN,e.toString())})}ji(e,t,n){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.ir.ji(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ku.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Yu(Ku.UNKNOWN,e.toString())})}terminate(){this.$r=!0}}class am{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(zu(t),this.Lr=!1):Bu("OnlineStateTracker",t)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class cm{constructor(e,t,n,r,i){var s=this;this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=i,this.Hr.Ei(e=>{n.enqueueAndForget((0,Oi.Z)(function*(){var e;vm(s)&&(Bu("RemoteStore","Restarting streams for network reachability change."),yield(e=(0,Oi.Z)(function*(e){const t=Wu(e);t.Gr.add(4),yield hm(t),t.Jr.set("Unknown"),t.Gr.delete(4),yield um(t)}),function(t){return e.apply(this,arguments)})(s))}))}),this.Jr=new am(n,r)}}function um(e){return lm.apply(this,arguments)}function lm(){return(lm=(0,Oi.Z)(function*(e){if(vm(e))for(const t of e.zr)yield t(!0)})).apply(this,arguments)}function hm(e){return dm.apply(this,arguments)}function dm(){return(dm=(0,Oi.Z)(function*(e){for(const t of e.zr)yield t(!1)})).apply(this,arguments)}function fm(e,t){const n=Wu(e);n.Wr.has(t.targetId)||(n.Wr.set(t.targetId,t),_m(n)?ym(n):Zm(n).lr()&&gm(n,t))}function pm(e,t){const n=Wu(e),r=Zm(n);n.Wr.delete(t),r.lr()&&mm(n,t),0===n.Wr.size&&(r.lr()?r._r():vm(n)&&n.Jr.set("Unknown"))}function gm(e,t){e.Yr.X(t.targetId),Zm(e).br(t)}function mm(e,t){e.Yr.X(t),Zm(e).vr(t)}function ym(e){e.Yr=new Ud({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Et:t=>e.Wr.get(t)||null}),Zm(e).start(),e.Jr.Br()}function _m(e){return vm(e)&&!Zm(e).hr()&&e.Wr.size>0}function vm(e){return 0===Wu(e).Gr.size}function wm(e){e.Yr=void 0}function bm(e){return Im.apply(this,arguments)}function Im(){return(Im=(0,Oi.Z)(function*(e){e.Wr.forEach((t,n)=>{gm(e,t)})})).apply(this,arguments)}function Tm(e,t){return Cm.apply(this,arguments)}function Cm(){return(Cm=(0,Oi.Z)(function*(e,t){wm(e),_m(e)?(e.Jr.Kr(t),ym(e)):e.Jr.set("Unknown")})).apply(this,arguments)}function Em(e,t,n){return Sm.apply(this,arguments)}function Sm(){return(Sm=(0,Oi.Z)(function*(e,t,n){if(e.Jr.set("Online"),t instanceof Md&&2===t.state&&t.cause)try{yield(r=(0,Oi.Z)(function*(e,t){const n=t.cause;for(const r of t.targetIds)e.Wr.has(r)&&(yield e.remoteSyncer.rejectListen(r,n),e.Wr.delete(r),e.Yr.removeTarget(r))}),function(e,t){return r.apply(this,arguments)})(e,t)}catch(r){Bu("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),yield km(e,r)}else if(t instanceof Dd?e.Yr.ot(t):t instanceof Ld?e.Yr.dt(t):e.Yr.ut(t),!n.isEqual(fl.min()))try{const t=yield pg(e.localStore);n.compareTo(t)>=0&&(yield function(e,t){const n=e.Yr.gt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Wr.get(r);i&&e.Wr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.Wr.get(t);if(!n)return;e.Wr.set(t,n.withResumeToken(Il.EMPTY_BYTE_STRING,n.snapshotVersion)),mm(e,t);const r=new ip(n.target,t,1,n.sequenceNumber);gm(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n))}catch(r){Bu("RemoteStore","Failed to raise snapshot:",r),yield km(e,r)}var r})).apply(this,arguments)}function km(e,t,n){return Am.apply(this,arguments)}function Am(){return(Am=(0,Oi.Z)(function*(e,t,n){if(!Kf(t))throw t;e.Gr.add(1),yield hm(e),e.Jr.set("Offline"),n||(n=()=>pg(e.localStore)),e.asyncQueue.enqueueRetryable((0,Oi.Z)(function*(){Bu("RemoteStore","Retrying IndexedDB access"),yield n(),e.Gr.delete(1),yield um(e)}))})).apply(this,arguments)}function xm(e,t){return t().catch(n=>km(e,n,t))}function Rm(e){return Nm.apply(this,arguments)}function Nm(){return(Nm=(0,Oi.Z)(function*(e){const t=Wu(e),n=Gm(t);let r=t.Qr.length>0?t.Qr[t.Qr.length-1].batchId:-1;for(;Om(t);)try{const e=yield yg(t.localStore,r);if(null===e){0===t.Qr.length&&n._r();break}r=e.batchId,Pm(t,e)}catch(i){yield km(t,i)}Dm(t)&&Lm(t)})).apply(this,arguments)}function Om(e){return vm(e)&&e.Qr.length<10}function Pm(e,t){e.Qr.push(t);const n=Gm(e);n.lr()&&n.Sr&&n.Dr(t.mutations)}function Dm(e){return vm(e)&&!Gm(e).hr()&&e.Qr.length>0}function Lm(e){Gm(e).start()}function Mm(e){return Fm.apply(this,arguments)}function Fm(){return(Fm=(0,Oi.Z)(function*(e){Gm(e).kr()})).apply(this,arguments)}function Um(e){return Vm.apply(this,arguments)}function Vm(){return(Vm=(0,Oi.Z)(function*(e){const t=Gm(e);for(const n of e.Qr)t.Dr(n.mutations)})).apply(this,arguments)}function jm(e,t,n){return qm.apply(this,arguments)}function qm(){return(qm=(0,Oi.Z)(function*(e,t,n){const r=e.Qr.shift(),i=rp.from(r,t,n);yield xm(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),yield Rm(e)})).apply(this,arguments)}function Bm(e,t){return zm.apply(this,arguments)}function zm(){return(zm=(0,Oi.Z)(function*(e,t){var n;t&&Gm(e).Sr&&(yield(n=(0,Oi.Z)(function*(e,t){if(gd(n=t.code)&&n!==Ku.ABORTED){const n=e.Qr.shift();Gm(e).wr(),yield xm(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),yield Rm(e)}var n}),function(e,t){return n.apply(this,arguments)})(e,t)),Dm(e)&&Lm(e)})).apply(this,arguments)}function $m(e,t){return Hm.apply(this,arguments)}function Hm(){return(Hm=(0,Oi.Z)(function*(e,t){const n=Wu(e);t?(n.Gr.delete(2),yield um(n)):t||(n.Gr.add(2),yield hm(n),n.Jr.set("Unknown"))})).apply(this,arguments)}function Zm(e){return e.Xr||(e.Xr=function(e,t,n){const r=Wu(e);return r.Fr(),new im(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:bm.bind(null,e),Ni:Tm.bind(null,e),Pr:Em.bind(null,e)}),e.zr.push(function(){var t=(0,Oi.Z)(function*(t){t?(e.Xr.wr(),_m(e)?ym(e):e.Jr.set("Unknown")):(yield e.Xr.stop(),wm(e))});return function(e){return t.apply(this,arguments)}}())),e.Xr}function Gm(e){return e.Zr||(e.Zr=function(e,t,n){const r=Wu(e);return r.Fr(),new sm(t,r.ir,r.authCredentials,r.appCheckCredentials,r.k,n)}(e.datastore,e.asyncQueue,{Di:Mm.bind(null,e),Ni:Bm.bind(null,e),Nr:Um.bind(null,e),Cr:jm.bind(null,e)}),e.zr.push(function(){var t=(0,Oi.Z)(function*(t){t?(e.Zr.wr(),yield Rm(e)):(yield e.Zr.stop(),e.Qr.length>0&&(Bu("RemoteStore",`Stopping write stream with ${e.Qr.length} pending writes`),e.Qr=[]))});return function(e){return t.apply(this,arguments)}}())),e.Zr}class Wm{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Qu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new Wm(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Yu(Ku.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(e,t){if(zu("AsyncQueue",`${t}: ${e}`),Kf(e))return new Yu(Ku.UNAVAILABLE,`${t}: ${e}`);throw e}class Ym{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Pl.comparator(t.key,n.key):(e,t)=>Pl.comparator(e.key,t.key),this.keyedMap=Ed(),this.sortedSet=new yd(this.comparator)}static emptySet(e){return new Ym(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ym)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ym;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Qm{constructor(){this.eo=new yd(Pl.comparator)}track(e){const t=e.doc.key,n=this.eo.get(t);n?0!==e.type&&3===n.type?this.eo=this.eo.insert(t,e):3===e.type&&1!==n.type?this.eo=this.eo.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.eo=this.eo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.eo=this.eo.remove(t):1===e.type&&2===n.type?this.eo=this.eo.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.eo=this.eo.insert(t,{type:2,doc:e.doc}):Zu():this.eo=this.eo.insert(t,e)}no(){const e=[];return this.eo.inorderTraversal((t,n)=>{e.push(n)}),e}}class Jm{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Jm(e,t,Ym.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ah(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Xm{constructor(){this.so=void 0,this.listeners=[]}}class ey{constructor(){this.queries=new Hp(e=>xh(e),Ah),this.onlineState="Unknown",this.io=new Set}}function ty(e,t){return ny.apply(this,arguments)}function ny(){return(ny=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Xm),i)try{s.so=yield n.onListen(r)}catch(o){const e=Km(o,`Initialization of query '${Rh(t.query)}' failed`);return void t.onError(e)}n.queries.set(r,s),s.listeners.push(t),t.ro(n.onlineState),s.so&&t.oo(s.so)&&ay(n)})).apply(this,arguments)}function ry(e,t){return iy.apply(this,arguments)}function iy(){return(iy=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)})).apply(this,arguments)}function sy(e,t){const n=Wu(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.oo(i)&&(r=!0);e.so=i}}r&&ay(n)}function oy(e,t,n){const r=Wu(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function ay(e){e.io.forEach(e=>{e.next()})}class cy{constructor(e,t,n){this.query=e,this.ao=t,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=n||{}}oo(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Jm(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.ho(e)&&(this.ao.next(e),t=!0):this.lo(e,this.onlineState)&&(this.fo(e),t=!0),this.uo=e,t}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let t=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),t=!0),t}lo(e,t){return!e.fromCache||!(this.options.wo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=Jm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class uy{constructor(e,t){this.payload=e,this.byteLength=t}_o(){return"metadata"in this.payload}}class ly{constructor(e){this.k=e}Hn(e){return Qd(this.k,e)}Jn(e){return e.metadata.exists?rf(this.k,e.document,!1):Yl.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return Gd(e)}}class hy{constructor(e,t,n){this.mo=e,this.localStore=t,this.k=n,this.queries=[],this.documents=[],this.progress=dy(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}po(e){const t=new Map,n=new ly(this.k);for(const r of e)if(r.metadata.queries){const e=n.Hn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||xd()).add(e);t.set(n,r)}}return t}complete(){var e=this;return(0,Oi.Z)(function*(){const t=yield function(e,t,n,r){return Eg.apply(this,arguments)}(e.localStore,new ly(e.k),e.documents,e.mo.id),n=e.po(e.documents);for(const r of e.queries)yield Sg(e.localStore,r,n.get(r.name));return e.progress.taskState="Success",new sg(Object.assign({},e.progress),t)})()}}function dy(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class fy{constructor(e){this.key=e}}class py{constructor(e){this.key=e}}class gy{constructor(e,t){this.query=e,this.To=t,this.Eo=null,this.current=!1,this.Io=xd(),this.mutatedKeys=xd(),this.Ao=Oh(e),this.Ro=new Ym(this.Ao)}get Po(){return this.To}bo(e,t){const n=t?t.vo:new Qm,r=t?t.Ro:this.Ro;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=wh(this.query)&&r.size===this.query.limit?r.last():null,c=bh(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),l=Nh(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.Vo(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.Ao(l,a)>0||c&&this.Ao(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),wh(this.query)||bh(this.query))for(;s.size>this.query.limit;){const e=wh(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ro:s,vo:n,Bn:o,mutatedKeys:i}}Vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const i=e.vo.no();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Zu()}};return n(e)-n(t)}(e.type,t.type)||this.Ao(e.doc,t.doc)),this.So(n);const s=t?this.Do():[],o=0===this.Io.size&&this.current?1:0,a=o!==this.Eo;return this.Eo=o,0!==i.length||a?{snapshot:new Jm(this.query,e.Ro,r,i,e.mutatedKeys,0===o,a,!1),Co:s}:{Co:s}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new Qm,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(e=>this.To=this.To.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.To=this.To.delete(e)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=xd(),this.Ro.forEach(e=>{this.No(e.key)&&(this.Io=this.Io.add(e.key))});const t=[];return e.forEach(e=>{this.Io.has(e)||t.push(new py(e))}),this.Io.forEach(n=>{e.has(n)||t.push(new fy(n))}),t}ko(e){this.To=e.zn,this.Io=xd();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return Jm.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class my{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class yy{constructor(e){this.key=e,this.$o=!1}}class _y{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Fo={},this.Oo=new Hp(e=>xh(e),Ah),this.Mo=new Map,this.Lo=new Set,this.Bo=new yd(Pl.comparator),this.Uo=new Map,this.qo=new xg,this.Ko={},this.jo=new Map,this.Qo=Op.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function vy(e,t){return wy.apply(this,arguments)}function wy(){return(wy=(0,Oi.Z)(function*(e,t){const n=u_(e);let r,i;const s=n.Oo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const e=yield _g(n.localStore,Sh(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=yield by(n,t,r,"current"===s),n.isPrimaryClient&&fm(n.remoteStore,e)}return i})).apply(this,arguments)}function by(e,t,n,r){return Iy.apply(this,arguments)}function Iy(){return(Iy=(0,Oi.Z)(function*(e,t,n,r){e.Go=(t,n,r)=>{return(i=(0,Oi.Z)(function*(e,t,n,r){let i=t.view.bo(n);i.Bn&&(i=yield bg(e.localStore,t.query,!1).then(({documents:e})=>t.view.bo(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return jy(e,t.targetId,o.Co),o.snapshot}),function(e,t,n,r){return i.apply(this,arguments)})(e,t,n,r);var i};const i=yield bg(e.localStore,t,!0),s=new gy(t,i.zn),o=s.bo(i.documents),a=Pd.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);jy(e,n,c.Co);const u=new my(t,n,s);return e.Oo.set(t,u),e.Mo.has(n)?e.Mo.get(n).push(t):e.Mo.set(n,[t]),c.snapshot})).apply(this,arguments)}function Ty(e,t){return Cy.apply(this,arguments)}function Cy(){return(Cy=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=n.Oo.get(t),i=n.Mo.get(r.targetId);if(i.length>1)return n.Mo.set(r.targetId,i.filter(e=>!Ah(e,t))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield vg(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),pm(n.remoteStore,r.targetId),Uy(n,r.targetId)}).catch(Fp))):(Uy(n,r.targetId),yield vg(n.localStore,r.targetId,!0))})).apply(this,arguments)}function Ey(){return(Ey=(0,Oi.Z)(function*(e,t,n){const r=l_(e);try{const e=yield function(e,t){const n=Wu(e),r=dl.now(),i=t.reduce((e,t)=>e.add(t.key),xd());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Wn.vn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=nd(e,s.get(e.key));null!=t&&o.push(new od(e.key,t,Kl(t.value.mapValue),Qh.exists(!0)))}return n.An.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Ko[e.currentUser.toKey()];r||(r=new yd(ul)),r=r.insert(t,n),e.Ko[e.currentUser.toKey()]=r}(r,e.batchId,n),yield zy(r,e.changes),yield Rm(r.remoteStore)}catch(i){const e=Km(i,"Failed to persist write");n.reject(e)}})).apply(this,arguments)}function Sy(e,t){return ky.apply(this,arguments)}function ky(){return(ky=(0,Oi.Z)(function*(e,t){const n=Wu(e);try{const e=yield gg(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Uo.get(t);r&&(Gu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.$o=!0:e.modifiedDocuments.size>0?Gu(r.$o):e.removedDocuments.size>0&&(Gu(r.$o),r.$o=!1))}),yield zy(n,e,t)}catch(r){yield Fp(r)}})).apply(this,arguments)}function Ay(e,t,n){const r=Wu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Oo.forEach((n,r)=>{const i=r.view.ro(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Wu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.ro(t)&&(r=!0)}),r&&ay(n)}(r.eventManager,t),e.length&&r.Fo.Pr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function xy(e,t,n){return Ry.apply(this,arguments)}function Ry(){return(Ry=(0,Oi.Z)(function*(e,t,n){const r=Wu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Uo.get(t),s=i&&i.key;if(s){let e=new yd(Pl.comparator);e=e.insert(s,Yl.newNoDocument(s,fl.min()));const n=xd().add(s),i=new Od(fl.min(),new Map,new wd(ul),e,n);yield Sy(r,i),r.Bo=r.Bo.remove(s),r.Uo.delete(t),By(r)}else yield vg(r.localStore,t,!1).then(()=>Uy(r,t,n)).catch(Fp)})).apply(this,arguments)}function Ny(e,t){return Oy.apply(this,arguments)}function Oy(){return(Oy=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=t.batch.batchId;try{const e=yield fg(n.localStore,t);Fy(n,r,null),My(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),yield zy(n,e)}catch(i){yield Fp(i)}})).apply(this,arguments)}function Py(e,t,n){return Dy.apply(this,arguments)}function Dy(){return(Dy=(0,Oi.Z)(function*(e,t,n){const r=Wu(e);try{const e=yield function(e,t){const n=Wu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.An.lookupMutationBatch(e,t).next(t=>(Gu(null!==t),r=t.keys(),n.An.removeMutationBatch(e,t))).next(()=>n.An.performConsistencyCheck(e)).next(()=>n.Wn.vn(e,r))})}(r.localStore,t);Fy(r,t,n),My(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),yield zy(r,e)}catch(i){yield Fp(i)}})).apply(this,arguments)}function Ly(){return(Ly=(0,Oi.Z)(function*(e,t){const n=Wu(e);vm(n.remoteStore)||Bu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=yield function(e){const t=Wu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.An.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.jo.get(e)||[];r.push(t),n.jo.set(e,r)}catch(r){const e=Km(r,"Initialization of waitForPendingWrites() operation failed");t.reject(e)}})).apply(this,arguments)}function My(e,t){(e.jo.get(t)||[]).forEach(e=>{e.resolve()}),e.jo.delete(t)}function Fy(e,t,n){const r=Wu(e);let i=r.Ko[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Ko[r.currentUser.toKey()]=i}}function Uy(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Mo.get(t))e.Oo.delete(r),n&&e.Fo.zo(r,n);e.Mo.delete(t),e.isPrimaryClient&&e.qo.us(t).forEach(t=>{e.qo.containsKey(t)||Vy(e,t)})}function Vy(e,t){e.Lo.delete(t.path.canonicalString());const n=e.Bo.get(t);null!==n&&(pm(e.remoteStore,n),e.Bo=e.Bo.remove(t),e.Uo.delete(n),By(e))}function jy(e,t,n){for(const r of n)r instanceof fy?(e.qo.addReference(r.key,t),qy(e,r)):r instanceof py?(Bu("SyncEngine","Document no longer in limbo: "+r.key),e.qo.removeReference(r.key,t),e.qo.containsKey(r.key)||Vy(e,r.key)):Zu()}function qy(e,t){const n=t.key,r=n.path.canonicalString();e.Bo.get(n)||e.Lo.has(r)||(Bu("SyncEngine","New document in limbo: "+n),e.Lo.add(r),By(e))}function By(e){for(;e.Lo.size>0&&e.Bo.size<e.maxConcurrentLimboResolutions;){const t=e.Lo.values().next().value;e.Lo.delete(t);const n=new Pl(_l.fromString(t)),r=e.Qo.next();e.Uo.set(r,new yy(n)),e.Bo=e.Bo.insert(n,r),fm(e.remoteStore,new ip(Sh(vh(n.path)),r,2,ol.I))}}function zy(e,t,n){return $y.apply(this,arguments)}function $y(){return($y=(0,Oi.Z)(function*(e,t,n){const r=Wu(e),i=[],s=[],o=[];var a;r.Oo.isEmpty()||(r.Oo.forEach((e,a)=>{o.push(r.Go(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=ag.$n(a.targetId,e);s.push(t)}}))}),yield Promise.all(o),r.Fo.Pr(i),yield(a=(0,Oi.Z)(function*(e,t){const n=Wu(e);try{yield n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>$f.forEach(t,t=>$f.forEach(t.kn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>$f.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(r){if(!Kf(r))throw r;Bu("LocalStore","Failed to update sequence numbers: "+r)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.qn.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.qn=n.qn.insert(e,r)}}}),function(e,t){return a.apply(this,arguments)})(r.localStore,s))})).apply(this,arguments)}function Hy(e,t){return Zy.apply(this,arguments)}function Zy(){return(Zy=(0,Oi.Z)(function*(e,t){const n=Wu(e);if(!n.currentUser.isEqual(t)){Bu("SyncEngine","User change. New user:",t.toKey());const e=yield hg(n.localStore,t);n.currentUser=t,(r=n).jo.forEach(e=>{e.forEach(e=>{e.reject(new Yu(Ku.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),r.jo.clear(),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),yield zy(n,e.Gn)}var r})).apply(this,arguments)}function Gy(e,t){const n=Wu(e),r=n.Uo.get(t);if(r&&r.$o)return xd().add(r.key);{let e=xd();const r=n.Mo.get(t);if(!r)return e;for(const t of r){const r=n.Oo.get(t);e=e.unionWith(r.view.Po)}return e}}function Wy(e,t){return Ky.apply(this,arguments)}function Ky(){return(Ky=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=yield bg(n.localStore,t.query,!0),i=t.view.ko(r);return n.isPrimaryClient&&jy(n,t.targetId,i.Co),i})).apply(this,arguments)}function Yy(e){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,Oi.Z)(function*(e){const t=Wu(e);return Tg(t.localStore).then(e=>zy(t,e))})).apply(this,arguments)}function Jy(e,t,n,r){return Xy.apply(this,arguments)}function Xy(){return(Xy=(0,Oi.Z)(function*(e,t,n,r){const i=Wu(e),s=yield function(e,t){const n=Wu(e),r=Wu(n.An);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Zt(e,t).next(t=>t?n.Wn.vn(e,t):$f.resolve(null)))}(i.localStore,t);var o;null!==s?("pending"===n?yield Rm(i.remoteStore):"acknowledged"===n||"rejected"===n?(Fy(i,t,r||null),My(i,t),o=t,Wu(Wu(i.localStore).An).ee(o)):Zu(),yield zy(i,s)):Bu("SyncEngine","Cannot apply mutation batch with id: "+t)})).apply(this,arguments)}function e_(){return(e_=(0,Oi.Z)(function*(e,t){const n=Wu(e);if(u_(n),l_(n),!0===t&&!0!==n.Wo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=yield t_(n,e.toArray());n.Wo=!0,yield $m(n.remoteStore,!0);for(const r of t)fm(n.remoteStore,r)}else if(!1===t&&!1!==n.Wo){const e=[];let t=Promise.resolve();n.Mo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Uy(n,i),vg(n.localStore,i,!0))),pm(n.remoteStore,i)}),yield t,yield t_(n,e),function(e){const t=Wu(e);t.Uo.forEach((e,n)=>{pm(t.remoteStore,n)}),t.qo.hs(),t.Uo=new Map,t.Bo=new yd(Pl.comparator)}(n),n.Wo=!1,yield $m(n.remoteStore,!1)}})).apply(this,arguments)}function t_(e,t,n){return n_.apply(this,arguments)}function n_(){return(n_=(0,Oi.Z)(function*(e,t,n){const r=Wu(e),i=[],s=[];for(const o of t){let e;const t=r.Mo.get(o);if(t&&0!==t.length){e=yield _g(r.localStore,Sh(t[0]));for(const e of t){const t=r.Oo.get(e),n=yield Wy(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=yield Ig(r.localStore,o);e=yield _g(r.localStore,t),yield by(r,r_(t),o,!1)}i.push(e)}return r.Fo.Pr(s),i})).apply(this,arguments)}function r_(e){return _h(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function i_(e){const t=Wu(e);return Wu(Wu(t.localStore).persistence).Tn()}function s_(e,t,n,r){return o_.apply(this,arguments)}function o_(){return(o_=(0,Oi.Z)(function*(e,t,n,r){const i=Wu(e);if(i.Wo)Bu("SyncEngine","Ignoring unexpected query state notification.");else if(i.Mo.has(t))switch(n){case"current":case"not-current":{const e=yield Tg(i.localStore),r=Od.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);yield zy(i,e,r);break}case"rejected":yield vg(i.localStore,t,!0),Uy(i,t,r);break;default:Zu()}})).apply(this,arguments)}function a_(e,t,n){return c_.apply(this,arguments)}function c_(){return(c_=(0,Oi.Z)(function*(e,t,n){const r=u_(e);if(r.Wo){for(const e of t){if(r.Mo.has(e)){Bu("SyncEngine","Adding an already active target "+e);continue}const t=yield Ig(r.localStore,e),n=yield _g(r.localStore,t);yield by(r,r_(t),n.targetId,!1),fm(r.remoteStore,n)}for(const e of n)r.Mo.has(e)&&(yield vg(r.localStore,e,!1).then(()=>{pm(r.remoteStore,e),Uy(r,e)}).catch(Fp))}})).apply(this,arguments)}function u_(e){const t=Wu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Sy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gy.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=xy.bind(null,t),t.Fo.Pr=sy.bind(null,t.eventManager),t.Fo.zo=oy.bind(null,t.eventManager),t}function l_(e){const t=Wu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ny.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Py.bind(null,t),t}class h_{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Oi.Z)(function*(){t.k=tm(e.databaseInfo.databaseId),t.sharedClientState=t.Jo(e),t.persistence=t.Yo(e),yield t.persistence.start(),t.gcScheduler=t.Xo(e),t.localStore=t.Zo(e)})()}Xo(e){return null}Zo(e){return lg(this.persistence,new cg,e.initialUser,this.k)}Yo(e){return new Lg(Fg.ks,this.k)}Jo(e){return new Gg}terminate(){var e=this;return(0,Oi.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class d_ extends h_{constructor(e,t,n){super(),this.ta=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,n=this;return(0,Oi.Z)(function*(){yield t().call(n,e),yield function(e){return Cg.apply(this,arguments)}(n.localStore),yield n.ta.initialize(n,e),yield l_(n.ta.syncEngine),yield Rm(n.ta.remoteStore),yield n.persistence.sn(()=>(n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()))})()}Zo(e){return lg(this.persistence,new cg,e.initialUser,this.k)}Xo(e){return new qp(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const t=ig(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Cp.withCacheSize(this.cacheSizeBytes):Cp.DEFAULT;return new tg(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Xg(),em(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new Gg}}class f_ extends d_{constructor(e,t){super(e,t,!1),this.ta=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,n=this;return(0,Oi.Z)(function*(){yield t().call(n,e);const r=n.ta.syncEngine;n.sharedClientState instanceof Zg&&(n.sharedClientState.syncEngine={mi:Jy.bind(null,r),gi:s_.bind(null,r),yi:a_.bind(null,r),Tn:i_.bind(null,r),_i:Yy.bind(null,r)},yield n.sharedClientState.start()),yield n.persistence.sn(function(){var e=(0,Oi.Z)(function*(e){yield function(e,t){return e_.apply(this,arguments)}(n.ta.syncEngine,e),n.gcScheduler&&(e&&!n.gcScheduler.started?n.gcScheduler.start(n.localStore):e||n.gcScheduler.stop())});return function(t){return e.apply(this,arguments)}}())})()}Jo(e){const t=Xg();if(!Zg.bt(t))throw new Yu(Ku.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=ig(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zg(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class p_{initialize(e,t){var n=this;return(0,Oi.Z)(function*(){n.localStore||(n.localStore=e.localStore,n.sharedClientState=e.sharedClientState,n.datastore=n.createDatastore(t),n.remoteStore=n.createRemoteStore(t),n.eventManager=n.createEventManager(t),n.syncEngine=n.createSyncEngine(t,!e.synchronizeTabs),n.sharedClientState.onlineStateHandler=e=>Ay(n.syncEngine,e,1),n.remoteStore.remoteSyncer.handleCredentialChange=Hy.bind(null,n.syncEngine),yield $m(n.remoteStore,n.syncEngine.isPrimaryClient))})()}createEventManager(e){return new ey}createDatastore(e){const t=tm(e.databaseInfo.databaseId),n=new Jg(e.databaseInfo);return new om(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Ay(this.syncEngine,e,0),s=Kg.bt()?new Kg:new Wg,new cm(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new _y(e,t,n,r,i,s);return o&&(a.Wo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Oi.Z)(function*(e){const t=Wu(e);Bu("RemoteStore","RemoteStore shutting down."),t.Gr.add(5),yield hm(t),t.Hr.shutdown(),t.Jr.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function g_(e,t=10240){let n=0;return{read:()=>(0,Oi.Z)(function*(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}})(),cancel:()=>(0,Oi.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class m_{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class y_{constructor(e,t){this.sa=e,this.k=t,this.metadata=new Qu,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(e=>{e&&e._o()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,Oi.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,Oi.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,Oi.Z)(function*(){const t=yield e.oa();if(null===t)return null;const n=e.ia.decode(t),r=Number(n);isNaN(r)&&e.aa(`length string (${n}) is not valid number`);const i=yield e.ca(r);return new uy(JSON.parse(i),t.length+r)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,Oi.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const t=e.ua();t<0&&e.aa("Reached the end of bundle when a length string is expected.");const n=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),n})()}ca(e){var t=this;return(0,Oi.Z)(function*(){for(;t.buffer.length<e;)(yield t.ha())&&t.aa("Reached the end of bundle when more is expected.");const n=t.ia.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),n})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,Oi.Z)(function*(){const t=yield e.sa.read();if(!t.done){const n=new Uint8Array(e.buffer.length+t.value.length);n.set(e.buffer),n.set(t.value,e.buffer.length),e.buffer=n}return t.done})()}}class __{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Oi.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Yu(Ku.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const n=yield(r=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=ef(n.k)+"/documents",i={documents:t.map(e=>Yd(n.k,e))},s=yield n.ji("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Gu(!!t.found);const n=Qd(e,t.found.name),r=Gd(t.found.updateTime),i=new Wl({mapValue:{fields:t.found.fields}});return Yl.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Gu(!!t.missing),Gu(!!t.readTime);const n=Qd(e,t.missing),r=Gd(t.readTime);return Yl.newNoDocument(n,r)}(e,t):Zu()}(n.k,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Gu(!!t),a.push(t)}),a}),function(e,t){return r.apply(this,arguments)})(t.datastore,e);var r;return n.forEach(e=>t.recordVersion(e)),n})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(n){this.lastWriteError=n}this.writtenDocs.add(e.toString())}delete(e){this.write(new ld(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Oi.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var n;e.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((t,n)=>{const r=Pl.fromPath(n);e.mutations.push(new hd(r,e.precondition(r)))}),yield(n=(0,Oi.Z)(function*(e,t){const n=Wu(e),r=ef(n.k)+"/documents",i={writes:t.map(e=>sf(n.k,e))};yield n.Bi("Commit",r,i)}),function(e,t){return n.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Zu();t=fl.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Yu(Ku.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Qh.updateTime(t):Qh.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(fl.min()))throw new Yu(Ku.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Qh.updateTime(t)}return Qh.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class v_{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.la=5,this.ur=new nm(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,Oi.Z)(function*(){const t=new __(e.datastore),n=e.da(t);n&&n.then(n=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(n)}).catch(t=>{e.wa(t)}))}).catch(t=>{e.wa(t)})}))}da(e){try{const t=this.updateFunction(e);return!Rl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!gd(t)}return!1}}class w_{constructor(e,t,n,r){var i=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Uu.UNAUTHENTICATED,this.clientId=cl.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,function(){var e=(0,Oi.Z)(function*(e){Bu("FirestoreClient","Received user=",e.uid),yield i.authCredentialListener(e),i.user=e});return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(n,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,Oi.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Yu(Ku.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Qu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Oi.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(n){const e=Km(n,"Failed to shutdown persistence");t.reject(e)}})),t.promise}}function b_(e,t){return I_.apply(this,arguments)}function I_(){return(I_=(0,Oi.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress(),Bu("FirestoreClient","Initializing OfflineComponentProvider");const n=yield e.getConfiguration();yield t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(function(){var e=(0,Oi.Z)(function*(e){r.isEqual(e)||(yield hg(t.localStore,e),r=e)});return function(t){return e.apply(this,arguments)}}()),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t})).apply(this,arguments)}function T_(e,t){return C_.apply(this,arguments)}function C_(){return(C_=(0,Oi.Z)(function*(e,t){e.asyncQueue.verifyOperationInProgress();const n=yield E_(e);Bu("FirestoreClient","Initializing OnlineComponentProvider");const r=yield e.getConfiguration();yield t.initialize(n,r),e.setCredentialChangeListener(e=>{return(n=(0,Oi.Z)(function*(e,t){const n=Wu(e);n.asyncQueue.verifyOperationInProgress(),Bu("RemoteStore","RemoteStore received new credentials");const r=vm(n);n.Gr.add(3),yield hm(n),r&&n.Jr.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(t),n.Gr.delete(3),yield um(n)}),function(e,t){return n.apply(this,arguments)})(t.remoteStore,e);var n}),e.onlineComponents=t})).apply(this,arguments)}function E_(e){return S_.apply(this,arguments)}function S_(){return(S_=(0,Oi.Z)(function*(e){return e.offlineComponents||(Bu("FirestoreClient","Using default OfflineComponentProvider"),yield b_(e,new h_)),e.offlineComponents})).apply(this,arguments)}function k_(e){return A_.apply(this,arguments)}function A_(){return(A_=(0,Oi.Z)(function*(e){return e.onlineComponents||(Bu("FirestoreClient","Using default OnlineComponentProvider"),yield T_(e,new p_)),e.onlineComponents})).apply(this,arguments)}function x_(e){return E_(e).then(e=>e.persistence)}function R_(e){return E_(e).then(e=>e.localStore)}function N_(e){return k_(e).then(e=>e.remoteStore)}function O_(e){return k_(e).then(e=>e.syncEngine)}function P_(e){return D_.apply(this,arguments)}function D_(){return(D_=(0,Oi.Z)(function*(e){const t=yield k_(e),n=t.eventManager;return n.onListen=vy.bind(null,t.syncEngine),n.onUnlisten=Ty.bind(null,t.syncEngine),n})).apply(this,arguments)}function L_(e,t,n={}){const r=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return function(e,t,n,r,i){const s=new m_({next:s=>{t.enqueueAndForget(()=>ry(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Yu(Ku.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Yu(Ku.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new cy(vh(n.path),s,{includeMetadataChanges:!0,wo:!0});return ty(e,o)}(yield P_(e),e.asyncQueue,t,n,r)})),r.promise}function M_(e,t,n={}){const r=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return function(e,t,n,r,i){const s=new m_({next:n=>{t.enqueueAndForget(()=>ry(e,o)),n.fromCache&&"server"===r.source?i.reject(new Yu(Ku.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new cy(n,s,{includeMetadataChanges:!0,wo:!0});return ty(e,o)}(yield P_(e),e.asyncQueue,t,n,r)})),r.promise}class F_{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class U_{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof U_&&e.projectId===this.projectId&&e.database===this.database}}const V_=new Map;function j_(e,t,n){if(!n)throw new Yu(Ku.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function q_(e,t,n,r){if(!0===t&&!0===r)throw new Yu(Ku.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function B_(e){if(!Pl.isDocumentKey(e))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function z_(e){if(Pl.isDocumentKey(e))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function $_(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const n=(t=e).constructor?t.constructor.name:null;return n?`a custom ${n} object`:"an object"}}var t;return"function"==typeof e?"a function":Zu()}function H_(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Yu(Ku.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$_(e);throw new Yu(Ku.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Z_(e,t){if(t<=0)throw new Yu(Ku.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class G_{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Yu(Ku.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Yu(Ku.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,q_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class W_{constructor(e,t,n){this._authCredentials=t,this._appCheckCredentials=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new G_({}),this._settingsFrozen=!1,e instanceof U_?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Yu(Ku.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new U_(e.options.projectId)}(e))}get app(){if(!this._app)throw new Yu(Ku.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Yu(Ku.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new G_(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Xu;switch(e.type){case"gapi":const t=e.client;return Gu(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new rl(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Yu(Ku.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=V_.get(e);t&&(Bu("ComponentProvider","Removing Datastore"),V_.delete(e),t.terminate())}(this),Promise.resolve()}}class K_{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Q_(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new K_(this.firestore,e,this._key)}}class Y_{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Y_(this.firestore,e,this._query)}}class Q_ extends Y_{constructor(e,t,n){super(e,t,vh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new K_(this.firestore,null,new Pl(e))}withConverter(e){return new Q_(this.firestore,e,this._path)}}function J_(e,t,...n){if(e=(0,Li.m9)(e),j_("collection","path",t),e instanceof W_){const r=_l.fromString(t,...n);return z_(r),new Q_(e,null,r)}{if(!(e instanceof K_||e instanceof Q_))throw new Yu(Ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_l.fromString(t,...n));return z_(r),new Q_(e.firestore,null,r)}}function X_(e,t,...n){if(e=(0,Li.m9)(e),1===arguments.length&&(t=cl.A()),j_("doc","path",t),e instanceof W_){const r=_l.fromString(t,...n);return B_(r),new K_(e,null,new Pl(r))}{if(!(e instanceof K_||e instanceof Q_))throw new Yu(Ku.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(_l.fromString(t,...n));return B_(r),new K_(e.firestore,e instanceof Q_?e.converter:null,new Pl(r))}}function ev(e,t){return e=(0,Li.m9)(e),t=(0,Li.m9)(t),(e instanceof K_||e instanceof Q_)&&(t instanceof K_||t instanceof Q_)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function tv(e,t){return e=(0,Li.m9)(e),t=(0,Li.m9)(t),e instanceof Y_&&t instanceof Y_&&e.firestore===t.firestore&&Ah(e._query,t._query)&&e.converter===t.converter}class nv{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new nm(this,"async_queue_retry"),this.Ra=()=>{const e=em();e&&Bu("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ur.er()};const e=em();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const t=em();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const t=new Qu;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,Oi.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(t){if(!Kf(t))throw t;Bu("AsyncQueue","Operation failed with retryable error: "+t)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const t=this.ma.then(()=>(this.Ea=!0,e().catch(e=>{throw this.Ta=e,this.Ea=!1,zu("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Ea=!1,e))));return this.ma=t,t}enqueueAfterDelay(e,t,n){this.Pa(),this.Aa.indexOf(e)>-1&&(t=0);const r=Wm.createAndSchedule(this,e,t,n,e=>this.Va(e));return this.pa.push(r),r}Pa(){this.Ta&&Zu()}verifyOperationInProgress(){}Sa(){var e=this;return(0,Oi.Z)(function*(){let t;do{t=e.ma,yield t}while(t!==e.ma)})()}Da(e){for(const t of this.pa)if(t.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.pa)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const t=this.pa.indexOf(e);this.pa.splice(t,1)}}function rv(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class iv{constructor(){this._progressObserver={},this._taskCompletionResolver=new Qu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class sv extends W_{constructor(e,t,n){super(e,t,n),this.type="firestore",this._queue=new nv,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||cv(this),this._firestoreClient.terminate()}}function ov(e=(0,Pi.getApp)()){return(0,Pi._getProvider)(e,"firestore").getImmediate()}function av(e){return e._firestoreClient||cv(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cv(e){var t;const n=e._freezeSettings(),r=(i=(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",new F_(e._databaseId,i,e._persistenceKey,(s=n).host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,s.useFetchStreams));var i,s;e._firestoreClient=new w_(e._authCredentials,e._appCheckCredentials,e._queue,r)}function uv(e,t,n){const r=new Qu;return e.asyncQueue.enqueue((0,Oi.Z)(function*(){try{yield b_(e,n),yield T_(e,t),r.resolve()}catch(s){if(!("FirebaseError"===(i=s).name?i.code===Ku.FAILED_PRECONDITION||i.code===Ku.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&i instanceof DOMException)||22===i.code||20===i.code||11===i.code))throw s;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+s),r.reject(s)}var i})).then(()=>r.promise)}function lv(e){if(e._initialized||e._terminated)throw new Yu(Ku.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class hv{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Yu(Ku.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wl(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class dv{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dv(Il.fromBase64String(e))}catch(t){throw new Yu(Ku.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new dv(Il.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class fv{constructor(e){this._methodName=e}}class pv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Yu(Ku.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Yu(Ku.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ul(this._lat,e._lat)||ul(this._long,e._long)}}const gv=/^__.*__$/;class mv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new od(e,this.data,this.fieldMask,t,this.fieldTransforms):new sd(e,this.data,t,this.fieldTransforms)}}class yv{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new od(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function _v(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Zu()}}class vv{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.k=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ka(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new vv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.Ma(e),r}La(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$a({path:n,Oa:!1});return r.ka(),r}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return Vv(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(_v(this.xa)&&gv.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class wv{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.k=n||tm(e)}ja(e,t,n,r=!1){return new vv({xa:e,methodName:t,Ka:n,path:wl.emptyPath(),Oa:!1,qa:r},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function bv(e){const t=e._freezeSettings(),n=tm(e._databaseId);return new wv(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Iv(e,t,n,r,i,s={}){const o=e.ja(s.merge||s.mergeFields?2:0,t,n,i);Lv("Data must be an object, but it was:",o,r);const a=Pv(r,o);let c,u;if(s.merge)c=new bl(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Mv(t,r,n);if(!o.contains(i))throw new Yu(Ku.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);jv(e,i)||e.push(i)}c=new bl(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new mv(new Wl(a),c,u)}class Tv extends fv{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Tv}}function Cv(e,t,n){return new vv({xa:3,Ka:t.settings.Ka,methodName:e._methodName,Oa:n},t.databaseId,t.k,t.ignoreUndefinedProperties)}class Ev extends fv{_toFieldTransform(e){return new Kh(e.path,new qh)}isEqual(e){return e instanceof Ev}}class Sv extends fv{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Cv(this,e,!0),n=this.Qa.map(e=>Ov(e,t)),r=new Bh(n);return new Kh(e.path,r)}isEqual(e){return this===e}}class kv extends fv{constructor(e,t){super(e),this.Qa=t}_toFieldTransform(e){const t=Cv(this,e,!0),n=this.Qa.map(e=>Ov(e,t)),r=new $h(n);return new Kh(e.path,r)}isEqual(e){return this===e}}class Av extends fv{constructor(e,t){super(e),this.Wa=t}_toFieldTransform(e){const t=new Zh(e.k,Mh(e.k,this.Wa));return new Kh(e.path,t)}isEqual(e){return this===e}}function xv(e,t,n,r){const i=e.ja(1,t,n);Lv("Data must be an object, but it was:",i,r);const s=[],o=Wl.empty();gl(r,(e,r)=>{const a=Uv(t,e,n);r=(0,Li.m9)(r);const c=i.La(a);if(r instanceof Tv)s.push(a);else{const e=Ov(r,c);null!=e&&(s.push(a),o.set(a,e))}});const a=new bl(s);return new yv(o,a,i.fieldTransforms)}function Rv(e,t,n,r,i,s){const o=e.ja(1,t,n),a=[Mv(t,r,n)],c=[i];if(s.length%2!=0)throw new Yu(Ku.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(Mv(t,s[d])),c.push(s[d+1]);const u=[],l=Wl.empty();for(let d=a.length-1;d>=0;--d)if(!jv(u,a[d])){const e=a[d];let t=c[d];t=(0,Li.m9)(t);const n=o.La(e);if(t instanceof Tv)u.push(e);else{const r=Ov(t,n);null!=r&&(u.push(e),l.set(e,r))}}const h=new bl(u);return new yv(l,h,o.fieldTransforms)}function Nv(e,t,n,r=!1){return Ov(n,e.ja(r?4:3,t))}function Ov(e,t){if(Dv(e=(0,Li.m9)(e)))return Lv("Unsupported field value:",t,e),Pv(e,t);if(e instanceof fv)return function(e,t){if(!_v(t.xa))throw t.Ua(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Ua(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Oa&&4!==t.xa)throw t.Ua("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Ov(i,t.Ba(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,Li.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Mh(t.k,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=dl.fromDate(e);return{timestampValue:$d(t.k,n)}}if(e instanceof dl){const n=new dl(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:$d(t.k,n)}}if(e instanceof pv)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof dv)return{bytesValue:Hd(t.k,e._byteString)};if(e instanceof K_){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Ua(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Wd(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Ua(`Unsupported field value: ${$_(e)}`)}(e,t)}function Pv(e,t){const n={};return ml(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gl(e,(e,r)=>{const i=Ov(r,t.Fa(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Dv(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof dl||e instanceof pv||e instanceof dv||e instanceof K_||e instanceof fv)}function Lv(e,t,n){if(!Dv(n)||"object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=$_(n);throw t.Ua("an object"===r?e+" a custom object":e+" "+r)}var r}function Mv(e,t,n){if((t=(0,Li.m9)(t))instanceof hv)return t._internalPath;if("string"==typeof t)return Uv(e,t);throw Vv("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Fv=new RegExp("[~\\*/\\[\\]]");function Uv(e,t,n){if(t.search(Fv)>=0)throw Vv(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new hv(...t.split("."))._internalPath}catch(r){throw Vv(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Vv(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Yu(Ku.INVALID_ARGUMENT,a+e+c)}function jv(e,t){return e.some(e=>e.isEqual(t))}class qv{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new K_(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Bv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(zv("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Bv extends qv{data(){return super.data()}}function zv(e,t){return"string"==typeof t?Uv(e,t):t instanceof hv?t._internalPath:t._delegate._internalPath}class $v{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Hv extends qv{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Zv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(zv("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Zv extends Hv{data(e={}){return super.data(e)}}class Gv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new $v(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Zv(this._firestore,this._userDataWriter,n.key,n,new $v(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Yu(Ku.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Zv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new $v(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Zv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new $v(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wv(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Zu()}}function Kv(e,t){return e instanceof Hv&&t instanceof Hv?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Gv&&t instanceof Gv&&e._firestore===t._firestore&&tv(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Yv(e){if(bh(e)&&0===e.explicitOrderBy.length)throw new Yu(Ku.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qv{}function Jv(e,...t){for(const n of t)e=n._apply(e);return e}class Xv extends Qv{constructor(e,t,n){super(),this.Ga=e,this.za=t,this.Ha=n,this.type="where"}_apply(e){const t=bv(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){ow(o,s);const t=[];for(const n of o)t.push(sw(r,e,n));a={arrayValue:{values:t}}}else a=sw(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||ow(o,s),a=Nv(n,"where",o,"in"===s||"not-in"===s);const c=nh.create(i,s,a);return function(e,t){if(t.V()){const n=Th(e);if(null!==n&&!n.isEqual(t.field))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=Ih(e);null!==r&&aw(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Yu(Ku.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Y_(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new yh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}class ew extends Qv{constructor(e,t){super(),this.Ga=e,this.Ja=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Yu(Ku.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Yu(Ku.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new fh(t,n);return function(e,t){if(null===Ih(e)){const n=Th(e);null!==n&&aw(0,n,t.field)}}(e,r),r}(e._query,this.Ga,this.Ja);return new Y_(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new yh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class tw extends Qv{constructor(e,t,n){super(),this.type=e,this.Ya=t,this.Xa=n}_apply(e){return new Y_(e.firestore,e.converter,kh(e._query,this.Ya,this.Xa))}}class nw extends Qv{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=iw(e,this.type,this.Za,this.tc);return new Y_(e.firestore,e.converter,(r=t,new yh((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,r,n.endAt)));var n,r}}class rw extends Qv{constructor(e,t,n){super(),this.type=e,this.Za=t,this.tc=n}_apply(e){const t=iw(e,this.type,this.Za,this.tc);return new Y_(e.firestore,e.converter,(r=t,new yh((n=e._query).path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),n.limit,n.limitType,n.startAt,r)));var n,r}}function iw(e,t,n,r){if(n[0]=(0,Li.m9)(n[0]),n[0]instanceof qv)return function(e,t,n,r,i){if(!r)throw new Yu(Ku.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of Eh(e))if(o.field.isKeyField())s.push(ql(t,r.key));else{const e=r.data.field(o.field);if(kl(e))throw new Yu(Ku.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new hh(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=bv(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Yu(Ku.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!Ch(e)&&-1!==s.indexOf("/"))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(_l.fromString(s));if(!Pl.isDocumentKey(n))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new Pl(n);a.push(ql(t,i))}else{const e=Nv(n,r,s);a.push(e)}}return new hh(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function sw(e,t,n){if("string"==typeof(n=(0,Li.m9)(n))){if(""===n)throw new Yu(Ku.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ch(t)&&-1!==n.indexOf("/"))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(_l.fromString(n));if(!Pl.isDocumentKey(r))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ql(e,new Pl(r))}if(n instanceof K_)return ql(e,n._key);throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${$_(n)}.`)}function ow(e,t){if(!Array.isArray(e)||0===e.length)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function aw(e,t,n){if(!n.isEqual(t))throw new Yu(Ku.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class cw{convertValue(e,t="none"){switch(Dl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return El(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Sl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Zu()}}convertObject(e,t){const n={};return gl(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new pv(El(e.latitude),El(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Al(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(xl(e));default:return null}}convertTimestamp(e){const t=Cl(e);return new dl(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=_l.fromString(e);Gu(wf(n));const r=new U_(n.get(1),n.get(3)),i=new Pl(n.popFirst(5));return r.isEqual(t)||zu(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function uw(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class lw extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new dv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new K_(this.firestore,null,t)}}class hw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=bv(e)}set(e,t,n){this._verifyNotCommitted();const r=dw(e,this._firestore),i=uw(r.converter,t,n),s=Iv(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Qh.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=dw(e,this._firestore);let s;return s="string"==typeof(t=(0,Li.m9)(t))||t instanceof hv?Rv(this._dataReader,"WriteBatch.update",i._key,t,n,r):xv(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Qh.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dw(e,this._firestore);return this._mutations=this._mutations.concat(new ld(t._key,Qh.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Yu(Ku.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dw(e,t){if((e=(0,Li.m9)(e)).firestore!==t)throw new Yu(Ku.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class fw extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new dv(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new K_(this.firestore,null,t)}}function pw(e,t,n){e=H_(e,K_);const r=H_(e.firestore,sv),i=uw(e.converter,t,n);return yw(r,[Iv(bv(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Qh.none())])}function gw(e,t,n,...r){e=H_(e,K_);const i=H_(e.firestore,sv),s=bv(i);let o;return o="string"==typeof(t=(0,Li.m9)(t))||t instanceof hv?Rv(s,"updateDoc",e._key,t,n,r):xv(s,"updateDoc",e._key,t),yw(i,[o.toMutation(e._key,Qh.exists(!0))])}function mw(e,...t){var n,r,i;e=(0,Li.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||rv(t[o])||(s=t[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges};if(rv(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let c,u,l;if(e instanceof K_)u=H_(e.firestore,sv),l=vh(e._key.path),c={next:n=>{t[o]&&t[o](_w(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=H_(e,Y_);u=H_(n.firestore,sv),l=n._query;const r=new fw(u);c={next:e=>{t[o]&&t[o](new Gv(u,r,n,e))},error:t[o+1],complete:t[o+2]},Yv(e._query)}return function(e,t,n,r){const i=new m_(r),s=new cy(t,i,n);return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return ty(yield P_(e),s)})),()=>{i.na(),e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return ry(yield P_(e),s)}))}}(av(u),l,a,c)}function yw(e,t){return function(e,t){const n=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return function(e,t,n){return Ey.apply(this,arguments)}(yield O_(e),t,n)})),n.promise}(av(e),t)}function _w(e,t,n){const r=n.docs.get(t._key),i=new fw(e);return new Hv(e,i,t._key,r,new $v(n.hasPendingWrites,n.fromCache),t.converter)}class vw extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=bv(e)}get(e){const t=dw(e,this._firestore),n=new lw(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Zu();const r=e[0];if(r.isFoundDocument())return new qv(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new qv(this._firestore,n,t._key,null,t.converter);throw Zu()})}set(e,t,n){const r=dw(e,this._firestore),i=uw(r.converter,t,n),s=Iv(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=dw(e,this._firestore);let s;return s="string"==typeof(t=(0,Li.m9)(t))||t instanceof hv?Rv(this._dataReader,"Transaction.update",i._key,t,n,r):xv(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=dw(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dw(e,this._firestore),n=new fw(this._firestore);return super.get(e).then(e=>new Hv(this._firestore,n,t._key,e._document,new $v(!1,!1),t.converter))}}!function(e,t=!0){Vu=Pi.SDK_VERSION,(0,Pi._registerComponent)(new Di.wA("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new sv(r,new tl(e.getProvider("auth-internal")),new sl(e.getProvider("app-check-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),(0,Pi.registerVersion)(Fu,"3.4.1",e),(0,Pi.registerVersion)(Fu,"3.4.1","esm2017")}();var ww={includeMetadataChanges:!1};function bw(e,t){return void 0===t&&(t={}),function(e){return function(e,t){return void 0===t&&(t=ww),new ke.y(function(n){return{unsubscribe:mw(e,t,{next:n.next.bind(n),error:n.error.bind(n),complete:n.complete.bind(n)})}})}(e,{includeMetadataChanges:!0}).pipe((0,Ve.U)(function(e){return e.docs}))}(e).pipe((0,Ve.U)(function(e){return e.map(function(e){return function(e,t){void 0===t&&(t={});var n=e.data();return!e.exists()||"object"!=typeof n||null===n||t.idField&&(n[t.idField]=e.id),n}(e,t)})}))}class Iw{constructor(e){return e}}const Tw="firestore",Cw=new r.OlP("angularfire2.firestore-instances");function Ew(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new Iw(r)}}const Sw={provide:class{constructor(){return(0,bi.vb)(Tw)}},deps:[[new r.FiY,Cw]]},kw={provide:Iw,useFactory:function(e,t){const n=(0,bi.JM)(Tw,e,t);return n&&new Iw(n)},deps:[[new r.FiY,Cw],Ti]};let Aw=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"fst")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[kw,Sw]}),e})();function xw(e,...t){return{ngModule:Aw,providers:[{provide:Cw,useFactory:Ew(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,[new r.FiY,vs],[new r.FiY,gs],...t]}]}}const Rw=(0,bi.u3)(bw,!0),Nw=(0,bi.u3)(J_,!0),Ow=(0,bi.u3)(ov,!0);let Pw=(()=>{class e{constructor(e,t){this.firestore=e,this._router=t}ngOnInit(){this.currentUser=localStorage.getItem("currentUser")?JSON.parse(""+localStorage.getItem("currentUser")):"";let e=Nw(this.firestore,"users_credentials");Rw(e).subscribe(e=>{this.credentials=e,this.credentials.map(e=>{e.user_id==this.currentUser.uid&&(this.currentUserCredentials=e)}),console.log({credentials:this.currentUserCredentials})})}logout(){localStorage.removeItem("currentUser"),this._router.navigate(["/login"])}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(Iw),r.Y36(ei))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-profile"]],decls:40,vars:4,consts:[[1,"profile"],["src","../../../assets/images.png","alt","",1,"photo"],[1,"name"],[1,"details"],[1,"d-flex","align-items-center","w-100"],[1,"buttons"],[1,"button","follow",3,"click"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","version","1.1","id","Capa_1","x","0px","y","0px","viewBox","0 0 384.971 384.971",0,"xml","space","preserve",2,"enable-background","new 0 0 384.971 384.971"],["id","Sign_Out"],["d","M180.455,360.91H24.061V24.061h156.394c6.641,0,12.03-5.39,12.03-12.03s-5.39-12.03-12.03-12.03H12.03    C5.39,0.001,0,5.39,0,12.031V372.94c0,6.641,5.39,12.03,12.03,12.03h168.424c6.641,0,12.03-5.39,12.03-12.03    C192.485,366.299,187.095,360.91,180.455,360.91z"],["d","M381.481,184.088l-83.009-84.2c-4.704-4.752-12.319-4.74-17.011,0c-4.704,4.74-4.704,12.439,0,17.179l62.558,63.46H96.279    c-6.641,0-12.03,5.438-12.03,12.151c0,6.713,5.39,12.151,12.03,12.151h247.74l-62.558,63.46c-4.704,4.752-4.704,12.439,0,17.179    c4.704,4.752,12.319,4.752,17.011,0l82.997-84.2C386.113,196.588,386.161,188.756,381.481,184.088z"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._UZ(1,"img",1),r.TgZ(2,"span",2),r._uU(3),r.qZA(),r.TgZ(4,"span",3),r._uU(5),r.qZA(),r.TgZ(6,"div",4),r.TgZ(7,"span",3),r._uU(8),r.qZA(),r.TgZ(9,"span",3),r._uU(10),r.qZA(),r.qZA(),r.TgZ(11,"div",5),r.TgZ(12,"div",6),r.NdJ("click",function(){return t.logout()}),r.O4$(),r.TgZ(13,"svg",7),r.TgZ(14,"g"),r.TgZ(15,"g",8),r._UZ(16,"path",9),r._UZ(17,"path",10),r.qZA(),r._UZ(18,"g"),r._UZ(19,"g"),r._UZ(20,"g"),r._UZ(21,"g"),r._UZ(22,"g"),r._UZ(23,"g"),r.qZA(),r._UZ(24,"g"),r._UZ(25,"g"),r._UZ(26,"g"),r._UZ(27,"g"),r._UZ(28,"g"),r._UZ(29,"g"),r._UZ(30,"g"),r._UZ(31,"g"),r._UZ(32,"g"),r._UZ(33,"g"),r._UZ(34,"g"),r._UZ(35,"g"),r._UZ(36,"g"),r._UZ(37,"g"),r._UZ(38,"g"),r.qZA(),r._uU(39," Sign out "),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Oqu(null==t.currentUserCredentials?null:t.currentUserCredentials.username),r.xp6(2),r.Oqu(t.currentUser.email),r.xp6(3),r.Oqu(null==t.currentUserCredentials?null:t.currentUserCredentials.address),r.xp6(2),r.Oqu(null==t.currentUserCredentials?null:t.currentUserCredentials.birth_date))},styles:['*[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none;border:none;text-decoration:none;box-sizing:border-box;-webkit-overflow-scrolling:touch;font-family:"Montserrat",sans-serif;line-height:1}body[_ngcontent-%COMP%]{background:#e7dcff;background:linear-gradient(120deg,#e7dcff 0%,rgba(255,234,203,.868785014) 59%,#f6f1ff 100%);display:flex;height:100vh;align-items:center;justify-content:center}.profile[_ngcontent-%COMP%]{margin:auto;background-color:#fff;border-radius:40px;width:480px;padding:50px;display:flex;flex-direction:column;align-items:center;justify-content:center}.profile[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:120px;height:120px;border-radius:30px;border:15px solid rgba(246,242,255,.7);-o-object-fit:cover;object-fit:cover}.profile[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-top:24px;font-size:22px;font-weight:bold}.profile[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{font-size:13px;font-weight:400;width:50%;margin-top:8px;line-height:1.3;text-align:center}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:50px}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{background-color:#ffedd2}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .follow[_ngcontent-%COMP%]{background:linear-gradient(90deg,#fa3967 0%,#fa9639 100%)}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:186px;height:54px;border-radius:30px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:500;margin-left:12px;cursor:pointer}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]:first{margin-left:0}.profile[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{height:22px;margin-right:4px}']}),e})();var Dw=n(1555);function Lw(e,t){return new ke.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=(0,me.D)(e[a]);let u=!1;n.add(c.subscribe({next:e=>{u||(u=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,(s===r||!u)&&(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let Mw=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),Fw=(()=>{class e extends Mw{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const Uw=new r.OlP("NgValueAccessor"),Vw={provide:Uw,useExisting:(0,r.Gpc)(()=>qw),multi:!0},jw=new r.OlP("CompositionEventMode");let qw=(()=>{class e extends Mw{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=s()?s().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(jw,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([Vw]),r.qOj]}),e})();function Bw(e){return null==e||0===e.length}function zw(e){return null!=e&&"number"==typeof e.length}const $w=new r.OlP("NgValidators"),Hw=new r.OlP("NgAsyncValidators"),Zw=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Gw{static min(e){return function(e){return t=>{if(Bw(t.value)||Bw(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(Bw(t.value)||Bw(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return function(e){return Bw(e.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return Bw(e.value)||Zw.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>Bw(t.value)||!zw(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return function(e){return t=>zw(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static pattern(e){return function(e){if(!e)return Ww;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(Bw(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return eb(e)}static composeAsync(e){return nb(e)}}function Ww(e){return null}function Kw(e){return null!=e}function Yw(e){const t=(0,r.QGY)(e)?(0,me.D)(e):e;return(0,r.CqO)(t),t}function Qw(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function Jw(e,t){return t.map(t=>t(e))}function Xw(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function eb(e){if(!e)return null;const t=e.filter(Kw);return 0==t.length?null:function(e){return Qw(Jw(e,t))}}function tb(e){return null!=e?eb(Xw(e)):null}function nb(e){if(!e)return null;const t=e.filter(Kw);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,Ie.k)(t))return Lw(t,null);if((0,Dw.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return Lw(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return Lw(e=1===e.length&&(0,Ie.k)(e[0])?e[0]:e,null).pipe((0,Ve.U)(e=>t(...e)))}return Lw(e,null)}(Jw(e,t).map(Yw)).pipe((0,Ve.U)(Qw))}}function rb(e){return null!=e?nb(Xw(e)):null}function ib(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function sb(e){return e._rawValidators}function ob(e){return e._rawAsyncValidators}function ab(e){return e?Array.isArray(e)?e:[e]:[]}function cb(e,t){return Array.isArray(e)?e.includes(t):e===t}function ub(e,t){const n=ab(t);return ab(e).forEach(e=>{cb(n,e)||n.push(e)}),n}function lb(e,t){return ab(t).filter(t=>!cb(e,t))}let hb=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tb(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=rb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),db=(()=>{class e extends hb{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class fb extends hb{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class pb{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}let gb=(()=>{class e extends pb{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(fb,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})(),mb=(()=>{class e extends pb{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(db,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[r.qOj]}),e})();function yb(e,t){wb(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Ib(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Ib(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function _b(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),bb(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function vb(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function wb(e,t){const n=sb(e);null!==t.validator?e.setValidators(ib(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=ob(e);null!==t.asyncValidator?e.setAsyncValidators(ib(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();vb(t._rawValidators,i),vb(t._rawAsyncValidators,i)}function bb(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=sb(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.validator);i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){const r=ob(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.asyncValidator);i.length!==r.length&&(n=!0,e.setAsyncValidators(i))}}}const r=()=>{};return vb(t._rawValidators,r),vb(t._rawAsyncValidators,r),n}function Ib(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Tb(e,t){wb(e,t)}function Cb(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Eb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Sb="VALID",kb="INVALID",Ab="PENDING",xb="DISABLED";function Rb(e){return(Db(e)?e.validators:e)||null}function Nb(e){return Array.isArray(e)?tb(e):e||null}function Ob(e,t){return(Db(t)?t.asyncValidators:e)||null}function Pb(e){return Array.isArray(e)?rb(e):e||null}function Db(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class Lb{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Nb(this._rawValidators),this._composedAsyncValidatorFn=Pb(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Sb}get invalid(){return this.status===kb}get pending(){return this.status==Ab}get disabled(){return this.status===xb}get enabled(){return this.status!==xb}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Nb(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Pb(e)}addValidators(e){this.setValidators(ub(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ub(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(lb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(lb(e,this._rawAsyncValidators))}hasValidator(e){return cb(this._rawValidators,e)}hasAsyncValidator(e){return cb(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ab,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=xb,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Sb,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sb||this.status===Ab)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?xb:Sb}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ab,this._hasOwnPendingAsyncValidator=!0;const t=Yw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t||(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length))return null;let r=e;return t.forEach(e=>{r=r instanceof Fb?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof Ub&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?xb:this.errors?kb:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ab)?Ab:this._anyControlsHaveStatus(kb)?kb:Sb}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Db(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Mb extends Lb{constructor(e=null,t,n){super(Rb(t),Ob(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Eb(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Eb(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class Fb extends Lb{constructor(e,t,n){super(Rb(t),Ob(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof Mb?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ub extends Lb{constructor(e,t,n){super(Rb(t),Ob(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof Mb?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const Vb={provide:db,useExisting:(0,r.Gpc)(()=>qb)},jb=(()=>Promise.resolve(null))();let qb=(()=>{class e extends db{constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new Fb({},tb(e),rb(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){jb.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),yb(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){jb.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),Eb(this._directives,e)})}addFormGroup(e){jb.then(()=>{const t=this._findContainer(e.path),n=new Fb({});Tb(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){jb.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){jb.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Cb(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(r.Y36($w,10),r.Y36(Hw,10))},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Vb]),r.qOj]}),e})(),Bb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),zb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const $b=new r.OlP("NgModelWithFormControlWarning"),Hb={provide:db,useExisting:(0,r.Gpc)(()=>Zb)};let Zb=(()=>{class e extends db{constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bb(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return yb(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){_b(e.control||null,e,!1),Eb(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,Cb(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&(_b(t||null,e),n instanceof Mb&&(yb(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);Tb(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return bb(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){wb(this.form,this),this._oldForm&&bb(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(r.Y36($w,10),r.Y36(Hw,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Hb]),r.qOj,r.TTD]}),e})();const Gb={provide:fb,useExisting:(0,r.Gpc)(()=>Wb)};let Wb=(()=>{class e extends fb{constructor(e,t,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=function(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===qw?n=e:function(e){return Object.getPrototypeOf(e.constructor)===Fw}(e)?r=e:i=e}),i||r||n||null}(0,i)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),function(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return function(e,t){return[...t.path,e]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(db,13),r.Y36($w,10),r.Y36(Hw,10),r.Y36(Uw,10),r.Y36($b,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([Gb]),r.qOj,r.TTD]}),e._ngModelWarningSentOnce=!1,e})(),Kb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[zb]]}),e})(),Yb=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[Kb]}),e})(),Qb=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:$b,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[Kb]}),e})(),Jb=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,s=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new Fb(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new Mb(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new Ub(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof Mb||e instanceof Fb||e instanceof Ub?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return new e},token:e,providedIn:Qb}),e})();var Xb=n(3637);function eI(){return e=>e.lift(new tI)}class tI{call(e,t){return t.subscribe(new nI(e))}}class nI extends Te.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}function rI(e,t){return n=>n.lift(new iI(e,t))}class iI{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new sI(e,this.compare,this.keySelector))}}class sI extends Te.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}var oI=n(8939),aI=(n(4828),n(3394));function cI(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Yu("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function uI(){if("undefined"==typeof Uint8Array)throw new Yu("unimplemented","Uint8Arrays are not available in this environment.")}function lI(){if("undefined"==typeof atob)throw new Yu("unimplemented","Blobs are unavailable in Firestore in this environment.")}class hI{constructor(e){this._delegate=e}static fromBase64String(e){return lI(),new hI(dv.fromBase64String(e))}static fromUint8Array(e){return uI(),new hI(dv.fromUint8Array(e))}toBase64(){return lI(),this._delegate.toBase64()}toUint8Array(){return uI(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function dI(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class fI{enableIndexedDbPersistence(e,t){return function(e,t){lv(e=H_(e,sv));const n=av(e),r=e._freezeSettings(),i=new p_;return uv(n,i,new d_(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){lv(e=H_(e,sv));const t=av(e),n=e._freezeSettings(),r=new p_;return uv(t,r,new f_(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new Yu(Ku.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Qu;return e._queue.enqueueAndForgetEvenWhileRestricted((0,Oi.Z)(function*(){try{yield(n=(0,Oi.Z)(function*(e){if(!Zf.bt())return Promise.resolve();const t=e+"main";yield Zf.delete(t)}),function(e){return n.apply(this,arguments)})(ig(e._databaseId,e._persistenceKey)),t.resolve()}catch(n){t.reject(n)}var n})),t.promise}(e._delegate)}}class pI{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof U_||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&$u("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const s=(e=H_(e,W_))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&$u("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Uu.MOCK_USER;else{t=(0,Li.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Yu(Ku.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Uu(s)}e._authCredentials=new el(new Ju(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Oi.Z)(function*(){const t=yield x_(e),n=yield N_(e);return t.setNetworkEnabled(!0),function(e){const t=Wu(e);return t.Gr.delete(0),um(t)}(n)}))}(av(e=H_(e,sv)))}(this._delegate)}disableNetwork(){return function(e){return function(e){return e.asyncQueue.enqueue((0,Oi.Z)(function*(){const t=yield x_(e),n=yield N_(e);return t.setNetworkEnabled(!1),(r=(0,Oi.Z)(function*(e){const t=Wu(e);t.Gr.add(0),yield hm(t),t.Jr.set("Offline")}),function(e){return r.apply(this,arguments)})(n);var r}))}(av(e=H_(e,sv)))}(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,q_("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(e){return function(e){const t=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return function(e,t){return Ly.apply(this,arguments)}(yield O_(e),t)})),t.promise}(av(e=H_(e,sv)))}(this._delegate)}onSnapshotsInSync(e){return function(e,t){return function(e,t){const n=new m_(t);return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return t=yield P_(e),r=n,Wu(t).io.add(r),void r.next();var t,r})),()=>{n.na(),e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return t=yield P_(e),r=n,void Wu(t).io.delete(r);var t,r}))}}(av(e=H_(e,sv)),rv(t)?t:{next:t})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Yu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new AI(this,J_(this._delegate,e))}catch(t){throw wI(t,"collection()","Firestore.collection()")}}doc(e){try{return new vI(this,X_(this._delegate,e))}catch(t){throw wI(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new EI(this,function(e,t){if(e=H_(e,W_),j_("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Yu(Ku.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Y_(e,null,(n=t,new yh(_l.emptyPath(),n)));var n}(this._delegate,e))}catch(t){throw wI(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(e,t){return function(e,t){const n=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){const r=yield(i=e,k_(i).then(e=>e.datastore));var i;new v_(e.asyncQueue,r,t,n).run()})),n.promise}(av(e=H_(e,sv)),n=>t(new vw(e,n)))}(this._delegate,t=>e(new mI(this,t)))}batch(){return av(this._delegate),new yI(new hw(this._delegate,e=>yw(this._delegate,e)))}loadBundle(e){return function(e,t){const n=av(e=H_(e,sv)),r=new iv;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,r=function(e,t){if(e instanceof Uint8Array)return g_(e,t);if(e instanceof ArrayBuffer)return g_(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),new y_(r,t);var r}(n,tm(t));e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){!function(e,t,n){const r=Wu(e);var i;(i=(0,Oi.Z)(function*(e,t,n){try{const i=yield t.getMetadata();if(yield function(e,t){const n=Wu(e),r=Gd(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ye.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,i))return yield t.close(),void n._completeWith((r=i,{taskState:"Success",documentsLoaded:r.totalDocuments,bytesLoaded:r.totalBytes,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}));n._updateProgress(dy(i));const s=new hy(i,e.localStore,t.k);let o=yield t.Ho();for(;o;){const e=yield s.yo(o);e&&n._updateProgress(e),o=yield t.Ho()}const a=yield s.complete();yield zy(e,a.In,void 0),yield function(e,t){const n=Wu(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ye.saveBundleMetadata(e,t))}(e.localStore,i),n._completeWith(a.progress)}catch(i){$u("SyncEngine",`Loading bundle failed with ${i}`),n._failWith(i)}var r}),function(e,t,n){return i.apply(this,arguments)})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield O_(e),i,r)}))}(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return function(e,t){return function(e,t){return e.asyncQueue.enqueue((0,Oi.Z)(function*(){return function(e,t){const n=Wu(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ye.getNamedQuery(e,t))}(yield R_(e),t)}))}(av(e=H_(e,sv)),t).then(t=>t?new Y_(e,null,t.query):null)}(this._delegate,e).then(e=>e?new EI(this,e):null)}}class gI extends cw{constructor(e){super(),this.firestore=e}convertBytes(e){return new hI(new dv(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return vI.forKey(t,this.firestore,null)}}class mI{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}get(e){const t=xI(e);return this._delegate.get(t).then(e=>new TI(this._firestore,new Hv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=xI(e);return n?(cI("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=xI(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=xI(e);return this._delegate.delete(t),this}}class yI{constructor(e){this._delegate=e}set(e,t,n){const r=xI(e);return n?(cI("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=xI(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=xI(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class _I{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new Zv(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new CI(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=_I.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new _I(e,new gI(e),t),r.set(t,i)),i}}_I.INSTANCES=new WeakMap;class vI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}static forPath(e,t,n){if(e.length%2!=0)throw new Yu("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new vI(t,new K_(t._delegate,n,new Pl(e)))}static forKey(e,t,n){return new vI(t,new K_(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new AI(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new AI(this.firestore,J_(this._delegate,e))}catch(t){throw wI(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Li.m9)(e))instanceof K_&&ev(this._delegate,e)}set(e,t){t=cI("DocumentReference.set",t);try{return t?pw(this._delegate,e,t):pw(this._delegate,e)}catch(n){throw wI(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?gw(this._delegate,e):gw(this._delegate,e,t,...n)}catch(r){throw wI(r,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return yw(H_(e.firestore,sv),[new ld(e._key,Qh.none())])}(this._delegate)}onSnapshot(...e){const t=bI(e),n=II(e,e=>new TI(this.firestore,new Hv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return mw(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=H_(e,K_);const t=H_(e.firestore,sv),n=av(t),r=new fw(t);return function(e,t){const n=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return(r=(0,Oi.Z)(function*(e,t,n){try{const r=yield function(e,t){const n=Wu(e);return n.persistence.runTransaction("read document","readonly",e=>n.Wn.Rn(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Yu(Ku.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(r){const e=Km(r,`Failed to get document '${t} from cache`);n.reject(e)}}),function(e,t,n){return r.apply(this,arguments)})(yield R_(e),t,n);var r})),n.promise}(n,e._key).then(n=>new Hv(t,r,e._key,n,new $v(null!==n&&n.hasLocalMutations,!0),e.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=H_(e,K_);const t=H_(e.firestore,sv);return L_(av(t),e._key,{source:"server"}).then(n=>_w(t,e,n))}(this._delegate):function(e){e=H_(e,K_);const t=H_(e.firestore,sv);return L_(av(t),e._key).then(n=>_w(t,e,n))}(this._delegate),t.then(e=>new TI(this.firestore,new Hv(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new vI(this.firestore,this._delegate.withConverter(e?_I.getInstance(this.firestore,e):null))}}function wI(e,t,n){return e.message=e.message.replace(t,n),e}function bI(e){for(const t of e)if("object"==typeof t&&!dI(t))return t;return{}}function II(e,t){var n,r;let i;return i=dI(e[0])?e[0]:dI(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class TI{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new vI(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Kv(this._delegate,e._delegate)}}class CI extends TI{data(e){const t=this._delegate.data(e);return function(e,t){e||Zu()}(void 0!==t),t}}class EI{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new gI(e)}where(e,t,n){try{return new EI(this.firestore,Jv(this._delegate,function(e,t,n){const r=t,i=zv("where",e);return new Xv(i,r,n)}(e,t,n)))}catch(r){throw wI(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new EI(this.firestore,Jv(this._delegate,function(e,t="asc"){const n=t,r=zv("orderBy",e);return new ew(r,n)}(e,t)))}catch(n){throw wI(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new EI(this.firestore,Jv(this._delegate,function(e){return Z_("limit",e),new tw("limit",e,"F")}(e)))}catch(t){throw wI(t,"limit()","Query.limit()")}}limitToLast(e){try{return new EI(this.firestore,Jv(this._delegate,function(e){return Z_("limitToLast",e),new tw("limitToLast",e,"L")}(e)))}catch(t){throw wI(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new EI(this.firestore,Jv(this._delegate,function(...e){return new nw("startAt",e,!0)}(...e)))}catch(t){throw wI(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new EI(this.firestore,Jv(this._delegate,function(...e){return new nw("startAfter",e,!1)}(...e)))}catch(t){throw wI(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new EI(this.firestore,Jv(this._delegate,function(...e){return new rw("endBefore",e,!0)}(...e)))}catch(t){throw wI(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new EI(this.firestore,Jv(this._delegate,function(...e){return new rw("endAt",e,!1)}(...e)))}catch(t){throw wI(t,"endAt()","Query.endAt()")}}isEqual(e){return tv(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function(e){e=H_(e,Y_);const t=H_(e.firestore,sv),n=av(t),r=new fw(t);return function(e,t){const n=new Qu;return e.asyncQueue.enqueueAndForget((0,Oi.Z)(function*(){return(r=(0,Oi.Z)(function*(e,t,n){try{const r=yield bg(e,t,!0),i=new gy(t,r.zn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(r){const e=Km(r,`Failed to execute query '${t} against cache`);n.reject(e)}}),function(e,t,n){return r.apply(this,arguments)})(yield R_(e),t,n);var r})),n.promise}(n,e._query).then(n=>new Gv(t,r,e,n))}(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=H_(e,Y_);const t=H_(e.firestore,sv),n=av(t),r=new fw(t);return M_(n,e._query,{source:"server"}).then(n=>new Gv(t,r,e,n))}(this._delegate):function(e){e=H_(e,Y_);const t=H_(e.firestore,sv),n=av(t),r=new fw(t);return Yv(e._query),M_(n,e._query).then(n=>new Gv(t,r,e,n))}(this._delegate),t.then(e=>new kI(this.firestore,new Gv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=bI(e),n=II(e,e=>new kI(this.firestore,new Gv(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return mw(this._delegate,t,n)}withConverter(e){return new EI(this.firestore,this._delegate.withConverter(e?_I.getInstance(this.firestore,e):null))}}class SI{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new CI(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kI{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new EI(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new CI(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new SI(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new CI(this._firestore,n))})}isEqual(e){return Kv(this._delegate,e._delegate)}}class AI extends EI{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new vI(this.firestore,e):null}doc(e){try{return new vI(this.firestore,void 0===e?X_(this._delegate):X_(this._delegate,e))}catch(t){throw wI(t,"doc()","CollectionReference.doc()")}}add(e){return function(e,t){const n=H_(e.firestore,sv),r=X_(e),i=uw(e.converter,t);return yw(n,[Iv(bv(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Qh.exists(!1))]).then(()=>r)}(this._delegate,e).then(e=>new vI(this.firestore,e))}isEqual(e){return ev(this._delegate,e._delegate)}withConverter(e){return new AI(this.firestore,this._delegate.withConverter(e?_I.getInstance(this.firestore,e):null))}}function xI(e){return H_(e,K_)}class RI{constructor(...e){this._delegate=new hv(...e)}static documentId(){return new RI(wl.keyField().canonicalString())}isEqual(e){return(e=(0,Li.m9)(e))instanceof hv&&this._delegate._internalPath.isEqual(e._internalPath)}}class NI{constructor(e){this._delegate=e}static serverTimestamp(){const e=new Ev("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new NI(e)}static delete(){const e=new Tv("deleteField");return e._methodName="FieldValue.delete",new NI(e)}static arrayUnion(...e){const t=function(...e){return new Sv("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new NI(t)}static arrayRemove(...e){const t=function(...e){return new kv("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new NI(t)}static increment(e){const t=function(e){return new Av("increment",e)}(e);return t._methodName="FieldValue.increment",new NI(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OI={Firestore:pI,GeoPoint:pv,Timestamp:dl,Blob:hI,Transaction:mI,WriteBatch:yI,DocumentReference:vI,DocumentSnapshot:TI,Query:EI,QueryDocumentSnapshot:CI,QuerySnapshot:kI,CollectionReference:AI,FieldPath:RI,FieldValue:NI,setLogLevel:function(e){!function(e){ju.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!function(e){(function(e,t){e.INTERNAL.registerComponent(new Di.wA("firestore-compat",e=>((e,t)=>new pI(e,t,new fI))(e.getProvider("app-compat").getImmediate(),e.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},OI)))})(e),e.registerVersion("@firebase/firestore-compat","0.1.10")}(aI.Z);var PI=n(6682),DI=n(9746),LI=n(7771),MI=n(8858);class FI extends _e.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new UI(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new ve.N;if(this.isStopped||this.hasError?s=wt.w.EMPTY:(this.observers.push(e),s=new MI.W(this,e)),r&&e.add(e=new DI.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||LI.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class UI{constructor(e,t){this.time=e,this.value=t}}function VI(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,c=!1;return function(u){let l;o++,!i||a?(a=!1,i=new FI(e,t,r),l=i.subscribe(this),s=u.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){c=!0,s=void 0,i.complete()}}),c&&(s=void 0)):l=i.subscribe(this),this.add(()=>{o--,l.unsubscribe(),l=void 0,s&&!c&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}function jI(e,t){return t?qe(()=>e,t):qe(()=>e)}var qI=n(2639);n(7841);const BI=new r.OlP("angularfire2.auth.use-emulator"),zI=new r.OlP("angularfire2.auth.settings"),$I=new r.OlP("angularfire2.auth.tenant-id"),HI=new r.OlP("angularfire2.auth.langugage-code"),ZI=new r.OlP("angularfire2.auth.use-device-language"),GI=new r.OlP("angularfire.auth.persistence"),WI=(e,t,n,r,i,s,o,a)=>(0,oI.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))c.settings[e]=t;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]);let KI=(()=>{class e{constructor(e,t,r,i,s,o,a,c,u,l,h,d){const f=new _e.xQ,p=(0,ye.of)(void 0).pipe((0,DI.QV)(s.outsideAngular),qe(()=>i.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,4828)))),(0,Ve.U)(()=>(0,oI.on)(e,i,t)),(0,Ve.U)(e=>WI(e,i,o,c,u,l,a,h)),VI({bufferSize:1,refCount:!1}));if(D(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,ye.of)(null);else{p.pipe(yt()).subscribe();const e=p.pipe(qe(e=>e.getRedirectResult().then(e=>e,()=>null)),bi.iC,VI({bufferSize:1,refCount:!1})),t=p.pipe(qe(e=>new ke.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=p.pipe(qe(e=>new ke.y(t=>({unsubscribe:i.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(jI(t),(0,qI.R)(s.outsideAngular),(0,DI.QV)(s.insideAngular)),this.user=e.pipe(jI(n),(0,qI.R)(s.outsideAngular),(0,DI.QV)(s.insideAngular)),this.idToken=this.user.pipe(qe(e=>e?(0,me.D)(e.getIdToken()):(0,ye.of)(null))),this.idTokenResult=this.user.pipe(qe(e=>e?(0,me.D)(e.getIdTokenResult()):(0,ye.of)(null))),this.credential=(0,PI.T)(e,f,this.authState.pipe(Je(e=>!e))).pipe((0,Ve.U)(e=>(null==e?void 0:e.user)?e:null),(0,qI.R)(s.outsideAngular),(0,DI.QV)(s.insideAngular))}return(0,oI.pX)(this,p,i,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>f.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(oI.Dh),r.LFG(oI.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(bi.HU),r.LFG(BI,8),r.LFG(zI,8),r.LFG($I,8),r.LFG(HI,8),r.LFG(ZI,8),r.LFG(GI,8),r.LFG(gs,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})();function YI(e,t){return function(e,t=Xb.z){return new ke.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function QI(e,t){return YI(e,t).pipe((0,Ve.U)(e=>({payload:e,type:"query"})))}function JI(e,t){return QI(e,t).pipe(We(void 0),eI(),(0,Ve.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function XI(e,t,n){return JI(e,n).pipe(Ke((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return eT(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return eT(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return eT(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),rI(),(0,Ve.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function eT(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function tT(e){return(!e||0===e.length)&&(e=["added","removed","modified"]),e}class nT{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=JI(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Ve.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe(We(void 0),eI(),Je(([e,t])=>t.length>0||!e),(0,Ve.U)(([e,t])=>t),bi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ke((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=tT(e);return XI(this.query,t,this.afs.schedulers.outsideAngular).pipe(bi.iC)}valueChanges(e={}){return QI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),bi.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(bi.iC)}add(e){return this.ref.add(e)}doc(e){return new rT(this.ref.doc(e),this.afs)}}class rT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=uT(n,t);return new nT(r,i,this.afs)}snapshotChanges(){return function(e,t){return YI(e,t).pipe(We(void 0),eI(),(0,Ve.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(bi.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Ve.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,me.D)(this.ref.get(e)).pipe(bi.iC)}}class iT{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?JI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),Je(e=>e.length>0),bi.iC):JI(this.query,this.afs.schedulers.outsideAngular).pipe(bi.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ke((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=tT(e);return XI(this.query,t,this.afs.schedulers.outsideAngular).pipe(bi.iC)}valueChanges(e={}){return QI(this.query,this.afs.schedulers.outsideAngular).pipe((0,Ve.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),bi.iC)}get(e){return(0,me.D)(this.query.get(e)).pipe(bi.iC)}}const sT=new r.OlP("angularfire2.enableFirestorePersistence"),oT=new r.OlP("angularfire2.firestore.persistenceSettings"),aT=new r.OlP("angularfire2.firestore.settings"),cT=new r.OlP("angularfire2.firestore.use-emulator");function uT(e,t=(e=>e)){return{query:t(e),ref:e}}let lT=(()=>{class e{constructor(e,t,n,r,i,s,o,a,c,u,l,h,d,f,p,g,m){this.schedulers=o;const y=(0,oI.on)(e,s,t),_=c;u&&WI(y,s,l,d,f,p,h,g),[this.firestore,this.persistenceEnabled$]=(0,oI.cc)(`${y.name}.firestore`,"AngularFirestore",y.name,()=>{const e=s.runOutsideAngular(()=>y.firestore());if(r&&e.settings(r),_&&e.useEmulator(..._),n&&!D(i)){const t=()=>{try{return(0,me.D)(e.enablePersistence(a||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,ye.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,ye.of)(!1)]},[r,_,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=uT(n,t),s=this.schedulers.ngZone.run(()=>r);return new nT(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new iT(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new rT(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(oI.Dh),r.LFG(oI.xv,8),r.LFG(sT,8),r.LFG(aT,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(bi.HU),r.LFG(oT,8),r.LFG(cT,8),r.LFG(KI,8),r.LFG(BI,8),r.LFG(zI,8),r.LFG($I,8),r.LFG(HI,8),r.LFG(ZI,8),r.LFG(GI,8),r.LFG(gs,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),hT=(()=>{class e{constructor(e){this._angularFireAuthentication=e}login(e){return new Promise((t,n)=>{this._angularFireAuthentication.signInWithEmailAndPassword(e.email,e.password).then(e=>t(e),e=>n(e))})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(KI))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function dT(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1,"Email is required"),r.qZA())}function fT(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1,"Email needs to be a valid email"),r.qZA())}function pT(e,t){if(1&e&&(r.TgZ(0,"div",19),r.YNc(1,dT,2,0,"div",20),r.YNc(2,fT,2,0,"div",20),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.f.email.errors.required),r.xp6(1),r.Q6J("ngIf",e.f.email.errors.email)}}function gT(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1,"Password required"),r.qZA())}function mT(e,t){1&e&&(r.TgZ(0,"div"),r._uU(1,"Password needs to be at least 6 characters"),r.qZA())}function yT(e,t){if(1&e&&(r.TgZ(0,"div",19),r.YNc(1,gT,2,0,"div",20),r.YNc(2,mT,2,0,"div",20),r.qZA()),2&e){const e=r.oxw();r.xp6(1),r.Q6J("ngIf",e.f.password.errors.required),r.xp6(1),r.Q6J("ngIf",e.f.password.errors.minLength)}}const _T=function(e){return{"is-invalid":e}},vT=[{path:"login",component:(()=>{class e{constructor(e,t,n,r){this._auth=t,this._formBuilder=n,this._router=r,this.type="",this.loginForm=Fb,this.isLoading=!1,this.submitted=!1}ngOnInit(){this.loginForm=this._formBuilder.group({email:["",[Gw.required,Gw.email]],password:["",[Gw.required,Gw.minLength(6)]]})}get f(){return this.loginForm.controls}signIn(){this.submitted=!0,!this.loginForm.invalid&&this._auth.login({email:this.loginForm.controls.email.value,password:this.loginForm.controls.password.value}).then(e=>{console.log({res:e}),localStorage.setItem("currentUser",JSON.stringify(e.user._delegate)),this._router.navigate(["/profile"])}).catch(e=>{console.log(e),this.loginForm.reset()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(lT),r.Y36(hT),r.Y36(Jb),r.Y36(ei))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-signin"]],decls:36,vars:9,consts:[["rel","stylesheet","href","https://use.fontawesome.com/releases/v5.8.1/css/all.css","integrity","sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf","crossorigin","anonymous"],[1,"custom-auth-container"],["id","container",1,"container"],[1,"form-container","sign-up-container"],[1,"custom-auth-text"],["type","text","placeholder","Full Name"],["type","email","placeholder","Email"],["type","password","placeholder","Password"],[1,"form-container","sign-in-container"],[3,"formGroup","ngSubmit"],["type","email","placeholder","Email","formControlName","email",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","placeholder","Password","formControlName","password",1,"form-control","form-control-merge","login-form-input",3,"ngClass"],["type","submit",1,"signin-btn",3,"click"],[1,"overlay-container"],[1,"overlay"],[1,"overlay-panel","overlay-left"],["id","signIn",1,"ghost","cursor-pointer",3,"click"],[1,"overlay-panel","overlay-right"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(e,t){1&e&&(r._UZ(0,"link",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.TgZ(4,"form"),r.TgZ(5,"h1",4),r._uU(6,"Create an account"),r.qZA(),r._UZ(7,"input",5),r._UZ(8,"input",6),r._UZ(9,"input",7),r.TgZ(10,"button"),r._uU(11,"Subscribe"),r.qZA(),r.qZA(),r.qZA(),r.TgZ(12,"div",8),r.TgZ(13,"form",9),r.NdJ("ngSubmit",function(){return t.signIn()}),r.TgZ(14,"h1"),r._uU(15,"Login"),r.qZA(),r._UZ(16,"input",10),r.YNc(17,pT,3,2,"div",11),r._UZ(18,"input",12),r.YNc(19,yT,3,2,"div",11),r.TgZ(20,"button",13),r.NdJ("click",function(){return t.signIn()}),r._uU(21," Log in "),r.qZA(),r.qZA(),r.qZA(),r.TgZ(22,"div",14),r.TgZ(23,"div",15),r.TgZ(24,"div",16),r.TgZ(25,"h1"),r._uU(26,"Happy to see you again !"),r.qZA(),r.TgZ(27,"p"),r._uU(28,"In order to connect,please enter your credentials"),r.qZA(),r.TgZ(29,"button",17),r.NdJ("click",function(){return t.type="signIn"}),r._uU(30,"Login"),r.qZA(),r.qZA(),r.TgZ(31,"div",18),r.TgZ(32,"h1"),r._uU(33,"Hi !"),r.qZA(),r.TgZ(34,"p"),r._uU(35,"Please enter your informations and start a project !"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.qZA()),2&e&&(r.xp6(13),r.Q6J("formGroup",t.loginForm),r.xp6(3),r.Q6J("ngClass",r.VKq(5,_T,t.submitted&&t.f.email.errors)),r.xp6(1),r.Q6J("ngIf",t.submitted&&t.f.email.errors),r.xp6(1),r.Q6J("ngClass",r.VKq(7,_T,t.submitted&&t.f.password.errors)),r.xp6(1),r.Q6J("ngIf",t.submitted&&t.f.password.errors))},directives:[Bb,mb,qb,Zb,qw,gb,Wb,A,x],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%]{background-color:#fff!important}.custom-auth-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background-color:#fff!important}.custom-auth-text[_ngcontent-%COMP%]{font-size:35px;background:-webkit-linear-gradient(#c69cfe,#71bafe);background-clip:text;-webkit-background-clip:text;-webkit-text-fill-color:transparent}.invalid-feedback[_ngcontent-%COMP%]{text-align:right;margin-top:-4px}.form-control.is-invalid[_ngcontent-%COMP%]{border:1px solid #ff8d72}.form-control[_ngcontent-%COMP%]:focus{background-color:#eee}.signin-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:.5rem}h1[_ngcontent-%COMP%]{font-weight:bold;margin:0}p[_ngcontent-%COMP%]{font-size:14px;font-weight:100;line-height:20px;letter-spacing:.5px;margin:20px 0 30px}span[_ngcontent-%COMP%]{font-size:12px}a[_ngcontent-%COMP%]{color:#333;font-size:14px;text-decoration:none;margin:15px 0}.container[_ngcontent-%COMP%]{background:#fff;border-radius:10px;box-shadow:0 14px 28px rgba(0,0,0,.2),0 10px 10px rgba(0,0,0,.2);position:relative;overflow:hidden;width:768px;max-width:100%;min-height:480px}.form-container[_ngcontent-%COMP%]   .ovc_logo[_ngcontent-%COMP%]{position:absolute;top:3rem}.form-container[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{background:#fff;display:flex;flex-direction:column;padding:0 50px;height:100%;justify-content:center;align-items:center;text-align:center;position:relative}.social-container[_ngcontent-%COMP%]{margin:20px 0}.social-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{border:1px solid #ddd;border-radius:50%;display:inline-flex;justify-content:center;align-items:center;margin:0 5px;height:40px;width:40px}.form-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:#eee;border:none;padding:12px 15px;margin:8px 0;width:100%;color:#000!important}button[_ngcontent-%COMP%]{border-radius:20px;border:1px solid #ff4b2b;background:#ff445c;color:#fff;font-size:12px;font-weight:bold;padding:12px 45px;letter-spacing:1px;text-transform:uppercase;transition:transform 80ms ease-in}button[_ngcontent-%COMP%]:active{transform:scale(.95)}button[_ngcontent-%COMP%]:focus{outline:none}button.ghost[_ngcontent-%COMP%]{background:transparent;border-color:#fff}.form-container[_ngcontent-%COMP%]{position:absolute;top:0;height:100%;transition:all .6s ease-in-out}.sign-in-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:2}.sign-up-container[_ngcontent-%COMP%]{left:0;width:50%;z-index:1;opacity:0}.overlay-container[_ngcontent-%COMP%]{position:absolute;top:0;left:50%;width:50%;height:100%;overflow:hidden;transition:transform .6s ease-in-out;z-index:100}.overlay[_ngcontent-%COMP%]{background:#ff416c;background:linear-gradient(to right,#ff4b2b,#ff416c) no-repeat 0 0/cover;color:#fff;position:relative;left:-100%;height:100%;width:200%;transform:translateY(0);transition:transform .6s ease-in-out}.overlay-panel[_ngcontent-%COMP%]{position:absolute;top:0;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 40px;height:100%;width:50%;text-align:center;transform:translateY(0);transition:transform .6s ease-in-out}.overlay-right[_ngcontent-%COMP%]{right:0;transform:translateY(0)}.overlay-left[_ngcontent-%COMP%]{transform:translateY(-20%)}.container.right-panel-active[_ngcontent-%COMP%]   .sign-in-container[_ngcontent-%COMP%]{transform:translateY(100%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-container[_ngcontent-%COMP%]{transform:translate(-100%)}.container.right-panel-active[_ngcontent-%COMP%]   .sign-up-container[_ngcontent-%COMP%]{transform:translate(100%);opacity:1;z-index:5}.container.right-panel-active[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{transform:translate(50%)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-left[_ngcontent-%COMP%]{transform:translateY(0)}.container.right-panel-active[_ngcontent-%COMP%]   .overlay-right[_ngcontent-%COMP%]{transform:translateY(20%)}.footer[_ngcontent-%COMP%]{margin-top:25px;text-align:center}.icons[_ngcontent-%COMP%]{display:flex;width:30px;height:30px;letter-spacing:15px;align-items:center}@media screen and (max-width: 768px) and (min-width: 450px){.sign-in-container[_ngcontent-%COMP%]{width:calc(100% - 50px)}}@media screen and (max-width: 449px){.sign-in-container[_ngcontent-%COMP%]{width:100%}}"]}),e})()},{path:"profile",component:Pw,canActivate:[(()=>{class e{constructor(e){this._router=e}canActivate(e,t){const n=localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")+""):"";return console.log({currentUser:n}),!!n||(this._router.navigate(["/login"]),!1)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ei))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()]},{path:"",redirectTo:"profile",pathMatch:"full"}];let wT=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[di.forRoot(vT)],di]}),e})(),bT=(()=>{class e{constructor(){this.title="firebase-auth"}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&r._UZ(0,"router-outlet")},directives:[ni],styles:[""]}),e})();const IT={apiKey:"AIzaSyBYF7Kvi6av9YByvGlEyA2nlNOvPP_u9J0",authDomain:"fir-auth-172ee.firebaseapp.com",projectId:"fir-auth-172ee",storageBucket:"fir-auth-172ee.appspot.com",messagingSenderId:"1086906070344",appId:"1:1086906070344:web:0428a34aeac0548313af7d"};class TT{constructor(e,t,n,r){this.keySelector=e,this.elementSelector=t,this.durationSelector=n,this.subjectSelector=r}call(e,t){return t.subscribe(new CT(e,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class CT extends Te.L{constructor(e,t,n,r,i){super(e),this.keySelector=t,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(e){let t;try{t=this.keySelector(e)}catch(n){return void this.error(n)}this._group(e,t)}_group(e,t){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(t);if(this.elementSelector)try{r=this.elementSelector(e)}catch(s){this.error(s)}else r=e;if(!i){i=this.subjectSelector?this.subjectSelector():new _e.xQ,n.set(t,i);const e=new ST(t,i,this);if(this.destination.next(e),this.durationSelector){let e;try{e=this.durationSelector(new ST(t,i))}catch(o){return void this.error(o)}this.add(e.subscribe(new ET(t,i,this)))}}i.closed||i.next(r)}_error(e){const t=this.groups;t&&(t.forEach((t,n)=>{t.error(e)}),t.clear()),this.destination.error(e)}_complete(){const e=this.groups;e&&(e.forEach((e,t)=>{e.complete()}),e.clear()),this.destination.complete()}removeGroup(e){this.groups.delete(e)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class ET extends Te.L{constructor(e,t,n){super(t),this.key=e,this.group=t,this.parent=n}_next(e){this.complete()}_unsubscribe(){const{parent:e,key:t}=this;this.key=this.parent=null,e&&e.removeGroup(t)}}class ST extends ke.y{constructor(e,t,n){super(),this.key=e,this.groupSubject=t,this.refCountSubscription=n}_subscribe(e){const t=new wt.w,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&t.add(new kT(n)),t.add(r.subscribe(e)),t}}class kT extends wt.w{constructor(e){super(),this.parent=e,e.count++}unsubscribe(){const e=this.parent;!e.closed&&!this.closed&&(super.unsubscribe(),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())}}var AT=n(4762),xT=n(3935);class RT{constructor(e){return e}}const NT="analytics",OT=bi.nk.async,PT=(0,bi.u3)(xT.IH,!0),DT=(0,bi.u3)(xT.Kz,!0),LT=(0,bi.u3)(xT.Iv,!0);let MT=(()=>{class e{constructor(e,t,n){let r;this.disposables=[],(0,Ii.KN)("angularfire",bi.q4.full,"user-tracking"),this.initialized=t.runOutsideAngular(()=>new Promise(e=>{r=e})),OT().then(()=>{const t=n.get(RT);t?this.disposables=[Ss(e).subscribe(e=>{LT(t,null==e?void 0:e.uid),r()})]:r()})}ngOnDestroy(){this.disposables.forEach(e=>e.unsubscribe())}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(_s),r.LFG(r.R0b),r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const FT="firebase_screen_id",UT="outlet",VT="screen_class",jT="screen_name";let qT=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const BT={},zT=e=>{const t=[e[VT],e[UT]].join("#");if(BT.hasOwnProperty(t))return BT[t];{const e=qT++;return BT[t]=e,e}};let $T=(()=>{class e{constructor(e,t,n,r,i,s){(0,Ii.KN)("angularfire",bi.q4.full,"screen-tracking"),OT().then(()=>{const o=s.get(RT);!e||!o||r.runOutsideAngular(()=>{this.disposable=((e,t,n)=>e.events.pipe(Je(e=>e instanceof Ut)).pipe(qe(r=>{var i;const s=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,e=>e.replace("://",":///"))).root.children[r.snapshot.outlet])||void 0===i?void 0:i.toString())||"",o=e.routerState.root.children.map(e=>e).find(e=>e.outlet===r.snapshot.outlet);if(!o)return(0,ye.of)(null);let a=o;for(;a.firstChild;)a=a.firstChild;const c=a.pathFromRoot.map(e=>{var t;return null===(t=e.routeConfig)||void 0===t?void 0:t.path}).filter(e=>e).join("/")||"/",u={[jT]:c,page_path:`/${s}`,firebase_event_origin:"auto",firebase_screen:c,[UT]:r.snapshot.outlet};t&&(u.page_title=t.getTitle());let l=o.component;if(l){if(l===ar){let e=r.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=r.snapshot.component;if("string"==typeof l)return(0,ye.of)(Object.assign(Object.assign({},u),{[VT]:l}));if(l){const e=n.resolveComponentFactory(l);return(0,ye.of)(Object.assign(Object.assign({},u),{[VT]:e.selector}))}return(0,ye.of)(null)}),Je(e=>!!e),(0,Ve.U)(e=>Object.assign({firebase_screen_class:e[VT],[FT]:zT(e)},e)),function(e,t,n,r){return t=>t.lift(new TT(e,void 0,void 0,void 0))}(e=>e[UT]),(0,it.zg)(e=>e.pipe(rI((e,t)=>JSON.stringify(e)===JSON.stringify(t)),We(void 0),eI(),(0,Ve.U)(([e,t])=>e?Object.assign({firebase_previous_class:e[VT],firebase_previous_screen:e[jT],firebase_previous_id:e[FT]},t):t)))))(e,t,n).pipe(qe(e=>(0,AT.mG)(this,void 0,void 0,function*(){return i&&(yield i.initialized),DT(o,"screen_view",e)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(ei,8),r.LFG(ge,8),r.LFG(r._Vd),r.LFG(r.R0b),r.LFG(MT,8),r.LFG(r.zs3))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();const HT=new r.OlP("angularfire2.analytics-instances");function ZT(e){return(t,n)=>{if(!bi.nk.sync())return null;const r=t.runOutsideAngular(()=>e(n));return new RT(r)}}const GT={provide:class{constructor(){return(0,bi.vb)(NT)}},deps:[[new r.FiY,HT]]},WT={provide:RT,useFactory:function(e,t){if(!bi.nk.sync())return null;const n=(0,bi.JM)(NT,e,t);return n&&new RT(n)},deps:[[new r.FiY,HT],Ti]};let KT=(()=>{class e{constructor(e,t){(0,Ii.KN)("angularfire",bi.q4.full,"analytics")}}return e.\u0275fac=function(t){return new(t||e)(r.LFG($T,8),r.LFG(MT,8))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[WT,GT,{provide:r.ip1,useValue:bi.nk.async,multi:!0}]}),e})();function YT(e,...t){return{ngModule:KT,providers:[{provide:HT,useFactory:ZT(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,...t]}]}}const QT="@firebase/database";let JT="";class XT{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,Li.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,Li.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class eC{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,Li.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const tC=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new XT(t)}}catch(t){}return new eC},nC=tC("localStorage"),rC=tC("sessionStorage"),iC=new Mi.Yd("@firebase/database"),sC=function(){let e=1;return function(){return e++}}(),oC=function(e){const t=(0,Li.dS)(e),n=new Li.gQ;n.update(t);const r=n.digest();return Li.US.encodeByteArray(r)},aC=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=aC.apply(null,r):t+="object"==typeof r?(0,Li.Pz)(r):r,t+=" "}return t};let cC=null,uC=!0;const lC=function(...e){if(!0===uC&&(uC=!1,null===cC&&!0===rC.get("logging_enabled")&&function(e,t){(0,Li.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(iC.logLevel=Mi.in.VERBOSE,cC=iC.log.bind(iC),t&&rC.set("logging_enabled",!0)):"function"==typeof e?cC=e:(cC=null,rC.remove("logging_enabled"))}(!0)),cC){const t=aC.apply(null,e);cC(t)}},hC=function(e){return function(...t){lC(e,...t)}},dC=function(...e){const t="FIREBASE INTERNAL ERROR: "+aC(...e);iC.error(t)},fC=function(...e){const t=`FIREBASE FATAL ERROR: ${aC(...e)}`;throw iC.error(t),new Error(t)},pC=function(...e){const t="FIREBASE WARNING: "+aC(...e);iC.warn(t)},gC=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},mC="[MIN_NAME]",yC="[MAX_NAME]",_C=function(e,t){if(e===t)return 0;if(e===mC||t===yC)return-1;if(t===mC||e===yC)return 1;{const n=SC(e),r=SC(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},vC=function(e,t){return e===t?0:e<t?-1:1},wC=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,Li.Pz)(t))},bC=function(e){if("object"!=typeof e||null===e)return(0,Li.Pz)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,Li.Pz)(t[r]),n+=":",n+=bC(e[t[r]]);return n+="}",n},IC=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function TC(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const CC=function(e){(0,Li.hu)(!gC(e),"Invalid JSON number");const t=1023;let n,r,i,s,o;0===e?(r=0,i=0,n=1/e==-1/0?1:0):(n=e<0,(e=Math.abs(e))>=Math.pow(2,1-t)?(s=Math.min(Math.floor(Math.log(e)/Math.LN2),t),r=s+t,i=Math.round(e*Math.pow(2,52-s)-Math.pow(2,52))):(r=0,i=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(i%2?1:0),i=Math.floor(i/2);for(o=11;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);a.push(n?1:0),a.reverse();const c=a.join("");let u="";for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),u+=e}return u.toLowerCase()},EC=new RegExp("^-?(0*)\\d{1,10}$"),SC=function(e){if(EC.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},kC=function(e){try{e()}catch(t){setTimeout(()=>{throw pC("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},AC=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class xC{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){pC(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class RC{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(lC("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',pC(e)}}let NC=(()=>{class e{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const OC=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,PC="websocket",DC="long_polling";class LC{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=nC.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&nC.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function MC(e,t,n){let r;if((0,Li.hu)("string"==typeof t,"typeof type must == string"),(0,Li.hu)("object"==typeof n,"typeof params must == object"),t===PC)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==DC)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return TC(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class FC{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,Li.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,Li.p$)(this.counters_)}}const UC={},VC={};function jC(e){const t=e.toString();return UC[t]||(UC[t]=new FC),UC[t]}class qC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&kC(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class BC{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=hC(e),this.stats_=jC(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),MC(t,DC,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new qC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,Li.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new zC((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&OC.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BC.forceAllow_=!0}static forceDisallow(){BC.forceDisallow_=!0}static isAvailable(){return!((0,Li.Yr)()||!BC.forceAllow_&&(BC.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,Li.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,Li.h$)(t),r=IC(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,Li.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,Li.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class zC{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Li.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=sC(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=zC.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){lC("frame writing exception"),i.stack&&lC(i.stack),lC(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||lC("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){(0,Li.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;(!e||"loaded"===e||"complete"===e)&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{lC("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let $C=null;"undefined"!=typeof MozWebSocket?$C=MozWebSocket:"undefined"!=typeof WebSocket&&($C=WebSocket);let HC=(()=>{class e{constructor(t,n,r,i,s,o,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=hC(this.connId),this.stats_=jC(n),this.connURL=e.connectionURL_(n,o,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r){const i={v:"5"};return!(0,Li.Yr)()&&"undefined"!=typeof location&&location.hostname&&OC.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),MC(e,PC,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,nC.set("previous_websocket_failure",!0);try{if((0,Li.Yr)()){const e={headers:{"User-Agent":`Firebase/5/${JT}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const t=process.env,n=0===this.connURL.indexOf("wss://")?t.HTTPS_PROXY||t.https_proxy:t.HTTP_PROXY||t.http_proxy;n&&(e.proxy={origin:n}),this.mySock=new $C(this.connURL,[],e)}else this.mySock=new $C(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==$C&&!e.forceDisallow_}static previouslyFailed(){return nC.isInMemoryStorage||!0===nC.get("previous_websocket_failure")}markConnectionHealthy(){nC.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,Li.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,Li.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,Li.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=IC(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})();class ZC{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[BC,HC]}initTransports_(e){const t=HC&&HC.isAvailable();let n=t&&!HC.previouslyFailed();if(e.webSocketOnly&&(t||pC("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[HC];else{const e=this.transports_=[];for(const t of ZC.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class GC{constructor(e,t,n,r,i,s,o,a,c,u){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=u,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=hC("c:"+this.id+":"),this.transportManager_=new ZC(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=AC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=wC("t",e),n=wC("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=wC("t",e),n=wC("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=wC("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?dC("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):dC("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&pC("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),AC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):AC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(nC.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class WC{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class KC{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,Li.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){(0,Li.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class YC extends KC{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Li.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new YC}getInitialEvent(e){return(0,Li.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class QC{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function JC(){return new QC("")}function XC(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function eE(e){return e.pieces_.length-e.pieceNum_}function tE(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new QC(e.pieces_,t)}function nE(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function rE(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function iE(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new QC(t,0)}function sE(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof QC)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new QC(n,0)}function oE(e){return e.pieceNum_>=e.pieces_.length}function aE(e,t){const n=XC(e),r=XC(t);if(null===n)return t;if(n===r)return aE(tE(e),tE(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function cE(e,t){if(eE(e)!==eE(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function uE(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(eE(e)>eE(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class lE{constructor(e,t){this.errorPrefix_=t,this.parts_=rE(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,Li.ug)(this.parts_[n]);hE(this)}}function hE(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+dE(e))}function dE(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class fE extends KC{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new fE}getInitialEvent(e){return(0,Li.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const pE=1e3;let gE,mE=(()=>{class e extends WC{constructor(t,n,r,i,s,o,a,c){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=a,this.authOverride_=c,this.id=e.nextPersistentConnectionId_++,this.log_=hC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=pE,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!(0,Li.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");fE.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&YC.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r,a:e,b:t};this.log_((0,Li.Pz)(i)),(0,Li.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new Li.BH,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const e=this.outstandingGets_[i];void 0===e||r!==e||(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),t.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,s=e._path.toString();this.log_("Listen called for "+s+" "+i),this.listens.has(s)||this.listens.set(s,new Map),(0,Li.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Li.hu)(!this.listens.get(s).has(i),"listen() called twice for same path/queryId.");const o={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(i,o),this.connected_&&this.sendListen_(o)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r};t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,s=>{const o=s.d,a=s.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(r,i),t.onComplete&&t.onComplete(a,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,Li.r3)(e,"w")){const n=(0,Li.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();pC(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,Li.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,Li.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,Li.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{"ok"!==e.s&&this.log_("reportStats","Error sending stats: "+e.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,Li.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):dC("Unrecognized action received from server: "+(0,Li.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,Li.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=pE,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=pE,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=pE),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Oi.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),o=t.id+":"+e.nextConnectionId_++,a=t.lastSessionId;let c=!1,u=null;const l=function(){u?u.close():(c=!0,s())};t.realtime_={close:l,sendRequest:function(e){(0,Li.hu)(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};const h=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[e,n]=yield Promise.all([t.authTokenProvider_.getToken(h),t.appCheckTokenProvider_.getToken(h)]);c?lC("getToken() completed but was canceled"):(lC("getToken() completed. Creating connection."),t.authToken_=e&&e.accessToken,t.appCheckToken_=n&&n.token,u=new GC(o,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,e=>{pC(e+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},a))}catch(n){t.log_("Failed to get token: "+n),c||(t.repoInfo_.nodeAdmin&&pC(n),l())}}})()}interrupt(e){lC("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){lC("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,Li.xb)(this.interruptReasons_)&&(this.reconnectDelay_=pE,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>bC(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new QC(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){lC("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===e||"permission_denied"===e)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){lC("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===e||"permission_denied"===e)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,Li.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+JT.replace(/\./g,"-")]=1,(0,Li.uI)()?e["framework.cordova"]=1:(0,Li.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=YC.getInstance().currentlyOnline();return(0,Li.xb)(this.interruptReasons_)&&e}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class yE{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new yE(e,t)}}class _E{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new yE(mC,e),r=new yE(mC,t);return 0!==this.compare(n,r)}minPost(){return yE.MIN}}class vE extends _E{static get __EMPTY_NODE(){return gE}static set __EMPTY_NODE(e){gE=e}compare(e,t){return _C(e.name,t.name)}isDefinedOn(e){throw(0,Li.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return yE.MIN}maxPost(){return new yE(yC,gE)}makePost(e,t){return(0,Li.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new yE(e,gE)}toString(){return".key"}}const wE=new vE;class bE{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let IE,TE=(()=>{class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:CE.EMPTY_NODE,this.right=null!=s?s:CE.EMPTY_NODE}copy(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return CE.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)!n.left.isEmpty()&&!n.left.isRed_()&&!n.left.left.isRed_()&&(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),!n.right.isEmpty()&&!n.right.isRed_()&&!n.right.left.isRed_()&&(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return CE.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class CE{constructor(e,t=CE.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new CE(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,TE.BLACK,null,null))}remove(e){return new CE(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,TE.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new bE(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new bE(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new bE(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new bE(this.root_,null,this.comparator_,!0,e)}}function EE(e,t){return _C(e.name,t.name)}function SE(e,t){return _C(e,t)}CE.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new TE(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const kE=function(e){return"number"==typeof e?"number:"+CC(e):"string:"+e},AE=function(e){if(e.isLeafNode()){const t=e.val();(0,Li.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,Li.r3)(t,".sv"),"Priority must be a string or number.")}else(0,Li.hu)(e===IE||e.isEmpty(),"priority of unexpected type.");(0,Li.hu)(e===IE||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let xE,RE,NE,OE=(()=>{class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,Li.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),AE(this.priorityNode_)}static set __childrenNodeConstructor(e){xE=e}static get __childrenNodeConstructor(){return xE}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return oE(t)?this:".priority"===XC(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=XC(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,Li.hu)(".priority"!==r||1===eE(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(tE(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+kE(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?CC(this.value_):this.value_,this.lazyHash_=oC(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,Li.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return(0,Li.hu)(i>=0,"Unknown leaf type: "+n),(0,Li.hu)(s>=0,"Unknown leaf type: "+r),i===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const PE=new class extends _E{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?_C(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return yE.MIN}maxPost(){return new yE(yC,new OE("[PRIORITY-POST]",NE))}makePost(e,t){const n=RE(e);return new yE(t,new OE("[PRIORITY-POST]",n))}toString(){return".priority"}},DE=Math.log(2);class LE{constructor(e){this.count=parseInt(Math.log(e+1)/DE,10),this.current_=this.count-1;const t=(e=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&t}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const ME=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new TE(a,o.node,TE.BLACK,null,null);{const c=parseInt(s/2,10)+t,u=i(t,c),l=i(c+1,r);return o=e[c],a=n?n(o):o,new TE(a,o.node,TE.BLACK,u,l)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const u=i(s+1,a),l=e[s],h=n?n(l):l;c(new TE(h,l.node,r,null,u))},c=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,TE.BLACK):(a(r,TE.BLACK),a(r,TE.RED))}return s}(new LE(e.length));return new CE(r||t,s)};let FE;const UE={};class VE{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,Li.hu)(UE&&PE,"ChildrenNode.ts has not been loaded"),FE=FE||new VE({".priority":UE},{".priority":PE}),FE}get(e){const t=(0,Li.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof CE?t:null}hasIndex(e){return(0,Li.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,Li.hu)(e!==wE,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(yE.Wrap);let s,o=i.getNext();for(;o;)r=r||e.isDefinedOn(o.node),n.push(o),o=i.getNext();s=r?ME(n,e.getCompare()):UE;const a=e.toString(),c=Object.assign({},this.indexSet_);c[a]=e;const u=Object.assign({},this.indexes_);return u[a]=s,new VE(u,c)}addToIndexes(e,t){const n=(0,Li.UI)(this.indexes_,(n,r)=>{const i=(0,Li.DV)(this.indexSet_,r);if((0,Li.hu)(i,"Missing index implementation for "+r),n===UE){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(yE.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),ME(n,i.getCompare())}return UE}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new yE(e.name,r))),i.insert(e,e.node)}});return new VE(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,Li.UI)(this.indexes_,n=>{if(n===UE)return n;{const r=t.get(e.name);return r?n.remove(new yE(e.name,r)):n}});return new VE(n,this.indexSet_)}}let jE,qE=(()=>{class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&AE(this.priorityNode_),this.children_.isEmpty()&&(0,Li.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return jE||(jE=new e(new CE(SE),null,VE.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||jE}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?jE:t}}getChild(e){const t=XC(e);return null===t?this:this.getImmediateChild(t).getChild(tE(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(t,n){if((0,Li.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const r=new yE(t,n);let i,s;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?jE:this.priorityNode_;return new e(i,o,s)}}updateChild(e,t){const n=XC(e);if(null===n)return t;{(0,Li.hu)(".priority"!==XC(e)||1===eE(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(tE(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(PE,(o,a)=>{n[o]=a.val(t),r++,s&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!t&&s&&i<2*r){const e=[];for(const t in n)e[t]=n[t];return e}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+kE(this.getPriority().val())+":"),this.forEachChild(PE,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":oC(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new yE(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new yE(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new yE(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,yE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,yE.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===BE?-1:0}withIndex(t){if(t===wE||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===wE||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(PE),n=t.getIterator(PE);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===wE?null:this.indexMap_.get(e.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const BE=new class extends qE{constructor(){super(new CE(SE),qE.EMPTY_NODE,VE.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qE.EMPTY_NODE}isEmpty(){return!1}};function zE(e,t=null){if(null===e)return qE.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,Li.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new OE(e,zE(t));if(e instanceof Array){let n=qE.EMPTY_NODE;return TC(e,(t,r)=>{if((0,Li.r3)(e,t)&&"."!==t.substring(0,1)){const e=zE(r);(e.isLeafNode()||!e.isEmpty())&&(n=n.updateImmediateChild(t,e))}}),n.updatePriority(zE(t))}{const n=[];let r=!1;if(TC(e,(e,t)=>{if("."!==e.substring(0,1)){const i=zE(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new yE(e,i)))}}),0===n.length)return qE.EMPTY_NODE;const i=ME(n,EE,e=>e.name,SE);if(r){const e=ME(n,PE.getCompare());return new qE(i,zE(t),new VE({".priority":e},{".priority":PE}))}return new qE(i,zE(t),VE.Default)}}Object.defineProperties(yE,{MIN:{value:new yE(mC,qE.EMPTY_NODE)},MAX:{value:new yE(yC,BE)}}),vE.__EMPTY_NODE=qE.EMPTY_NODE,OE.__childrenNodeConstructor=qE,function(e){IE=e}(BE),function(e){NE=e}(BE),function(e){RE=e}(zE);class $E extends _E{constructor(e){super(),this.indexPath_=e,(0,Li.hu)(!oE(e)&&".priority"!==XC(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?_C(e.name,t.name):i}makePost(e,t){const n=zE(e),r=qE.EMPTY_NODE.updateChild(this.indexPath_,n);return new yE(t,r)}maxPost(){const e=qE.EMPTY_NODE.updateChild(this.indexPath_,BE);return new yE(yC,e)}toString(){return rE(this.indexPath_,0).join("/")}}const HE=new class extends _E{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?_C(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return yE.MIN}maxPost(){return yE.MAX}makePost(e,t){const n=zE(e);return new yE(t,n)}toString(){return".value"}};function ZE(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class GE{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PE}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Li.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Li.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:mC}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Li.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Li.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:yC}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Li.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PE}copy(){const e=new GE;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function WE(e){const t={};if(e.isDefault())return t;let n;return e.index_===PE?n="$priority":e.index_===HE?n="$value":e.index_===wE?n="$key":((0,Li.hu)(e.index_ instanceof $E,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,Li.Pz)(n),e.startSet_&&(t.startAt=(0,Li.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,Li.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,Li.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,Li.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function KE(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==PE&&(t.i=e.index_.toString()),t}class YE extends WC{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=hC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,Li.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const s=YE.getListenId_(e,n),o={};this.listens_[s]=o;const a=WE(e._queryParams);this.restRequest_(i+".json",a,(e,t)=>{let a=t;if(404===e&&(a=null,e=null),null===e&&this.onDataUpdate_(i,a,!1,n),(0,Li.DV)(this.listens_,s)===o){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=YE.getListenId_(e,t);delete this.listens_[n]}get(e){const t=WE(e._queryParams),n=e._path.toString(),r=new Li.BH;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const s=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,Li.xO)(t);this.log_("Sending REST request for "+s);const o=new XMLHttpRequest;o.onreadystatechange=()=>{if(n&&4===o.readyState){this.log_("REST Response for "+s+" received. status:",o.status,"response:",o.responseText);let t=null;if(o.status>=200&&o.status<300){try{t=(0,Li.cI)(o.responseText)}catch(e){pC("Failed to parse JSON response for "+s+": "+o.responseText)}n(null,t)}else 401!==o.status&&404!==o.status&&pC("Got unsuccessful REST response for "+s+" Status: "+o.status),n(o.status);n=null}},o.open("GET",s,!0),o.send()})}}class QE{constructor(){this.rootNode_=qE.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function JE(){return{value:null,children:new Map}}function XE(e,t,n){if(oE(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=XC(t);e.children.has(r)||e.children.set(r,JE()),XE(e.children.get(r),t=tE(t),n)}}function eS(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{eS(r,new QC(t.toString()+"/"+e),n)})}class tS{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&TC(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class nS{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new tS(e);const n=1e4+2e4*Math.random();AC(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;TC(e,(e,r)=>{r>0&&(0,Li.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),AC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var rS=(()=>(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(rS||(rS={})),rS))();function iS(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class sS{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=rS.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(oE(this.path)){if(null!=this.affectedTree.value)return(0,Li.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new QC(e));return new sS(JC(),t,this.revert)}}return(0,Li.hu)(XC(this.path)===e,"operationForChild called for unrelated child."),new sS(tE(this.path),this.affectedTree,this.revert)}}class oS{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=rS.OVERWRITE}operationForChild(e){return oE(this.path)?new oS(this.source,JC(),this.snap.getImmediateChild(e)):new oS(this.source,tE(this.path),this.snap)}}class aS{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=rS.MERGE}operationForChild(e){if(oE(this.path)){const t=this.children.subtree(new QC(e));return t.isEmpty()?null:t.value?new oS(this.source,JC(),t.value):new aS(this.source,JC(),t)}return(0,Li.hu)(XC(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new aS(this.source,tE(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class cS{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(oE(e))return this.isFullyInitialized()&&!this.filtered_;const t=XC(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}function uS(e,t,n,r,i,s){const o=r.filter(e=>e.type===n);o.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,Li.g5)("Should only compare child_ events.");const r=new yE(t.childName,t.snapshotNode),i=new yE(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),o.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,s);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function lS(e,t){return{eventCache:e,serverCache:t}}function hS(e,t,n,r){return lS(new cS(t,n,r),e.serverCache)}function dS(e,t,n,r){return lS(e.eventCache,new cS(t,n,r))}function fS(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function pS(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let gS;class mS{constructor(e,t=(()=>(gS||(gS=new CE(vC)),gS))()){this.value=e,this.children=t}static fromObject(e){let t=new mS(null);return TC(e,(e,n)=>{t=t.set(new QC(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:JC(),value:this.value};if(oE(e))return null;{const n=XC(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(tE(e),t);return null!=i?{path:sE(new QC(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(oE(e))return this;{const t=XC(e),n=this.children.get(t);return null!==n?n.subtree(tE(e)):new mS(null)}}set(e,t){if(oE(e))return new mS(t,this.children);{const n=XC(e),r=(this.children.get(n)||new mS(null)).set(tE(e),t),i=this.children.insert(n,r);return new mS(this.value,i)}}remove(e){if(oE(e))return this.children.isEmpty()?new mS(null):new mS(null,this.children);{const t=XC(e),n=this.children.get(t);if(n){const r=n.remove(tE(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new mS(null):new mS(this.value,i)}return this}}get(e){if(oE(e))return this.value;{const t=XC(e),n=this.children.get(t);return n?n.get(tE(e)):null}}setTree(e,t){if(oE(e))return t;{const n=XC(e),r=(this.children.get(n)||new mS(null)).setTree(tE(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new mS(this.value,i)}}fold(e){return this.fold_(JC(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(sE(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,JC(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(oE(e))return null;{const r=XC(e),i=this.children.get(r);return i?i.findOnPath_(tE(e),sE(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,JC(),t)}foreachOnPath_(e,t,n){if(oE(e))return this;{this.value&&n(t,this.value);const r=XC(e),i=this.children.get(r);return i?i.foreachOnPath_(tE(e),sE(t,r),n):new mS(null)}}foreach(e){this.foreach_(JC(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(sE(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class yS{constructor(e){this.writeTree_=e}static empty(){return new yS(new mS(null))}}function _S(e,t,n){if(oE(t))return new yS(new mS(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=aE(i,t);return s=s.updateChild(o,n),new yS(e.writeTree_.set(i,s))}{const r=new mS(n),i=e.writeTree_.setTree(t,r);return new yS(i)}}}function vS(e,t,n){let r=e;return TC(n,(e,n)=>{r=_S(r,sE(t,e),n)}),r}function wS(e,t){if(oE(t))return yS.empty();{const n=e.writeTree_.setTree(t,new mS(null));return new yS(n)}}function bS(e,t){return null!=IS(e,t)}function IS(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(aE(n.path,t)):null}function TS(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(PE,(e,n)=>{t.push(new yE(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new yE(e,n.value))}),t}function CS(e,t){if(oE(t))return e;{const n=IS(e,t);return new yS(null!=n?new mS(n):e.writeTree_.subtree(t))}}function ES(e){return e.writeTree_.isEmpty()}function SS(e,t){return kS(JC(),e.writeTree_,t)}function kS(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?((0,Li.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=kS(sE(e,t),i,n)}),!n.getChild(e).isEmpty()&&null!==r&&(n=n.updateChild(sE(e,".priority"),r)),n}}function AS(e,t){return VS(t,e)}function xS(e,t){if(e.snap)return uE(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&uE(sE(e.path,n),t))return!0;return!1}function RS(e){return e.visible}function NS(e,t,n){let r=yS.empty();for(let i=0;i<e.length;++i){const s=e[i];if(t(s)){const e=s.path;let t;if(s.snap)uE(n,e)?(t=aE(n,e),r=_S(r,t,s.snap)):uE(e,n)&&(t=aE(e,n),r=_S(r,JC(),s.snap.getChild(t)));else{if(!s.children)throw(0,Li.g5)("WriteRecord should have .snap or .children");if(uE(n,e))t=aE(n,e),r=vS(r,t,s.children);else if(uE(e,n))if(t=aE(e,n),oE(t))r=vS(r,JC(),s.children);else{const e=(0,Li.DV)(s.children,XC(t));if(e){const n=e.getChild(tE(t));r=_S(r,JC(),n)}}}}}return r}function OS(e,t,n,r,i){if(r||i){const s=CS(e.visibleWrites,t);return!i&&ES(s)?n:i||null!=n||bS(s,JC())?SS(NS(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(uE(e.path,t)||uE(t,e.path))},t),n||qE.EMPTY_NODE):null}{const r=IS(e.visibleWrites,t);if(null!=r)return r;{const r=CS(e.visibleWrites,t);return ES(r)?n:null!=n||bS(r,JC())?SS(r,n||qE.EMPTY_NODE):null}}}function PS(e,t,n,r){return OS(e.writeTree,e.treePath,t,n,r)}function DS(e,t){return function(e,t,n){let r=qE.EMPTY_NODE;const i=IS(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(PE,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=CS(e.visibleWrites,t);return n.forEachChild(PE,(e,t)=>{const n=SS(CS(i,new QC(e)),t);r=r.updateImmediateChild(e,n)}),TS(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return TS(CS(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function LS(e,t,n,r){return function(e,t,n,r,i){(0,Li.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=sE(t,n);if(bS(e.visibleWrites,s))return null;{const t=CS(e.visibleWrites,s);return ES(t)?i.getChild(n):SS(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function MS(e,t){return function(e,t){return IS(e.visibleWrites,t)}(e.writeTree,sE(e.treePath,t))}function FS(e,t,n){return function(e,t,n,r){const i=sE(t,n),s=IS(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?SS(CS(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function US(e,t){return VS(sE(e.treePath,t),e.writeTree)}function VS(e,t){return{treePath:e,writeTree:t}}class jS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,Li.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,Li.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,ZE(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,function(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,function(e,t){return{type:"child_added",snapshotNode:t,childName:e}}(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,Li.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,ZE(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const qS=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class BS{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new cS(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return FS(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:pS(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const c=CS(e.visibleWrites,t),u=IS(c,JC());if(null!=u)a=u;else{if(null==n)return[];a=SS(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let c=n.getNext();for(;c&&e.length<i;)0!==t(c,r)&&e.push(c),c=n.getNext();return e}}(e.writeTree,e.treePath,t,n,r,i,s)}(this.writes_,r,t,1,n,e);return 0===i.length?null:i[0]}}function zS(e,t,n,r,i,s){const o=t.eventCache;if(null!=MS(r,n))return t;{let a,c;if(oE(n))if((0,Li.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=pS(t),i=DS(r,n instanceof qE?n:qE.EMPTY_NODE);a=e.filter.updateFullNode(t.eventCache.getNode(),i,s)}else{const n=PS(r,pS(t));a=e.filter.updateFullNode(t.eventCache.getNode(),n,s)}else{const u=XC(n);if(".priority"===u){(0,Li.hu)(1===eE(n),"Can't have a priority with additional path components");const i=o.getNode();c=t.serverCache.getNode();const s=LS(r,n,i,c);a=null!=s?e.filter.updatePriority(i,s):o.getNode()}else{const l=tE(n);let h;if(o.isCompleteForChild(u)){c=t.serverCache.getNode();const e=LS(r,n,o.getNode(),c);h=null!=e?o.getNode().getImmediateChild(u).updateChild(l,e):o.getNode().getImmediateChild(u)}else h=FS(r,u,t.serverCache);a=null!=h?e.filter.updateChild(o.getNode(),u,h,l,i,s):o.getNode()}}return hS(t,a,o.isFullyInitialized()||oE(n),e.filter.filtersNodes())}}function $S(e,t,n,r,i,s,o,a){const c=t.serverCache;let u;const l=o?e.filter:e.filter.getIndexedFilter();if(oE(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),e,null)}else{const e=XC(n);if(!c.isCompleteForPath(n)&&eE(n)>1)return t;const i=tE(n),s=c.getNode().getImmediateChild(e).updateChild(i,r);u=".priority"===e?l.updatePriority(c.getNode(),s):l.updateChild(c.getNode(),e,s,i,qS,null)}const h=dS(t,u,c.isFullyInitialized()||oE(n),l.filtersNodes());return zS(e,h,n,i,new BS(i,h,s),a)}function HS(e,t,n,r,i,s,o){const a=t.eventCache;let c,u;const l=new BS(i,t,s);if(oE(n))u=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=hS(t,u,!0,e.filter.filtersNodes());else{const i=XC(n);if(".priority"===i)u=e.filter.updatePriority(t.eventCache.getNode(),r),c=hS(t,u,a.isFullyInitialized(),a.isFiltered());else{const s=tE(n),u=a.getNode().getImmediateChild(i);let h;if(oE(s))h=r;else{const e=l.getCompleteChild(i);h=null!=e?".priority"===nE(s)&&e.getChild(iE(s)).isEmpty()?e:e.updateChild(s,r):qE.EMPTY_NODE}c=u.equals(h)?t:hS(t,e.filter.updateChild(a.getNode(),i,h,s,l,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function ZS(e,t){return e.eventCache.isCompleteForChild(t)}function GS(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function WS(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,u=t;c=oE(n)?r:new mS(null).setTree(n,r);const l=t.serverCache.getNode();return c.children.inorderTraversal((n,r)=>{if(l.hasChild(n)){const c=GS(0,t.serverCache.getNode().getImmediateChild(n),r);u=$S(e,u,new QC(n),c,i,s,o,a)}}),c.children.inorderTraversal((n,r)=>{const c=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!c){const c=GS(0,t.serverCache.getNode().getImmediateChild(n),r);u=$S(e,u,new QC(n),c,i,s,o,a)}}),u}function KS(e,t){const n=pS(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!oE(t)&&!n.getImmediateChild(XC(t)).isEmpty())?n.getChild(t):null}function YS(e,t,n,r){t.type===rS.MERGE&&null!==t.source.queryId&&((0,Li.hu)(pS(e.viewCache_),"We should always have a full cache before handling merges"),(0,Li.hu)(fS(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,s=function(e,t,n,r,i){const s=new jS;let o,a;if(n.type===rS.OVERWRITE){const c=n;c.source.fromUser?o=HS(e,t,c.path,c.snap,r,i,s):((0,Li.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!oE(c.path),o=$S(e,t,c.path,c.snap,r,i,a,s))}else if(n.type===rS.MERGE){const c=n;c.source.fromUser?o=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,c)=>{const u=sE(n,r);ZS(t,XC(u))&&(a=HS(e,a,u,c,i,s,o))}),r.foreach((r,c)=>{const u=sE(n,r);ZS(t,XC(u))||(a=HS(e,a,u,c,i,s,o))}),a}(e,t,c.path,c.children,r,i,s):((0,Li.hu)(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=WS(e,t,c.path,c.children,r,i,a,s))}else if(n.type===rS.ACK_USER_WRITE){const a=n;o=a.revert?function(e,t,n,r,i,s){let o;if(null!=MS(r,n))return t;{const a=new BS(r,t,i),c=t.eventCache.getNode();let u;if(oE(n)||".priority"===XC(n)){let n;if(t.serverCache.isFullyInitialized())n=PS(r,pS(t));else{const e=t.serverCache.getNode();(0,Li.hu)(e instanceof qE,"serverChildren would be complete if leaf node"),n=DS(r,e)}n=n,u=e.filter.updateFullNode(c,n,s)}else{const i=XC(n);let l=FS(r,i,t.serverCache);null==l&&t.serverCache.isCompleteForChild(i)&&(l=c.getImmediateChild(i)),u=null!=l?e.filter.updateChild(c,i,l,tE(n),a,s):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(c,i,qE.EMPTY_NODE,tE(n),a,s):c,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=PS(r,pS(t)),o.isLeafNode()&&(u=e.filter.updateFullNode(u,o,s)))}return o=t.serverCache.isFullyInitialized()||null!=MS(r,JC()),hS(t,u,o,e.filter.filtersNodes())}}(e,t,a.path,r,i,s):function(e,t,n,r,i,s,o){if(null!=MS(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(oE(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return $S(e,t,n,c.getNode().getChild(n),i,s,a,o);if(oE(n)){let r=new mS(null);return c.getNode().forEachChild(wE,(e,t)=>{r=r.set(new QC(e),t)}),WS(e,t,n,r,i,s,a,o)}return t}{let u=new mS(null);return r.foreach((e,t)=>{const r=sE(n,e);c.isCompleteForPath(r)&&(u=u.set(e,c.getNode().getChild(r)))}),WS(e,t,n,u,i,s,a,o)}}(e,t,a.path,a.affectedTree,r,i,s)}else{if(n.type!==rS.LISTEN_COMPLETE)throw(0,Li.g5)("Unknown operation type: "+n.type);o=function(e,t,n,r,i){const s=t.serverCache;return zS(e,dS(t,s.getNode(),s.isFullyInitialized()||oE(n),s.isFiltered()),n,r,qS,i)}(e,t,n.path,r,s)}const c=s.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=fS(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(function(e){return{type:"value",snapshotNode:e}}(fS(t)))}}(t,o,c),{viewCache:o,changes:c}}(e.processor_,i,t,n,r);return function(e,t){(0,Li.hu)(t.eventCache.getNode().isIndexed(e.filter.getIndex()),"Event snap not indexed"),(0,Li.hu)(t.serverCache.getNode().isIndexed(e.filter.getIndex()),"Server snap not indexed")}(e.processor_,s.viewCache),(0,Li.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=s.viewCache,function(e,t,n,r){return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push(function(e,t){return{type:"child_moved",snapshotNode:t,childName:e}}(t.childName,t.snapshotNode))}),uS(e,i,"child_removed",t,r,n),uS(e,i,"child_added",t,r,n),uS(e,i,"child_moved",s,r,n),uS(e,i,"child_changed",t,r,n),uS(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}(e,s.changes,s.viewCache.eventCache.getNode(),null)}let QS,JS;function XS(e,t,n,r){const i=t.source.queryId;if(null!==i){const s=e.views.get(i);return(0,Li.hu)(null!=s,"SyncTree gave us an op for an invalid query."),YS(s,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(YS(s,t,n,r));return i}}function ek(e,t){let n=null;for(const r of e.views.values())n=n||KS(r,t);return n}class tk{constructor(e){this.listenProvider_=e,this.syncPointTree_=new mS(null),this.pendingWriteTree_={visibleWrites:yS.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function nk(e,t,n,r,i){return function(e,t,n,r,i){(0,Li.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=_S(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?ok(e,new oS({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function rk(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,Li.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,s=!1,o=e.allWrites.length-1;for(;i&&o>=0;){const t=e.allWrites[o];t.visible&&(o>=n&&xS(t,r.path)?i=!1:uE(r.path,t.path)&&(s=!0)),o--}return!!i&&(s?(function(e){e.visibleWrites=NS(e.allWrites,RS,JC()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=wS(e.visibleWrites,r.path):TC(r.children,t=>{e.visibleWrites=wS(e.visibleWrites,sE(r.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new mS(null);return null!=r.snap?t=t.set(JC(),!0):TC(r.children,e=>{t=t.set(new QC(e),!0)}),ok(e,new sS(r.path,t,n))}return[]}function ik(e,t,n){return ok(e,new oS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function sk(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=ek(n,aE(e,t));if(r)return r});return OS(r,t,i,n,!0)}function ok(e,t){return ak(t,e.syncPointTree_,null,AS(e.pendingWriteTree_,JC()))}function ak(e,t,n,r){if(oE(e.path))return ck(e,t,n,r);{const i=t.get(JC());null==n&&null!=i&&(n=ek(i,JC()));let s=[];const o=XC(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const e=n?n.getImmediateChild(o):null,t=US(r,o);s=s.concat(ak(a,c,e,t))}return i&&(s=s.concat(XS(i,e,r,n))),s}}function ck(e,t,n,r){const i=t.get(JC());null==n&&null!=i&&(n=ek(i,JC()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=US(r,t),c=e.operationForChild(t);c&&(s=s.concat(ck(c,i,o,a)))}),i&&(s=s.concat(XS(i,e,r,n))),s}function uk(e,t){return e.tagToQueryMap.get(t)}function lk(e){const t=e.indexOf("$");return(0,Li.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new QC(e.substr(0,t))}}function hk(e,t,n){const r=e.syncPointTree_.get(t);return(0,Li.hu)(r,"Missing sync point for query tag that we're tracking"),XS(r,n,AS(e.pendingWriteTree_,t),null)}class dk{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new dk(t)}node(){return this.node_}}class fk{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=sE(this.path_,e);return new fk(this.syncTree_,t)}node(){return sk(this.syncTree_,this.path_)}}const pk=function(e,t,n){return e&&"object"==typeof e?((0,Li.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?gk(e[".sv"],t,n):"object"==typeof e[".sv"]?mk(e[".sv"],t):void(0,Li.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},gk=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,Li.hu)(!1,"Unexpected server value: "+e)}},mk=function(e,t,n){e.hasOwnProperty("increment")||(0,Li.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,Li.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,Li.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const s=i.getValue();return"number"!=typeof s?r:s+r},yk=function(e,t,n){return _k(e,new dk(t),n)};function _k(e,t,n){const r=e.getPriority().val(),i=pk(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=pk(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new OE(s,zE(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new OE(i))),r.forEachChild(PE,(e,r)=>{const i=_k(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class vk{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function wk(e,t){let n=t instanceof QC?t:new QC(t),r=e,i=XC(n);for(;null!==i;){const e=(0,Li.DV)(r.node.children,i)||{children:{},childCount:0};r=new vk(i,r,e),n=tE(n),i=XC(n)}return r}function bk(e){return e.node.value}function Ik(e,t){e.node.value=t,kk(e)}function Tk(e){return e.node.childCount>0}function Ck(e,t){TC(e.node.children,(n,r)=>{t(new vk(n,e,r))})}function Ek(e,t,n,r){n&&!r&&t(e),Ck(e,e=>{Ek(e,t,!0,r)}),n&&r&&t(e)}function Sk(e){return new QC(null===e.parent?e.name:Sk(e.parent)+"/"+e.name)}function kk(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===bk(e)&&!Tk(e)}(n),i=(0,Li.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,kk(e)):!r&&!i&&(e.node.children[t]=n.node,e.node.childCount++,kk(e))}(e.parent,e.name,e)}const Ak=/[\[\].#$\/\u0000-\u001F\u007F]/,xk=/[\[\].#$\u0000-\u001F\u007F]/,Rk=10485760,Nk=function(e){return"string"==typeof e&&0!==e.length&&!Ak.test(e)},Ok=function(e,t,n){const r=n instanceof QC?new lE(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+dE(r));if("function"==typeof t)throw new Error(e+"contains a function "+dE(r)+" with contents = "+t.toString());if(gC(t))throw new Error(e+"contains "+t.toString()+" "+dE(r));if("string"==typeof t&&t.length>Rk/3&&(0,Li.ug)(t)>Rk)throw new Error(e+"contains a string greater than "+Rk+" utf8 bytes "+dE(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(TC(t,(t,s)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!Nk(t)))throw new Error(e+" contains an invalid key ("+t+") "+dE(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,Li.ug)(t),hE(e)})(r,t),Ok(e,s,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,Li.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+dE(r)+" in addition to actual children.")}},Pk=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!Nk(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),function(e){return"string"==typeof e&&0!==e.length&&!xk.test(e)}(e)}(n))throw new Error((0,Li.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Dk{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Lk(e,t,n){(function(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null!==n&&!cE(s,n.path)&&(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)})(e,n),function(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(Mk(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}(e,e=>uE(e,t)||uE(t,e))}function Mk(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();cC&&lC("event: "+n.toString()),kC(r)}}}class Fk{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dk,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=JE(),this.transactionQueueTree_=new vk,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Uk(e){const t=e.infoData_.getNode(new QC(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Vk(e){return function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e}({timestamp:Uk(e)})}function jk(e,t,n,r,i){e.dataUpdateCount++;const s=new QC(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let o=[];if(i)if(r){const t=(0,Li.UI)(n,e=>zE(e));o=function(e,t,n,r){const i=uk(e,r);if(i){const r=lk(i),s=r.path,o=r.queryId,a=aE(s,t),c=mS.fromObject(n);return hk(e,s,new aS(iS(o),a,c))}return[]}(e.serverSyncTree_,s,t,i)}else{const t=zE(n);o=function(e,t,n,r){const i=uk(e,r);if(null!=i){const r=lk(i),s=r.path,o=r.queryId,a=aE(s,t);return hk(e,s,new oS(iS(o),a,n))}return[]}(e.serverSyncTree_,s,t,i)}else if(r){const t=(0,Li.UI)(n,e=>zE(e));o=function(e,t,n){const r=mS.fromObject(n);return ok(e,new aS({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,s,t)}else{const t=zE(n);o=ik(e.serverSyncTree_,s,t)}let a=s;o.length>0&&(a=Gk(e,s)),Lk(e.eventQueue_,a,o)}function qk(e,t){Bk(e,"connected",t),!1===t&&function(e){$k(e,"onDisconnectEvents");const t=Vk(e),n=JE();eS(e.onDisconnect_,JC(),(r,i)=>{const s=function(e,t,n,r){return _k(t,new fk(n,e),r)}(r,i,e.serverSyncTree_,t);XE(n,r,s)});let r=[];eS(n,JC(),(t,n)=>{r=r.concat(ik(e.serverSyncTree_,t,n));const i=function(e,t){const n=Sk(Wk(e,t)),r=wk(e.transactionQueueTree_,t);return function(e,t,n){let r=void 0?e:e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{Jk(e,t)}),Jk(e,r),Ek(r,t=>{Jk(e,t)}),n}(e,t);Gk(e,i)}),e.onDisconnect_=JE(),Lk(e.eventQueue_,JC(),r)}(e)}function Bk(e,t,n){const r=new QC("/.info/"+t),i=zE(n);e.infoData_.updateSnapshot(r,i);const s=ik(e.infoSyncTree_,r,i);Lk(e.eventQueue_,r,s)}function zk(e){return e.nextWriteId_++}function $k(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),lC(n,...t)}function Hk(e,t,n){return sk(e.serverSyncTree_,t,n)||qE.EMPTY_NODE}function Zk(e,t=e.transactionQueueTree_){if(t||Qk(e,t),bk(t)){const n=Kk(e,t);(0,Li.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=Hk(e,t,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,Li.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=aE(t,e.path);s=s.updateChild(r,e.currentOutputSnapshotRaw)}const a=s.val(!0),c=t;e.server_.put(c.toString(),a,r=>{$k(e,"transaction put response",{path:c.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(rk(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();Qk(e,wk(e.transactionQueueTree_,t)),Zk(e,e.transactionQueueTree_),Lk(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)kC(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)n[e].status=3===n[e].status?4:0;else{pC("transaction at "+c.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}Gk(e,t)}},o)}(e,Sk(t),n)}else Tk(t)&&Ck(t,t=>{Zk(e,t)})}function Gk(e,t){const n=Wk(e,t),r=Sk(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const s=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let o=0;o<t.length;o++){const a=t[o],c=aE(n,a.path);let u,l=!1;if((0,Li.hu)(null!==c,"rerunTransactionsUnderNode_: relativePath should not be null."),4===a.status)l=!0,u=a.abortReason,i=i.concat(rk(e.serverSyncTree_,a.currentWriteId,!0));else if(0===a.status)if(a.retryCount>=25)l=!0,u="maxretry",i=i.concat(rk(e.serverSyncTree_,a.currentWriteId,!0));else{const n=Hk(e,a.path,s);a.currentInputSnapshot=n;const r=t[o].update(n.val());if(void 0!==r){Ok("transaction failed: Data returned ",r,a.path);let t=zE(r);"object"==typeof r&&null!=r&&(0,Li.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const o=a.currentWriteId,c=Vk(e),u=yk(t,n,c);a.currentOutputSnapshotRaw=t,a.currentOutputSnapshotResolved=u,a.currentWriteId=zk(e),s.splice(s.indexOf(o),1),i=i.concat(nk(e.serverSyncTree_,a.path,u,a.currentWriteId,a.applyLocally)),i=i.concat(rk(e.serverSyncTree_,o,!0))}else l=!0,u="nodata",i=i.concat(rk(e.serverSyncTree_,a.currentWriteId,!0))}Lk(e.eventQueue_,n,i),i=[],l&&(t[o].status=2,setTimeout(t[o].unwatcher,Math.floor(0)),t[o].onComplete&&r.push("nodata"===u?()=>t[o].onComplete(null,!1,t[o].currentInputSnapshot):()=>t[o].onComplete(new Error(u),!1,null)))}Qk(e,e.transactionQueueTree_);for(let o=0;o<r.length;o++)kC(r[o]);Zk(e,e.transactionQueueTree_)}(e,Kk(e,n),r),r}function Wk(e,t){let n,r=e.transactionQueueTree_;for(n=XC(t);null!==n&&void 0===bk(r);)r=wk(r,n),n=XC(t=tE(t));return r}function Kk(e,t){const n=[];return Yk(e,t,n),n.sort((e,t)=>e.order-t.order),n}function Yk(e,t,n){const r=bk(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);Ck(t,t=>{Yk(e,t,n)})}function Qk(e,t){const n=bk(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,Ik(t,n.length>0?n:void 0)}Ck(t,t=>{Qk(e,t)})}function Jk(e,t){const n=bk(t);if(n){const r=[];let i=[],s=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,Li.hu)(s===t-1,"All SENT items should be at beginning of queue."),s=t,n[t].status=3,n[t].abortReason="set"):((0,Li.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(rk(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===s?Ik(t,void 0):n.length=s+1,Lk(e.eventQueue_,Sk(t),i);for(let e=0;e<r.length;e++)kC(r[e])}}const Xk=function(e,t){const n=eA(e),r=n.namespace;return"firebase.com"===n.domain&&fC(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==n.domain&&fC("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&pC("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new LC(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new QC(n.pathString)}},eA=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",c=443;if("string"==typeof e){let u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));let l=e.indexOf("/");-1===l&&(l=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(l,h)),l<h&&(i=function(e){let t="";const n=e.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let e=n[r];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(s){}t+="/"+e}return t}(e.substring(l,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):pC(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));u=t.indexOf(":"),u>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(u+1),10)):u=t.length;const f=t.slice(0,u);if("localhost"===f.toLowerCase())n="localhost";else if(f.split(".").length<=2)n=f;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class tA{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return oE(this._path)?null:nE(this._path)}get ref(){return new nA(this._repo,this._path)}get _queryIdentifier(){const e=KE(this._queryParams),t=bC(e);return"{}"===t?"default":t}get _queryObject(){return KE(this._queryParams)}isEqual(e){if(!((e=(0,Li.m9)(e))instanceof tA))return!1;const t=this._repo===e._repo,n=cE(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}class nA extends tA{constructor(e,t){super(e,t,new GE,!1)}get parent(){const e=iE(this._path);return null===e?null:new nA(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}(function(e){(0,Li.hu)(!QS,"__referenceConstructor has already been defined"),QS=e})(nA),function(e){(0,Li.hu)(!JS,"__referenceConstructor has already been defined"),JS=e}(nA);const rA={};class iA{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=jC(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new YE(e.repoInfo_,(t,n,r,i)=>{jk(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>qk(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Li.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new mE(e.repoInfo_,t,(t,n,r,i)=>{jk(e,t,n,r,i)},t=>{qk(e,t)},t=>{!function(e,t){TC(t,(t,n)=>{Bk(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(e,t){const n=e.toString();return VC[n]||(VC[n]=t()),VC[n]}(e.repoInfo_,()=>new nS(e.stats_,e.server_)),e.infoData_=new QE,e.infoSyncTree_=new tk({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=ik(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),Bk(e,"connected",!1),e.serverSyncTree_=new tk({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);Lk(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new nA(this._repo,JC())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=rA[t];(!n||n[e.key]!==e)&&fC(`Database ${t}(${e.repoInfo_}) has already been deleted.`),function(e){e.persistentConnection_&&e.persistentConnection_.interrupt("repo_interrupt")}(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&fC("Cannot call "+e+" on a deleted database.")}}function sA(e=(0,Pi.getApp)(),t){return(0,Pi._getProvider)(e,"database").getImmediate({identifier:t})}mE.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},mE.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},function(e){JT=e}(Pi.SDK_VERSION),(0,Pi._registerComponent)(new Di.wA("database",(e,{instanceIdentifier:t})=>function(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||fC("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),lC("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,c=Xk(s,i),u=c.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${u.namespace}`,c=Xk(s,i),u=c.repoInfo):o=!c.repoInfo.secure;const l=i&&o?new NC(NC.OWNER):new RC(e.name,e.options,t);Pk("Invalid Firebase Database URL",c),oE(c.path)||fC("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=rA[t.name];i||(i={},rA[t.name]=i);let s=i[e.toURLString()];return s&&fC("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Fk(e,!1,n,r),i[e.toURLString()]=s,s}(u,e,l,new xC(e.name,n));return new iA(h,e)}(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(QT,"0.12.4",void 0),(0,Pi.registerVersion)(QT,"0.12.4","esm2017");class oA{constructor(e){return e}}const aA="database",cA=new r.OlP("angularfire2.database-instances");function uA(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new oA(r)}}const lA={provide:class{constructor(){return(0,bi.vb)(aA)}},deps:[[new r.FiY,cA]]},hA={provide:oA,useFactory:function(e,t){const n=(0,bi.JM)(aA,e,t);return n&&new oA(n)},deps:[[new r.FiY,cA],Ti]};let dA=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"rtdb")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[hA,lA]}),e})();function fA(e,...t){return{ngModule:dA,providers:[{provide:cA,useFactory:uA(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,[new r.FiY,vs],[new r.FiY,gs],...t]}]}}const pA=(0,bi.u3)(sA,!0),gA="functions";class mA{constructor(e,t,n){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=t.getImmediate({optional:!0}),this.auth||e.get().then(e=>this.auth=e,()=>{}),this.messaging||t.get().then(e=>this.messaging=e,()=>{}),this.appCheck||n.get().then(e=>this.appCheck=e,()=>{})}getAuthToken(){var e=this;return(0,Oi.Z)(function*(){if(e.auth)try{const t=yield e.auth.getToken();return null==t?void 0:t.accessToken}catch(t){return}})()}getMessagingToken(){var e=this;return(0,Oi.Z)(function*(){if(e.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield e.messaging.getToken()}catch(t){return}})()}getAppCheckToken(){var e=this;return(0,Oi.Z)(function*(){if(e.appCheck){const t=yield e.appCheck.getToken();return t.error?null:t.token}return null})()}getContext(){var e=this;return(0,Oi.Z)(function*(){return{authToken:yield e.getAuthToken(),messagingToken:yield e.getMessagingToken(),appCheckToken:yield e.getAppCheckToken()}})()}}const yA="us-central1";class _A{constructor(e,t,n,r,i=yA,s){this.app=e,this.fetchImpl=s,this.emulatorOrigin=null,this.contextProvider=new mA(t,n,r),this.cancelAllRequests=new Promise(e=>{this.deleteService=()=>Promise.resolve(e())});try{const e=new URL(i);this.customDomain=e.origin,this.region=yA}catch(o){this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:null!==this.customDomain?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}const vA="@firebase/functions";function wA(e=(0,Pi.getApp)(),t=yA){return(0,Pi._getProvider)((0,Li.m9)(e),gA).getImmediate({identifier:t})}!function(e,t){(0,Pi._registerComponent)(new Di.wA(gA,(t,{instanceIdentifier:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),s=t.getProvider("messaging-internal"),o=t.getProvider("app-check-internal");return new _A(r,i,s,o,n,e)},"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(vA,"0.7.6",void 0),(0,Pi.registerVersion)(vA,"0.7.6","esm2017")}(fetch.bind(self));class bA{constructor(e){return e}}const IA="functions",TA=new r.OlP("angularfire2.functions-instances");function CA(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new bA(r)}}const EA={provide:class{constructor(){return(0,bi.vb)(IA)}},deps:[[new r.FiY,TA]]},SA={provide:bA,useFactory:function(e,t){const n=(0,bi.JM)(IA,e,t);return n&&new bA(n)},deps:[[new r.FiY,TA],Ti]};let kA=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"fn")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[SA,EA]}),e})();function AA(e,...t){return{ngModule:kA,providers:[{provide:TA,useFactory:CA(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,[new r.FiY,vs],[new r.FiY,gs],...t]}]}}const xA=(0,bi.u3)(wA,!0);var RA=n(6241);class NA{constructor(e){return e}}const OA="messaging",PA=new r.OlP("angularfire2.messaging-instances");function DA(e){return(t,n)=>{if(!bi.n1.sync())return null;const r=t.runOutsideAngular(()=>e(n));return new NA(r)}}const LA={provide:class{constructor(){return(0,bi.vb)(OA)}},deps:[[new r.FiY,PA]]},MA={provide:NA,useFactory:function(e,t){if(!bi.n1.sync())return null;const n=(0,bi.JM)(OA,e,t);return n&&new NA(n)},deps:[[new r.FiY,PA],Ti]};let FA=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"fcm")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[MA,LA,{provide:r.ip1,useValue:bi.n1.async,multi:!0}]}),e})();function UA(e,...t){return{ngModule:FA,providers:[{provide:PA,useFactory:DA(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,...t]}]}}const VA=(0,bi.u3)(RA.KL,!0);n(3328);const jA="@firebase/performance",qA="0.5.4",BA="FB-PERF-TRACE-MEASURE",zA="@firebase/performance/config",$A="@firebase/performance/configexpire",HA="Performance",ZA=new Li.LL("performance",HA,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),GA=new Mi.Yd(HA);let WA,KA,YA,QA;GA.logLevel=Mi.in.INFO;class JA{constructor(e){if(this.window=e,!e)throw ZA.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(e){!this.performance||!this.performance.mark||this.performance.mark(e)}measure(e,t,n){!this.performance||!this.performance.measure||this.performance.measure(e,t,n)}getEntriesByType(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]}getEntriesByName(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,Li.zI)()?!!(0,Li.hl)()||(GA.info("IndexedDB is not supported by current browswer"),!1):(GA.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(e,t){this.PerformanceObserver&&new this.PerformanceObserver(e=>{for(const n of e.getEntries())t(n)}).observe({entryTypes:[e]})}static getInstance(){return void 0===WA&&(WA=new JA(KA)),WA}}function XA(){return YA}function ex(e,t){const n=e.length-t.length;if(n<0||n>1)throw ZA.create("invalid String merger input");const r=[];for(let i=0;i<e.length;i++)r.push(e.charAt(i)),t.length>i&&r.push(t.charAt(i));return r.join("")}class tx{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=ex("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=ex("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===QA&&(QA=new tx),QA}}var nx=(()=>(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.VISIBLE=1]="VISIBLE",e[e.HIDDEN=2]="HIDDEN"}(nx||(nx={})),nx))();const rx=["firebase_","google_","ga_"],ix=new RegExp("^[a-zA-Z]\\w*$");function sx(){const e=JA.getInstance().navigator;return"serviceWorker"in e?e.serviceWorker.controller?2:3:1}function ox(){switch(JA.getInstance().document.visibilityState){case"visible":return nx.VISIBLE;case"hidden":return nx.HIDDEN;default:return nx.UNKNOWN}}function ax(){const e=JA.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function cx(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.appId;if(!n)throw ZA.create("no app id");return n}const ux="Could not fetch config, will use default configs";function lx(e){if(!e)return e;const t=tx.getInstance(),n=e.entries||{};return t.loggingEnabled=void 0===n.fpr_enabled||"true"===String(n.fpr_enabled),n.fpr_log_source&&(t.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(t.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(t.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(t.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(t.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),t.logTraceAfterSampling=hx(t.tracesSamplingRate),t.logNetworkAfterSampling=hx(t.networkRequestsSamplingRate),e}function hx(e){return Math.random()<=e}let dx,fx=1;function px(e){return fx=2,dx=dx||function(e){return function(){const e=JA.getInstance().document;return new Promise(t=>{if(e&&"complete"!==e.readyState){const n=()=>{"complete"===e.readyState&&(e.removeEventListener("readystatechange",n),t())};e.addEventListener("readystatechange",n)}else t()})}().then(()=>function(e){const t=e.getId();return t.then(e=>{YA=e}),t}(e.installations)).then(t=>function(e,t){const n=function(){const e=JA.getInstance().localStorage;if(!e)return;const t=e.getItem($A);if(!t||!function(e){return Number(e)>Date.now()}(t))return;const n=e.getItem(zA);if(n)try{return JSON.parse(n)}catch(r){return}}();return n?(lx(n),Promise.resolve()):function(e,t){return function(e){const t=e.getToken();return t.then(e=>{}),t}(e.installations).then(n=>{const r=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!n)throw ZA.create("no project id");return n}(e.app),i=function(e){var t;const n=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!n)throw ZA.create("no api key");return n}(e.app),s=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${r}/namespaces/fireperf:fetch?key=${i}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${n}`},body:JSON.stringify({app_instance_id:t,app_instance_id_token:n,app_id:cx(e.app),app_version:"0.5.4",sdk_version:"0.0.1"})});return fetch(s).then(e=>{if(e.ok)return e.json();throw ZA.create("RC response not ok")})}).catch(()=>{GA.info(ux)})}(e,t).then(lx).then(e=>function(e){const t=JA.getInstance().localStorage;!e||!t||(t.setItem(zA,JSON.stringify(e)),t.setItem($A,String(Date.now()+60*tx.getInstance().configTimeToLive*60*1e3)))}(e),()=>{})}(e,t)).then(()=>gx(),()=>gx())}(e),dx}function gx(){fx=3}let mx,yx=3,_x=[],vx=!1;function wx(e){setTimeout(()=>{if(0!==yx){if(!_x.length)return wx(1e4);!function(){const e=_x.splice(0,1e3),t=e.map(e=>({source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}));(function(e,t){return function(e){const t=tx.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(e=>(e.ok||GA.info("Call to Firebase backend failed."),e.json())).then(e=>{const n=Number(e.nextRequestWaitMillis);let r=1e4;isNaN(n)||(r=Math.max(n,r));const i=e.logResponseDetails;Array.isArray(i)&&i.length>0&&"RETRY_REQUEST_LATER"===i[0].responseAction&&(_x=[...t,..._x],GA.info("Retry transport request later.")),yx=3,wx(r)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:tx.getInstance().logSource,log_event:t},e).catch(()=>{_x=[...e,..._x],yx--,GA.info(`Tries left: ${yx}.`),wx(1e4)})}()}},e)}function bx(e,t){mx||(mx=function(e){return(...t)=>{!function(e){if(!e.eventTime||!e.message)throw ZA.create("invalid cc log");_x=[..._x,e]}({message:e(...t),eventTime:Date.now()})}}(Cx)),mx(e,t)}function Ix(e){const t=tx.getInstance();!t.instrumentationEnabled&&e.isAuto||!t.dataCollectionEnabled&&!e.isAuto||!JA.getInstance().requiredApisAvailable()||e.isAuto&&ox()!==nx.VISIBLE||(3===fx?Tx(e):px(e.performanceController).then(()=>Tx(e),()=>Tx(e)))}function Tx(e){if(!XA())return;const t=tx.getInstance();!t.loggingEnabled||!t.logTraceAfterSampling||setTimeout(()=>bx(e,1),0)}function Cx(e,t){return 0===t?function(e){const t={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},n={application_info:Ex(e.performanceController.app),network_request_metric:t};return JSON.stringify(n)}(e):function(e){const t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);const n=e.getAttributes();0!==Object.keys(n).length&&(t.custom_attributes=n);const r={application_info:Ex(e.performanceController.app),trace_metric:t};return JSON.stringify(r)}(e)}function Ex(e){return{google_app_id:cx(e),app_instance_id:XA(),web_app_info:{sdk_version:"0.5.4",page_url:JA.getInstance().getUrl(),service_worker_status:sx(),visibility_state:ox(),effective_connection_type:ax()},application_process_state:0}}const Sx=["_fp","_fcp","_fid"];class kx{constructor(e,t,n=!1,r){this.performanceController=e,this.name=t,this.isAuto=n,this.state=1,this.customAttributes={},this.counters={},this.api=JA.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=r||`${BA}-${this.randomId}-${this.name}`,r&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw ZA.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw ZA.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Ix(this)}record(e,t,n){if(e<=0)throw ZA.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw ZA.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),n&&n.attributes&&(this.customAttributes=Object.assign({},n.attributes)),n&&n.metrics)for(const r of Object.keys(n.metrics))isNaN(Number(n.metrics[r]))||(this.counters[r]=Number(Math.floor(n.metrics[r])));Ix(this)}incrementMetric(e,t=1){this.putMetric(e,void 0===this.counters[e]?t:this.counters[e]+t)}putMetric(e,t){if(!function(e,t){return!(0===e.length||e.length>100)&&(t&&t.startsWith("_wt_")&&Sx.indexOf(e)>-1||!e.startsWith("_"))}(e,this.name))throw ZA.create("invalid custom metric name",{customMetricName:e});this.counters[e]=function(e){const t=Math.floor(e);return t<e&&GA.info(`Metric value should be an Integer, setting the value as : ${t}.`),t}(t)}getMetric(e){return this.counters[e]||0}putAttribute(e,t){const n=function(e){return!(0===e.length||e.length>40||rx.some(t=>e.startsWith(t))||!e.match(ix))}(e),r=function(e){return 0!==e.length&&e.length<=100}(t);if(n&&r)this.customAttributes[e]=t;else{if(!n)throw ZA.create("invalid attribute name",{attributeName:e});if(!r)throw ZA.create("invalid attribute value",{attributeValue:t})}}getAttribute(e){return this.customAttributes[e]}removeAttribute(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(e){this.startTimeUs=e}setDuration(e){this.durationUs=e}calculateTraceMetrics(){const e=this.api.getEntriesByName(this.traceMeasure),t=e&&e[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))}static createOobTrace(e,t,n,r){const i=JA.getInstance().getUrl();if(!i)return;const s=new kx(e,"_wt_"+i,!0),o=Math.floor(1e3*JA.getInstance().getTimeOrigin());if(s.setStartTime(o),t&&t[0]&&(s.setDuration(Math.floor(1e3*t[0].duration)),s.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),s.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),s.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),n){const e=n.find(e=>"first-paint"===e.name);e&&e.startTime&&s.putMetric("_fp",Math.floor(1e3*e.startTime));const t=n.find(e=>"first-contentful-paint"===e.name);t&&t.startTime&&s.putMetric("_fcp",Math.floor(1e3*t.startTime)),r&&s.putMetric("_fid",Math.floor(1e3*r))}Ix(s)}static createUserTimingTrace(e,t){Ix(new kx(e,t,!1,t))}}function Ax(e,t){const n=t;if(!n||void 0===n.responseStart)return;const r=JA.getInstance().getTimeOrigin(),i=Math.floor(1e3*(n.startTime+r)),s=n.responseStart?Math.floor(1e3*(n.responseStart-n.startTime)):void 0,o=Math.floor(1e3*(n.responseEnd-n.startTime));!function(e){const t=tx.getInstance();if(!t.instrumentationEnabled)return;const n=e.url,r=t.logEndPointUrl.split("?")[0],i=t.flTransportEndpointUrl.split("?")[0];n===r||n===i||!t.loggingEnabled||!t.logNetworkAfterSampling||setTimeout(()=>bx(e,0),0)}({performanceController:e,url:n.name&&n.name.split("?")[0],responsePayloadBytes:n.transferSize,startTimeUs:i,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:o})}function xx(e){!XA()||(setTimeout(()=>function(e){const t=JA.getInstance(),n=t.getEntriesByType("navigation"),r=t.getEntriesByType("paint");if(t.onFirstInputDelay){let i=setTimeout(()=>{kx.createOobTrace(e,n,r),i=void 0},5e3);t.onFirstInputDelay(t=>{i&&(clearTimeout(i),kx.createOobTrace(e,n,r,t))})}else kx.createOobTrace(e,n,r)}(e),0),setTimeout(()=>function(e){const t=JA.getInstance(),n=t.getEntriesByType("resource");for(const r of n)Ax(e,r);t.setupObserver("resource",t=>Ax(e,t))}(e),0),setTimeout(()=>function(e){const t=JA.getInstance(),n=t.getEntriesByType("measure");for(const r of n)Rx(e,r);t.setupObserver("measure",t=>Rx(e,t))}(e),0))}function Rx(e,t){const n=t.name;n.substring(0,BA.length)!==BA&&kx.createUserTimingTrace(e,n)}class Nx{constructor(e,t){this.app=e,this.installations=t,this.initialized=!1}_init(e){this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),JA.getInstance().requiredApisAvailable()?(0,Li.eu)().then(e=>{e&&(vx||(wx(5500),vx=!0),px(this).then(()=>xx(this),()=>xx(this)),this.initialized=!0)}).catch(e=>{GA.info(`Environment doesn't support IndexedDB: ${e}`)}):GA.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(e){tx.getInstance().instrumentationEnabled=e}get instrumentationEnabled(){return tx.getInstance().instrumentationEnabled}set dataCollectionEnabled(e){tx.getInstance().dataCollectionEnabled=e}get dataCollectionEnabled(){return tx.getInstance().dataCollectionEnabled}}function Ox(e=(0,Pi.getApp)()){return e=(0,Li.m9)(e),(0,Pi._getProvider)(e,"performance").getImmediate()}(0,Pi._registerComponent)(new Di.wA("performance",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==n.name)throw ZA.create("FB not default");if("undefined"==typeof window)throw ZA.create("no window");!function(e){KA=e}(window);const i=new Nx(n,r);return i._init(t),i},"PUBLIC")),(0,Pi.registerVersion)(jA,qA),(0,Pi.registerVersion)(jA,qA,"esm2017");class Px{constructor(e){return e}}const Dx="performance",Lx=new r.OlP("angularfire2.performance-instances");function Mx(e){return(t,n,r)=>{if(!P(n))return null;const i=t.runOutsideAngular(()=>e(r));return new Px(i)}}const Fx={provide:class{constructor(){return(0,bi.vb)(Dx)}},deps:[[new r.FiY,Lx]]},Ux={provide:Px,useFactory:function(e,t,n){if(!P(n))return null;const r=(0,bi.JM)(Dx,e,t);return r&&new Px(r)},deps:[[new r.FiY,Lx],Ti,r.Lbi]};let Vx=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"perf")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Ux,Fx]}),e})();function jx(e,...t){return{ngModule:Vx,providers:[{provide:Lx,useFactory:Mx(e),multi:!0,deps:[r.R0b,r.Lbi,r.zs3,bi.HU,Ci,...t]}]}}const qx=(0,bi.u3)(Ox,!0);var Bx=n(4347);class zx{constructor(e){return e}}const $x="remote-config",Hx=new r.OlP("angularfire2.remote-config-instances");function Zx(e){return(t,n)=>{if(!bi._J.sync())return null;const r=t.runOutsideAngular(()=>e(n));return new zx(r)}}const Gx={provide:class{constructor(){return(0,bi.vb)($x)}},deps:[[new r.FiY,Hx]]},Wx={provide:zx,useFactory:function(e,t){if(!bi._J.sync())return null;const n=(0,bi.JM)($x,e,t);return n&&new zx(n)},deps:[[new r.FiY,Hx],Ti]};let Kx=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"rc")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[Wx,Gx,{provide:r.ip1,useValue:bi._J.async,multi:!0}]}),e})();function Yx(e,...t){return{ngModule:Kx,providers:[{provide:Hx,useFactory:Zx(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,...t]}]}}const Qx=(0,bi.u3)(Bx.sN,!0),Jx="firebasestorage.googleapis.com";class Xx extends Li.ZR{constructor(e,t){super(eR(e),`Firebase Storage: ${t} (${eR(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Xx.prototype)}_codeEquals(e){return eR(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function eR(e){return"storage/"+e}function tR(e){return new Xx("invalid-argument",e)}function nR(){return new Xx("app-deleted","The Firebase app was deleted.")}class rR{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=rR.makeFromUrl(e,t)}catch(r){return new rR(e,"")}if(""===n.path)return n;throw function(e){return new Xx("invalid-default-bucket","Invalid default bucket '"+e+"'.")}(e)}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function s(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp(`^https?://${t===Jx?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:s}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){let e=r[t.indices.path];e||(e=""),n=new rR(r[t.indices.bucket],e),t.postModify(n);break}}if(null==n)throw function(e){return new Xx("invalid-url","Invalid URL '"+e+"'.")}(e);return n}}class iR{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function sR(e,t,n,r){if(r<t)throw tR(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw tR(`Invalid value for '${e}'. Expected ${n} or less.`)}var oR=(()=>(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(oR||(oR={})),oR))();class aR{constructor(e,t,n,r,i,s,o,a,c,u,l){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=s,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=u,this.connectionFactory_=l,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(s){r(s)}else if(null!==i){const e=new Xx("unknown","An unknown error occurred, please check the error payload for server response.");e.serverResponse=i.getErrorText(),r(this.errorCallback_?this.errorCallback_(i,e):e)}else r(t.canceled?this.appDelete_?nR():new Xx("canceled","User canceled the upload/download."):new Xx("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))};this.canceled_?e(0,new cR(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function c(){return 2===a}let u=!1;function l(...e){u||(u=!0,t.apply(null,e))}function h(t){i=setTimeout(()=>{i=null,e(f,c())},t)}function d(){s&&clearTimeout(s)}function f(e,...t){if(u)return void d();if(e)return d(),void l.call(null,e,...t);if(c()||o)return d(),void l.call(null,e,...t);let n;r<64&&(r*=2),1===a?(a=2,n=0):n=1e3*(r+Math.random()),h(n)}let p=!1;function g(e){p||(p=!0,d(),!u&&(null!==i?(e||(a=2),clearTimeout(i),h(0)):e||(a=1)))}return h(0),s=setTimeout(()=>{o=!0,g(!0)},n),g}((e,t)=>{if(t)return void e(!1,new cR(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{null!==this.progressCallback_&&this.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===oR.NO_ERROR,i=n.getStatus();if(!t||this.isRetryStatusCode_(i)){const t=n.getErrorCode()===oR.ABORT;return void e(!1,new cR(!1,null,t))}const s=-1!==this.successCodes_.indexOf(i);e(!0,new cR(s,n))})},e,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,n=-1!==[408,429].indexOf(e),r=-1!==this.additionalRetryCodes_.indexOf(e);return t||n||r}}class cR{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}class uR{constructor(e,t){this._service=e,this._location=t instanceof rR?t:rR.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new uR(e,t)}get root(){const e=new rR(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new rR(this._location.bucket,e);return new uR(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Xx("invalid-root-operation","The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function lR(e,t){const n=null==t?void 0:t.storageBucket;return null==n?null:rR.makeFromBucketSpec(n,e)}class hR{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=Jx,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?rR.makeFromBucketSpec(r,this._host):lR(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?rR.makeFromBucketSpec(this._url,e):lR(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sR("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sR("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Oi.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const e=yield t.getToken();if(null!==e)return e.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Oi.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new uR(this,e)}_makeRequest(e,t,n,r){if(this._deleted)return new iR(nR());{const i=function(e,t,n,r,i,s){const o=function(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}(e.urlParams),a=e.url+o,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(c,s),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new aR(a,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i)}(e,this._appId,n,r,t,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}makeRequestWithTokens(e,t){var n=this;return(0,Oi.Z)(function*(){const[r,i]=yield Promise.all([n._getAuthToken(),n._getAppCheckToken()]);return n._makeRequest(e,t,r,i).getPromise()})()}}const dR="@firebase/storage",fR="storage";function pR(e=(0,Pi.getApp)(),t){return e=(0,Li.m9)(e),(0,Pi._getProvider)(e,fR).getImmediate({identifier:t})}(0,Pi._registerComponent)(new Di.wA(fR,function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new hR(n,r,i,t,Pi.SDK_VERSION)},"PUBLIC").setMultipleInstances(!0)),(0,Pi.registerVersion)(dR,"0.9.0",""),(0,Pi.registerVersion)(dR,"0.9.0","esm2017");class gR{constructor(e){return e}}const mR="storage",yR=new r.OlP("angularfire2.storage-instances");function _R(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new gR(r)}}const vR={provide:class{constructor(){return(0,bi.vb)(mR)}},deps:[[new r.FiY,yR]]},wR={provide:gR,useFactory:function(e,t){const n=(0,bi.JM)(mR,e,t);return n&&new gR(n)},deps:[[new r.FiY,yR],Ti]};let bR=(()=>{class e{constructor(){(0,Ii.KN)("angularfire",bi.q4.full,"gcs")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[wR,vR]}),e})();function IR(e,...t){return{ngModule:bR,providers:[{provide:yR,useFactory:_R(e),multi:!0,deps:[r.R0b,r.zs3,bi.HU,Ci,[new r.FiY,vs],[new r.FiY,gs],...t]}]}}const TR=(0,bi.u3)(pR,!0);var CR=n(9105);function ER(e,t,n,r){return(0,CR.m)(n)&&(r=n,n=void 0),r?ER(e,t,n).pipe((0,Ve.U)(e=>(0,Ie.k)(e)?r(...e):r(e))):new ke.y(r=>{SR(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function SR(e,t,n,r,i){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),s=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)SR(e[s],t,n,r,i)}r.add(s)}var kR=n(6561);function AR(e){const{index:t,period:n,subscriber:r}=e;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}class xR{call(e,t){return t.subscribe(new RR(e))}}class RR extends Ce{constructor(e){super(e),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(e){this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(let n=0;n<t&&!this.hasFirst;n++){const t=Ae(this,e[n],void 0,n);this.subscriptions&&this.subscriptions.push(t),this.add(t)}this.observables=null}}notifyNext(e,t,n){if(!this.hasFirst){this.hasFirst=!0;for(let e=0;e<this.subscriptions.length;e++)if(e!==n){let t=this.subscriptions[e];t.unsubscribe(),this.remove(t)}this.subscriptions=null}this.destination.next(t)}}var NR=n(8640);new ke.y(NR.Z);var OR=n(377);function PR(...e){const t=e[e.length-1];return"function"==typeof t&&e.pop(),(0,xe.n)(e,void 0).lift(new DR(t))}class DR{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new LR(e,this.resultSelector))}}class LR extends Te.L{constructor(e,t,n=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,Ie.k)(e)?t.push(new FR(e)):t.push("function"==typeof e[OR.hZ]?new MR(e[OR.hZ]()):new UR(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let n=0;n<t;n++){let t=e[n];t.stillUnsubscribed?this.destination.add(t.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,n=this.destination;for(let s=0;s<t;s++){let t=e[s];if("function"==typeof t.hasValue&&!t.hasValue())return}let r=!1;const i=[];for(let s=0;s<t;s++){let t=e[s],o=t.next();if(t.hasCompleted()&&(r=!0),o.done)return void n.complete();i.push(o.value)}this.resultSelector?this._tryresultSelector(i):n.next(i),r&&n.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}class MR{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class FR{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[OR.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class UR extends je.Ds{constructor(e,t,n){super(e),this.parent=t,this.observable=n,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[OR.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,je.ft)(this.observable,new je.IY(this))}}function VR(e){return t=>t.lift(new jR(e))}class jR{constructor(e){this.notifier=e}call(e,t){const n=new qR(e),r=(0,je.ft)(this.notifier,new je.IY(n));return r&&!n.seenValue?(n.add(r),t.subscribe(n)):n}}class qR extends je.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function BR(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new zR(e,n))}}class zR{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new $R(e,this.observables,this.project))}}class $R extends Ce{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Ae(this,t[i],void 0,i))}notifyNext(e,t,n){this.values[n]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}n(1593),n(8819);const HR=["*"],ZR=["dialog"];function GR(e){return null!=e}function WR(e){return(e||document.body).getBoundingClientRect()}"undefined"!=typeof Element&&!Element.prototype.closest&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest=function(e){let t=this;if(!document.documentElement.contains(t))return null;do{if(t.matches(e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});const KR={animation:!0,transitionTimerDelayMs:5};let YR=(()=>{class e{constructor(){this.animation=KR.animation}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=r.Yz7({factory:function(){return new e},token:e,providedIn:"root"}),e})();const QR=()=>{},{transitionTimerDelayMs:JR}=KR,XR=new Map,eN=(e,t,n,r)=>{let i=r.context||{};const s=XR.get(t);if(s)switch(r.runningTransition){case"continue":return Me.E;case"stop":e.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),XR.delete(t)}const o=n(t,r.animation,i)||QR;if(!r.animation||"none"===window.getComputedStyle(t).transitionProperty)return e.run(()=>o()),(0,ye.of)(void 0).pipe(function(e){return t=>new ke.y(n=>t.subscribe(t=>e.run(()=>n.next(t)),t=>e.run(()=>n.error(t)),()=>e.run(()=>n.complete())))}(e));const a=new _e.xQ,c=new _e.xQ,u=a.pipe(function(...e){return t=>Le(t,(0,ye.of)(...e))}(!0));XR.set(t,{transition$:a,complete:()=>{c.next(),c.complete()},context:i});const l=function(e){const{transitionDelay:t,transitionDuration:n}=window.getComputedStyle(e);return 1e3*(parseFloat(t)+parseFloat(n))}(t);return e.runOutsideAngular(()=>{const n=ER(t,"transitionend").pipe(VR(u),Je(({target:e})=>e===t));(function(...e){if(1===e.length){if(!(0,Ie.k)(e[0]))return e[0];e=e[0]}return(0,xe.n)(e,void 0).lift(new xR)})(function(e=0,t,n){let r=-1;return(0,kR.k)(t)?r=Number(t)<1?1:Number(t):(0,be.K)(t)&&(n=t),(0,be.K)(n)||(n=Xb.P),new ke.y(t=>{const i=(0,kR.k)(e)?e:+e-n.now();return n.schedule(AR,i,{index:0,period:r,subscriber:t})})}(l+JR).pipe(VR(u)),n,c).pipe(VR(u)).subscribe(()=>{XR.delete(t),e.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let tN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),nN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),rN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),iN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),sN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();var oN=(()=>(function(e){e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Escape=27]="Escape",e[e.Space=32]="Space",e[e.PageUp=33]="PageUp",e[e.PageDown=34]="PageDown",e[e.End=35]="End",e[e.Home=36]="Home",e[e.ArrowLeft=37]="ArrowLeft",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowRight=39]="ArrowRight",e[e.ArrowDown=40]="ArrowDown"}(oN||(oN={})),oN))();"undefined"!=typeof navigator&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const aN=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function cN(e){const t=Array.from(e.querySelectorAll(aN)).filter(e=>-1!==e.tabIndex);return[t[0],t[t.length-1]]}new class{getAllStyles(e){return window.getComputedStyle(e)}getStyle(e,t){return this.getAllStyles(e)[t]}isStaticPositioned(e){return"static"===(this.getStyle(e,"position")||"static")}offsetParent(e){let t=e.offsetParent||document.documentElement;for(;t&&t!==document.documentElement&&this.isStaticPositioned(t);)t=t.offsetParent;return t||document.documentElement}position(e,t=!0){let n,r={width:0,height:0,top:0,bottom:0,left:0,right:0};if("fixed"===this.getStyle(e,"position"))n=e.getBoundingClientRect(),n={top:n.top,bottom:n.bottom,left:n.left,right:n.right,height:n.height,width:n.width};else{const t=this.offsetParent(e);n=this.offset(e,!1),t!==document.documentElement&&(r=this.offset(t,!1)),r.top+=t.clientTop,r.left+=t.clientLeft}return n.top-=r.top,n.bottom-=r.top,n.left-=r.left,n.right-=r.left,t&&(n.top=Math.round(n.top),n.bottom=Math.round(n.bottom),n.left=Math.round(n.left),n.right=Math.round(n.right)),n}offset(e,t=!0){const n=e.getBoundingClientRect(),r=window.pageYOffset-document.documentElement.clientTop,i=window.pageXOffset-document.documentElement.clientLeft;let s={height:n.height||e.offsetHeight,width:n.width||e.offsetWidth,top:n.top+r,bottom:n.bottom+r,left:n.left+i,right:n.right+i};return t&&(s.height=Math.round(s.height),s.width=Math.round(s.width),s.top=Math.round(s.top),s.bottom=Math.round(s.bottom),s.left=Math.round(s.left),s.right=Math.round(s.right)),s}positionElements(e,t,n,r){const[i="top",s="center"]=n.split("-"),o=r?this.offset(e,!1):this.position(e,!1),a=this.getAllStyles(t),c=parseFloat(a.marginTop),u=parseFloat(a.marginBottom),l=parseFloat(a.marginLeft),h=parseFloat(a.marginRight);let d=0,f=0;switch(i){case"top":d=o.top-(t.offsetHeight+c+u);break;case"bottom":d=o.top+o.height;break;case"left":f=o.left-(t.offsetWidth+l+h);break;case"right":f=o.left+o.width}switch(s){case"top":d=o.top;break;case"bottom":d=o.top+o.height-t.offsetHeight;break;case"left":f=o.left;break;case"right":f=o.left+o.width-t.offsetWidth;break;case"center":"top"===i||"bottom"===i?f=o.left+o.width/2-t.offsetWidth/2:d=o.top+o.height/2-t.offsetHeight/2}t.style.transform=`translate(${Math.round(f)}px, ${Math.round(d)}px)`;const p=t.getBoundingClientRect(),g=document.documentElement,m=window.innerHeight||g.clientHeight,y=window.innerWidth||g.clientWidth;return p.left>=0&&p.top>=0&&p.right<=y&&p.bottom<=m}},new Date(1882,10,12),new Date(2174,10,25);let uN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O,Yb]]}),e})(),lN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})(),hN=(()=>{class e{constructor(e){this._ngbConfig=e,this.backdrop=!0,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(e){this._animation=e}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(YR))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(YR))},token:e,providedIn:"root"}),e})();class dN{constructor(e,t,n){this.nodes=e,this.viewRef=t,this.componentRef=n}}const fN=()=>{};let pN=(()=>{class e{constructor(e){this._document=e}compensate(){const e=this._getWidth();return this._isPresent(e)?this._adjustBody(e):fN}_adjustBody(e){const t=this._document.body,n=t.style.paddingRight,r=parseFloat(window.getComputedStyle(t)["padding-right"]);return t.style["padding-right"]=`${r+e}px`,()=>t.style["padding-right"]=n}_isPresent(e){const t=this._document.body.getBoundingClientRect();return window.innerWidth-(t.left+t.right)>=e-.1*e}_getWidth(){const e=this._document.createElement("div");e.className="modal-scrollbar-measure";const t=this._document.body;t.appendChild(e);const n=e.getBoundingClientRect().width-e.clientWidth;return t.removeChild(e),n}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(o))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(o))},token:e,providedIn:"root"}),e})(),gN=(()=>{class e{constructor(e,t){this._el=e,this._zone=t}ngOnInit(){this._zone.onStable.asObservable().pipe(He(1)).subscribe(()=>{eN(this._zone,this._el.nativeElement,(e,t)=>{t&&WR(e),e.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return eN(this._zone,this._el.nativeElement,({classList:e})=>e.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.SBq),r.Y36(r.R0b))},e.\u0275cmp=r.Xpm({type:e,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1050"],hostVars:6,hostBindings:function(e,t){2&e&&(r.Tol("modal-backdrop"+(t.backdropClass?" "+t.backdropClass:"")),r.ekj("show",!t.animation)("fade",t.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e})();class mN{close(e){}dismiss(e){}}class yN{constructor(e,t,n,r){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=n,this._beforeDismiss=r,this._closed=new _e.xQ,this._dismissed=new _e.xQ,this._hidden=new _e.xQ,e.instance.dismissEvent.subscribe(e=>{this.dismiss(e)}),this.result=new Promise((e,t)=>{this._resolve=e,this._reject=t}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(VR(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(VR(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();t&&t.then?t.then(t=>{!1!==t&&this._dismiss(e)},()=>{}):!1!==t&&this._dismiss(e)}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,ye.of)(void 0);e.subscribe(()=>{const{nativeElement:e}=this._windowCmptRef.location;e.parentNode.removeChild(e),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:e}=this._backdropCmptRef.location;e.parentNode.removeChild(e),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),PR(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var _N=(()=>(function(e){e[e.BACKDROP_CLICK=0]="BACKDROP_CLICK",e[e.ESC=1]="ESC"}(_N||(_N={})),_N))();let vN=(()=>{class e{constructor(e,t,n){this._document=e,this._elRef=t,this._zone=n,this._closed$=new _e.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new r.vpe,this.shown=new _e.xQ,this.hidden=new _e.xQ}dismiss(e){this.dismissEvent.emit(e)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(He(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:e}=this._elRef,t={animation:this.animation,runningTransition:"stop"},n=PR(eN(this._zone,e,()=>e.classList.remove("show"),t),eN(this._zone,this._dialogEl.nativeElement,()=>{},t));return n.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),n}_show(){const e={animation:this.animation,runningTransition:"continue"};PR(eN(this._zone,this._elRef.nativeElement,(e,t)=>{t&&WR(e),e.classList.add("show")},e),eN(this._zone,this._dialogEl.nativeElement,()=>{},e)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:e}=this._elRef;this._zone.runOutsideAngular(()=>{ER(e,"keydown").pipe(VR(this._closed$),Je(e=>e.which===oN.Escape)).subscribe(e=>{this.keyboard?requestAnimationFrame(()=>{e.defaultPrevented||this._zone.run(()=>this.dismiss(_N.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let t=!1;ER(this._dialogEl.nativeElement,"mousedown").pipe(VR(this._closed$),(0,_t.b)(()=>t=!1),qe(()=>ER(e,"mouseup").pipe(VR(this._closed$),He(1))),Je(({target:t})=>e===t)).subscribe(()=>{t=!0}),ER(e,"click").pipe(VR(this._closed$)).subscribe(({target:n})=>{e===n&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!t&&this._zone.run(()=>this.dismiss(_N.BACKDROP_CLICK))),t=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:e}=this._elRef;if(!e.contains(document.activeElement)){const t=e.querySelector("[ngbAutofocus]"),n=cN(e)[0];(t||n||e).focus()}}_restoreFocus(){const e=this._document.body,t=this._elWithFocus;let n;n=t&&t.focus&&e.contains(t)?t:e,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&eN(this._zone,this._elRef.nativeElement,({classList:e})=>(e.add("modal-static"),()=>e.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(o),r.Y36(r.SBq),r.Y36(r.R0b))},e.\u0275cmp=r.Xpm({type:e,selectors:[["ngb-modal-window"]],viewQuery:function(e,t){if(1&e&&r.Gf(ZR,7),2&e){let e;r.iGM(e=r.CRH())&&(t._dialogEl=e.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(e,t){2&e&&(r.uIk("aria-modal",!0)("aria-labelledby",t.ariaLabelledBy)("aria-describedby",t.ariaDescribedBy),r.Tol("modal d-block"+(t.windowClass?" "+t.windowClass:"")),r.ekj("fade",t.animation))},inputs:{backdrop:"backdrop",keyboard:"keyboard",animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",centered:"centered",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:HR,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(e,t){1&e&&(r.F$t(),r.TgZ(0,"div",0,1),r.TgZ(2,"div",2),r.Hsn(3),r.qZA(),r.qZA()),2&e&&r.Tol("modal-dialog"+(t.size?" modal-"+t.size:"")+(t.centered?" modal-dialog-centered":"")+(t.scrollable?" modal-dialog-scrollable":"")+(t.modalDialogClass?" "+t.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}"],encapsulation:2}),e})(),wN=(()=>{class e{constructor(e,t,n,i,s,o){this._applicationRef=e,this._injector=t,this._document=n,this._scrollBar=i,this._rendererFactory=s,this._ngZone=o,this._activeWindowCmptHasChanged=new _e.xQ,this._ariaHiddenValues=new Map,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new r.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const e=this._windowCmpts[this._windowCmpts.length-1];((e,t,n,r=!1)=>{e.runOutsideAngular(()=>{const e=ER(t,"focusin").pipe(VR(n),(0,Ve.U)(e=>e.target));ER(t,"keydown").pipe(VR(n),Je(e=>e.which===oN.Tab),BR(e)).subscribe(([e,n])=>{const[r,i]=cN(t);(n===r||n===t)&&e.shiftKey&&(i.focus(),e.preventDefault()),n===i&&!e.shiftKey&&(r.focus(),e.preventDefault())}),r&&ER(t,"click").pipe(VR(n),BR(e),(0,Ve.U)(e=>e[1])).subscribe(e=>e.focus())})})(this._ngZone,e.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(e.location.nativeElement)}})}open(e,t,n,r){const i=r.container instanceof HTMLElement?r.container:GR(r.container)?this._document.querySelector(r.container):this._document.body,s=this._rendererFactory.createRenderer(null,null),o=this._scrollBar.compensate(),a=()=>{this._modalRefs.length||(s.removeClass(this._document.body,"modal-open"),this._revertAriaHidden())};if(!i)throw new Error(`The specified modal container "${r.container||"body"}" was not found in the DOM.`);const c=new mN,u=this._getContentRef(e,r.injector||t,n,c,r);let l=!1!==r.backdrop?this._attachBackdrop(e,i):void 0,h=this._attachWindowComponent(e,i,u),d=new yN(h,u,l,r.beforeDismiss);return this._registerModalRef(d),this._registerWindowCmpt(h),d.result.then(o,o),d.result.then(a,a),c.close=e=>{d.close(e)},c.dismiss=e=>{d.dismiss(e)},this._applyWindowOptions(h.instance,r),1===this._modalRefs.length&&s.addClass(this._document.body,"modal-open"),l&&l.instance&&(this._applyBackdropOptions(l.instance,r),l.changeDetectorRef.detectChanges()),h.changeDetectorRef.detectChanges(),d}get activeInstances(){return this._activeInstances}dismissAll(e){this._modalRefs.forEach(t=>t.dismiss(e))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(e,t){let n=e.resolveComponentFactory(gN).create(this._injector);return this._applicationRef.attachView(n.hostView),t.appendChild(n.location.nativeElement),n}_attachWindowComponent(e,t,n){let r=e.resolveComponentFactory(vN).create(this._injector,n.nodes);return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_applyWindowOptions(e,t){this._windowAttributes.forEach(n=>{GR(t[n])&&(e[n]=t[n])})}_applyBackdropOptions(e,t){this._backdropAttributes.forEach(n=>{GR(t[n])&&(e[n]=t[n])})}_getContentRef(e,t,n,i,s){return n?n instanceof r.Rgc?this._createFromTemplateRef(n,i):function(e){return"string"==typeof e}(n)?this._createFromString(n):this._createFromComponent(e,t,n,i,s):new dN([])}_createFromTemplateRef(e,t){const n=e.createEmbeddedView({$implicit:t,close(e){t.close(e)},dismiss(e){t.dismiss(e)}});return this._applicationRef.attachView(n),new dN([n.rootNodes],n)}_createFromString(e){const t=this._document.createTextNode(`${e}`);return new dN([[t]])}_createFromComponent(e,t,n,i,s){const o=e.resolveComponentFactory(n),a=r.zs3.create({providers:[{provide:mN,useValue:i}],parent:t}),c=o.create(a),u=c.location.nativeElement;return s.scrollable&&u.classList.add("component-host-scrollable"),this._applicationRef.attachView(c.hostView),new dN([[u]],c.hostView,c)}_setAriaHidden(e){const t=e.parentElement;t&&e!==this._document.body&&(Array.from(t.children).forEach(t=>{t!==e&&"SCRIPT"!==t.nodeName&&(this._ariaHiddenValues.set(t,t.getAttribute("aria-hidden")),t.setAttribute("aria-hidden","true"))}),this._setAriaHidden(t))}_revertAriaHidden(){this._ariaHiddenValues.forEach((e,t)=>{e?t.setAttribute("aria-hidden",e):t.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(e){const t=()=>{const t=this._modalRefs.indexOf(e);t>-1&&(this._modalRefs.splice(t,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(e),this._activeInstances.emit(this._modalRefs),e.result.then(t,t)}_registerWindowCmpt(e){this._windowCmpts.push(e),this._activeWindowCmptHasChanged.next(),e.onDestroy(()=>{const t=this._windowCmpts.indexOf(e);t>-1&&(this._windowCmpts.splice(t,1),this._activeWindowCmptHasChanged.next())})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.z2F),r.LFG(r.zs3),r.LFG(o),r.LFG(pN),r.LFG(r.FYo),r.LFG(r.R0b))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r.z2F),r.LFG(r.gxx),r.LFG(o),r.LFG(pN),r.LFG(r.FYo),r.LFG(r.R0b))},token:e,providedIn:"root"}),e})(),bN=(()=>{class e{constructor(e,t,n,r){this._moduleCFR=e,this._injector=t,this._modalStack=n,this._config=r}open(e,t={}){const n=Object.assign(Object.assign(Object.assign({},this._config),{animation:this._config.animation}),t);return this._modalStack.open(this._moduleCFR,this._injector,e,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(e){this._modalStack.dismissAll(e)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r._Vd),r.LFG(r.zs3),r.LFG(wN),r.LFG(hN))},e.\u0275prov=r.Yz7({factory:function(){return new e(r.LFG(r._Vd),r.LFG(r.gxx),r.LFG(wN),r.LFG(hN))},token:e,providedIn:"root"}),e})(),IN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[bN]}),e})(),TN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),CN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),EN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),SN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),kN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),AN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),xN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})(),RN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();new r.OlP("live announcer delay",{providedIn:"root",factory:function(){return 100}});let NN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[O]]}),e})();const ON=[tN,nN,rN,iN,sN,uN,lN,IN,TN,CN,EN,SN,kN,AN,xN,RN,NN];let PN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[ON,tN,nN,rN,iN,sN,uN,lN,IN,TN,CN,EN,SN,kN,AN,xN,RN,NN]}),e})(),DN=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e,bootstrap:[bT]}),e.\u0275inj=r.cJS({providers:[$T,MT],imports:[[fe,wT,Yb,Qb,oI.hO.initializeApp(IT),Ri(()=>Ni(IT)),YT(()=>PT()),Es(()=>ks()),fA(()=>pA()),xw(()=>Ow()),AA(()=>xA()),UA(()=>VA()),jx(()=>qx()),Yx(()=>Qx()),IR(()=>TR()),PN]]}),e})();(0,r.G48)(),he().bootstrapModule(DN).catch(e=>console.error(e))},4762:function(e,t,n){"use strict";function r(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function i(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){e.done?i(e.value):function(e){return e instanceof n?e:new n(function(t){t(e)})}(e.value).then(o,a)}c((r=r.apply(e,t||[])).next())})}n.d(t,{_T:function(){return r},mG:function(){return i}})},3394:function(e,t,n){"use strict";n.d(t,{Z:function(){return h}});var r=n(3854),i=n(3910),s=n(8026),o=n(5422);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return!r.isInitialized()&&"EXPLICIT"===(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)&&r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const c=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),u=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw c.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw c.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),l=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){l.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&l.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=u;(0,s.registerVersion)("@firebase/app-compat","0.1.12",undefined)},8026:function(e,t,n){"use strict";n.r(t),n.d(t,{FirebaseError:function(){return o.ZR},SDK_VERSION:function(){return T},_DEFAULT_ENTRY_NAME:function(){return h},_addComponent:function(){return g},_addOrOverwriteComponent:function(){return m},_apps:function(){return f},_clearComponents:function(){return w},_components:function(){return p},_getProvider:function(){return _},_registerComponent:function(){return y},_removeServiceInstance:function(){return v},deleteApp:function(){return k},getApp:function(){return E},getApps:function(){return S},initializeApp:function(){return C},onLog:function(){return R},registerVersion:function(){return x},setLogLevel:function(){return N}});var r=n(8239),i=n(3910),s=n(5422),o=n(3854);class a{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const c="@firebase/app",u="0.7.11",l=new s.Yd("@firebase/app"),h="[DEFAULT]",d={[c]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},f=new Map,p=new Map;function g(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function m(e,t){e.container.addOrOverwriteComponent(t)}function y(e){const t=e.name;if(p.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of f.values())g(n,e);return!0}function _(e,t){return e.container.getProvider(t)}function v(e,t,n=h){_(e,t).clearInstance(n)}function w(){p.clear()}const b=new o.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class I{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw b.create("app-deleted",{appName:this._name})}}const T="9.6.1";function C(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:h,automaticDataCollectionEnabled:!1},t),r=n.name;if("string"!=typeof r||!r)throw b.create("bad-app-name",{appName:String(r)});const s=f.get(r);if(s){if((0,o.vZ)(e,s.options)&&(0,o.vZ)(n,s.config))return s;throw b.create("duplicate-app",{appName:r})}const a=new i.H0(r);for(const i of p.values())a.addComponent(i);const c=new I(e,n,a);return f.set(r,c),c}function E(e=h){const t=f.get(e);if(!t)throw b.create("no-app",{appName:e});return t}function S(){return Array.from(f.values())}function k(e){return A.apply(this,arguments)}function A(){return(A=(0,r.Z)(function*(e){const t=e.name;f.has(t)&&(f.delete(t),yield Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)})).apply(this,arguments)}function x(e,t,n){var r;let s=null!==(r=d[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}y(new i.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function R(e,t){if(null!==e&&"function"!=typeof e)throw b.create("invalid-log-argument");(0,s.Am)(e,t)}function N(e){(0,s.Ub)(e)}y(new i.wA("platform-logger",e=>new a(e),"PRIVATE")),x(c,u,""),x(c,u,"esm2017"),x("fire-js","")},3910:function(e,t,n){"use strict";n.d(t,{wA:function(){return s},H0:function(){return c}});var r=n(8239),i=n(3854);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const o="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new i.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:o})}catch(t){}for(const[e,t]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(n){}}}}clearInstance(e=o){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){var e=this;return(0,r.Z)(function*(){const t=Array.from(e.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(e=o){return this.instances.has(e)}getOptions(e=o){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===o?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e=o){return this.component?this.component.multipleInstances?e:o:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class c{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},3328:function(e,t,n){"use strict";var r=n(8239),i=n(8026),s=n(3910),o=n(3854),a=n(6676);const c="@firebase/installations",u="w:0.5.4",l="FIS_v2",h=new o.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function d(e){return e instanceof o.ZR&&e.code.includes("request-failed")}function f({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function p(e){return{token:e.token,requestStatus:2,expiresIn:b(e.expiresIn),creationTime:Date.now()}}function g(e,t){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(function*(e,t){const n=(yield t.json()).error;return h.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})})).apply(this,arguments)}function y({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function _(e,{refreshToken:t}){const n=y(e);return n.append("Authorization",function(e){return`${l} ${e}`}(t)),n}function v(e){return w.apply(this,arguments)}function w(){return(w=(0,r.Z)(function*(e){const t=yield e();return t.status>=500&&t.status<600?e():t})).apply(this,arguments)}function b(e){return Number(e.replace("s","000"))}function I(e,t){return T.apply(this,arguments)}function T(){return(T=(0,r.Z)(function*(e,{fid:t}){const n=f(e),r={method:"POST",headers:y(e),body:JSON.stringify({fid:t,authVersion:l,appId:e.appId,sdkVersion:u})},i=yield v(()=>fetch(n,r));if(i.ok){const e=yield i.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:p(e.authToken)}}throw yield g("Create Installation",i)})).apply(this,arguments)}function C(e){return new Promise(t=>{setTimeout(t,e)})}const E=/^[cdef][\w-]{21}$/;function S(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return function(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22)}(e);return E.test(t)?t:""}catch(e){return""}}function k(e){return`${e.appName}!${e.appId}`}const A=new Map;function x(e,t){const n=k(e);R(n,t),function(e,t){const n=(!N&&"BroadcastChannel"in self&&(N=new BroadcastChannel("[Firebase] FID Change"),N.onmessage=e=>{R(e.data.key,e.data.fid)}),N);n&&n.postMessage({key:e,fid:t}),0===A.size&&N&&(N.close(),N=null)}(n,t)}function R(e,t){const n=A.get(e);if(n)for(const r of n)r(t)}let N=null;const O="firebase-installations-store";let P=null;function D(){return P||(P=(0,a.openDb)("firebase-installations-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(O)}})),P}function L(e,t){return M.apply(this,arguments)}function M(){return(M=(0,r.Z)(function*(e,t){const n=k(e),r=(yield D()).transaction(O,"readwrite"),i=r.objectStore(O),s=yield i.get(n);return yield i.put(t,n),yield r.complete,(!s||s.fid!==t.fid)&&x(e,t.fid),t})).apply(this,arguments)}function F(e){return U.apply(this,arguments)}function U(){return(U=(0,r.Z)(function*(e){const t=k(e),n=(yield D()).transaction(O,"readwrite");yield n.objectStore(O).delete(t),yield n.complete})).apply(this,arguments)}function V(e,t){return j.apply(this,arguments)}function j(){return(j=(0,r.Z)(function*(e,t){const n=k(e),r=(yield D()).transaction(O,"readwrite"),i=r.objectStore(O),s=yield i.get(n),o=t(s);return void 0===o?yield i.delete(n):yield i.put(o,n),yield r.complete,o&&(!s||s.fid!==o.fid)&&x(e,o.fid),o})).apply(this,arguments)}function q(e){return B.apply(this,arguments)}function B(){return(B=(0,r.Z)(function*(e){let t;const n=yield V(e,n=>{const r=z(n),i=$(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:yield t}:{installationEntry:n,registrationPromise:t}})).apply(this,arguments)}function z(e){return K(e||{fid:S(),registrationStatus:0})}function $(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(h.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:function(e,t){return H.apply(this,arguments)}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Z(e)}:{installationEntry:t}}function H(){return(H=(0,r.Z)(function*(e,t){try{return L(e,yield I(e,t))}catch(n){throw d(n)&&409===n.customData.serverCode?yield F(e):yield L(e,{fid:t.fid,registrationStatus:0}),n}})).apply(this,arguments)}function Z(e){return G.apply(this,arguments)}function G(){return(G=(0,r.Z)(function*(e){let t=yield W(e);for(;1===t.registrationStatus;)yield C(100),t=yield W(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=yield q(e);return n||t}return t})).apply(this,arguments)}function W(e){return V(e,e=>{if(!e)throw h.create("installation-not-found");return K(e)})}function K(e){return function(e){return 1===e.registrationStatus&&e.registrationTime+1e4<Date.now()}(e)?{fid:e.fid,registrationStatus:0}:e}function Y(e,t){return Q.apply(this,arguments)}function Q(){return(Q=(0,r.Z)(function*({appConfig:e,platformLoggerProvider:t},n){const r=J(e,n),i=_(e,n),s=t.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:u}})},a=yield v(()=>fetch(r,o));if(a.ok)return p(yield a.json());throw yield g("Generate Auth Token",a)})).apply(this,arguments)}function J(e,{fid:t}){return`${f(e)}/${t}/authTokens:generate`}function X(e){return ee.apply(this,arguments)}function ee(){return(ee=(0,r.Z)(function*(e,t=!1){let n;const r=yield V(e.appConfig,r=>{if(!oe(r))throw h.create("not-registered");const i=r.authToken;if(!t&&ae(i))return r;if(1===i.requestStatus)return n=te(e,t),r;{if(!navigator.onLine)throw h.create("app-offline");const t=ce(r);return n=ie(e,t),t}});return n?yield n:r.authToken})).apply(this,arguments)}function te(e,t){return ne.apply(this,arguments)}function ne(){return(ne=(0,r.Z)(function*(e,t){let n=yield re(e.appConfig);for(;1===n.authToken.requestStatus;)yield C(100),n=yield re(e.appConfig);const r=n.authToken;return 0===r.requestStatus?X(e,t):r})).apply(this,arguments)}function re(e){return V(e,e=>{if(!oe(e))throw h.create("not-registered");return function(e){return 1===e.requestStatus&&e.requestTime+1e4<Date.now()}(e.authToken)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function ie(e,t){return se.apply(this,arguments)}function se(){return(se=(0,r.Z)(function*(e,t){try{const n=yield Y(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return yield L(e.appConfig,r),n}catch(n){if(!d(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield L(e.appConfig,n)}else yield F(e.appConfig);throw n}})).apply(this,arguments)}function oe(e){return void 0!==e&&2===e.registrationStatus}function ae(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(e)}function ce(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function ue(){return(ue=(0,r.Z)(function*(e){const t=e,{installationEntry:n,registrationPromise:r}=yield q(t.appConfig);return r?r.catch(console.error):X(t).catch(console.error),n.fid})).apply(this,arguments)}function le(){return(le=(0,r.Z)(function*(e,t=!1){const n=e;return yield he(n.appConfig),(yield X(n,t)).token})).apply(this,arguments)}function he(e){return de.apply(this,arguments)}function de(){return(de=(0,r.Z)(function*(e){const{registrationPromise:t}=yield q(e);t&&(yield t)})).apply(this,arguments)}function fe(e){return h.create("missing-app-config-values",{valueName:e})}const pe="installations";(0,i._registerComponent)(new s.wA(pe,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw fe("App Configuration");if(!e.name)throw fe("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw fe(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,i._getProvider)(t,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,i._registerComponent)(new s.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,i._getProvider)(t,pe).getImmediate();return{getId:()=>function(e){return ue.apply(this,arguments)}(n),getToken:e=>function(e){return le.apply(this,arguments)}(n,e)}},"PRIVATE")),(0,i.registerVersion)(c,"0.5.4"),(0,i.registerVersion)(c,"0.5.4","esm2017")},5422:function(e,t,n){"use strict";n.d(t,{in:function(){return i},Yd:function(){return u},Ub:function(){return l},Am:function(){return h}});const r=[];var i=(()=>{return(e=i||(i={}))[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT",i;var e})();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},8239:function(e,t,n){"use strict";function r(e,t,n,r,i,s,o){try{var a=e[s](o),c=a.value}catch(u){return void n(u)}a.done?t(c):Promise.resolve(c).then(r,i)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(i,s){var o=e.apply(t,n);function a(e){r(o,i,s,a,c,"next",e)}function c(e){r(o,i,s,a,c,"throw",e)}a(void 0)})}}n.d(t,{Z:function(){return i}})}},function(e){e(e.s=2340)}]);